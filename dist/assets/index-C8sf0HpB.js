(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function q1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dS={exports:{}},Nh={},hS={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nu=Symbol.for("react.element"),W1=Symbol.for("react.portal"),G1=Symbol.for("react.fragment"),H1=Symbol.for("react.strict_mode"),K1=Symbol.for("react.profiler"),Q1=Symbol.for("react.provider"),Y1=Symbol.for("react.context"),X1=Symbol.for("react.forward_ref"),J1=Symbol.for("react.suspense"),Z1=Symbol.for("react.memo"),eb=Symbol.for("react.lazy"),Nw=Symbol.iterator;function tb(n){return n===null||typeof n!="object"?null:(n=Nw&&n[Nw]||n["@@iterator"],typeof n=="function"?n:null)}var fS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pS=Object.assign,mS={};function ha(n,e,t){this.props=n,this.context=e,this.refs=mS,this.updater=t||fS}ha.prototype.isReactComponent={};ha.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ha.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function gS(){}gS.prototype=ha.prototype;function Hg(n,e,t){this.props=n,this.context=e,this.refs=mS,this.updater=t||fS}var Kg=Hg.prototype=new gS;Kg.constructor=Hg;pS(Kg,ha.prototype);Kg.isPureReactComponent=!0;var Dw=Array.isArray,yS=Object.prototype.hasOwnProperty,Qg={current:null},_S={key:!0,ref:!0,__self:!0,__source:!0};function vS(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)yS.call(e,r)&&!_S.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Nu,type:n,key:s,ref:o,props:i,_owner:Qg.current}}function nb(n,e){return{$$typeof:Nu,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Yg(n){return typeof n=="object"&&n!==null&&n.$$typeof===Nu}function rb(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Vw=/\/+/g;function lp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?rb(""+n.key):e.toString(36)}function td(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Nu:case W1:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+lp(o,0):r,Dw(i)?(t="",n!=null&&(t=n.replace(Vw,"$&/")+"/"),td(i,e,t,"",function(c){return c})):i!=null&&(Yg(i)&&(i=nb(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Vw,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Dw(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+lp(s,a);o+=td(s,e,t,l,i)}else if(l=tb(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+lp(s,a++),o+=td(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xc(n,e,t){if(n==null)return n;var r=[],i=0;return td(n,r,"","",function(s){return e.call(t,s,i++)}),r}function ib(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ut={current:null},nd={transition:null},sb={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:nd,ReactCurrentOwner:Qg};function wS(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:xc,forEach:function(n,e,t){xc(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return xc(n,function(){e++}),e},toArray:function(n){return xc(n,function(e){return e})||[]},only:function(n){if(!Yg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};oe.Component=ha;oe.Fragment=G1;oe.Profiler=K1;oe.PureComponent=Hg;oe.StrictMode=H1;oe.Suspense=J1;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sb;oe.act=wS;oe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=pS({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Qg.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)yS.call(e,l)&&!_S.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Nu,type:n.type,key:i,ref:s,props:r,_owner:o}};oe.createContext=function(n){return n={$$typeof:Y1,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Q1,_context:n},n.Consumer=n};oe.createElement=vS;oe.createFactory=function(n){var e=vS.bind(null,n);return e.type=n,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(n){return{$$typeof:X1,render:n}};oe.isValidElement=Yg;oe.lazy=function(n){return{$$typeof:eb,_payload:{_status:-1,_result:n},_init:ib}};oe.memo=function(n,e){return{$$typeof:Z1,type:n,compare:e===void 0?null:e}};oe.startTransition=function(n){var e=nd.transition;nd.transition={};try{n()}finally{nd.transition=e}};oe.unstable_act=wS;oe.useCallback=function(n,e){return Ut.current.useCallback(n,e)};oe.useContext=function(n){return Ut.current.useContext(n)};oe.useDebugValue=function(){};oe.useDeferredValue=function(n){return Ut.current.useDeferredValue(n)};oe.useEffect=function(n,e){return Ut.current.useEffect(n,e)};oe.useId=function(){return Ut.current.useId()};oe.useImperativeHandle=function(n,e,t){return Ut.current.useImperativeHandle(n,e,t)};oe.useInsertionEffect=function(n,e){return Ut.current.useInsertionEffect(n,e)};oe.useLayoutEffect=function(n,e){return Ut.current.useLayoutEffect(n,e)};oe.useMemo=function(n,e){return Ut.current.useMemo(n,e)};oe.useReducer=function(n,e,t){return Ut.current.useReducer(n,e,t)};oe.useRef=function(n){return Ut.current.useRef(n)};oe.useState=function(n){return Ut.current.useState(n)};oe.useSyncExternalStore=function(n,e,t){return Ut.current.useSyncExternalStore(n,e,t)};oe.useTransition=function(){return Ut.current.useTransition()};oe.version="18.3.1";hS.exports=oe;var V=hS.exports;const Xe=q1(V);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob=V,ab=Symbol.for("react.element"),lb=Symbol.for("react.fragment"),ub=Object.prototype.hasOwnProperty,cb=ob.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,db={key:!0,ref:!0,__self:!0,__source:!0};function ES(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ub.call(e,r)&&!db.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ab,type:n,key:s,ref:o,props:i,_owner:cb.current}}Nh.Fragment=lb;Nh.jsx=ES;Nh.jsxs=ES;dS.exports=Nh;var m=dS.exports,um={},IS={exports:{}},cn={},TS={exports:{}},SS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(q,Q){var Z=q.length;q.push(Q);e:for(;0<Z;){var Se=Z-1>>>1,me=q[Se];if(0<i(me,Q))q[Se]=Q,q[Z]=me,Z=Se;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Q=q[0],Z=q.pop();if(Z!==Q){q[0]=Z;e:for(var Se=0,me=q.length,We=me>>>1;Se<We;){var sr=2*(Se+1)-1,or=q[sr],ar=sr+1,lr=q[ar];if(0>i(or,Z))ar<me&&0>i(lr,or)?(q[Se]=lr,q[ar]=Z,Se=ar):(q[Se]=or,q[sr]=Z,Se=sr);else if(ar<me&&0>i(lr,Z))q[Se]=lr,q[ar]=Z,Se=ar;else break e}}return Q}function i(q,Q){var Z=q.sortIndex-Q.sortIndex;return Z!==0?Z:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,y=!1,v=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var Q=t(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=q)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function N(q){if(T=!1,E(q),!v)if(t(l)!==null)v=!0,ne(D);else{var Q=t(c);Q!==null&&ue(N,Q.startTime-q)}}function D(q,Q){v=!1,T&&(T=!1,_(I),I=-1),y=!0;var Z=p;try{for(E(Q),h=t(l);h!==null&&(!(h.expirationTime>Q)||q&&!b());){var Se=h.callback;if(typeof Se=="function"){h.callback=null,p=h.priorityLevel;var me=Se(h.expirationTime<=Q);Q=n.unstable_now(),typeof me=="function"?h.callback=me:h===t(l)&&r(l),E(Q)}else r(l);h=t(l)}if(h!==null)var We=!0;else{var sr=t(c);sr!==null&&ue(N,sr.startTime-Q),We=!1}return We}finally{h=null,p=Z,y=!1}}var F=!1,x=null,I=-1,P=5,A=-1;function b(){return!(n.unstable_now()-A<P)}function k(){if(x!==null){var q=n.unstable_now();A=q;var Q=!0;try{Q=x(!0,q)}finally{Q?R():(F=!1,x=null)}}else F=!1}var R;if(typeof w=="function")R=function(){w(k)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Te=de.port2;de.port1.onmessage=k,R=function(){Te.postMessage(null)}}else R=function(){C(k,0)};function ne(q){x=q,F||(F=!0,R())}function ue(q,Q){I=C(function(){q(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){v||y||(v=!0,ne(D))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(q){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var Z=p;p=Q;try{return q()}finally{p=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=p;p=q;try{return Q()}finally{p=Z}},n.unstable_scheduleCallback=function(q,Q,Z){var Se=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Se+Z:Se):Z=Se,q){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Z+me,q={id:d++,callback:Q,priorityLevel:q,startTime:Z,expirationTime:me,sortIndex:-1},Z>Se?(q.sortIndex=Z,e(c,q),t(l)===null&&q===t(c)&&(T?(_(I),I=-1):T=!0,ue(N,Z-Se))):(q.sortIndex=me,e(l,q),v||y||(v=!0,ne(D))),q},n.unstable_shouldYield=b,n.unstable_wrapCallback=function(q){var Q=p;return function(){var Z=p;p=Q;try{return q.apply(this,arguments)}finally{p=Z}}}})(SS);TS.exports=SS;var hb=TS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb=V,ln=hb;function $(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PS=new Set,ql={};function Ls(n,e){Lo(n,e),Lo(n+"Capture",e)}function Lo(n,e){for(ql[n]=e,n=0;n<e.length;n++)PS.add(e[n])}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cm=Object.prototype.hasOwnProperty,pb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ow={},Lw={};function mb(n){return cm.call(Lw,n)?!0:cm.call(Ow,n)?!1:pb.test(n)?Lw[n]=!0:(Ow[n]=!0,!1)}function gb(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function yb(n,e,t,r){if(e===null||typeof e>"u"||gb(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){yt[n]=new Bt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];yt[e]=new Bt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){yt[n]=new Bt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){yt[n]=new Bt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){yt[n]=new Bt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){yt[n]=new Bt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){yt[n]=new Bt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){yt[n]=new Bt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){yt[n]=new Bt(n,5,!1,n.toLowerCase(),null,!1,!1)});var Xg=/[\-:]([a-z])/g;function Jg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Xg,Jg);yt[e]=new Bt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Xg,Jg);yt[e]=new Bt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Xg,Jg);yt[e]=new Bt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){yt[n]=new Bt(n,1,!1,n.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){yt[n]=new Bt(n,1,!1,n.toLowerCase(),null,!0,!0)});function Zg(n,e,t,r){var i=yt.hasOwnProperty(e)?yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yb(e,t,i,r)&&(t=null),r||i===null?mb(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Nr=fb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rc=Symbol.for("react.element"),uo=Symbol.for("react.portal"),co=Symbol.for("react.fragment"),ey=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),AS=Symbol.for("react.provider"),xS=Symbol.for("react.context"),ty=Symbol.for("react.forward_ref"),hm=Symbol.for("react.suspense"),fm=Symbol.for("react.suspense_list"),ny=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),RS=Symbol.for("react.offscreen"),Mw=Symbol.iterator;function $a(n){return n===null||typeof n!="object"?null:(n=Mw&&n[Mw]||n["@@iterator"],typeof n=="function"?n:null)}var Me=Object.assign,up;function al(n){if(up===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);up=e&&e[1]||""}return`
`+up+n}var cp=!1;function dp(n,e){if(!n||cp)return"";cp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{cp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?al(n):""}function _b(n){switch(n.tag){case 5:return al(n.type);case 16:return al("Lazy");case 13:return al("Suspense");case 19:return al("SuspenseList");case 0:case 2:case 15:return n=dp(n.type,!1),n;case 11:return n=dp(n.type.render,!1),n;case 1:return n=dp(n.type,!0),n;default:return""}}function pm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case co:return"Fragment";case uo:return"Portal";case dm:return"Profiler";case ey:return"StrictMode";case hm:return"Suspense";case fm:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case xS:return(n.displayName||"Context")+".Consumer";case AS:return(n._context.displayName||"Context")+".Provider";case ty:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ny:return e=n.displayName||null,e!==null?e:pm(n.type)||"Memo";case Qr:e=n._payload,n=n._init;try{return pm(n(e))}catch{}}return null}function vb(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pm(e);case 8:return e===ey?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vi(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function CS(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wb(n){var e=CS(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Cc(n){n._valueTracker||(n._valueTracker=wb(n))}function bS(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=CS(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function kd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function mm(n,e){var t=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Fw(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=vi(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kS(n,e){e=e.checked,e!=null&&Zg(n,"checked",e,!1)}function gm(n,e){kS(n,e);var t=vi(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ym(n,e.type,t):e.hasOwnProperty("defaultValue")&&ym(n,e.type,vi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function jw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function ym(n,e,t){(e!=="number"||kd(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ll=Array.isArray;function To(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+vi(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function _m(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Uw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error($(92));if(ll(t)){if(1<t.length)throw Error($(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:vi(t)}}function NS(n,e){var t=vi(e.value),r=vi(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Bw(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function DS(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vm(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?DS(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var bc,VS=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(bc=bc||document.createElement("div"),bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bc.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Wl(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var vl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Eb=["Webkit","ms","Moz","O"];Object.keys(vl).forEach(function(n){Eb.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),vl[e]=vl[n]})});function OS(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||vl.hasOwnProperty(n)&&vl[n]?(""+e).trim():e+"px"}function LS(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=OS(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Ib=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wm(n,e){if(e){if(Ib[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Em(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Im=null;function ry(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Tm=null,So=null,Po=null;function zw(n){if(n=Ou(n)){if(typeof Tm!="function")throw Error($(280));var e=n.stateNode;e&&(e=Mh(e),Tm(n.stateNode,n.type,e))}}function MS(n){So?Po?Po.push(n):Po=[n]:So=n}function FS(){if(So){var n=So,e=Po;if(Po=So=null,zw(n),e)for(n=0;n<e.length;n++)zw(e[n])}}function jS(n,e){return n(e)}function US(){}var hp=!1;function BS(n,e,t){if(hp)return n(e,t);hp=!0;try{return jS(n,e,t)}finally{hp=!1,(So!==null||Po!==null)&&(US(),FS())}}function Gl(n,e){var t=n.stateNode;if(t===null)return null;var r=Mh(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error($(231,e,typeof t));return t}var Sm=!1;if(Ir)try{var qa={};Object.defineProperty(qa,"passive",{get:function(){Sm=!0}}),window.addEventListener("test",qa,qa),window.removeEventListener("test",qa,qa)}catch{Sm=!1}function Tb(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var wl=!1,Nd=null,Dd=!1,Pm=null,Sb={onError:function(n){wl=!0,Nd=n}};function Pb(n,e,t,r,i,s,o,a,l){wl=!1,Nd=null,Tb.apply(Sb,arguments)}function Ab(n,e,t,r,i,s,o,a,l){if(Pb.apply(this,arguments),wl){if(wl){var c=Nd;wl=!1,Nd=null}else throw Error($(198));Dd||(Dd=!0,Pm=c)}}function Ms(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function zS(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function $w(n){if(Ms(n)!==n)throw Error($(188))}function xb(n){var e=n.alternate;if(!e){if(e=Ms(n),e===null)throw Error($(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return $w(i),n;if(s===r)return $w(i),e;s=s.sibling}throw Error($(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(t.alternate!==r)throw Error($(190))}if(t.tag!==3)throw Error($(188));return t.stateNode.current===t?n:e}function $S(n){return n=xb(n),n!==null?qS(n):null}function qS(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=qS(n);if(e!==null)return e;n=n.sibling}return null}var WS=ln.unstable_scheduleCallback,qw=ln.unstable_cancelCallback,Rb=ln.unstable_shouldYield,Cb=ln.unstable_requestPaint,Ge=ln.unstable_now,bb=ln.unstable_getCurrentPriorityLevel,iy=ln.unstable_ImmediatePriority,GS=ln.unstable_UserBlockingPriority,Vd=ln.unstable_NormalPriority,kb=ln.unstable_LowPriority,HS=ln.unstable_IdlePriority,Dh=null,Kn=null;function Nb(n){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(Dh,n,void 0,(n.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:Ob,Db=Math.log,Vb=Math.LN2;function Ob(n){return n>>>=0,n===0?32:31-(Db(n)/Vb|0)|0}var kc=64,Nc=4194304;function ul(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Od(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=ul(a):(s&=o,s!==0&&(r=ul(s)))}else o=t&~i,o!==0?r=ul(o):s!==0&&(r=ul(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Rn(e),i=1<<t,r|=n[t],e&=~i;return r}function Lb(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mb(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Rn(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=Lb(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Am(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function KS(){var n=kc;return kc<<=1,!(kc&4194240)&&(kc=64),n}function fp(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Du(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Rn(e),n[e]=t}function Fb(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Rn(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function sy(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Rn(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var ye=0;function QS(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var YS,oy,XS,JS,ZS,xm=!1,Dc=[],oi=null,ai=null,li=null,Hl=new Map,Kl=new Map,Xr=[],jb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ww(n,e){switch(n){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":Hl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(e.pointerId)}}function Wa(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ou(e),e!==null&&oy(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Ub(n,e,t,r,i){switch(e){case"focusin":return oi=Wa(oi,n,e,t,r,i),!0;case"dragenter":return ai=Wa(ai,n,e,t,r,i),!0;case"mouseover":return li=Wa(li,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Hl.set(s,Wa(Hl.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Kl.set(s,Wa(Kl.get(s)||null,n,e,t,r,i)),!0}return!1}function e0(n){var e=os(n.target);if(e!==null){var t=Ms(e);if(t!==null){if(e=t.tag,e===13){if(e=zS(t),e!==null){n.blockedOn=e,ZS(n.priority,function(){XS(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rd(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Rm(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Im=r,t.target.dispatchEvent(r),Im=null}else return e=Ou(t),e!==null&&oy(e),n.blockedOn=t,!1;e.shift()}return!0}function Gw(n,e,t){rd(n)&&t.delete(e)}function Bb(){xm=!1,oi!==null&&rd(oi)&&(oi=null),ai!==null&&rd(ai)&&(ai=null),li!==null&&rd(li)&&(li=null),Hl.forEach(Gw),Kl.forEach(Gw)}function Ga(n,e){n.blockedOn===e&&(n.blockedOn=null,xm||(xm=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,Bb)))}function Ql(n){function e(i){return Ga(i,n)}if(0<Dc.length){Ga(Dc[0],n);for(var t=1;t<Dc.length;t++){var r=Dc[t];r.blockedOn===n&&(r.blockedOn=null)}}for(oi!==null&&Ga(oi,n),ai!==null&&Ga(ai,n),li!==null&&Ga(li,n),Hl.forEach(e),Kl.forEach(e),t=0;t<Xr.length;t++)r=Xr[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Xr.length&&(t=Xr[0],t.blockedOn===null);)e0(t),t.blockedOn===null&&Xr.shift()}var Ao=Nr.ReactCurrentBatchConfig,Ld=!0;function zb(n,e,t,r){var i=ye,s=Ao.transition;Ao.transition=null;try{ye=1,ay(n,e,t,r)}finally{ye=i,Ao.transition=s}}function $b(n,e,t,r){var i=ye,s=Ao.transition;Ao.transition=null;try{ye=4,ay(n,e,t,r)}finally{ye=i,Ao.transition=s}}function ay(n,e,t,r){if(Ld){var i=Rm(n,e,t,r);if(i===null)Tp(n,e,r,Md,t),Ww(n,r);else if(Ub(i,n,e,t,r))r.stopPropagation();else if(Ww(n,r),e&4&&-1<jb.indexOf(n)){for(;i!==null;){var s=Ou(i);if(s!==null&&YS(s),s=Rm(n,e,t,r),s===null&&Tp(n,e,r,Md,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tp(n,e,r,null,t)}}var Md=null;function Rm(n,e,t,r){if(Md=null,n=ry(r),n=os(n),n!==null)if(e=Ms(n),e===null)n=null;else if(t=e.tag,t===13){if(n=zS(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Md=n,null}function t0(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bb()){case iy:return 1;case GS:return 4;case Vd:case kb:return 16;case HS:return 536870912;default:return 16}default:return 16}}var ei=null,ly=null,id=null;function n0(){if(id)return id;var n,e=ly,t=e.length,r,i="value"in ei?ei.value:ei.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return id=i.slice(n,1<r?1-r:void 0)}function sd(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Vc(){return!0}function Hw(){return!1}function dn(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Vc:Hw,this.isPropagationStopped=Hw,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Vc)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Vc)},persist:function(){},isPersistent:Vc}),e}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uy=dn(fa),Vu=Me({},fa,{view:0,detail:0}),qb=dn(Vu),pp,mp,Ha,Vh=Me({},Vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cy,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ha&&(Ha&&n.type==="mousemove"?(pp=n.screenX-Ha.screenX,mp=n.screenY-Ha.screenY):mp=pp=0,Ha=n),pp)},movementY:function(n){return"movementY"in n?n.movementY:mp}}),Kw=dn(Vh),Wb=Me({},Vh,{dataTransfer:0}),Gb=dn(Wb),Hb=Me({},Vu,{relatedTarget:0}),gp=dn(Hb),Kb=Me({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),Qb=dn(Kb),Yb=Me({},fa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Xb=dn(Yb),Jb=Me({},fa,{data:0}),Qw=dn(Jb),Zb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=tk[n])?!!e[n]:!1}function cy(){return nk}var rk=Me({},Vu,{key:function(n){if(n.key){var e=Zb[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=sd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ek[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cy,charCode:function(n){return n.type==="keypress"?sd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?sd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ik=dn(rk),sk=Me({},Vh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yw=dn(sk),ok=Me({},Vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cy}),ak=dn(ok),lk=Me({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),uk=dn(lk),ck=Me({},Vh,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dk=dn(ck),hk=[9,13,27,32],dy=Ir&&"CompositionEvent"in window,El=null;Ir&&"documentMode"in document&&(El=document.documentMode);var fk=Ir&&"TextEvent"in window&&!El,r0=Ir&&(!dy||El&&8<El&&11>=El),Xw=" ",Jw=!1;function i0(n,e){switch(n){case"keyup":return hk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s0(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ho=!1;function pk(n,e){switch(n){case"compositionend":return s0(e);case"keypress":return e.which!==32?null:(Jw=!0,Xw);case"textInput":return n=e.data,n===Xw&&Jw?null:n;default:return null}}function mk(n,e){if(ho)return n==="compositionend"||!dy&&i0(n,e)?(n=n0(),id=ly=ei=null,ho=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return r0&&e.locale!=="ko"?null:e.data;default:return null}}var gk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!gk[n.type]:e==="textarea"}function o0(n,e,t,r){MS(r),e=Fd(e,"onChange"),0<e.length&&(t=new uy("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Il=null,Yl=null;function yk(n){y0(n,0)}function Oh(n){var e=mo(n);if(bS(e))return n}function _k(n,e){if(n==="change")return e}var a0=!1;if(Ir){var yp;if(Ir){var _p="oninput"in document;if(!_p){var eE=document.createElement("div");eE.setAttribute("oninput","return;"),_p=typeof eE.oninput=="function"}yp=_p}else yp=!1;a0=yp&&(!document.documentMode||9<document.documentMode)}function tE(){Il&&(Il.detachEvent("onpropertychange",l0),Yl=Il=null)}function l0(n){if(n.propertyName==="value"&&Oh(Yl)){var e=[];o0(e,Yl,n,ry(n)),BS(yk,e)}}function vk(n,e,t){n==="focusin"?(tE(),Il=e,Yl=t,Il.attachEvent("onpropertychange",l0)):n==="focusout"&&tE()}function wk(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Oh(Yl)}function Ek(n,e){if(n==="click")return Oh(e)}function Ik(n,e){if(n==="input"||n==="change")return Oh(e)}function Tk(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Dn=typeof Object.is=="function"?Object.is:Tk;function Xl(n,e){if(Dn(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!cm.call(e,i)||!Dn(n[i],e[i]))return!1}return!0}function nE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rE(n,e){var t=nE(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=nE(t)}}function u0(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?u0(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function c0(){for(var n=window,e=kd();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=kd(n.document)}return e}function hy(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Sk(n){var e=c0(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&u0(t.ownerDocument.documentElement,t)){if(r!==null&&hy(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=rE(t,s);var o=rE(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Pk=Ir&&"documentMode"in document&&11>=document.documentMode,fo=null,Cm=null,Tl=null,bm=!1;function iE(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;bm||fo==null||fo!==kd(r)||(r=fo,"selectionStart"in r&&hy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tl&&Xl(Tl,r)||(Tl=r,r=Fd(Cm,"onSelect"),0<r.length&&(e=new uy("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=fo)))}function Oc(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var po={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},vp={},d0={};Ir&&(d0=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function Lh(n){if(vp[n])return vp[n];if(!po[n])return n;var e=po[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in d0)return vp[n]=e[t];return n}var h0=Lh("animationend"),f0=Lh("animationiteration"),p0=Lh("animationstart"),m0=Lh("transitionend"),g0=new Map,sE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(n,e){g0.set(n,e),Ls(e,[n])}for(var wp=0;wp<sE.length;wp++){var Ep=sE[wp],Ak=Ep.toLowerCase(),xk=Ep[0].toUpperCase()+Ep.slice(1);Di(Ak,"on"+xk)}Di(h0,"onAnimationEnd");Di(f0,"onAnimationIteration");Di(p0,"onAnimationStart");Di("dblclick","onDoubleClick");Di("focusin","onFocus");Di("focusout","onBlur");Di(m0,"onTransitionEnd");Lo("onMouseEnter",["mouseout","mouseover"]);Lo("onMouseLeave",["mouseout","mouseover"]);Lo("onPointerEnter",["pointerout","pointerover"]);Lo("onPointerLeave",["pointerout","pointerover"]);Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rk=new Set("cancel close invalid load scroll toggle".split(" ").concat(cl));function oE(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Ab(r,e,void 0,n),n.currentTarget=null}function y0(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;oE(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;oE(i,a,c),s=l}}}if(Dd)throw n=Pm,Dd=!1,Pm=null,n}function Ae(n,e){var t=e[Om];t===void 0&&(t=e[Om]=new Set);var r=n+"__bubble";t.has(r)||(_0(e,n,2,!1),t.add(r))}function Ip(n,e,t){var r=0;e&&(r|=4),_0(t,n,r,e)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function Jl(n){if(!n[Lc]){n[Lc]=!0,PS.forEach(function(t){t!=="selectionchange"&&(Rk.has(t)||Ip(t,!1,n),Ip(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Lc]||(e[Lc]=!0,Ip("selectionchange",!1,e))}}function _0(n,e,t,r){switch(t0(e)){case 1:var i=zb;break;case 4:i=$b;break;default:i=ay}t=i.bind(null,e,t,n),i=void 0,!Sm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Tp(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=os(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}BS(function(){var c=s,d=ry(t),h=[];e:{var p=g0.get(n);if(p!==void 0){var y=uy,v=n;switch(n){case"keypress":if(sd(t)===0)break e;case"keydown":case"keyup":y=ik;break;case"focusin":v="focus",y=gp;break;case"focusout":v="blur",y=gp;break;case"beforeblur":case"afterblur":y=gp;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Kw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Gb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=ak;break;case h0:case f0:case p0:y=Qb;break;case m0:y=uk;break;case"scroll":y=qb;break;case"wheel":y=dk;break;case"copy":case"cut":case"paste":y=Xb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Yw}var T=(e&4)!==0,C=!T&&n==="scroll",_=T?p!==null?p+"Capture":null:p;T=[];for(var w=c,E;w!==null;){E=w;var N=E.stateNode;if(E.tag===5&&N!==null&&(E=N,_!==null&&(N=Gl(w,_),N!=null&&T.push(Zl(w,N,E)))),C)break;w=w.return}0<T.length&&(p=new y(p,v,null,t,d),h.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",p&&t!==Im&&(v=t.relatedTarget||t.fromElement)&&(os(v)||v[Tr]))break e;if((y||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,y?(v=t.relatedTarget||t.toElement,y=c,v=v?os(v):null,v!==null&&(C=Ms(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=c),y!==v)){if(T=Kw,N="onMouseLeave",_="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(T=Yw,N="onPointerLeave",_="onPointerEnter",w="pointer"),C=y==null?p:mo(y),E=v==null?p:mo(v),p=new T(N,w+"leave",y,t,d),p.target=C,p.relatedTarget=E,N=null,os(d)===c&&(T=new T(_,w+"enter",v,t,d),T.target=E,T.relatedTarget=C,N=T),C=N,y&&v)t:{for(T=y,_=v,w=0,E=T;E;E=Ys(E))w++;for(E=0,N=_;N;N=Ys(N))E++;for(;0<w-E;)T=Ys(T),w--;for(;0<E-w;)_=Ys(_),E--;for(;w--;){if(T===_||_!==null&&T===_.alternate)break t;T=Ys(T),_=Ys(_)}T=null}else T=null;y!==null&&aE(h,p,y,T,!1),v!==null&&C!==null&&aE(h,C,v,T,!0)}}e:{if(p=c?mo(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var D=_k;else if(Zw(p))if(a0)D=Ik;else{D=wk;var F=vk}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=Ek);if(D&&(D=D(n,c))){o0(h,D,t,d);break e}F&&F(n,p,c),n==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&ym(p,"number",p.value)}switch(F=c?mo(c):window,n){case"focusin":(Zw(F)||F.contentEditable==="true")&&(fo=F,Cm=c,Tl=null);break;case"focusout":Tl=Cm=fo=null;break;case"mousedown":bm=!0;break;case"contextmenu":case"mouseup":case"dragend":bm=!1,iE(h,t,d);break;case"selectionchange":if(Pk)break;case"keydown":case"keyup":iE(h,t,d)}var x;if(dy)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ho?i0(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(r0&&t.locale!=="ko"&&(ho||I!=="onCompositionStart"?I==="onCompositionEnd"&&ho&&(x=n0()):(ei=d,ly="value"in ei?ei.value:ei.textContent,ho=!0)),F=Fd(c,I),0<F.length&&(I=new Qw(I,n,null,t,d),h.push({event:I,listeners:F}),x?I.data=x:(x=s0(t),x!==null&&(I.data=x)))),(x=fk?pk(n,t):mk(n,t))&&(c=Fd(c,"onBeforeInput"),0<c.length&&(d=new Qw("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=x))}y0(h,e)})}function Zl(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Fd(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gl(n,t),s!=null&&r.unshift(Zl(n,s,i)),s=Gl(n,e),s!=null&&r.push(Zl(n,s,i))),n=n.return}return r}function Ys(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function aE(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Gl(t,s),l!=null&&o.unshift(Zl(t,l,a))):i||(l=Gl(t,s),l!=null&&o.push(Zl(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Ck=/\r\n?/g,bk=/\u0000|\uFFFD/g;function lE(n){return(typeof n=="string"?n:""+n).replace(Ck,`
`).replace(bk,"")}function Mc(n,e,t){if(e=lE(e),lE(n)!==e&&t)throw Error($(425))}function jd(){}var km=null,Nm=null;function Dm(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vm=typeof setTimeout=="function"?setTimeout:void 0,kk=typeof clearTimeout=="function"?clearTimeout:void 0,uE=typeof Promise=="function"?Promise:void 0,Nk=typeof queueMicrotask=="function"?queueMicrotask:typeof uE<"u"?function(n){return uE.resolve(null).then(n).catch(Dk)}:Vm;function Dk(n){setTimeout(function(){throw n})}function Sp(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Ql(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Ql(e)}function ui(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function cE(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var pa=Math.random().toString(36).slice(2),jn="__reactFiber$"+pa,eu="__reactProps$"+pa,Tr="__reactContainer$"+pa,Om="__reactEvents$"+pa,Vk="__reactListeners$"+pa,Ok="__reactHandles$"+pa;function os(n){var e=n[jn];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Tr]||t[jn]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=cE(n);n!==null;){if(t=n[jn])return t;n=cE(n)}return e}n=t,t=n.parentNode}return null}function Ou(n){return n=n[jn]||n[Tr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function mo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error($(33))}function Mh(n){return n[eu]||null}var Lm=[],go=-1;function Vi(n){return{current:n}}function Re(n){0>go||(n.current=Lm[go],Lm[go]=null,go--)}function we(n,e){go++,Lm[go]=n.current,n.current=e}var wi={},Ct=Vi(wi),Qt=Vi(!1),_s=wi;function Mo(n,e){var t=n.type.contextTypes;if(!t)return wi;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Yt(n){return n=n.childContextTypes,n!=null}function Ud(){Re(Qt),Re(Ct)}function dE(n,e,t){if(Ct.current!==wi)throw Error($(168));we(Ct,e),we(Qt,t)}function v0(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,vb(n)||"Unknown",i));return Me({},t,r)}function Bd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||wi,_s=Ct.current,we(Ct,n),we(Qt,Qt.current),!0}function hE(n,e,t){var r=n.stateNode;if(!r)throw Error($(169));t?(n=v0(n,e,_s),r.__reactInternalMemoizedMergedChildContext=n,Re(Qt),Re(Ct),we(Ct,n)):Re(Qt),we(Qt,t)}var pr=null,Fh=!1,Pp=!1;function w0(n){pr===null?pr=[n]:pr.push(n)}function Lk(n){Fh=!0,w0(n)}function Oi(){if(!Pp&&pr!==null){Pp=!0;var n=0,e=ye;try{var t=pr;for(ye=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}pr=null,Fh=!1}catch(i){throw pr!==null&&(pr=pr.slice(n+1)),WS(iy,Oi),i}finally{ye=e,Pp=!1}}return null}var yo=[],_o=0,zd=null,$d=0,hn=[],fn=0,vs=null,mr=1,gr="";function Ki(n,e){yo[_o++]=$d,yo[_o++]=zd,zd=n,$d=e}function E0(n,e,t){hn[fn++]=mr,hn[fn++]=gr,hn[fn++]=vs,vs=n;var r=mr;n=gr;var i=32-Rn(r)-1;r&=~(1<<i),t+=1;var s=32-Rn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,mr=1<<32-Rn(e)+i|t<<i|r,gr=s+n}else mr=1<<s|t<<i|r,gr=n}function fy(n){n.return!==null&&(Ki(n,1),E0(n,1,0))}function py(n){for(;n===zd;)zd=yo[--_o],yo[_o]=null,$d=yo[--_o],yo[_o]=null;for(;n===vs;)vs=hn[--fn],hn[fn]=null,gr=hn[--fn],hn[fn]=null,mr=hn[--fn],hn[fn]=null}var on=null,rn=null,be=!1,An=null;function I0(n,e){var t=pn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function fE(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,on=n,rn=ui(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,on=n,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=vs!==null?{id:mr,overflow:gr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=pn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,on=n,rn=null,!0):!1;default:return!1}}function Mm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Fm(n){if(be){var e=rn;if(e){var t=e;if(!fE(n,e)){if(Mm(n))throw Error($(418));e=ui(t.nextSibling);var r=on;e&&fE(n,e)?I0(r,t):(n.flags=n.flags&-4097|2,be=!1,on=n)}}else{if(Mm(n))throw Error($(418));n.flags=n.flags&-4097|2,be=!1,on=n}}}function pE(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;on=n}function Fc(n){if(n!==on)return!1;if(!be)return pE(n),be=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Dm(n.type,n.memoizedProps)),e&&(e=rn)){if(Mm(n))throw T0(),Error($(418));for(;e;)I0(n,e),e=ui(e.nextSibling)}if(pE(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error($(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){rn=ui(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}rn=null}}else rn=on?ui(n.stateNode.nextSibling):null;return!0}function T0(){for(var n=rn;n;)n=ui(n.nextSibling)}function Fo(){rn=on=null,be=!1}function my(n){An===null?An=[n]:An.push(n)}var Mk=Nr.ReactCurrentBatchConfig;function Ka(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error($(309));var r=t.stateNode}if(!r)throw Error($(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error($(284));if(!t._owner)throw Error($(290,n))}return n}function jc(n,e){throw n=Object.prototype.toString.call(e),Error($(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function mE(n){var e=n._init;return e(n._payload)}function S0(n){function e(_,w){if(n){var E=_.deletions;E===null?(_.deletions=[w],_.flags|=16):E.push(w)}}function t(_,w){if(!n)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function i(_,w){return _=fi(_,w),_.index=0,_.sibling=null,_}function s(_,w,E){return _.index=E,n?(E=_.alternate,E!==null?(E=E.index,E<w?(_.flags|=2,w):E):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function a(_,w,E,N){return w===null||w.tag!==6?(w=Np(E,_.mode,N),w.return=_,w):(w=i(w,E),w.return=_,w)}function l(_,w,E,N){var D=E.type;return D===co?d(_,w,E.props.children,N,E.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Qr&&mE(D)===w.type)?(N=i(w,E.props),N.ref=Ka(_,w,E),N.return=_,N):(N=hd(E.type,E.key,E.props,null,_.mode,N),N.ref=Ka(_,w,E),N.return=_,N)}function c(_,w,E,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Dp(E,_.mode,N),w.return=_,w):(w=i(w,E.children||[]),w.return=_,w)}function d(_,w,E,N,D){return w===null||w.tag!==7?(w=ps(E,_.mode,N,D),w.return=_,w):(w=i(w,E),w.return=_,w)}function h(_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Np(""+w,_.mode,E),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rc:return E=hd(w.type,w.key,w.props,null,_.mode,E),E.ref=Ka(_,null,w),E.return=_,E;case uo:return w=Dp(w,_.mode,E),w.return=_,w;case Qr:var N=w._init;return h(_,N(w._payload),E)}if(ll(w)||$a(w))return w=ps(w,_.mode,E,null),w.return=_,w;jc(_,w)}return null}function p(_,w,E,N){var D=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:a(_,w,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Rc:return E.key===D?l(_,w,E,N):null;case uo:return E.key===D?c(_,w,E,N):null;case Qr:return D=E._init,p(_,w,D(E._payload),N)}if(ll(E)||$a(E))return D!==null?null:d(_,w,E,N,null);jc(_,E)}return null}function y(_,w,E,N,D){if(typeof N=="string"&&N!==""||typeof N=="number")return _=_.get(E)||null,a(w,_,""+N,D);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Rc:return _=_.get(N.key===null?E:N.key)||null,l(w,_,N,D);case uo:return _=_.get(N.key===null?E:N.key)||null,c(w,_,N,D);case Qr:var F=N._init;return y(_,w,E,F(N._payload),D)}if(ll(N)||$a(N))return _=_.get(E)||null,d(w,_,N,D,null);jc(w,N)}return null}function v(_,w,E,N){for(var D=null,F=null,x=w,I=w=0,P=null;x!==null&&I<E.length;I++){x.index>I?(P=x,x=null):P=x.sibling;var A=p(_,x,E[I],N);if(A===null){x===null&&(x=P);break}n&&x&&A.alternate===null&&e(_,x),w=s(A,w,I),F===null?D=A:F.sibling=A,F=A,x=P}if(I===E.length)return t(_,x),be&&Ki(_,I),D;if(x===null){for(;I<E.length;I++)x=h(_,E[I],N),x!==null&&(w=s(x,w,I),F===null?D=x:F.sibling=x,F=x);return be&&Ki(_,I),D}for(x=r(_,x);I<E.length;I++)P=y(x,_,I,E[I],N),P!==null&&(n&&P.alternate!==null&&x.delete(P.key===null?I:P.key),w=s(P,w,I),F===null?D=P:F.sibling=P,F=P);return n&&x.forEach(function(b){return e(_,b)}),be&&Ki(_,I),D}function T(_,w,E,N){var D=$a(E);if(typeof D!="function")throw Error($(150));if(E=D.call(E),E==null)throw Error($(151));for(var F=D=null,x=w,I=w=0,P=null,A=E.next();x!==null&&!A.done;I++,A=E.next()){x.index>I?(P=x,x=null):P=x.sibling;var b=p(_,x,A.value,N);if(b===null){x===null&&(x=P);break}n&&x&&b.alternate===null&&e(_,x),w=s(b,w,I),F===null?D=b:F.sibling=b,F=b,x=P}if(A.done)return t(_,x),be&&Ki(_,I),D;if(x===null){for(;!A.done;I++,A=E.next())A=h(_,A.value,N),A!==null&&(w=s(A,w,I),F===null?D=A:F.sibling=A,F=A);return be&&Ki(_,I),D}for(x=r(_,x);!A.done;I++,A=E.next())A=y(x,_,I,A.value,N),A!==null&&(n&&A.alternate!==null&&x.delete(A.key===null?I:A.key),w=s(A,w,I),F===null?D=A:F.sibling=A,F=A);return n&&x.forEach(function(k){return e(_,k)}),be&&Ki(_,I),D}function C(_,w,E,N){if(typeof E=="object"&&E!==null&&E.type===co&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Rc:e:{for(var D=E.key,F=w;F!==null;){if(F.key===D){if(D=E.type,D===co){if(F.tag===7){t(_,F.sibling),w=i(F,E.props.children),w.return=_,_=w;break e}}else if(F.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Qr&&mE(D)===F.type){t(_,F.sibling),w=i(F,E.props),w.ref=Ka(_,F,E),w.return=_,_=w;break e}t(_,F);break}else e(_,F);F=F.sibling}E.type===co?(w=ps(E.props.children,_.mode,N,E.key),w.return=_,_=w):(N=hd(E.type,E.key,E.props,null,_.mode,N),N.ref=Ka(_,w,E),N.return=_,_=N)}return o(_);case uo:e:{for(F=E.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){t(_,w.sibling),w=i(w,E.children||[]),w.return=_,_=w;break e}else{t(_,w);break}else e(_,w);w=w.sibling}w=Dp(E,_.mode,N),w.return=_,_=w}return o(_);case Qr:return F=E._init,C(_,w,F(E._payload),N)}if(ll(E))return v(_,w,E,N);if($a(E))return T(_,w,E,N);jc(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(t(_,w.sibling),w=i(w,E),w.return=_,_=w):(t(_,w),w=Np(E,_.mode,N),w.return=_,_=w),o(_)):t(_,w)}return C}var jo=S0(!0),P0=S0(!1),qd=Vi(null),Wd=null,vo=null,gy=null;function yy(){gy=vo=Wd=null}function _y(n){var e=qd.current;Re(qd),n._currentValue=e}function jm(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function xo(n,e){Wd=n,gy=vo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Wt=!0),n.firstContext=null)}function _n(n){var e=n._currentValue;if(gy!==n)if(n={context:n,memoizedValue:e,next:null},vo===null){if(Wd===null)throw Error($(308));vo=n,Wd.dependencies={lanes:0,firstContext:n}}else vo=vo.next=n;return e}var as=null;function vy(n){as===null?as=[n]:as.push(n)}function A0(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,vy(e)):(t.next=i.next,i.next=t),e.interleaved=t,Sr(n,r)}function Sr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Yr=!1;function wy(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x0(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function vr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ci(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sr(n,t)}return i=r.interleaved,i===null?(e.next=e,vy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sr(n,t)}function od(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,sy(n,t)}}function gE(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Gd(n,e,t,r){var i=n.updateQueue;Yr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,T=a;switch(p=e,y=t,T.tag){case 1:if(v=T.payload,typeof v=="function"){h=v.call(y,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=T.payload,p=typeof v=="function"?v.call(y,h,p):v,p==null)break e;h=Me({},h,p);break e;case 2:Yr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=h):d=d.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Es|=o,n.lanes=o,n.memoizedState=h}}function yE(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Lu={},Qn=Vi(Lu),tu=Vi(Lu),nu=Vi(Lu);function ls(n){if(n===Lu)throw Error($(174));return n}function Ey(n,e){switch(we(nu,e),we(tu,n),we(Qn,Lu),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vm(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=vm(e,n)}Re(Qn),we(Qn,e)}function Uo(){Re(Qn),Re(tu),Re(nu)}function R0(n){ls(nu.current);var e=ls(Qn.current),t=vm(e,n.type);e!==t&&(we(tu,n),we(Qn,t))}function Iy(n){tu.current===n&&(Re(Qn),Re(tu))}var Ve=Vi(0);function Hd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ap=[];function Ty(){for(var n=0;n<Ap.length;n++)Ap[n]._workInProgressVersionPrimary=null;Ap.length=0}var ad=Nr.ReactCurrentDispatcher,xp=Nr.ReactCurrentBatchConfig,ws=0,Oe=null,tt=null,ot=null,Kd=!1,Sl=!1,ru=0,Fk=0;function It(){throw Error($(321))}function Sy(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Dn(n[t],e[t]))return!1;return!0}function Py(n,e,t,r,i,s){if(ws=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ad.current=n===null||n.memoizedState===null?zk:$k,n=t(r,i),Sl){s=0;do{if(Sl=!1,ru=0,25<=s)throw Error($(301));s+=1,ot=tt=null,e.updateQueue=null,ad.current=qk,n=t(r,i)}while(Sl)}if(ad.current=Qd,e=tt!==null&&tt.next!==null,ws=0,ot=tt=Oe=null,Kd=!1,e)throw Error($(300));return n}function Ay(){var n=ru!==0;return ru=0,n}function Ln(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Oe.memoizedState=ot=n:ot=ot.next=n,ot}function vn(){if(tt===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var e=ot===null?Oe.memoizedState:ot.next;if(e!==null)ot=e,tt=n;else{if(n===null)throw Error($(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ot===null?Oe.memoizedState=ot=n:ot=ot.next=n}return ot}function iu(n,e){return typeof e=="function"?e(n):e}function Rp(n){var e=vn(),t=e.queue;if(t===null)throw Error($(311));t.lastRenderedReducer=n;var r=tt,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((ws&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Oe.lanes|=d,Es|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Dn(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Oe.lanes|=s,Es|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Cp(n){var e=vn(),t=e.queue;if(t===null)throw Error($(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Dn(s,e.memoizedState)||(Wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function C0(){}function b0(n,e){var t=Oe,r=vn(),i=e(),s=!Dn(r.memoizedState,i);if(s&&(r.memoizedState=i,Wt=!0),r=r.queue,xy(D0.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||ot!==null&&ot.memoizedState.tag&1){if(t.flags|=2048,su(9,N0.bind(null,t,r,i,e),void 0,null),lt===null)throw Error($(349));ws&30||k0(t,e,i)}return i}function k0(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function N0(n,e,t,r){e.value=t,e.getSnapshot=r,V0(e)&&O0(n)}function D0(n,e,t){return t(function(){V0(e)&&O0(n)})}function V0(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Dn(n,t)}catch{return!0}}function O0(n){var e=Sr(n,1);e!==null&&Cn(e,n,1,-1)}function _E(n){var e=Ln();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iu,lastRenderedState:n},e.queue=n,n=n.dispatch=Bk.bind(null,Oe,n),[e.memoizedState,n]}function su(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function L0(){return vn().memoizedState}function ld(n,e,t,r){var i=Ln();Oe.flags|=n,i.memoizedState=su(1|e,t,void 0,r===void 0?null:r)}function jh(n,e,t,r){var i=vn();r=r===void 0?null:r;var s=void 0;if(tt!==null){var o=tt.memoizedState;if(s=o.destroy,r!==null&&Sy(r,o.deps)){i.memoizedState=su(e,t,s,r);return}}Oe.flags|=n,i.memoizedState=su(1|e,t,s,r)}function vE(n,e){return ld(8390656,8,n,e)}function xy(n,e){return jh(2048,8,n,e)}function M0(n,e){return jh(4,2,n,e)}function F0(n,e){return jh(4,4,n,e)}function j0(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function U0(n,e,t){return t=t!=null?t.concat([n]):null,jh(4,4,j0.bind(null,e,n),t)}function Ry(){}function B0(n,e){var t=vn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Sy(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function z0(n,e){var t=vn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Sy(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function $0(n,e,t){return ws&21?(Dn(t,e)||(t=KS(),Oe.lanes|=t,Es|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Wt=!0),n.memoizedState=t)}function jk(n,e){var t=ye;ye=t!==0&&4>t?t:4,n(!0);var r=xp.transition;xp.transition={};try{n(!1),e()}finally{ye=t,xp.transition=r}}function q0(){return vn().memoizedState}function Uk(n,e,t){var r=hi(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},W0(n))G0(e,t);else if(t=A0(n,e,t,r),t!==null){var i=Lt();Cn(t,n,r,i),H0(t,e,r)}}function Bk(n,e,t){var r=hi(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(W0(n))G0(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Dn(a,o)){var l=e.interleaved;l===null?(i.next=i,vy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=A0(n,e,i,r),t!==null&&(i=Lt(),Cn(t,n,r,i),H0(t,e,r))}}function W0(n){var e=n.alternate;return n===Oe||e!==null&&e===Oe}function G0(n,e){Sl=Kd=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function H0(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,sy(n,t)}}var Qd={readContext:_n,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},zk={readContext:_n,useCallback:function(n,e){return Ln().memoizedState=[n,e===void 0?null:e],n},useContext:_n,useEffect:vE,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ld(4194308,4,j0.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ld(4194308,4,n,e)},useInsertionEffect:function(n,e){return ld(4,2,n,e)},useMemo:function(n,e){var t=Ln();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ln();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Uk.bind(null,Oe,n),[r.memoizedState,n]},useRef:function(n){var e=Ln();return n={current:n},e.memoizedState=n},useState:_E,useDebugValue:Ry,useDeferredValue:function(n){return Ln().memoizedState=n},useTransition:function(){var n=_E(!1),e=n[0];return n=jk.bind(null,n[1]),Ln().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Oe,i=Ln();if(be){if(t===void 0)throw Error($(407));t=t()}else{if(t=e(),lt===null)throw Error($(349));ws&30||k0(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,vE(D0.bind(null,r,s,n),[n]),r.flags|=2048,su(9,N0.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Ln(),e=lt.identifierPrefix;if(be){var t=gr,r=mr;t=(r&~(1<<32-Rn(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=ru++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Fk++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},$k={readContext:_n,useCallback:B0,useContext:_n,useEffect:xy,useImperativeHandle:U0,useInsertionEffect:M0,useLayoutEffect:F0,useMemo:z0,useReducer:Rp,useRef:L0,useState:function(){return Rp(iu)},useDebugValue:Ry,useDeferredValue:function(n){var e=vn();return $0(e,tt.memoizedState,n)},useTransition:function(){var n=Rp(iu)[0],e=vn().memoizedState;return[n,e]},useMutableSource:C0,useSyncExternalStore:b0,useId:q0,unstable_isNewReconciler:!1},qk={readContext:_n,useCallback:B0,useContext:_n,useEffect:xy,useImperativeHandle:U0,useInsertionEffect:M0,useLayoutEffect:F0,useMemo:z0,useReducer:Cp,useRef:L0,useState:function(){return Cp(iu)},useDebugValue:Ry,useDeferredValue:function(n){var e=vn();return tt===null?e.memoizedState=n:$0(e,tt.memoizedState,n)},useTransition:function(){var n=Cp(iu)[0],e=vn().memoizedState;return[n,e]},useMutableSource:C0,useSyncExternalStore:b0,useId:q0,unstable_isNewReconciler:!1};function Tn(n,e){if(n&&n.defaultProps){e=Me({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Um(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Me({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Uh={isMounted:function(n){return(n=n._reactInternals)?Ms(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Lt(),i=hi(n),s=vr(r,i);s.payload=e,t!=null&&(s.callback=t),e=ci(n,s,i),e!==null&&(Cn(e,n,i,r),od(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Lt(),i=hi(n),s=vr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ci(n,s,i),e!==null&&(Cn(e,n,i,r),od(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Lt(),r=hi(n),i=vr(t,r);i.tag=2,e!=null&&(i.callback=e),e=ci(n,i,r),e!==null&&(Cn(e,n,r,t),od(e,n,r))}};function wE(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xl(t,r)||!Xl(i,s):!0}function K0(n,e,t){var r=!1,i=wi,s=e.contextType;return typeof s=="object"&&s!==null?s=_n(s):(i=Yt(e)?_s:Ct.current,r=e.contextTypes,s=(r=r!=null)?Mo(n,i):wi),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uh,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function EE(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Uh.enqueueReplaceState(e,e.state,null)}function Bm(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},wy(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=_n(s):(s=Yt(e)?_s:Ct.current,i.context=Mo(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Um(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Uh.enqueueReplaceState(i,i.state,null),Gd(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Bo(n,e){try{var t="",r=e;do t+=_b(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function bp(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function zm(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Wk=typeof WeakMap=="function"?WeakMap:Map;function Q0(n,e,t){t=vr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Xd||(Xd=!0,Jm=r),zm(n,e)},t}function Y0(n,e,t){t=vr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){zm(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){zm(n,e),typeof r!="function"&&(di===null?di=new Set([this]):di.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function IE(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Wk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=sN.bind(null,n,e,t),e.then(n,n))}function TE(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function SE(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=vr(-1,1),e.tag=2,ci(t,e,1))),t.lanes|=1),n)}var Gk=Nr.ReactCurrentOwner,Wt=!1;function Dt(n,e,t,r){e.child=n===null?P0(e,null,t,r):jo(e,n.child,t,r)}function PE(n,e,t,r,i){t=t.render;var s=e.ref;return xo(e,i),r=Py(n,e,t,r,s,i),t=Ay(),n!==null&&!Wt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Pr(n,e,i)):(be&&t&&fy(e),e.flags|=1,Dt(n,e,r,i),e.child)}function AE(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Ly(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,X0(n,e,s,r,i)):(n=hd(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Xl,t(o,r)&&n.ref===e.ref)return Pr(n,e,i)}return e.flags|=1,n=fi(s,r),n.ref=e.ref,n.return=e,e.child=n}function X0(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Xl(s,r)&&n.ref===e.ref)if(Wt=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Wt=!0);else return e.lanes=n.lanes,Pr(n,e,i)}return $m(n,e,t,r,i)}function J0(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Eo,Zt),Zt|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,we(Eo,Zt),Zt|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,we(Eo,Zt),Zt|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,we(Eo,Zt),Zt|=r;return Dt(n,e,i,t),e.child}function Z0(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function $m(n,e,t,r,i){var s=Yt(t)?_s:Ct.current;return s=Mo(e,s),xo(e,i),t=Py(n,e,t,r,s,i),r=Ay(),n!==null&&!Wt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Pr(n,e,i)):(be&&r&&fy(e),e.flags|=1,Dt(n,e,t,i),e.child)}function xE(n,e,t,r,i){if(Yt(t)){var s=!0;Bd(e)}else s=!1;if(xo(e,i),e.stateNode===null)ud(n,e),K0(e,t,r),Bm(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=Yt(t)?_s:Ct.current,c=Mo(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&EE(e,o,r,c),Yr=!1;var p=e.memoizedState;o.state=p,Gd(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Qt.current||Yr?(typeof d=="function"&&(Um(e,t,d,r),l=e.memoizedState),(a=Yr||wE(e,t,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,x0(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Tn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=_n(l):(l=Yt(t)?_s:Ct.current,l=Mo(e,l));var y=t.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&EE(e,o,r,l),Yr=!1,p=e.memoizedState,o.state=p,Gd(e,r,o,i);var v=e.memoizedState;a!==h||p!==v||Qt.current||Yr?(typeof y=="function"&&(Um(e,t,y,r),v=e.memoizedState),(c=Yr||wE(e,t,c,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return qm(n,e,t,r,s,i)}function qm(n,e,t,r,i,s){Z0(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&hE(e,t,!1),Pr(n,e,s);r=e.stateNode,Gk.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=jo(e,n.child,null,s),e.child=jo(e,null,a,s)):Dt(n,e,a,s),e.memoizedState=r.state,i&&hE(e,t,!0),e.child}function eP(n){var e=n.stateNode;e.pendingContext?dE(n,e.pendingContext,e.pendingContext!==e.context):e.context&&dE(n,e.context,!1),Ey(n,e.containerInfo)}function RE(n,e,t,r,i){return Fo(),my(i),e.flags|=256,Dt(n,e,t,r),e.child}var Wm={dehydrated:null,treeContext:null,retryLane:0};function Gm(n){return{baseLanes:n,cachePool:null,transitions:null}}function tP(n,e,t){var r=e.pendingProps,i=Ve.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),we(Ve,i&1),n===null)return Fm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=$h(o,r,0,null),n=ps(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Gm(t),e.memoizedState=Wm,n):Cy(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Hk(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=fi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=fi(a,s):(s=ps(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?Gm(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Wm,r}return s=n.child,n=s.sibling,r=fi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Cy(n,e){return e=$h({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Uc(n,e,t,r){return r!==null&&my(r),jo(e,n.child,null,t),n=Cy(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Hk(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=bp(Error($(422))),Uc(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=$h({mode:"visible",children:r.children},i,0,null),s=ps(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&jo(e,n.child,null,o),e.child.memoizedState=Gm(o),e.memoizedState=Wm,s);if(!(e.mode&1))return Uc(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=bp(s,r,void 0),Uc(n,e,o,r)}if(a=(o&n.childLanes)!==0,Wt||a){if(r=lt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Sr(n,i),Cn(r,n,i,-1))}return Oy(),r=bp(Error($(421))),Uc(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=oN.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,rn=ui(i.nextSibling),on=e,be=!0,An=null,n!==null&&(hn[fn++]=mr,hn[fn++]=gr,hn[fn++]=vs,mr=n.id,gr=n.overflow,vs=e),e=Cy(e,r.children),e.flags|=4096,e)}function CE(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),jm(n.return,e,t)}function kp(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function nP(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Dt(n,e,r.children,t),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&CE(n,t,e);else if(n.tag===19)CE(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(we(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Hd(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),kp(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Hd(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}kp(e,!0,t,null,s);break;case"together":kp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ud(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Pr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Es|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error($(153));if(e.child!==null){for(n=e.child,t=fi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=fi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Kk(n,e,t){switch(e.tag){case 3:eP(e),Fo();break;case 5:R0(e);break;case 1:Yt(e.type)&&Bd(e);break;case 4:Ey(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;we(qd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Ve,Ve.current&1),e.flags|=128,null):t&e.child.childLanes?tP(n,e,t):(we(Ve,Ve.current&1),n=Pr(n,e,t),n!==null?n.sibling:null);we(Ve,Ve.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return nP(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,J0(n,e,t)}return Pr(n,e,t)}var rP,Hm,iP,sP;rP=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Hm=function(){};iP=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,ls(Qn.current);var s=null;switch(t){case"input":i=mm(n,i),r=mm(n,r),s=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),s=[];break;case"textarea":i=_m(n,i),r=_m(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=jd)}wm(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ql.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ql.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ae("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};sP=function(n,e,t,r){t!==r&&(e.flags|=4)};function Qa(n,e){if(!be)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Tt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Qk(n,e,t){var r=e.pendingProps;switch(py(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(e),null;case 1:return Yt(e.type)&&Ud(),Tt(e),null;case 3:return r=e.stateNode,Uo(),Re(Qt),Re(Ct),Ty(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Fc(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,An!==null&&(tg(An),An=null))),Hm(n,e),Tt(e),null;case 5:Iy(e);var i=ls(nu.current);if(t=e.type,n!==null&&e.stateNode!=null)iP(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Tt(e),null}if(n=ls(Qn.current),Fc(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[jn]=e,r[eu]=s,n=(e.mode&1)!==0,t){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<cl.length;i++)Ae(cl[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Fw(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":Uw(r,s),Ae("invalid",r)}wm(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Mc(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Mc(r.textContent,a,n),i=["children",""+a]):ql.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(t){case"input":Cc(r),jw(r,s,!0);break;case"textarea":Cc(r),Bw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=DS(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[jn]=e,n[eu]=r,rP(n,e,!1,!1),e.stateNode=n;e:{switch(o=Em(t,r),t){case"dialog":Ae("cancel",n),Ae("close",n),i=r;break;case"iframe":case"object":case"embed":Ae("load",n),i=r;break;case"video":case"audio":for(i=0;i<cl.length;i++)Ae(cl[i],n);i=r;break;case"source":Ae("error",n),i=r;break;case"img":case"image":case"link":Ae("error",n),Ae("load",n),i=r;break;case"details":Ae("toggle",n),i=r;break;case"input":Fw(n,r),i=mm(n,r),Ae("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),Ae("invalid",n);break;case"textarea":Uw(n,r),i=_m(n,r),Ae("invalid",n);break;default:i=r}wm(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LS(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VS(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Wl(n,l):typeof l=="number"&&Wl(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ql.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ae("scroll",n):l!=null&&Zg(n,s,l,o))}switch(t){case"input":Cc(n),jw(n,r,!1);break;case"textarea":Cc(n),Bw(n);break;case"option":r.value!=null&&n.setAttribute("value",""+vi(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?To(n,!!r.multiple,s,!1):r.defaultValue!=null&&To(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=jd)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tt(e),null;case 6:if(n&&e.stateNode!=null)sP(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(t=ls(nu.current),ls(Qn.current),Fc(e)){if(r=e.stateNode,t=e.memoizedProps,r[jn]=e,(s=r.nodeValue!==t)&&(n=on,n!==null))switch(n.tag){case 3:Mc(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Mc(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[jn]=e,e.stateNode=r}return Tt(e),null;case 13:if(Re(Ve),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(be&&rn!==null&&e.mode&1&&!(e.flags&128))T0(),Fo(),e.flags|=98560,s=!1;else if(s=Fc(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[jn]=e}else Fo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tt(e),s=!1}else An!==null&&(tg(An),An=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Ve.current&1?nt===0&&(nt=3):Oy())),e.updateQueue!==null&&(e.flags|=4),Tt(e),null);case 4:return Uo(),Hm(n,e),n===null&&Jl(e.stateNode.containerInfo),Tt(e),null;case 10:return _y(e.type._context),Tt(e),null;case 17:return Yt(e.type)&&Ud(),Tt(e),null;case 19:if(Re(Ve),s=e.memoizedState,s===null)return Tt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Qa(s,!1);else{if(nt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Hd(n),o!==null){for(e.flags|=128,Qa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return we(Ve,Ve.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ge()>zo&&(e.flags|=128,r=!0,Qa(s,!1),e.lanes=4194304)}else{if(!r)if(n=Hd(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Qa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!be)return Tt(e),null}else 2*Ge()-s.renderingStartTime>zo&&t!==1073741824&&(e.flags|=128,r=!0,Qa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ge(),e.sibling=null,t=Ve.current,we(Ve,r?t&1|2:t&1),e):(Tt(e),null);case 22:case 23:return Vy(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zt&1073741824&&(Tt(e),e.subtreeFlags&6&&(e.flags|=8192)):Tt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Yk(n,e){switch(py(e),e.tag){case 1:return Yt(e.type)&&Ud(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Uo(),Re(Qt),Re(Ct),Ty(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Iy(e),null;case 13:if(Re(Ve),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error($(340));Fo()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Re(Ve),null;case 4:return Uo(),null;case 10:return _y(e.type._context),null;case 22:case 23:return Vy(),null;case 24:return null;default:return null}}var Bc=!1,At=!1,Xk=typeof WeakSet=="function"?WeakSet:Set,Y=null;function wo(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Be(n,e,r)}else t.current=null}function Km(n,e,t){try{t()}catch(r){Be(n,e,r)}}var bE=!1;function Jk(n,e){if(km=Ld,n=c0(),hy(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=n,p=null;t:for(;;){for(var y;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)p=h,h=y;for(;;){if(h===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(y=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=y}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Nm={focusedElem:n,selectionRange:t},Ld=!1,Y=e;Y!==null;)if(e=Y,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Y=n;else for(;Y!==null;){e=Y;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var T=v.memoizedProps,C=v.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?T:Tn(e.type,T),C);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(N){Be(e,e.return,N)}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}return v=bE,bE=!1,v}function Pl(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Km(e,t,s)}i=i.next}while(i!==r)}}function Bh(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Qm(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function oP(n){var e=n.alternate;e!==null&&(n.alternate=null,oP(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[jn],delete e[eu],delete e[Om],delete e[Vk],delete e[Ok])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function aP(n){return n.tag===5||n.tag===3||n.tag===4}function kE(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||aP(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ym(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=jd));else if(r!==4&&(n=n.child,n!==null))for(Ym(n,e,t),n=n.sibling;n!==null;)Ym(n,e,t),n=n.sibling}function Xm(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Xm(n,e,t),n=n.sibling;n!==null;)Xm(n,e,t),n=n.sibling}var dt=null,Sn=!1;function $r(n,e,t){for(t=t.child;t!==null;)lP(n,e,t),t=t.sibling}function lP(n,e,t){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(Dh,t)}catch{}switch(t.tag){case 5:At||wo(t,e);case 6:var r=dt,i=Sn;dt=null,$r(n,e,t),dt=r,Sn=i,dt!==null&&(Sn?(n=dt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):dt.removeChild(t.stateNode));break;case 18:dt!==null&&(Sn?(n=dt,t=t.stateNode,n.nodeType===8?Sp(n.parentNode,t):n.nodeType===1&&Sp(n,t),Ql(n)):Sp(dt,t.stateNode));break;case 4:r=dt,i=Sn,dt=t.stateNode.containerInfo,Sn=!0,$r(n,e,t),dt=r,Sn=i;break;case 0:case 11:case 14:case 15:if(!At&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Km(t,e,o),i=i.next}while(i!==r)}$r(n,e,t);break;case 1:if(!At&&(wo(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Be(t,e,a)}$r(n,e,t);break;case 21:$r(n,e,t);break;case 22:t.mode&1?(At=(r=At)||t.memoizedState!==null,$r(n,e,t),At=r):$r(n,e,t);break;default:$r(n,e,t)}}function NE(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Xk),e.forEach(function(r){var i=aN.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function In(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:dt=a.stateNode,Sn=!1;break e;case 3:dt=a.stateNode.containerInfo,Sn=!0;break e;case 4:dt=a.stateNode.containerInfo,Sn=!0;break e}a=a.return}if(dt===null)throw Error($(160));lP(s,o,i),dt=null,Sn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Be(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uP(e,n),e=e.sibling}function uP(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(In(e,n),On(n),r&4){try{Pl(3,n,n.return),Bh(3,n)}catch(T){Be(n,n.return,T)}try{Pl(5,n,n.return)}catch(T){Be(n,n.return,T)}}break;case 1:In(e,n),On(n),r&512&&t!==null&&wo(t,t.return);break;case 5:if(In(e,n),On(n),r&512&&t!==null&&wo(t,t.return),n.flags&32){var i=n.stateNode;try{Wl(i,"")}catch(T){Be(n,n.return,T)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&kS(i,s),Em(a,o);var c=Em(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?LS(i,h):d==="dangerouslySetInnerHTML"?VS(i,h):d==="children"?Wl(i,h):Zg(i,d,h,c)}switch(a){case"input":gm(i,s);break;case"textarea":NS(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?To(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?To(i,!!s.multiple,s.defaultValue,!0):To(i,!!s.multiple,s.multiple?[]:"",!1))}i[eu]=s}catch(T){Be(n,n.return,T)}}break;case 6:if(In(e,n),On(n),r&4){if(n.stateNode===null)throw Error($(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(T){Be(n,n.return,T)}}break;case 3:if(In(e,n),On(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Ql(e.containerInfo)}catch(T){Be(n,n.return,T)}break;case 4:In(e,n),On(n);break;case 13:In(e,n),On(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ny=Ge())),r&4&&NE(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(At=(c=At)||d,In(e,n),At=c):In(e,n),On(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(Y=n,d=n.child;d!==null;){for(h=Y=d;Y!==null;){switch(p=Y,y=p.child,p.tag){case 0:case 11:case 14:case 15:Pl(4,p,p.return);break;case 1:wo(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(T){Be(r,t,T)}}break;case 5:wo(p,p.return);break;case 22:if(p.memoizedState!==null){VE(h);continue}}y!==null?(y.return=p,Y=y):VE(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=OS("display",o))}catch(T){Be(n,n.return,T)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(T){Be(n,n.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:In(e,n),On(n),r&4&&NE(n);break;case 21:break;default:In(e,n),On(n)}}function On(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(aP(t)){var r=t;break e}t=t.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wl(i,""),r.flags&=-33);var s=kE(n);Xm(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=kE(n);Ym(n,a,o);break;default:throw Error($(161))}}catch(l){Be(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Zk(n,e,t){Y=n,cP(n)}function cP(n,e,t){for(var r=(n.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Bc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||At;a=Bc;var c=At;if(Bc=o,(At=l)&&!c)for(Y=i;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?OE(i):l!==null?(l.return=o,Y=l):OE(i);for(;s!==null;)Y=s,cP(s),s=s.sibling;Y=i,Bc=a,At=c}DE(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):DE(n)}}function DE(n){for(;Y!==null;){var e=Y;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||Bh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Tn(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}yE(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ql(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}At||e.flags&512&&Qm(e)}catch(p){Be(e,e.return,p)}}if(e===n){Y=null;break}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}}function VE(n){for(;Y!==null;){var e=Y;if(e===n){Y=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Y=t;break}Y=e.return}}function OE(n){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Bh(4,e)}catch(l){Be(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Be(e,i,l)}}var s=e.return;try{Qm(e)}catch(l){Be(e,s,l)}break;case 5:var o=e.return;try{Qm(e)}catch(l){Be(e,o,l)}}}catch(l){Be(e,e.return,l)}if(e===n){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var eN=Math.ceil,Yd=Nr.ReactCurrentDispatcher,by=Nr.ReactCurrentOwner,gn=Nr.ReactCurrentBatchConfig,ce=0,lt=null,Ze=null,mt=0,Zt=0,Eo=Vi(0),nt=0,ou=null,Es=0,zh=0,ky=0,Al=null,qt=null,Ny=0,zo=1/0,fr=null,Xd=!1,Jm=null,di=null,zc=!1,ti=null,Jd=0,xl=0,Zm=null,cd=-1,dd=0;function Lt(){return ce&6?Ge():cd!==-1?cd:cd=Ge()}function hi(n){return n.mode&1?ce&2&&mt!==0?mt&-mt:Mk.transition!==null?(dd===0&&(dd=KS()),dd):(n=ye,n!==0||(n=window.event,n=n===void 0?16:t0(n.type)),n):1}function Cn(n,e,t,r){if(50<xl)throw xl=0,Zm=null,Error($(185));Du(n,t,r),(!(ce&2)||n!==lt)&&(n===lt&&(!(ce&2)&&(zh|=t),nt===4&&Jr(n,mt)),Xt(n,r),t===1&&ce===0&&!(e.mode&1)&&(zo=Ge()+500,Fh&&Oi()))}function Xt(n,e){var t=n.callbackNode;Mb(n,e);var r=Od(n,n===lt?mt:0);if(r===0)t!==null&&qw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&qw(t),e===1)n.tag===0?Lk(LE.bind(null,n)):w0(LE.bind(null,n)),Nk(function(){!(ce&6)&&Oi()}),t=null;else{switch(QS(r)){case 1:t=iy;break;case 4:t=GS;break;case 16:t=Vd;break;case 536870912:t=HS;break;default:t=Vd}t=_P(t,dP.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function dP(n,e){if(cd=-1,dd=0,ce&6)throw Error($(327));var t=n.callbackNode;if(Ro()&&n.callbackNode!==t)return null;var r=Od(n,n===lt?mt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Zd(n,r);else{e=r;var i=ce;ce|=2;var s=fP();(lt!==n||mt!==e)&&(fr=null,zo=Ge()+500,fs(n,e));do try{rN();break}catch(a){hP(n,a)}while(!0);yy(),Yd.current=s,ce=i,Ze!==null?e=0:(lt=null,mt=0,e=nt)}if(e!==0){if(e===2&&(i=Am(n),i!==0&&(r=i,e=eg(n,i))),e===1)throw t=ou,fs(n,0),Jr(n,r),Xt(n,Ge()),t;if(e===6)Jr(n,r);else{if(i=n.current.alternate,!(r&30)&&!tN(i)&&(e=Zd(n,r),e===2&&(s=Am(n),s!==0&&(r=s,e=eg(n,s))),e===1))throw t=ou,fs(n,0),Jr(n,r),Xt(n,Ge()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Qi(n,qt,fr);break;case 3:if(Jr(n,r),(r&130023424)===r&&(e=Ny+500-Ge(),10<e)){if(Od(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Lt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Vm(Qi.bind(null,n,qt,fr),e);break}Qi(n,qt,fr);break;case 4:if(Jr(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Rn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eN(r/1960))-r,10<r){n.timeoutHandle=Vm(Qi.bind(null,n,qt,fr),r);break}Qi(n,qt,fr);break;case 5:Qi(n,qt,fr);break;default:throw Error($(329))}}}return Xt(n,Ge()),n.callbackNode===t?dP.bind(null,n):null}function eg(n,e){var t=Al;return n.current.memoizedState.isDehydrated&&(fs(n,e).flags|=256),n=Zd(n,e),n!==2&&(e=qt,qt=t,e!==null&&tg(e)),n}function tg(n){qt===null?qt=n:qt.push.apply(qt,n)}function tN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Dn(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jr(n,e){for(e&=~ky,e&=~zh,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Rn(e),r=1<<t;n[t]=-1,e&=~r}}function LE(n){if(ce&6)throw Error($(327));Ro();var e=Od(n,0);if(!(e&1))return Xt(n,Ge()),null;var t=Zd(n,e);if(n.tag!==0&&t===2){var r=Am(n);r!==0&&(e=r,t=eg(n,r))}if(t===1)throw t=ou,fs(n,0),Jr(n,e),Xt(n,Ge()),t;if(t===6)throw Error($(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Qi(n,qt,fr),Xt(n,Ge()),null}function Dy(n,e){var t=ce;ce|=1;try{return n(e)}finally{ce=t,ce===0&&(zo=Ge()+500,Fh&&Oi())}}function Is(n){ti!==null&&ti.tag===0&&!(ce&6)&&Ro();var e=ce;ce|=1;var t=gn.transition,r=ye;try{if(gn.transition=null,ye=1,n)return n()}finally{ye=r,gn.transition=t,ce=e,!(ce&6)&&Oi()}}function Vy(){Zt=Eo.current,Re(Eo)}function fs(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,kk(t)),Ze!==null)for(t=Ze.return;t!==null;){var r=t;switch(py(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ud();break;case 3:Uo(),Re(Qt),Re(Ct),Ty();break;case 5:Iy(r);break;case 4:Uo();break;case 13:Re(Ve);break;case 19:Re(Ve);break;case 10:_y(r.type._context);break;case 22:case 23:Vy()}t=t.return}if(lt=n,Ze=n=fi(n.current,null),mt=Zt=e,nt=0,ou=null,ky=zh=Es=0,qt=Al=null,as!==null){for(e=0;e<as.length;e++)if(t=as[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}as=null}return n}function hP(n,e){do{var t=Ze;try{if(yy(),ad.current=Qd,Kd){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Kd=!1}if(ws=0,ot=tt=Oe=null,Sl=!1,ru=0,by.current=null,t===null||t.return===null){nt=1,ou=e,Ze=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=mt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=TE(o);if(y!==null){y.flags&=-257,SE(y,o,a,s,e),y.mode&1&&IE(s,c,e),e=y,l=c;var v=e.updateQueue;if(v===null){var T=new Set;T.add(l),e.updateQueue=T}else v.add(l);break e}else{if(!(e&1)){IE(s,c,e),Oy();break e}l=Error($(426))}}else if(be&&a.mode&1){var C=TE(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),SE(C,o,a,s,e),my(Bo(l,a));break e}}s=l=Bo(l,a),nt!==4&&(nt=2),Al===null?Al=[s]:Al.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=Q0(s,l,e);gE(s,_);break e;case 1:a=l;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(di===null||!di.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=Y0(s,a,e);gE(s,N);break e}}s=s.return}while(s!==null)}mP(t)}catch(D){e=D,Ze===t&&t!==null&&(Ze=t=t.return);continue}break}while(!0)}function fP(){var n=Yd.current;return Yd.current=Qd,n===null?Qd:n}function Oy(){(nt===0||nt===3||nt===2)&&(nt=4),lt===null||!(Es&268435455)&&!(zh&268435455)||Jr(lt,mt)}function Zd(n,e){var t=ce;ce|=2;var r=fP();(lt!==n||mt!==e)&&(fr=null,fs(n,e));do try{nN();break}catch(i){hP(n,i)}while(!0);if(yy(),ce=t,Yd.current=r,Ze!==null)throw Error($(261));return lt=null,mt=0,nt}function nN(){for(;Ze!==null;)pP(Ze)}function rN(){for(;Ze!==null&&!Rb();)pP(Ze)}function pP(n){var e=yP(n.alternate,n,Zt);n.memoizedProps=n.pendingProps,e===null?mP(n):Ze=e,by.current=null}function mP(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Yk(t,e),t!==null){t.flags&=32767,Ze=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{nt=6,Ze=null;return}}else if(t=Qk(t,e,Zt),t!==null){Ze=t;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=n}while(e!==null);nt===0&&(nt=5)}function Qi(n,e,t){var r=ye,i=gn.transition;try{gn.transition=null,ye=1,iN(n,e,t,r)}finally{gn.transition=i,ye=r}return null}function iN(n,e,t,r){do Ro();while(ti!==null);if(ce&6)throw Error($(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error($(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Fb(n,s),n===lt&&(Ze=lt=null,mt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||zc||(zc=!0,_P(Vd,function(){return Ro(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=gn.transition,gn.transition=null;var o=ye;ye=1;var a=ce;ce|=4,by.current=null,Jk(n,t),uP(t,n),Sk(Nm),Ld=!!km,Nm=km=null,n.current=t,Zk(t),Cb(),ce=a,ye=o,gn.transition=s}else n.current=t;if(zc&&(zc=!1,ti=n,Jd=i),s=n.pendingLanes,s===0&&(di=null),Nb(t.stateNode),Xt(n,Ge()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xd)throw Xd=!1,n=Jm,Jm=null,n;return Jd&1&&n.tag!==0&&Ro(),s=n.pendingLanes,s&1?n===Zm?xl++:(xl=0,Zm=n):xl=0,Oi(),null}function Ro(){if(ti!==null){var n=QS(Jd),e=gn.transition,t=ye;try{if(gn.transition=null,ye=16>n?16:n,ti===null)var r=!1;else{if(n=ti,ti=null,Jd=0,ce&6)throw Error($(331));var i=ce;for(ce|=4,Y=n.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:Pl(8,d,s)}var h=d.child;if(h!==null)h.return=d,Y=h;else for(;Y!==null;){d=Y;var p=d.sibling,y=d.return;if(oP(d),d===c){Y=null;break}if(p!==null){p.return=y,Y=p;break}Y=y}}}var v=s.alternate;if(v!==null){var T=v.child;if(T!==null){v.child=null;do{var C=T.sibling;T.sibling=null,T=C}while(T!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Pl(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Y=_;break e}Y=s.return}}var w=n.current;for(Y=w;Y!==null;){o=Y;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Y=E;else e:for(o=w;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bh(9,a)}}catch(D){Be(a,a.return,D)}if(a===o){Y=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,Y=N;break e}Y=a.return}}if(ce=i,Oi(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(Dh,n)}catch{}r=!0}return r}finally{ye=t,gn.transition=e}}return!1}function ME(n,e,t){e=Bo(t,e),e=Q0(n,e,1),n=ci(n,e,1),e=Lt(),n!==null&&(Du(n,1,e),Xt(n,e))}function Be(n,e,t){if(n.tag===3)ME(n,n,t);else for(;e!==null;){if(e.tag===3){ME(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(di===null||!di.has(r))){n=Bo(t,n),n=Y0(e,n,1),e=ci(e,n,1),n=Lt(),e!==null&&(Du(e,1,n),Xt(e,n));break}}e=e.return}}function sN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Lt(),n.pingedLanes|=n.suspendedLanes&t,lt===n&&(mt&t)===t&&(nt===4||nt===3&&(mt&130023424)===mt&&500>Ge()-Ny?fs(n,0):ky|=t),Xt(n,e)}function gP(n,e){e===0&&(n.mode&1?(e=Nc,Nc<<=1,!(Nc&130023424)&&(Nc=4194304)):e=1);var t=Lt();n=Sr(n,e),n!==null&&(Du(n,e,t),Xt(n,t))}function oN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),gP(n,t)}function aN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),gP(n,t)}var yP;yP=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Qt.current)Wt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Wt=!1,Kk(n,e,t);Wt=!!(n.flags&131072)}else Wt=!1,be&&e.flags&1048576&&E0(e,$d,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ud(n,e),n=e.pendingProps;var i=Mo(e,Ct.current);xo(e,t),i=Py(null,e,r,n,i,t);var s=Ay();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(r)?(s=!0,Bd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wy(e),i.updater=Uh,e.stateNode=i,i._reactInternals=e,Bm(e,r,n,t),e=qm(null,e,r,!0,s,t)):(e.tag=0,be&&s&&fy(e),Dt(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ud(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=uN(r),n=Tn(r,n),i){case 0:e=$m(null,e,r,n,t);break e;case 1:e=xE(null,e,r,n,t);break e;case 11:e=PE(null,e,r,n,t);break e;case 14:e=AE(null,e,r,Tn(r.type,n),t);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),$m(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),xE(n,e,r,i,t);case 3:e:{if(eP(e),n===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,x0(n,e),Gd(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Bo(Error($(423)),e),e=RE(n,e,r,t,i);break e}else if(r!==i){i=Bo(Error($(424)),e),e=RE(n,e,r,t,i);break e}else for(rn=ui(e.stateNode.containerInfo.firstChild),on=e,be=!0,An=null,t=P0(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Fo(),r===i){e=Pr(n,e,t);break e}Dt(n,e,r,t)}e=e.child}return e;case 5:return R0(e),n===null&&Fm(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Dm(r,i)?o=null:s!==null&&Dm(r,s)&&(e.flags|=32),Z0(n,e),Dt(n,e,o,t),e.child;case 6:return n===null&&Fm(e),null;case 13:return tP(n,e,t);case 4:return Ey(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=jo(e,null,r,t):Dt(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),PE(n,e,r,i,t);case 7:return Dt(n,e,e.pendingProps,t),e.child;case 8:return Dt(n,e,e.pendingProps.children,t),e.child;case 12:return Dt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,we(qd,r._currentValue),r._currentValue=o,s!==null)if(Dn(s.value,o)){if(s.children===i.children&&!Qt.current){e=Pr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=vr(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),jm(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),jm(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Dt(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xo(e,t),i=_n(i),r=r(i),e.flags|=1,Dt(n,e,r,t),e.child;case 14:return r=e.type,i=Tn(r,e.pendingProps),i=Tn(r.type,i),AE(n,e,r,i,t);case 15:return X0(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),ud(n,e),e.tag=1,Yt(r)?(n=!0,Bd(e)):n=!1,xo(e,t),K0(e,r,i),Bm(e,r,i,t),qm(null,e,r,!0,n,t);case 19:return nP(n,e,t);case 22:return J0(n,e,t)}throw Error($(156,e.tag))};function _P(n,e){return WS(n,e)}function lN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(n,e,t,r){return new lN(n,e,t,r)}function Ly(n){return n=n.prototype,!(!n||!n.isReactComponent)}function uN(n){if(typeof n=="function")return Ly(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ty)return 11;if(n===ny)return 14}return 2}function fi(n,e){var t=n.alternate;return t===null?(t=pn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function hd(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Ly(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case co:return ps(t.children,i,s,e);case ey:o=8,i|=8;break;case dm:return n=pn(12,t,e,i|2),n.elementType=dm,n.lanes=s,n;case hm:return n=pn(13,t,e,i),n.elementType=hm,n.lanes=s,n;case fm:return n=pn(19,t,e,i),n.elementType=fm,n.lanes=s,n;case RS:return $h(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case AS:o=10;break e;case xS:o=9;break e;case ty:o=11;break e;case ny:o=14;break e;case Qr:o=16,r=null;break e}throw Error($(130,n==null?n:typeof n,""))}return e=pn(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function ps(n,e,t,r){return n=pn(7,n,r,e),n.lanes=t,n}function $h(n,e,t,r){return n=pn(22,n,r,e),n.elementType=RS,n.lanes=t,n.stateNode={isHidden:!1},n}function Np(n,e,t){return n=pn(6,n,null,e),n.lanes=t,n}function Dp(n,e,t){return e=pn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function cN(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fp(0),this.expirationTimes=fp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function My(n,e,t,r,i,s,o,a,l){return n=new cN(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},wy(s),n}function dN(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uo,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function vP(n){if(!n)return wi;n=n._reactInternals;e:{if(Ms(n)!==n||n.tag!==1)throw Error($(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(n.tag===1){var t=n.type;if(Yt(t))return v0(n,t,e)}return e}function wP(n,e,t,r,i,s,o,a,l){return n=My(t,r,!0,n,i,s,o,a,l),n.context=vP(null),t=n.current,r=Lt(),i=hi(t),s=vr(r,i),s.callback=e??null,ci(t,s,i),n.current.lanes=i,Du(n,i,r),Xt(n,r),n}function qh(n,e,t,r){var i=e.current,s=Lt(),o=hi(i);return t=vP(t),e.context===null?e.context=t:e.pendingContext=t,e=vr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=ci(i,e,o),n!==null&&(Cn(n,i,o,s),od(n,i,o)),o}function eh(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function FE(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Fy(n,e){FE(n,e),(n=n.alternate)&&FE(n,e)}function hN(){return null}var EP=typeof reportError=="function"?reportError:function(n){console.error(n)};function jy(n){this._internalRoot=n}Wh.prototype.render=jy.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error($(409));qh(n,e,null,null)};Wh.prototype.unmount=jy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Is(function(){qh(null,n,null,null)}),e[Tr]=null}};function Wh(n){this._internalRoot=n}Wh.prototype.unstable_scheduleHydration=function(n){if(n){var e=JS();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Xr.length&&e!==0&&e<Xr[t].priority;t++);Xr.splice(t,0,n),t===0&&e0(n)}};function Uy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Gh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function jE(){}function fN(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=eh(o);s.call(c)}}var o=wP(e,r,n,0,null,!1,!1,"",jE);return n._reactRootContainer=o,n[Tr]=o.current,Jl(n.nodeType===8?n.parentNode:n),Is(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=eh(l);a.call(c)}}var l=My(n,0,!1,null,null,!1,!1,"",jE);return n._reactRootContainer=l,n[Tr]=l.current,Jl(n.nodeType===8?n.parentNode:n),Is(function(){qh(e,l,t,r)}),l}function Hh(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=eh(o);a.call(l)}}qh(e,o,n,i)}else o=fN(t,e,n,i,r);return eh(o)}YS=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ul(e.pendingLanes);t!==0&&(sy(e,t|1),Xt(e,Ge()),!(ce&6)&&(zo=Ge()+500,Oi()))}break;case 13:Is(function(){var r=Sr(n,1);if(r!==null){var i=Lt();Cn(r,n,1,i)}}),Fy(n,1)}};oy=function(n){if(n.tag===13){var e=Sr(n,134217728);if(e!==null){var t=Lt();Cn(e,n,134217728,t)}Fy(n,134217728)}};XS=function(n){if(n.tag===13){var e=hi(n),t=Sr(n,e);if(t!==null){var r=Lt();Cn(t,n,e,r)}Fy(n,e)}};JS=function(){return ye};ZS=function(n,e){var t=ye;try{return ye=n,e()}finally{ye=t}};Tm=function(n,e,t){switch(e){case"input":if(gm(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Mh(r);if(!i)throw Error($(90));bS(r),gm(r,i)}}}break;case"textarea":NS(n,t);break;case"select":e=t.value,e!=null&&To(n,!!t.multiple,e,!1)}};jS=Dy;US=Is;var pN={usingClientEntryPoint:!1,Events:[Ou,mo,Mh,MS,FS,Dy]},Ya={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mN={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=$S(n),n===null?null:n.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||hN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{Dh=$c.inject(mN),Kn=$c}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pN;cn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uy(e))throw Error($(200));return dN(n,e,null,t)};cn.createRoot=function(n,e){if(!Uy(n))throw Error($(299));var t=!1,r="",i=EP;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=My(n,1,!1,null,null,t,!1,r,i),n[Tr]=e.current,Jl(n.nodeType===8?n.parentNode:n),new jy(e)};cn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error($(188)):(n=Object.keys(n).join(","),Error($(268,n)));return n=$S(e),n=n===null?null:n.stateNode,n};cn.flushSync=function(n){return Is(n)};cn.hydrate=function(n,e,t){if(!Gh(e))throw Error($(200));return Hh(null,n,e,!0,t)};cn.hydrateRoot=function(n,e,t){if(!Uy(n))throw Error($(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=EP;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=wP(e,null,n,1,t??null,i,!1,s,o),n[Tr]=e.current,Jl(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Wh(e)};cn.render=function(n,e,t){if(!Gh(e))throw Error($(200));return Hh(null,n,e,!1,t)};cn.unmountComponentAtNode=function(n){if(!Gh(n))throw Error($(40));return n._reactRootContainer?(Is(function(){Hh(null,null,n,!1,function(){n._reactRootContainer=null,n[Tr]=null})}),!0):!1};cn.unstable_batchedUpdates=Dy;cn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Gh(t))throw Error($(200));if(n==null||n._reactInternals===void 0)throw Error($(38));return Hh(n,e,t,!1,r)};cn.version="18.3.1-next-f1338f8080-20240426";function IP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IP)}catch(n){console.error(n)}}IP(),IS.exports=cn;var gN=IS.exports,UE=gN;um.createRoot=UE.createRoot,um.hydrateRoot=UE.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var BE="popstate";function yN(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ng("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:au(i)}return vN(e,t,null,n)}function Le(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Zn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _N(){return Math.random().toString(36).substring(2,10)}function zE(n,e){return{usr:n.state,key:n.key,idx:e}}function ng(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ma(e):e,state:t,key:e&&e.key||r||_N()}}function au({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ma(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function vN(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function h(){a="POP";let C=d(),_=C==null?null:C-c;c=C,l&&l({action:a,location:T.location,delta:_})}function p(C,_){a="PUSH";let w=ng(T.location,C,_);c=d()+1;let E=zE(w,c),N=T.createHref(w);try{o.pushState(E,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(N)}s&&l&&l({action:a,location:T.location,delta:1})}function y(C,_){a="REPLACE";let w=ng(T.location,C,_);c=d();let E=zE(w,c),N=T.createHref(w);o.replaceState(E,"",N),s&&l&&l({action:a,location:T.location,delta:0})}function v(C){return wN(C)}let T={get action(){return a},get location(){return n(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(BE,h),l=C,()=>{i.removeEventListener(BE,h),l=null}},createHref(C){return e(i,C)},createURL:v,encodeLocation(C){let _=v(C);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:y,go(C){return o.go(C)}};return T}function wN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Le(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:au(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function TP(n,e,t="/"){return EN(n,e,t,!1)}function EN(n,e,t,r){let i=typeof e=="string"?ma(e):e,s=Ar(i.pathname||"/",t);if(s==null)return null;let o=SP(n);IN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=DN(s);a=kN(o[l],c,r)}return a}function SP(n,e=[],t=[],r="",i=!1){let s=(o,a,l=i,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;Le(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let h=wr([r,d.relativePath]),p=t.concat(d);o.children&&o.children.length>0&&(Le(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),SP(o.children,e,p,h,l)),!(o.path==null&&!o.index)&&e.push({path:h,score:CN(h,o.index),routesMeta:p})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of PP(o.path))s(o,a,!0,c)}),e}function PP(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=PP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function IN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var TN=/^:[\w-]+$/,SN=3,PN=2,AN=1,xN=10,RN=-2,$E=n=>n==="*";function CN(n,e){let t=n.split("/"),r=t.length;return t.some($E)&&(r+=RN),e&&(r+=PN),t.filter(i=>!$E(i)).reduce((i,s)=>i+(TN.test(s)?SN:s===""?AN:xN),r)}function bN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function kN(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=th({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h&&c&&t&&!r[r.length-1].route.index&&(h=th({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:wr([s,h.pathname]),pathnameBase:MN(wr([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=wr([s,h.pathnameBase]))}return o}function th(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=NN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:h},p)=>{if(d==="*"){let v=a[p]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[p];return h&&!y?c[d]=void 0:c[d]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function NN(n,e=!1,t=!0){Zn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function DN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ar(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function VN(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ma(n):n;return{pathname:t?t.startsWith("/")?t:ON(t,e):e,search:FN(r),hash:jN(i)}}function ON(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Vp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function AP(n){let e=LN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function xP(n,e,t,r=!1){let i;typeof n=="string"?i=ma(n):(i={...n},Le(!i.pathname||!i.pathname.includes("?"),Vp("?","pathname","search",i)),Le(!i.pathname||!i.pathname.includes("#"),Vp("#","pathname","hash",i)),Le(!i.search||!i.search.includes("#"),Vp("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=VN(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var wr=n=>n.join("/").replace(/\/\/+/g,"/"),MN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function UN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var RP=["POST","PUT","PATCH","DELETE"];new Set(RP);var BN=["GET",...RP];new Set(BN);var ga=V.createContext(null);ga.displayName="DataRouter";var Kh=V.createContext(null);Kh.displayName="DataRouterState";V.createContext(!1);var CP=V.createContext({isTransitioning:!1});CP.displayName="ViewTransition";var zN=V.createContext(new Map);zN.displayName="Fetchers";var $N=V.createContext(null);$N.displayName="Await";var ir=V.createContext(null);ir.displayName="Navigation";var Mu=V.createContext(null);Mu.displayName="Location";var Dr=V.createContext({outlet:null,matches:[],isDataRoute:!1});Dr.displayName="Route";var By=V.createContext(null);By.displayName="RouteError";function qN(n,{relative:e}={}){Le(Fu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=V.useContext(ir),{hash:i,pathname:s,search:o}=ju(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:wr([t,s])),r.createHref({pathname:a,search:o,hash:i})}function Fu(){return V.useContext(Mu)!=null}function Fs(){return Le(Fu(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Mu).location}var bP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kP(n){V.useContext(ir).static||V.useLayoutEffect(n)}function WN(){let{isDataRoute:n}=V.useContext(Dr);return n?iD():GN()}function GN(){Le(Fu(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(ga),{basename:e,navigator:t}=V.useContext(ir),{matches:r}=V.useContext(Dr),{pathname:i}=Fs(),s=JSON.stringify(AP(r)),o=V.useRef(!1);return kP(()=>{o.current=!0}),V.useCallback((l,c={})=>{if(Zn(o.current,bP),!o.current)return;if(typeof l=="number"){t.go(l);return}let d=xP(l,JSON.parse(s),i,c.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:wr([e,d.pathname])),(c.replace?t.replace:t.push)(d,c.state,c)},[e,t,s,i,n])}V.createContext(null);function ju(n,{relative:e}={}){let{matches:t}=V.useContext(Dr),{pathname:r}=Fs(),i=JSON.stringify(AP(t));return V.useMemo(()=>xP(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function HN(n,e){return NP(n,e)}function NP(n,e,t,r,i){var w;Le(Fu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=V.useContext(ir),{matches:o}=V.useContext(Dr),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;{let E=h&&h.path||"";DP(c,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=Fs(),y;if(e){let E=typeof e=="string"?ma(e):e;Le(d==="/"||((w=E.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${E.pathname}" was given in the \`location\` prop.`),y=E}else y=p;let v=y.pathname||"/",T=v;if(d!=="/"){let E=d.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let C=TP(n,{pathname:T});Zn(h||C!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Zn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=JN(C&&C.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:wr([d,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:wr([d,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,t,r,i);return e&&_?V.createElement(Mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},_):_}function KN(){let n=rD(),e=UN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:s},"ErrorBoundary")," or"," ",V.createElement("code",{style:s},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:i},t):null,o)}var QN=V.createElement(KN,null),YN=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?V.createElement(Dr.Provider,{value:this.props.routeContext},V.createElement(By.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XN({routeContext:n,match:e,children:t}){let r=V.useContext(ga);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Dr.Provider,{value:n},t)}function JN(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let c=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);Le(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(t)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:h,errors:p}=t,y=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,d,h)=>{let p,y=!1,v=null,T=null;t&&(p=o&&d.route.id?o[d.route.id]:void 0,v=d.route.errorElement||QN,a&&(l<0&&h===0?(DP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,T=null):l===h&&(y=!0,T=d.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,h+1)),_=()=>{let w;return p?w=v:y?w=T:d.route.Component?w=V.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,V.createElement(XN,{match:d,routeContext:{outlet:c,matches:C,isDataRoute:t!=null},children:w})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?V.createElement(YN,{location:t.location,revalidation:t.revalidation,component:v,error:p,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:r}):_()},null)}function zy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZN(n){let e=V.useContext(ga);return Le(e,zy(n)),e}function eD(n){let e=V.useContext(Kh);return Le(e,zy(n)),e}function tD(n){let e=V.useContext(Dr);return Le(e,zy(n)),e}function $y(n){let e=tD(n),t=e.matches[e.matches.length-1];return Le(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function nD(){return $y("useRouteId")}function rD(){var r;let n=V.useContext(By),e=eD("useRouteError"),t=$y("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function iD(){let{router:n}=ZN("useNavigate"),e=$y("useNavigate"),t=V.useRef(!1);return kP(()=>{t.current=!0}),V.useCallback(async(i,s={})=>{Zn(t.current,bP),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var qE={};function DP(n,e,t){!e&&!qE[n]&&(qE[n]=!0,Zn(!1,t))}V.memo(sD);function sD({routes:n,future:e,state:t,unstable_onError:r}){return NP(n,void 0,t,r,e)}function Yi(n){Le(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oD({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){Le(!Fu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=V.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=ma(t));let{pathname:l="/",search:c="",hash:d="",state:h=null,key:p="default"}=t,y=V.useMemo(()=>{let v=Ar(l,o);return v==null?null:{location:{pathname:v,search:c,hash:d,state:h,key:p},navigationType:r}},[o,l,c,d,h,p,r]);return Zn(y!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:V.createElement(ir.Provider,{value:a},V.createElement(Mu.Provider,{children:e,value:y}))}function aD({children:n,location:e}){return HN(rg(n),e)}function rg(n,e=[]){let t=[];return V.Children.forEach(n,(r,i)=>{if(!V.isValidElement(r))return;let s=[...e,i];if(r.type===V.Fragment){t.push.apply(t,rg(r.props.children,s));return}Le(r.type===Yi,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Le(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=rg(r.props.children,s)),t.push(o)}),t}var fd="get",pd="application/x-www-form-urlencoded";function Qh(n){return n!=null&&typeof n.tagName=="string"}function lD(n){return Qh(n)&&n.tagName.toLowerCase()==="button"}function uD(n){return Qh(n)&&n.tagName.toLowerCase()==="form"}function cD(n){return Qh(n)&&n.tagName.toLowerCase()==="input"}function dD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function hD(n,e){return n.button===0&&(!e||e==="_self")&&!dD(n)}var qc=null;function fD(){if(qc===null)try{new FormData(document.createElement("form"),0),qc=!1}catch{qc=!0}return qc}var pD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Op(n){return n!=null&&!pD.has(n)?(Zn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pd}"`),null):n}function mD(n,e){let t,r,i,s,o;if(uD(n)){let a=n.getAttribute("action");r=a?Ar(a,e):null,t=n.getAttribute("method")||fd,i=Op(n.getAttribute("enctype"))||pd,s=new FormData(n)}else if(lD(n)||cD(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ar(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||fd,i=Op(n.getAttribute("formenctype"))||Op(a.getAttribute("enctype"))||pd,s=new FormData(a,n),!fD()){let{name:c,type:d,value:h}=n;if(d==="image"){let p=c?`${c}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else c&&s.append(c,h)}}else{if(Qh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=fd,r=null,i=pd,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function gD(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ar(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function yD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _D(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function vD(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await yD(s,t);return o.links?o.links():[]}return[]}));return TD(r.flat(1).filter(_D).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function WE(n,e,t,r,i,s){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var d;return t[c].pathname!==l.pathname||((d=t[c].route.path)==null?void 0:d.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var h;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function wD(n,e,{includeHydrateFallback:t}={}){return ED(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function ED(n){return[...new Set(n)]}function ID(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function TD(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(ID(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function VP(){let n=V.useContext(ga);return qy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function SD(){let n=V.useContext(Kh);return qy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Wy=V.createContext(void 0);Wy.displayName="FrameworkContext";function OP(){let n=V.useContext(Wy);return qy(n,"You must render this element inside a <HydratedRouter> element"),n}function PD(n,e){let t=V.useContext(Wy),[r,i]=V.useState(!1),[s,o]=V.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,p=V.useRef(null);V.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let T=_=>{_.forEach(w=>{o(w.isIntersecting)})},C=new IntersectionObserver(T,{threshold:.5});return p.current&&C.observe(p.current),()=>{C.disconnect()}}},[n]),V.useEffect(()=>{if(r){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[r]);let y=()=>{i(!0)},v=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,p,{}]:[s,p,{onFocus:Xa(a,y),onBlur:Xa(l,v),onMouseEnter:Xa(c,y),onMouseLeave:Xa(d,v),onTouchStart:Xa(h,y)}]:[!1,p,{}]}function Xa(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function AD({page:n,...e}){let{router:t}=VP(),r=V.useMemo(()=>TP(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?V.createElement(RD,{page:n,matches:r,...e}):null}function xD(n){let{manifest:e,routeModules:t}=OP(),[r,i]=V.useState([]);return V.useEffect(()=>{let s=!1;return vD(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function RD({page:n,matches:e,...t}){let r=Fs(),{manifest:i,routeModules:s}=OP(),{basename:o}=VP(),{loaderData:a,matches:l}=SD(),c=V.useMemo(()=>WE(n,e,l,i,r,"data"),[n,e,l,i,r]),d=V.useMemo(()=>WE(n,e,l,i,r,"assets"),[n,e,l,i,r]),h=V.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let v=new Set,T=!1;if(e.forEach(_=>{var E;let w=i.routes[_.route.id];!w||!w.hasLoader||(!c.some(N=>N.route.id===_.route.id)&&_.route.id in a&&((E=s[_.route.id])!=null&&E.shouldRevalidate)||w.hasClientLoader?T=!0:v.add(_.route.id))}),v.size===0)return[];let C=gD(n,o,"data");return T&&v.size>0&&C.searchParams.set("_routes",e.filter(_=>v.has(_.route.id)).map(_=>_.route.id).join(",")),[C.pathname+C.search]},[o,a,r,i,c,e,n,s]),p=V.useMemo(()=>wD(d,i),[d,i]),y=xD(d);return V.createElement(V.Fragment,null,h.map(v=>V.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),p.map(v=>V.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),y.map(({key:v,link:T})=>V.createElement("link",{key:v,nonce:t.nonce,...T})))}function CD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var LP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LP&&(window.__reactRouterVersion="7.8.2")}catch{}function bD({basename:n,children:e,window:t}){let r=V.useRef();r.current==null&&(r.current=yN({window:t,v5Compat:!0}));let i=r.current,[s,o]=V.useState({action:i.action,location:i.location}),a=V.useCallback(l=>{V.startTransition(()=>o(l))},[o]);return V.useLayoutEffect(()=>i.listen(a),[i,a]),V.createElement(oD,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var MP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FP=V.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h,...p},y){let{basename:v}=V.useContext(ir),T=typeof c=="string"&&MP.test(c),C,_=!1;if(typeof c=="string"&&T&&(C=c,LP))try{let P=new URL(window.location.href),A=c.startsWith("//")?new URL(P.protocol+c):new URL(c),b=Ar(A.pathname,v);A.origin===P.origin&&b!=null?c=b+A.search+A.hash:_=!0}catch{Zn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=qN(c,{relative:i}),[E,N,D]=PD(r,p),F=DD(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function x(P){e&&e(P),P.defaultPrevented||F(P)}let I=V.createElement("a",{...p,...D,href:C||w,onClick:_||s?e:x,ref:CD(y,N),target:l,"data-discover":!T&&t==="render"?"true":void 0});return E&&!T?V.createElement(V.Fragment,null,I,V.createElement(AD,{page:w})):I});FP.displayName="Link";var Xi=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},d){let h=ju(o,{relative:c.relative}),p=Fs(),y=V.useContext(Kh),{navigator:v,basename:T}=V.useContext(ir),C=y!=null&&FD(h)&&a===!0,_=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=p.pathname,E=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(w=w.toLowerCase(),E=E?E.toLowerCase():null,_=_.toLowerCase()),E&&T&&(E=Ar(E,T)||E);const N=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=w===_||!i&&w.startsWith(_)&&w.charAt(N)==="/",F=E!=null&&(E===_||!i&&E.startsWith(_)&&E.charAt(_.length)==="/"),x={isActive:D,isPending:F,isTransitioning:C},I=D?e:void 0,P;typeof r=="function"?P=r(x):P=[r,D?"active":null,F?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let A=typeof s=="function"?s(x):s;return V.createElement(FP,{...c,"aria-current":I,className:P,ref:d,style:A,to:o,viewTransition:a},typeof l=="function"?l(x):l)});Xi.displayName="NavLink";var kD=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=fd,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:h,...p},y)=>{let v=LD(),T=MD(a,{relative:c}),C=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&MP.test(a),w=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let N=E.nativeEvent.submitter,D=(N==null?void 0:N.getAttribute("formmethod"))||o;v(N||E.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:i,state:s,relative:c,preventScrollReset:d,viewTransition:h})};return V.createElement("form",{ref:y,method:C,action:T,onSubmit:r?l:w,...p,"data-discover":!_&&n==="render"?"true":void 0})});kD.displayName="Form";function ND(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jP(n){let e=V.useContext(ga);return Le(e,ND(n)),e}function DD(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=WN(),l=Fs(),c=ju(n,{relative:s});return V.useCallback(d=>{if(hD(d,e)){d.preventDefault();let h=t!==void 0?t:au(l)===au(c);a(n,{replace:h,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,t,r,e,n,i,s,o])}var VD=0,OD=()=>`__${String(++VD)}__`;function LD(){let{router:n}=jP("useSubmit"),{basename:e}=V.useContext(ir),t=nD();return V.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=mD(r,e);if(i.navigate===!1){let d=i.fetcherKey||OD();await n.fetch(d,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function MD(n,{relative:e}={}){let{basename:t}=V.useContext(ir),r=V.useContext(Dr);Le(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ju(n||".",{relative:e})},o=Fs();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let d=a.toString();s.search=d?`?${d}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:wr([t,s.pathname])),au(s)}function FD(n,{relative:e}={}){let t=V.useContext(CP);Le(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=jP("useViewTransitionState"),i=ju(n,{relative:e});if(!t.isTransitioning)return!1;let s=Ar(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ar(t.nextLocation.pathname,r)||t.nextLocation.pathname;return th(i.pathname,o)!=null||th(i.pathname,s)!=null}const jD=()=>{};var GE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},UD=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},BP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(p=64)),r.push(t[d],t[h],t[p],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(UP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):UD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new BD;const p=s<<2|a>>4;if(r.push(p),c!==64){const y=a<<4&240|c>>2;if(r.push(y),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zD=function(n){const e=UP(n);return BP.encodeByteArray(e,!0)},nh=function(n){return zD(n).replace(/\./g,"")},Gy=function(n){try{return BP.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rh(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!$D(t)||(n[t]=rh(n[t],e[t]));return n}function $D(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=()=>Hy().__FIREBASE_DEFAULTS__,WD=()=>{if(typeof process>"u"||typeof GE>"u")return;const n=GE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Gy(n[1]);return e&&JSON.parse(e)},Ky=()=>{try{return jD()||qD()||WD()||GD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qy=()=>{var n;return(n=Ky())==null?void 0:n.config},HD=n=>{var e;return(e=Ky())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zP(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[nh(JSON.stringify(t)),nh(JSON.stringify(o)),""].join(".")}const Rl={};function YD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Rl))Rl[e]?n.emulator.push(e):n.prod.push(e);return n}function XD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let HE=!1;function $P(n,e){if(typeof window>"u"||typeof document>"u"||!ya(window.location.host)||Rl[n]===e||Rl[n]||HE)return;Rl[n]=e;function t(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=YD().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{HE=!0,o()},p}function d(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=XD(r),y=t("text"),v=document.getElementById(y)||document.createElement("span"),T=t("learnmore"),C=document.getElementById(T)||document.createElement("a"),_=t("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const E=p.element;a(E),d(C,T);const N=c();l(w,_),E.append(w,v,C,N),document.body.appendChild(E)}s?(v.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function Yh(){var e;const n=(e=Ky())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZD(){return typeof window<"u"||qP()}function qP(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function eV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Yy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GP(){const n=Fe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function HP(){return!Yh()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KP(){return!Yh()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function lu(){try{return typeof indexedDB=="object"}catch{return!1}}function tV(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="FirebaseError";class Mt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=nV,Object.setPrototypeOf(this,Mt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,js.prototype.create)}}class js{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?rV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Mt(i,a,r)}}function rV(n,e){return n.replace(iV,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const iV=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function sV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ei(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(QE(s)&&QE(o)){if(!Ei(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function QE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Io(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function dl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function QP(n,e){const t=new oV(n,e);return t.subscribe.bind(t)}class oV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");aV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Lp),i.error===void 0&&(i.error=Lp),i.complete===void 0&&(i.complete=Lp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(n){return n&&n._delegate?n._delegate:n}class er{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new KD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cV(e))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ji){return this.instances.has(e)}getOptions(e=Ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ji){return this.component?this.component.multipleInstances?e:Ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uV(n){return n===Ji?void 0:n}function cV(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=[];var ie;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ie||(ie={}));const XP={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},dV=ie.INFO,hV={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},fV=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=hV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xh{constructor(e){this.name=e,this._logLevel=dV,this._logHandler=fV,this._userLogHandler=null,Xy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}function pV(n){Xy.forEach(e=>{e.setLogLevel(n)})}function mV(n,e){for(const t of Xy){let r=null;e&&e.level&&(r=XP[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&n({level:ie[s].toLowerCase(),message:a,args:o,type:i.name})}}}const gV=(n,e)=>e.some(t=>n instanceof t);let YE,XE;function yV(){return YE||(YE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _V(){return XE||(XE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JP=new WeakMap,ig=new WeakMap,ZP=new WeakMap,Mp=new WeakMap,Jy=new WeakMap;function vV(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(pi(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&JP.set(t,n)}).catch(()=>{}),Jy.set(e,n),e}function wV(n){if(ig.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});ig.set(n,e)}let sg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ig.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ZP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function EV(n){sg=n(sg)}function IV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Fp(this),e,...t);return ZP.set(r,e.sort?e.sort():[e]),pi(r)}:_V().includes(n)?function(...e){return n.apply(Fp(this),e),pi(JP.get(this))}:function(...e){return pi(n.apply(Fp(this),e))}}function TV(n){return typeof n=="function"?IV(n):(n instanceof IDBTransaction&&wV(n),gV(n,yV())?new Proxy(n,sg):n)}function pi(n){if(n instanceof IDBRequest)return vV(n);if(Mp.has(n))return Mp.get(n);const e=TV(n);return e!==n&&(Mp.set(n,e),Jy.set(e,n)),e}const Fp=n=>Jy.get(n);function SV(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=pi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(pi(o.result),l.oldVersion,l.newVersion,pi(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const PV=["get","getKey","getAll","getAllKeys","count"],AV=["put","add","delete","clear"],jp=new Map;function JE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(jp.get(e))return jp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=AV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PV.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return jp.set(e,s),s}EV(n=>({...n,get:(e,t,r)=>JE(e,t)||n.get(e,t,r),has:(e,t)=>!!JE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RV(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function RV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ih="@firebase/app",og="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new Xh("@firebase/app"),CV="@firebase/app-compat",bV="@firebase/analytics-compat",kV="@firebase/analytics",NV="@firebase/app-check-compat",DV="@firebase/app-check",VV="@firebase/auth",OV="@firebase/auth-compat",LV="@firebase/database",MV="@firebase/data-connect",FV="@firebase/database-compat",jV="@firebase/functions",UV="@firebase/functions-compat",BV="@firebase/installations",zV="@firebase/installations-compat",$V="@firebase/messaging",qV="@firebase/messaging-compat",WV="@firebase/performance",GV="@firebase/performance-compat",HV="@firebase/remote-config",KV="@firebase/remote-config-compat",QV="@firebase/storage",YV="@firebase/storage-compat",XV="@firebase/firestore",JV="@firebase/ai",ZV="@firebase/firestore-compat",eO="firebase",tO="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="[DEFAULT]",nO={[ih]:"fire-core",[CV]:"fire-core-compat",[kV]:"fire-analytics",[bV]:"fire-analytics-compat",[DV]:"fire-app-check",[NV]:"fire-app-check-compat",[VV]:"fire-auth",[OV]:"fire-auth-compat",[LV]:"fire-rtdb",[MV]:"fire-data-connect",[FV]:"fire-rtdb-compat",[jV]:"fire-fn",[UV]:"fire-fn-compat",[BV]:"fire-iid",[zV]:"fire-iid-compat",[$V]:"fire-fcm",[qV]:"fire-fcm-compat",[WV]:"fire-perf",[GV]:"fire-perf-compat",[HV]:"fire-rc",[KV]:"fire-rc-compat",[QV]:"fire-gcs",[YV]:"fire-gcs-compat",[XV]:"fire-fst",[ZV]:"fire-fst-compat",[JV]:"fire-vertex","fire-js":"fire-js",[eO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new Map,$o=new Map,qo=new Map;function uu(n,e){try{n.container.addComponent(e)}catch(t){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function eA(n,e){n.container.addOrOverwriteComponent(e)}function Si(n){const e=n.name;if(qo.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;qo.set(e,n);for(const t of Ti.values())uu(t,n);for(const t of $o.values())uu(t,n);return!0}function tA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rO(n,e,t=Ii){tA(n,e).clearInstance(t)}function Zy(n){return n.options!==void 0}function nA(n){return Zy(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function ke(n){return n==null?!1:n.settings!==void 0}function iO(){qo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},an=new js("app","Firebase",sO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rA=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n,e){const t=Gy(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(t).exp*1e3,s=new Date().getTime();i-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class oO extends rA{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig={automaticDataCollectionEnabled:s,...t},this._serverConfig.authIdToken&&ZE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&ZE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,bn(ih,og,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){t_(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw an.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=tO;function e_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Ii,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw an.create("bad-app-name",{appName:String(i)});if(t||(t=Qy()),!t)throw an.create("no-options");const s=Ti.get(i);if(s){if(Ei(t,s.options)&&Ei(r,s.config))return s;throw an.create("duplicate-app",{appName:i})}const o=new YP(i);for(const l of qo.values())o.addComponent(l);const a=new rA(t,r,o);return Ti.set(i,a),a}function aO(n,e={}){if(ZD()&&!qP())throw an.create("invalid-server-app-environment");let t,r=e||{};if(n&&(Zy(n)?t=n.options:nA(n)?r=n:t=n),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=Qy()),!t)throw an.create("no-options");const i={...r,...t};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const s=d=>[...d].reduce((h,p)=>Math.imul(31,h)+p.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw an.create("finalization-registry-not-supported",{});const o=""+s(JSON.stringify(i)),a=$o.get(o);if(a)return a.incRefCount(r.releaseOnDeref),a;const l=new YP(o);for(const d of qo.values())l.addComponent(d);const c=new oO(t,r,o,l);return $o.set(o,c),c}function lO(n=Ii){const e=Ti.get(n);if(!e&&n===Ii&&Qy())return e_();if(!e)throw an.create("no-app",{appName:n});return e}function uO(){return Array.from(Ti.values())}async function t_(n){let e=!1;const t=n.name;Ti.has(t)?(e=!0,Ti.delete(t)):$o.has(t)&&n.decRefCount()<=0&&($o.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function bn(n,e,t){let r=nO[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(o.join(" "));return}Si(new er(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function iA(n,e){if(n!==null&&typeof n!="function")throw an.create("invalid-log-argument");mV(n,e)}function sA(n){pV(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="firebase-heartbeat-database",dO=1,cu="firebase-heartbeat-store";let Up=null;function oA(){return Up||(Up=SV(cO,dO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cu)}catch(t){console.warn(t)}}}}).catch(n=>{throw an.create("idb-open",{originalErrorMessage:n.message})})),Up}async function hO(n){try{const t=(await oA()).transaction(cu),r=await t.objectStore(cu).get(aA(n));return await t.done,r}catch(e){if(e instanceof Mt)xr.warn(e.message);else{const t=an.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xr.warn(t.message)}}}async function eI(n,e){try{const r=(await oA()).transaction(cu,"readwrite");await r.objectStore(cu).put(e,aA(n)),await r.done}catch(t){if(t instanceof Mt)xr.warn(t.message);else{const r=an.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xr.warn(r.message)}}}function aA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=1024,pO=30;class mO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>pO){const o=_O(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tI(),{heartbeatsToSend:r,unsentEntries:i}=gO(this._heartbeatsCache.heartbeats),s=nh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return xr.warn(t),""}}}function tI(){return new Date().toISOString().substring(0,10)}function gO(n,e=fO){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),nI(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),nI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class yO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lu()?tV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return eI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return eI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function nI(n){return nh(JSON.stringify({version:2,heartbeats:n})).length}function _O(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n){Si(new er("platform-logger",e=>new xV(e),"PRIVATE")),Si(new er("heartbeat",e=>new mO(e),"PRIVATE")),bn(ih,og,n),bn(ih,og,"esm2020"),bn("fire-js","")}vO("");const wO=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Mt,SDK_VERSION:Li,_DEFAULT_ENTRY_NAME:Ii,_addComponent:uu,_addOrOverwriteComponent:eA,_apps:Ti,_clearComponents:iO,_components:qo,_getProvider:tA,_isFirebaseApp:Zy,_isFirebaseServerApp:ke,_isFirebaseServerAppSettings:nA,_registerComponent:Si,_removeServiceInstance:rO,_serverApps:$o,deleteApp:t_,getApp:lO,getApps:uO,initializeApp:e_,initializeServerApp:aO,onLog:iA,registerVersion:bn,setLogLevel:sA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,t){this._delegate=e,this.firebase=t,uu(e,new er("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),t_(this._delegate)))}_getService(e,t=Ii){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ii){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){uu(this._delegate,e)}_addOrOverwriteComponent(e){eA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},rI=new js("app-compat","Firebase",IO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:bn,setLogLevel:sA,onLog:iA,apps:null,SDK_VERSION:Li,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:wO}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Ii,!KE(e,c))throw rI.create("no-app",{appName:c});return e[c]}i.App=n;function s(c,d={}){const h=e_(c,d);if(KE(e,h.name))return e[h.name];const p=new n(h,t);return e[h.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,h=d.replace("-compat","");if(Si(c)&&c.type==="PUBLIC"){const p=(y=i())=>{if(typeof y[h]!="function")throw rI.create("invalid-app-argument",{appName:d});return y[h]()};c.serviceProps!==void 0&&rh(p,c.serviceProps),t[h]=p,n.prototype[h]=function(...y){return this._getService.bind(this,d).apply(this,c.multipleInstances?y:[])}}return c.type==="PUBLIC"?t[h]:null}function l(c,d){return d==="serverAuth"?null:d}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(){const n=TO(EO);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:lA,extendNamespace:e,createSubscribe:QP,ErrorFactory:js,deepExtend:rh};function e(t){rh(n,t)}return n}const SO=lA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Xh("@firebase/app-compat"),PO="@firebase/app-compat",AO="0.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(n){bn(PO,AO,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=Hy();if(n.firebase!==void 0){iI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&iI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Rr=SO;xO();var RO="firebase",CO="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr.registerVersion(RO,CO,"app-compat");const Ja={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Xs={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function uA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kO=bO,NO=uA,cA=new js("auth","Firebase",uA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Xh("@firebase/auth");function DO(n,...e){sh.logLevel<=ie.WARN&&sh.warn(`Auth (${Li}): ${n}`,...e)}function md(n,...e){sh.logLevel<=ie.ERROR&&sh.error(`Auth (${Li}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(n,...e){throw r_(n,...e)}function rt(n,...e){return r_(n,...e)}function n_(n,e,t){const r={...NO(),[e]:t};return new js("auth","Firebase",r).create(e,{appName:n.name})}function ut(n){return n_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function va(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&_t(n,"argument-error"),n_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function r_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return cA.create(n,...e)}function z(n,e,...t){if(!n)throw r_(e,...t)}function qn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw md(e),new Error(e)}function Vn(n,e){n||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function i_(){return sI()==="http:"||sI()==="https:"}function sI(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i_()||WP()||"connection"in navigator)?navigator.onLine:!0}function OO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vn(t>e,"Short delay should be less than long delay!"),this.isMobile=JD()||Yy()}get(){return VO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(n,e){Vn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FO=new Uu(3e4,6e4);function $e(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function qe(n,e,t,r,i={}){return hA(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=_a({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...s};return eV()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&ya(n.emulatorConfig.host)&&(c.credentials="include"),dA.fetch()(await fA(n,n.config.apiHost,t,a),c)})}async function hA(n,e,t){n._canInitEmulator=!1;const r={...LO,...e};try{const i=new UO(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw hl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hl(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw hl(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw hl(n,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw n_(n,d,c);_t(n,d)}}catch(i){if(i instanceof Mt)throw i;_t(n,"network-request-failed",{message:String(i)})}}async function Vr(n,e,t,r,i={}){const s=await qe(n,e,t,r,i);return"mfaPendingCredential"in s&&_t(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function fA(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?s_(n.config,i):`${n.config.apiScheme}://${i}`;return MO.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function jO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class UO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(rt(this.auth,"network-request-failed")),FO.get())})}}function hl(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=rt(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n){return n!==void 0&&n.getResponse!==void 0}function aI(n){return n!==void 0&&n.enterprise!==void 0}class pA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(n){return(await qe(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function mA(n,e){return qe(n,"GET","/v2/recaptchaConfig",$e(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(n,e){return qe(n,"POST","/v1/accounts:delete",e)}async function $O(n,e){return qe(n,"POST","/v1/accounts:update",e)}async function oh(n,e){return qe(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qO(n,e=!1){const t=ee(n),r=await t.getIdToken(e),i=Jh(r);z(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Cl(Bp(i.auth_time)),issuedAtTime:Cl(Bp(i.iat)),expirationTime:Cl(Bp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Bp(n){return Number(n)*1e3}function Jh(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return md("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gy(t);return i?JSON.parse(i):(md("Failed to decode base64 JWT payload"),null)}catch(i){return md("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function lI(n){const e=Jh(n);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cr(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Mt&&WO(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function WO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(n){var h;const e=n.auth,t=await n.getIdToken(),r=await Cr(n,oh(e,{idToken:t}));z(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?gA(i.providerUserInfo):[],o=KO(n.providerData,s),a=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ag(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(n,d)}async function HO(n){const e=ee(n);await hu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KO(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function gA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(n,e){const t=await hA(n,{},async()=>{const r=_a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await fA(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&ya(n.emulatorConfig.host)&&(l.credentials="include"),dA.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function YO(n,e){return qe(n,"POST","/v2/accounts:revokeToken",$e(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){z(e.length!==0,"internal-error");const t=lI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await QO(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Co;return r&&(z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(n,e){z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class xn{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new GO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ag(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Cr(this,this.stsTokenManager.getToken(this.auth,e));return z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qO(this,e)}reload(){return HO(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ke(this.auth.app))return Promise.reject(ut(this.auth));const e=await this.getIdToken();return await Cr(this,zO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:y,providerData:v,stsTokenManager:T}=t;z(h&&T,e,"internal-error");const C=Co.fromJSON(this.name,T);z(typeof h=="string",e,"internal-error"),qr(r,e.name),qr(i,e.name),z(typeof p=="boolean",e,"internal-error"),z(typeof y=="boolean",e,"internal-error"),qr(s,e.name),qr(o,e.name),qr(a,e.name),qr(l,e.name),qr(c,e.name),qr(d,e.name);const _=new xn({uid:h,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:C,createdAt:c,lastLoginAt:d});return v&&Array.isArray(v)&&(_.providerData=v.map(w=>({...w}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,t,r=!1){const i=new Co;i.updateFromServerResponse(t);const s=new xn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await hu(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];z(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?gA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Co;a.updateFromIdToken(r);const l=new xn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ag(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=new Map;function sn(n){Vn(n instanceof Function,"Expected a class definition");let e=uI.get(n);return e?(Vn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yA.type="NONE";const Wo=yA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n,e,t){return`firebase:${n}:${e}:${t}`}class bo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ms(this.userKey,i.apiKey,s),this.fullPersistenceKey=ms("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await oh(this.auth,{idToken:e}).catch(()=>{});return t?xn._fromGetAccountInfoResponse(this.auth,t,e):null}return xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new bo(sn(Wo),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||sn(Wo);const o=ms(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await oh(e,{idToken:d}).catch(()=>{});if(!p)break;h=await xn._fromGetAccountInfoResponse(e,p,d)}else h=xn._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new bo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new bo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_A(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IA(e))return"Blackberry";if(TA(e))return"Webos";if(vA(e))return"Safari";if((e.includes("chrome/")||wA(e))&&!e.includes("edge/"))return"Chrome";if(Bu(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _A(n=Fe()){return/firefox\//i.test(n)}function vA(n=Fe()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wA(n=Fe()){return/crios\//i.test(n)}function EA(n=Fe()){return/iemobile/i.test(n)}function Bu(n=Fe()){return/android/i.test(n)}function IA(n=Fe()){return/blackberry/i.test(n)}function TA(n=Fe()){return/webos/i.test(n)}function zu(n=Fe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function XO(n=Fe()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function JO(n=Fe()){var e;return zu(n)&&!!((e=window.navigator)!=null&&e.standalone)}function ZO(){return GP()&&document.documentMode===10}function SA(n=Fe()){return zu(n)||Bu(n)||TA(n)||IA(n)||/windows phone/i.test(n)||EA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(n,e=[]){let t;switch(n){case"Browser":t=cI(Fe());break;case"Worker":t=`${cI(Fe())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Li}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(n,e={}){return qe(n,"GET","/v2/passwordPolicy",$e(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=6;class rL{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??nL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dI(this),this.idTokenSubscription=new dI(this),this.beforeStateQueue=new eL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sn(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await oh(this,{idToken:e}),r=await xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ke(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ke(this.app))return Promise.reject(ut(this));const t=e?ee(e):null;return t&&z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ke(this.app)?Promise.reject(ut(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ke(this.app)?Promise.reject(ut(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tL(this),t=new rL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new js("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await YO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&sn(e)||this._popupRedirectResolver;z(t,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[sn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(ke(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&DO(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function je(n){return ee(n)}class dI{constructor(e){this.auth=e,this.observer=null,this.addObserver=QP(t=>this.observer=t)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sL(n){$u=n}function o_(n){return $u.loadJS(n)}function oL(){return $u.recaptchaV2Script}function aL(){return $u.recaptchaEnterpriseScript}function lL(){return $u.gapiScript}function AA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=500,cL=6e4,Wc=1e12;class dL{constructor(e){this.auth=e,this.counter=Wc,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new pL(e,this.auth.name,t||{})),this.counter++,r}reset(e){var r;const t=e||Wc;(r=this._widgets.get(t))==null||r.delete(),this._widgets.delete(t)}getResponse(e){var r;const t=e||Wc;return((r=this._widgets.get(t))==null?void 0:r.getResponse())||""}async execute(e){var r;const t=e||Wc;return(r=this._widgets.get(t))==null||r.execute(),""}}class hL{constructor(){this.enterprise=new fL}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class fL{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pL{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;z(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=mL(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},cL)},uL))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function mL(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const gL="recaptcha-enterprise",bl="NO_RECAPTCHA";class xA{constructor(e){this.type=gL,this.auth=je(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{mA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new pA(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;aI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(bl)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hL().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&aI(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=aL();l.length!==0&&(l+=a),o_(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Za(n,e,t,r=!1,i=!1){const s=new xA(n);let o;if(i)o=bl;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function mi(n,e,t,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Za(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Za(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Za(n,e,t);return r(n,a).catch(async l=>{var c;if(((c=n._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const d=await Za(n,e,t,!1,!0);return r(n,d)}return Promise.reject(l)})}else{const a=await Za(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}async function yL(n){const e=je(n),t=await mA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new pA(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new xA(e).verify()}function _L(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(sn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vL(n,e,t){const r=je(n);z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=RA(e),{host:o,port:a}=wL(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),z(Ei(c,r.config.emulator)&&Ei(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ya(o)?(zP(`${s}//${o}${l}`),$P("Auth",!0)):i||EL()}function RA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wL(n){const e=RA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:hI(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:hI(o)}}}function hI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function EL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,t){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(n,e){return qe(n,"POST","/v1/accounts:resetPassword",$e(n,e))}async function IL(n,e){return qe(n,"POST","/v1/accounts:update",e)}async function TL(n,e){return qe(n,"POST","/v1/accounts:signUp",e)}async function SL(n,e){return qe(n,"POST","/v1/accounts:update",$e(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(n,e){return Vr(n,"POST","/v1/accounts:signInWithPassword",$e(n,e))}async function Zh(n,e){return qe(n,"POST","/v1/accounts:sendOobCode",$e(n,e))}async function AL(n,e){return Zh(n,e)}async function xL(n,e){return Zh(n,e)}async function RL(n,e){return Zh(n,e)}async function CL(n,e){return Zh(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bL(n,e){return Vr(n,"POST","/v1/accounts:signInWithEmailLink",$e(n,e))}async function kL(n,e){return Vr(n,"POST","/v1/accounts:signInWithEmailLink",$e(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends wa{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new fu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new fu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mi(e,t,"signInWithPassword",PL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return bL(e,{email:this._email,oobCode:this._password});default:_t(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mi(e,r,"signUpPassword",TL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return kL(e,{idToken:t,email:this._email,oobCode:this._password});default:_t(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Er(n,e){return Vr(n,"POST","/v1/accounts:signInWithIdp",$e(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL="http://localhost";class tr extends wa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new tr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_t("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const o=new tr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Er(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Er(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Er(e,t)}buildRequest(){const e={requestUri:NL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_a(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(n,e){return qe(n,"POST","/v1/accounts:sendVerificationCode",$e(n,e))}async function DL(n,e){return Vr(n,"POST","/v1/accounts:signInWithPhoneNumber",$e(n,e))}async function VL(n,e){const t=await Vr(n,"POST","/v1/accounts:signInWithPhoneNumber",$e(n,e));if(t.temporaryProof)throw hl(n,"account-exists-with-different-credential",t);return t}const OL={USER_NOT_FOUND:"user-not-found"};async function LL(n,e){const t={...e,operation:"REAUTH"};return Vr(n,"POST","/v1/accounts:signInWithPhoneNumber",$e(n,t),OL)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends wa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new gs({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new gs({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return DL(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return VL(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return LL(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new gs({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FL(n){const e=Io(dl(n)).link,t=e?Io(dl(e)).deep_link_id:null,r=Io(dl(n)).deep_link_id;return(r?Io(dl(r)).link:null)||r||t||e||n}class ef{constructor(e){const t=Io(dl(e)),r=t.apiKey??null,i=t.oobCode??null,s=ML(t.mode??null);z(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=FL(e);try{return new ef(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.providerId=Mi.PROVIDER_ID}static credential(e,t){return fu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ef.parseLink(t);return z(r,"argument-error"),fu._fromEmailAndCode(e,r.code,r.tenantId)}}Mi.PROVIDER_ID="password";Mi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends Or{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ko extends Ea{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return z("providerId"in t&&"signInMethod"in t,"argument-error"),tr._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return z(e.idToken||e.accessToken,"argument-error"),tr._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return ko.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ko.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!t&&!s||!a)return null;try{return new ko(a)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Ea{constructor(){super("facebook.com")}static credential(e){return tr._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Un.credential(e.oauthAccessToken)}catch{return null}}}Un.FACEBOOK_SIGN_IN_METHOD="facebook.com";Un.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends Ea{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tr._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Bn.credential(t,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Ea{constructor(){super("github.com")}static credential(e){return tr._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zn.credential(e.oauthAccessToken)}catch{return null}}}zn.GITHUB_SIGN_IN_METHOD="github.com";zn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="http://localhost";class Go extends wa{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Er(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Er(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Er(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new Go(r,s)}static _create(e,t){return new Go(e,t)}buildRequest(){return{requestUri:jL,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="saml.";class ah extends Or{constructor(e){z(e.startsWith(UL),"argument-error"),super(e)}static credentialFromResult(e){return ah.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ah.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Go.fromJSON(e);return z(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Go._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Ea{constructor(){super("twitter.com")}static credential(e,t){return tr._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return $n.credential(t,r)}catch{return null}}}$n.TWITTER_SIGN_IN_METHOD="twitter.com";$n.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(n,e){return Vr(n,"POST","/v1/accounts:signUp",$e(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await xn._fromIdTokenResponse(e,r,i),o=pI(r);return new wn({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=pI(r);return new wn({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function pI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(n){var i;if(ke(n.app))return Promise.reject(ut(n));const e=je(n);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new wn({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await bA(e,{returnSecureToken:!0}),r=await wn._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends Mt{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new lh(e,t,r,i)}}function kA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL(n,e){const t=ee(n);await tf(!0,t,e);const{providerUserInfo:r}=await $O(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=NA(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function a_(n,e,t=!1){const r=await Cr(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return wn._forOperation(n,"link",r)}async function tf(n,e,t){await hu(e);const r=NA(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";z(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(n,e,t=!1){const{auth:r}=n;if(ke(r.app))return Promise.reject(ut(r));const i="reauthenticate";try{const s=await Cr(n,kA(r,i,e,n),t);z(s.idToken,r,"internal-error");const o=Jh(s.idToken);z(o,r,"internal-error");const{sub:a}=o;return z(n.uid===a,r,"user-mismatch"),wn._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&_t(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(n,e,t=!1){if(ke(n.app))return Promise.reject(ut(n));const r="signIn",i=await kA(n,r,e),s=await wn._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function nf(n,e){return VA(je(n),e)}async function OA(n,e){const t=ee(n);return await tf(!1,t,e.providerId),a_(t,e)}async function LA(n,e){return DA(ee(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(n,e){return Vr(n,"POST","/v1/accounts:signInWithCustomToken",$e(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL(n,e){if(ke(n.app))return Promise.reject(ut(n));const t=je(n),r=await $L(t,{token:e,returnSecureToken:!0}),i=await wn._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?l_._fromServerResponse(e,t):"totpInfo"in t?u_._fromServerResponse(e,t):_t(e,"internal-error")}}class l_ extends qu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new l_(t)}}class u_ extends qu{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new u_(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(n,e,t){var r;z(((r=t.url)==null?void 0:r.length)>0,n,"invalid-continue-uri"),z(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),z(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(z(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(z(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_(n){const e=je(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WL(n,e,t){const r=je(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&rf(r,i,t),await mi(r,i,"getOobCode",xL,"EMAIL_PASSWORD_PROVIDER")}async function GL(n,e,t){await CA(ee(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&c_(n),r})}async function HL(n,e){await SL(ee(n),{oobCode:e})}async function MA(n,e){const t=ee(n),r=await CA(t,{oobCode:e}),i=r.requestType;switch(z(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(r.mfaInfo,t,"internal-error");default:z(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=qu._fromServerResponse(je(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function KL(n,e){const{data:t}=await MA(ee(n),e);return t.email}async function QL(n,e,t){if(ke(n.app))return Promise.reject(ut(n));const r=je(n),o=await mi(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bA,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&c_(n),l}),a=await wn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function YL(n,e,t){return ke(n.app)?Promise.reject(ut(n)):nf(ee(n),Mi.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&c_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(n,e,t){const r=je(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){z(a.handleCodeInApp,r,"argument-error"),a&&rf(r,o,a)}s(i,t),await mi(r,i,"getOobCode",RL,"EMAIL_PASSWORD_PROVIDER")}function JL(n,e){const t=ef.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function ZL(n,e,t){if(ke(n.app))return Promise.reject(ut(n));const r=ee(n),i=Mi.credentialWithLink(e,t||du());return z(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),nf(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(n,e){return qe(n,"POST","/v1/accounts:createAuthUri",$e(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(n,e){const t=i_()?du():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await eM(ee(n),r);return i||[]}async function nM(n,e){const t=ee(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&rf(t.auth,i,e);const{email:s}=await AL(t.auth,i);s!==n.email&&await n.reload()}async function rM(n,e,t){const r=ee(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&rf(r.auth,s,t);const{email:o}=await CL(r.auth,s);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(n,e){return qe(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ee(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Cr(r,iM(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function oM(n,e){const t=ee(n);return ke(t.auth.app)?Promise.reject(ut(t.auth)):FA(t,e,null)}function aM(n,e){return FA(ee(n),null,e)}async function FA(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=await Cr(n,IL(r,s));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(n){var i,s;if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(n!=null&&n.idToken)){const o=(s=(i=Jh(n.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new No(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new uM(r,t);case"github.com":return new cM(r,t);case"google.com":return new dM(r,t);case"twitter.com":return new hM(r,t,n.screenName||null);case"custom":case"anonymous":return new No(r,null);default:return new No(r,e,t)}}class No{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class jA extends No{constructor(e,t,r,i){super(e,t,r),this.username=i}}class uM extends No{constructor(e,t){super(e,"facebook.com",t)}}class cM extends jA{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class dM extends No{constructor(e,t){super(e,"google.com",t)}}class hM extends jA{constructor(e,t,r){super(e,"twitter.com",t,r)}}function fM(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:lM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new us("enroll",e,t)}static _fromMfaPendingCredential(e){return new us("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return us._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return us._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=je(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>qu._fromServerResponse(r,a));z(i.mfaPendingCredential,r,"internal-error");const o=us._fromMfaPendingCredential(i.mfaPendingCredential);return new d_(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c={...i,idToken:l.idToken,refreshToken:l.refreshToken};switch(t.operationType){case"signIn":const d=await wn._fromIdTokenResponse(r,t.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return z(t.user,r,"internal-error"),wn._forOperation(t.user,t.operationType,c);default:_t(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function pM(n,e){var i;const t=ee(n),r=e;return z(e.customData.operationType,t,"argument-error"),z((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,t,"argument-error"),d_._fromError(t,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(n,e){return qe(n,"POST","/v2/accounts/mfaEnrollment:start",$e(n,e))}function mM(n,e){return qe(n,"POST","/v2/accounts/mfaEnrollment:finalize",$e(n,e))}function gM(n,e){return qe(n,"POST","/v2/accounts/mfaEnrollment:withdraw",$e(n,e))}class h_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>qu._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new h_(e)}async getSession(){return us._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await Cr(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Cr(this.user,gM(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const zp=new WeakMap;function yM(n){const e=ee(n);return zp.has(e)||zp.set(e,h_._fromUser(e)),zp.get(e)}const uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=1e3,vM=10;class BA extends UA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);ZO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vM):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},_M)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BA.type="LOCAL";const f_=BA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA extends UA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zA.type="SESSION";const Ts=zA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new sf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await wM(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Wu("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(){return window}function IM(n){Je().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(){return typeof Je().WorkerGlobalScope<"u"&&typeof Je().importScripts=="function"}async function TM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function PM(){return p_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="firebaseLocalStorageDb",AM=1,ch="firebaseLocalStorage",qA="fbase_key";class Gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function of(n,e){return n.transaction([ch],e?"readwrite":"readonly").objectStore(ch)}function xM(){const n=indexedDB.deleteDatabase($A);return new Gu(n).toPromise()}function lg(){const n=indexedDB.open($A,AM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ch,{keyPath:qA})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ch)?e(r):(r.close(),await xM(),e(await lg()))})})}async function gI(n,e,t){const r=of(n,!0).put({[qA]:e,value:t});return new Gu(r).toPromise()}async function RM(n,e){const t=of(n,!1).get(e),r=await new Gu(t).toPromise();return r===void 0?null:r.value}function yI(n,e){const t=of(n,!0).delete(e);return new Gu(t).toPromise()}const CM=800,bM=3;class WA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return p_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sf._getInstance(PM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await TM(),!this.activeServiceWorker)return;this.sender=new EM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lg();return await gI(e,uh,"1"),await yI(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>RM(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=of(i,!1).getAll();return new Gu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WA.type="LOCAL";const pu=WA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(n,e){return qe(n,"POST","/v2/accounts/mfaSignIn:start",$e(n,e))}function kM(n,e){return qe(n,"POST","/v2/accounts/mfaSignIn:finalize",$e(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=AA("rcb"),NM=new Uu(3e4,6e4);class DM{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Je().grecaptcha)!=null&&e.render)}load(e,t=""){return z(VM(t),e,"argument-error"),this.shouldResolveImmediately(t)&&oI(Je().grecaptcha)?Promise.resolve(Je().grecaptcha):new Promise((r,i)=>{const s=Je().setTimeout(()=>{i(rt(e,"network-request-failed"))},NM.get());Je()[$p]=()=>{Je().clearTimeout(s),delete Je()[$p];const a=Je().grecaptcha;if(!a||!oI(a)){i(rt(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const h=l(c,d);return this.counter++,h},this.hostLanguage=t,r(a)};const o=`${oL()}?${_a({onload:$p,render:"explicit",hl:t})}`;o_(o).catch(()=>{clearTimeout(s),i(rt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=Je().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function VM(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class OM{async load(e){return new dL(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl="recaptcha",LM={theme:"light",type:"image"};let MM=class{constructor(e,t,r={...LM}){this.parameters=r,this.type=kl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=je(e),this.isInvisible=this.parameters.size==="invisible",z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;z(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new OM:new DM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Je()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){z(i_()&&!p_(),this.auth,"internal-error"),await FM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await BO(this.auth);z(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function FM(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=gs._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function jM(n,e,t){if(ke(n.app))return Promise.reject(ut(n));const r=je(n),i=await af(r,e,ee(t));return new m_(i,s=>nf(r,s))}async function UM(n,e,t){const r=ee(n);await tf(!1,r,"phone");const i=await af(r.auth,e,ee(t));return new m_(i,s=>OA(r,s))}async function BM(n,e,t){const r=ee(n);if(ke(r.auth.app))return Promise.reject(ut(r.auth));const i=await af(r.auth,e,ee(t));return new m_(i,s=>LA(r,s))}async function af(n,e,t){var r;if(!n._getRecaptchaConfig())try{await yL(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){z(s.type==="enroll",n,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await mi(n,o,"mfaSmsEnrollment",async(d,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===bl){z((t==null?void 0:t.type)===kl,d,"argument-error");const p=await qp(d,h,t);return mI(d,p)}return mI(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{z(s.type==="signin",n,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;z(o,n,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await mi(n,a,"mfaSmsSignIn",async(h,p)=>{if(p.phoneSignInInfo.captchaResponse===bl){z((t==null?void 0:t.type)===kl,h,"argument-error");const y=await qp(h,p,t);return _I(h,y)}return _I(h,p)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await mi(n,s,"sendVerificationCode",async(c,d)=>{if(d.captchaResponse===bl){z((t==null?void 0:t.type)===kl,c,"argument-error");const h=await qp(c,d,t);return fI(c,h)}return fI(c,d)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{t==null||t._reset()}}async function zM(n,e){const t=ee(n);if(ke(t.auth.app))return Promise.reject(ut(t.auth));await a_(t,e)}async function qp(n,e,t){z(t.type===kl,n,"argument-error");const r=await t.verify();z(typeof r=="string",n,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ss=class gd{constructor(e){this.providerId=gd.PROVIDER_ID,this.auth=je(e)}verifyPhoneNumber(e,t){return af(this.auth,e,ee(t))}static credential(e,t){return gs._fromVerification(e,t)}static credentialFromResult(e){const t=e;return gd.credentialFromTaggedObject(t)}static credentialFromError(e){return gd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?gs._fromTokenResponse(t,r):null}};Ss.PROVIDER_ID="phone";Ss.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(n,e){return e?sn(e):(z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends wa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Er(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Er(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Er(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $M(n){return VA(n.auth,new g_(n),n.bypassAuthState)}function qM(n){const{auth:e,user:t}=n;return z(t,e,"internal-error"),DA(t,new g_(n),n.bypassAuthState)}async function WM(n){const{auth:e,user:t}=n;return z(t,e,"internal-error"),a_(t,new g_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $M;case"linkViaPopup":case"linkViaRedirect":return WM;case"reauthViaPopup":case"reauthViaRedirect":return qM;default:_t(this.auth,"internal-error")}}resolve(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=new Uu(2e3,1e4);async function HM(n,e,t){if(ke(n.app))return Promise.reject(rt(n,"operation-not-supported-in-this-environment"));const r=je(n);va(n,e,Or);const i=Us(r,t);return new yr(r,"signInViaPopup",e,i).executeNotNull()}async function KM(n,e,t){const r=ee(n);if(ke(r.auth.app))return Promise.reject(rt(r.auth,"operation-not-supported-in-this-environment"));va(r.auth,e,Or);const i=Us(r.auth,t);return new yr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function QM(n,e,t){const r=ee(n);va(r.auth,e,Or);const i=Us(r.auth,t);return new yr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class yr extends GA{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,yr.currentPopupAction&&yr.currentPopupAction.cancel(),yr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return z(e,this.auth,"internal-error"),e}async onExecution(){Vn(this.filter.length===1,"Popup operations only handle one event");const e=Wu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(rt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GM.get())};e()}}yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM="pendingRedirect",Nl=new Map;class XM extends GA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Nl.get(this.auth._key());if(!e){try{const r=await JM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nl.set(this.auth._key(),e)}return this.bypassAuthState||Nl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JM(n,e){const t=KA(e),r=HA(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function y_(n,e){return HA(n)._set(KA(e),"true")}function ZM(){Nl.clear()}function __(n,e){Nl.set(n._key(),e)}function HA(n){return sn(n._redirectPersistence)}function KA(n){return ms(YM,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(n,e,t){return t2(n,e,t)}async function t2(n,e,t){if(ke(n.app))return Promise.reject(ut(n));const r=je(n);va(n,e,Or),await r._initializationPromise;const i=Us(r,t);return await y_(i,r),i._openRedirect(r,e,"signInViaRedirect")}function n2(n,e,t){return r2(n,e,t)}async function r2(n,e,t){const r=ee(n);if(va(r.auth,e,Or),ke(r.auth.app))return Promise.reject(ut(r.auth));await r.auth._initializationPromise;const i=Us(r.auth,t);await y_(i,r.auth);const s=await QA(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function i2(n,e,t){return s2(n,e,t)}async function s2(n,e,t){const r=ee(n);va(r.auth,e,Or),await r.auth._initializationPromise;const i=Us(r.auth,t);await tf(!1,r,e.providerId),await y_(i,r.auth);const s=await QA(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function o2(n,e){return await je(n)._initializationPromise,lf(n,e,!1)}async function lf(n,e,t=!1){if(ke(n.app))return Promise.reject(ut(n));const r=je(n),i=Us(r,e),o=await new XM(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function QA(n){const e=Wu(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=10*60*1e3;class YA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!l2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!XA(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(rt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=a2&&this.cachedEventUids.clear(),this.cachedEventUids.has(vI(e))}saveEventToCache(e){this.cachedEventUids.add(vI(e)),this.lastProcessedEventTime=Date.now()}}function vI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function l2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(n,e={}){return qe(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c2=/^https?/;async function d2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await JA(n);for(const t of e)try{if(h2(t))return}catch{}_t(n,"unauthorized-domain")}function h2(n){const e=du(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!c2.test(t))return!1;if(u2.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=new Uu(3e4,6e4);function wI(){const n=Je().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function p2(n){return new Promise((e,t)=>{var i,s,o;function r(){wI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wI(),t(rt(n,"network-request-failed"))},timeout:f2.get()})}if((s=(i=Je().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Je().gapi)!=null&&o.load)r();else{const a=AA("iframefcb");return Je()[a]=()=>{gapi.load?r():t(rt(n,"network-request-failed"))},o_(`${lL()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw yd=null,e})}let yd=null;function m2(n){return yd=yd||p2(n),yd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=new Uu(5e3,15e3),y2="__/auth/iframe",_2="emulator/auth/iframe",v2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E2(n){const e=n.config;z(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?s_(e,_2):`https://${n.config.authDomain}/${y2}`,r={apiKey:e.apiKey,appName:n.name,v:Li},i=w2.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${_a(r).slice(1)}`}async function I2(n){const e=await m2(n),t=Je().gapi;return z(t,n,"internal-error"),e.open({where:document.body,url:E2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=rt(n,"network-request-failed"),a=Je().setTimeout(()=>{s(o)},g2.get());function l(){Je().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S2=500,P2=600,A2="_blank",x2="http://localhost";class EI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function R2(n,e,t,r=S2,i=P2){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...T2,width:r.toString(),height:i.toString(),top:s,left:o},c=Fe().toLowerCase();t&&(a=wA(c)?A2:t),_A(c)&&(e=e||x2,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[y,v])=>`${p}${y}=${v},`,"");if(JO(c)&&a!=="_self")return C2(e||"",a),new EI(null);const h=window.open(e||"",a,d);z(h,n,"popup-blocked");try{h.focus()}catch{}return new EI(h)}function C2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="__/auth/handler",k2="emulator/auth/handler",N2=encodeURIComponent("fac");async function ug(n,e,t,r,i,s){z(n.config.authDomain,n,"auth-domain-config-required"),z(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Li,eventId:i};if(e instanceof Or){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",sV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof Ea){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),c=l?`#${N2}=${encodeURIComponent(l)}`:"";return`${D2(n)}?${_a(a).slice(1)}${c}`}function D2({config:n}){return n.emulator?s_(n,k2):`https://${n.authDomain}/${b2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="webStorageSupport";class V2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ts,this._completeRedirectFn=lf,this._overrideRedirectResult=__}async _openPopup(e,t,r,i){var o;Vn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await ug(e,t,r,du(),i);return R2(e,s,Wu())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await ug(e,t,r,du(),i);return IM(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Vn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await I2(e),r=new YA(e);return t.register("authEvent",i=>(z(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wp,{type:Wp},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Wp];s!==void 0&&t(!!s),_t(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=d2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return SA()||vA()||zu()}}const O2=V2;class L2{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return qn("unexpected MultiFactorSessionType")}}}class v_ extends L2{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new v_(e)}_finalizeEnroll(e,t,r){return mM(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return kM(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ZA{constructor(){}static assertion(e){return v_._fromCredential(e)}}ZA.FACTOR_ID="phone";var II="@firebase/auth",TI="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j2(n){Si(new er("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PA(n)},c=new iL(r,i,s,l);return _L(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Si(new er("auth-internal",e=>{const t=je(e.getProvider("auth").getImmediate());return(r=>new M2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(II,TI,F2(n)),bn(II,TI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=5*60;HD("authIdTokenMaxAge");function B2(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}sL({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=rt("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",B2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j2("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=2e3;async function $2(n,e,t){const{BuildInfo:r}=Ps();Vn(e.sessionId,"AuthEvent did not contain a session ID");const i=await K2(e.sessionId),s={};return zu()?s.ibi=r.packageName:Bu()?s.apn=r.packageName:_t(n,"operation-not-supported-in-this-environment"),r.displayName&&(s.appDisplayName=r.displayName),s.sessionId=i,ug(n,t,e.type,void 0,e.eventId??void 0,s)}async function q2(n){const{BuildInfo:e}=Ps(),t={};zu()?t.iosBundleId=e.packageName:Bu()?t.androidPackageName=e.packageName:_t(n,"operation-not-supported-in-this-environment"),await JA(n,t)}function W2(n){const{cordova:e}=Ps();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,XO()?"_blank":"_system","location=yes"),t(i)})})}async function G2(n,e,t){const{cordova:r}=Ps();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var p;s();const h=(p=r.plugins.browsertab)==null?void 0:p.close;typeof h=="function"&&h(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function c(){a||(a=window.setTimeout(()=>{o(rt(n,"redirect-cancelled-by-user"))},z2))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Bu()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function H2(n){var t,r,i,s,o,a,l,c,d,h;const e=Ps();z(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z(typeof((o=(s=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:s.browsertab)==null?void 0:o.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z(typeof((c=(l=(a=e==null?void 0:e.cordova)==null?void 0:a.plugins)==null?void 0:l.browsertab)==null?void 0:c.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z(typeof((h=(d=e==null?void 0:e.cordova)==null?void 0:d.InAppBrowser)==null?void 0:h.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function K2(n){const e=Q2(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Q2(n){if(Vn(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=20;class X2 extends YA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function J2(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:tF(),postBody:null,tenantId:n.tenantId,error:rt(n,"no-auth-event")}}function Z2(n,e){return cg()._set(dg(n),e)}async function SI(n){const e=await cg()._get(dg(n));return e&&await cg()._remove(dg(n)),e}function eF(n,e){var r,i;const t=rF(e);if(t.includes("/__/auth/callback")){const s=_d(t),o=s.firebaseError?nF(decodeURIComponent(s.firebaseError)):null,a=(i=(r=o==null?void 0:o.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],l=a?rt(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function tF(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<Y2;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function cg(){return sn(f_)}function dg(n){return ms("authEvent",n.config.apiKey,n.name)}function nF(n){try{return JSON.parse(n)}catch{return null}}function rF(n){const e=_d(n),t=e.link?decodeURIComponent(e.link):void 0,r=_d(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return _d(i).link||i||r||t||n}function _d(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return Io(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=500;class sF{constructor(){this._redirectPersistence=Ts,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=lf,this._overrideRedirectResult=__}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new X2(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){_t(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){H2(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),ZM(),await this._originValidation(e);const o=J2(e,r,i);await Z2(e,o);const a=await $2(e,o,t),l=await W2(a);return G2(e,s,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=q2(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Ps(),o=setTimeout(async()=>{await SI(e),t.onEvent(PI())},iF),a=async d=>{clearTimeout(o);const h=await SI(e);let p=null;h&&(d!=null&&d.url)&&(p=eF(h,d.url)),t.onEvent(p||PI())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;Ps().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&a({url:d}),typeof l=="function")try{l(d)}catch(h){console.error(h)}}}}const oF=sF;function PI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:rt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(n,e){je(n)._logFramework(e)}var lF="@firebase/auth-compat",uF="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=1e3;function Dl(){var n;return((n=self==null?void 0:self.location)==null?void 0:n.protocol)||null}function dF(){return Dl()==="http:"||Dl()==="https:"}function ex(n=Fe()){return!!((Dl()==="file:"||Dl()==="ionic:"||Dl()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function hF(){return Yy()||Yh()}function fF(){return GP()&&(document==null?void 0:document.documentMode)===11}function pF(n=Fe()){return/Edge\/\d+/.test(n)}function mF(n=Fe()){return fF()||pF(n)}function tx(){try{const n=self.localStorage,e=Wu();if(n)return n.setItem(e,"1"),n.removeItem(e),mF()?lu():!0}catch{return w_()&&lu()}return!1}function w_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gp(){return(dF()||WP()||ex())&&!hF()&&tx()&&!w_()}function nx(){return ex()&&typeof document<"u"}async function gF(){return nx()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},cF);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function yF(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn={LOCAL:"local",NONE:"none",SESSION:"session"},el=z,rx="persistence";function _F(n,e){if(el(Object.values(nn).includes(e),n,"invalid-persistence-type"),Yy()){el(e!==nn.SESSION,n,"unsupported-persistence-type");return}if(Yh()){el(e===nn.NONE,n,"unsupported-persistence-type");return}if(w_()){el(e===nn.NONE||e===nn.LOCAL&&lu(),n,"unsupported-persistence-type");return}el(e===nn.NONE||tx(),n,"unsupported-persistence-type")}async function hg(n){await n._initializationPromise;const e=ix(),t=ms(rx,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function vF(n,e){const t=ix();if(!t)return[];const r=ms(rx,n,e);switch(t.getItem(r)){case nn.NONE:return[Wo];case nn.LOCAL:return[pu,Ts];case nn.SESSION:return[Ts];default:return[]}}function ix(){var n;try{return((n=yF())==null?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=z;class ni{constructor(){this.browserResolver=sn(O2),this.cordovaResolver=sn(oF),this.underlyingResolver=null,this._redirectPersistence=Ts,this._completeRedirectFn=lf,this._overrideRedirectResult=__}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return nx()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wF(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await gF();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(n){return n.unwrap()}function EF(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IF(n){return ox(n)}function TF(n,e){var r;const t=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new SF(n,pM(n,e))}else if(t){const i=ox(e),s=e;i&&(s.credential=i,s.tenantId=t.tenantId||void 0,s.email=t.email||void 0,s.phoneNumber=t.phoneNumber||void 0)}}function ox(n){const{_tokenResponse:e}=n instanceof Mt?n.customData:n;if(!e)return null;if(!(n instanceof Mt)&&"temporaryProof"in e&&"phoneNumber"in e)return Ss.credentialFromResult(n);const t=e.providerId;if(!t||t===Ja.PASSWORD)return null;let r;switch(t){case Ja.GOOGLE:r=Bn;break;case Ja.FACEBOOK:r=Un;break;case Ja.GITHUB:r=zn;break;case Ja.TWITTER:r=$n;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?t.startsWith("saml.")?Go._create(t,a):tr._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:i,accessToken:s}):new ko(t).credential({idToken:i,accessToken:s,rawNonce:l})}return n instanceof Mt?r.credentialFromError(n):r.credentialFromResult(n)}function $t(n,e){return e.catch(t=>{throw t instanceof Mt&&TF(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:IF(t),additionalUserInfo:fM(t),user:uf.getOrCreate(i)}})}async function fg(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>$t(n,t.confirm(r))}}class SF{constructor(e,t){this.resolver=t,this.auth=EF(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return $t(sx(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf=class fl{constructor(e){this._delegate=e,this.multiFactor=yM(e)}static getOrCreate(e){return fl.USER_MAP.has(e)||fl.USER_MAP.set(e,new fl(e)),fl.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return $t(this.auth,OA(this._delegate,e))}async linkWithPhoneNumber(e,t){return fg(this.auth,UM(this._delegate,e,t))}async linkWithPopup(e){return $t(this.auth,QM(this._delegate,e,ni))}async linkWithRedirect(e){return await hg(je(this.auth)),i2(this._delegate,e,ni)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return $t(this.auth,LA(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return fg(this.auth,BM(this._delegate,e,t))}reauthenticateWithPopup(e){return $t(this.auth,KM(this._delegate,e,ni))}async reauthenticateWithRedirect(e){return await hg(je(this.auth)),n2(this._delegate,e,ni)}sendEmailVerification(e){return nM(this._delegate,e)}async unlink(e){return await zL(this._delegate,e),this}updateEmail(e){return oM(this._delegate,e)}updatePassword(e){return aM(this._delegate,e)}updatePhoneNumber(e){return zM(this._delegate,e)}updateProfile(e){return sM(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return rM(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};uf.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=z;class pg{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;tl(r,"invalid-api-key",{appName:e.name}),tl(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?ni:void 0;this._delegate=t.initialize({options:{persistence:PF(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(kO),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?uf.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){vL(this._delegate,e,t)}applyActionCode(e){return HL(this._delegate,e)}checkActionCode(e){return MA(this._delegate,e)}confirmPasswordReset(e,t){return GL(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return $t(this._delegate,QL(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return tM(this._delegate,e)}isSignInWithEmailLink(e){return JL(this._delegate,e)}async getRedirectResult(){tl(Gp(),this._delegate,"operation-not-supported-in-this-environment");const e=await o2(this._delegate,ni);return e?$t(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){aF(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:o}=AI(e,t,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:o}=AI(e,t,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,t){return XL(this._delegate,e,t)}sendPasswordResetEmail(e,t){return WL(this._delegate,e,t||void 0)}async setPersistence(e){_F(this._delegate,e);let t;switch(e){case nn.SESSION:t=Ts;break;case nn.LOCAL:t=await sn(pu)._isAvailable()?pu:f_;break;case nn.NONE:t=Wo;break;default:return _t("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return $t(this._delegate,BL(this._delegate))}signInWithCredential(e){return $t(this._delegate,nf(this._delegate,e))}signInWithCustomToken(e){return $t(this._delegate,qL(this._delegate,e))}signInWithEmailAndPassword(e,t){return $t(this._delegate,YL(this._delegate,e,t))}signInWithEmailLink(e,t){return $t(this._delegate,ZL(this._delegate,e,t))}signInWithPhoneNumber(e,t){return fg(this._delegate,jM(this._delegate,e,t))}async signInWithPopup(e){return tl(Gp(),this._delegate,"operation-not-supported-in-this-environment"),$t(this._delegate,HM(this._delegate,e,ni))}async signInWithRedirect(e){return tl(Gp(),this._delegate,"operation-not-supported-in-this-environment"),await hg(this._delegate),e2(this._delegate,e,ni)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return KL(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}pg.Persistence=nn;function AI(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&uf.getOrCreate(o)),error:e,complete:t}}function PF(n,e){const t=vF(n,e);if(typeof self<"u"&&!t.includes(pu)&&t.push(pu),typeof window<"u")for(const r of[f_,Ts])t.includes(r)||t.push(r);return t.includes(Wo)||t.push(Wo),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{static credential(e,t){return Ss.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Ss(sx(Rr.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}E_.PHONE_SIGN_IN_METHOD=Ss.PHONE_SIGN_IN_METHOD;E_.PROVIDER_ID=Ss.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=z;class xF{constructor(e,t,r=Rr.app()){var i;AF((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new MM(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="auth-compat";function CF(n){n.INTERNAL.registerComponent(new er(RF,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new pg(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Xs.EMAIL_SIGNIN,PASSWORD_RESET:Xs.PASSWORD_RESET,RECOVER_EMAIL:Xs.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Xs.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Xs.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Xs.VERIFY_EMAIL}},EmailAuthProvider:Mi,FacebookAuthProvider:Un,GithubAuthProvider:zn,GoogleAuthProvider:Bn,OAuthProvider:ko,SAMLAuthProvider:ah,PhoneAuthProvider:E_,PhoneMultiFactorGenerator:ZA,RecaptchaVerifier:xF,TwitterAuthProvider:$n,Auth:pg,AuthCredential:wa,Error:Mt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(lF,uF)}CF(Rr);var xI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gi,ax;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function P(){}P.prototype=I.prototype,x.D=I.prototype,x.prototype=new P,x.prototype.constructor=x,x.C=function(A,b,k){for(var R=Array(arguments.length-2),de=2;de<arguments.length;de++)R[de-2]=arguments[de];return I.prototype[b].apply(A,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,I,P){P||(P=0);var A=Array(16);if(typeof I=="string")for(var b=0;16>b;++b)A[b]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(b=0;16>b;++b)A[b]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=x.g[0],P=x.g[1],b=x.g[2];var k=x.g[3],R=I+(k^P&(b^k))+A[0]+3614090360&4294967295;I=P+(R<<7&4294967295|R>>>25),R=k+(b^I&(P^b))+A[1]+3905402710&4294967295,k=I+(R<<12&4294967295|R>>>20),R=b+(P^k&(I^P))+A[2]+606105819&4294967295,b=k+(R<<17&4294967295|R>>>15),R=P+(I^b&(k^I))+A[3]+3250441966&4294967295,P=b+(R<<22&4294967295|R>>>10),R=I+(k^P&(b^k))+A[4]+4118548399&4294967295,I=P+(R<<7&4294967295|R>>>25),R=k+(b^I&(P^b))+A[5]+1200080426&4294967295,k=I+(R<<12&4294967295|R>>>20),R=b+(P^k&(I^P))+A[6]+2821735955&4294967295,b=k+(R<<17&4294967295|R>>>15),R=P+(I^b&(k^I))+A[7]+4249261313&4294967295,P=b+(R<<22&4294967295|R>>>10),R=I+(k^P&(b^k))+A[8]+1770035416&4294967295,I=P+(R<<7&4294967295|R>>>25),R=k+(b^I&(P^b))+A[9]+2336552879&4294967295,k=I+(R<<12&4294967295|R>>>20),R=b+(P^k&(I^P))+A[10]+4294925233&4294967295,b=k+(R<<17&4294967295|R>>>15),R=P+(I^b&(k^I))+A[11]+2304563134&4294967295,P=b+(R<<22&4294967295|R>>>10),R=I+(k^P&(b^k))+A[12]+1804603682&4294967295,I=P+(R<<7&4294967295|R>>>25),R=k+(b^I&(P^b))+A[13]+4254626195&4294967295,k=I+(R<<12&4294967295|R>>>20),R=b+(P^k&(I^P))+A[14]+2792965006&4294967295,b=k+(R<<17&4294967295|R>>>15),R=P+(I^b&(k^I))+A[15]+1236535329&4294967295,P=b+(R<<22&4294967295|R>>>10),R=I+(b^k&(P^b))+A[1]+4129170786&4294967295,I=P+(R<<5&4294967295|R>>>27),R=k+(P^b&(I^P))+A[6]+3225465664&4294967295,k=I+(R<<9&4294967295|R>>>23),R=b+(I^P&(k^I))+A[11]+643717713&4294967295,b=k+(R<<14&4294967295|R>>>18),R=P+(k^I&(b^k))+A[0]+3921069994&4294967295,P=b+(R<<20&4294967295|R>>>12),R=I+(b^k&(P^b))+A[5]+3593408605&4294967295,I=P+(R<<5&4294967295|R>>>27),R=k+(P^b&(I^P))+A[10]+38016083&4294967295,k=I+(R<<9&4294967295|R>>>23),R=b+(I^P&(k^I))+A[15]+3634488961&4294967295,b=k+(R<<14&4294967295|R>>>18),R=P+(k^I&(b^k))+A[4]+3889429448&4294967295,P=b+(R<<20&4294967295|R>>>12),R=I+(b^k&(P^b))+A[9]+568446438&4294967295,I=P+(R<<5&4294967295|R>>>27),R=k+(P^b&(I^P))+A[14]+3275163606&4294967295,k=I+(R<<9&4294967295|R>>>23),R=b+(I^P&(k^I))+A[3]+4107603335&4294967295,b=k+(R<<14&4294967295|R>>>18),R=P+(k^I&(b^k))+A[8]+1163531501&4294967295,P=b+(R<<20&4294967295|R>>>12),R=I+(b^k&(P^b))+A[13]+2850285829&4294967295,I=P+(R<<5&4294967295|R>>>27),R=k+(P^b&(I^P))+A[2]+4243563512&4294967295,k=I+(R<<9&4294967295|R>>>23),R=b+(I^P&(k^I))+A[7]+1735328473&4294967295,b=k+(R<<14&4294967295|R>>>18),R=P+(k^I&(b^k))+A[12]+2368359562&4294967295,P=b+(R<<20&4294967295|R>>>12),R=I+(P^b^k)+A[5]+4294588738&4294967295,I=P+(R<<4&4294967295|R>>>28),R=k+(I^P^b)+A[8]+2272392833&4294967295,k=I+(R<<11&4294967295|R>>>21),R=b+(k^I^P)+A[11]+1839030562&4294967295,b=k+(R<<16&4294967295|R>>>16),R=P+(b^k^I)+A[14]+4259657740&4294967295,P=b+(R<<23&4294967295|R>>>9),R=I+(P^b^k)+A[1]+2763975236&4294967295,I=P+(R<<4&4294967295|R>>>28),R=k+(I^P^b)+A[4]+1272893353&4294967295,k=I+(R<<11&4294967295|R>>>21),R=b+(k^I^P)+A[7]+4139469664&4294967295,b=k+(R<<16&4294967295|R>>>16),R=P+(b^k^I)+A[10]+3200236656&4294967295,P=b+(R<<23&4294967295|R>>>9),R=I+(P^b^k)+A[13]+681279174&4294967295,I=P+(R<<4&4294967295|R>>>28),R=k+(I^P^b)+A[0]+3936430074&4294967295,k=I+(R<<11&4294967295|R>>>21),R=b+(k^I^P)+A[3]+3572445317&4294967295,b=k+(R<<16&4294967295|R>>>16),R=P+(b^k^I)+A[6]+76029189&4294967295,P=b+(R<<23&4294967295|R>>>9),R=I+(P^b^k)+A[9]+3654602809&4294967295,I=P+(R<<4&4294967295|R>>>28),R=k+(I^P^b)+A[12]+3873151461&4294967295,k=I+(R<<11&4294967295|R>>>21),R=b+(k^I^P)+A[15]+530742520&4294967295,b=k+(R<<16&4294967295|R>>>16),R=P+(b^k^I)+A[2]+3299628645&4294967295,P=b+(R<<23&4294967295|R>>>9),R=I+(b^(P|~k))+A[0]+4096336452&4294967295,I=P+(R<<6&4294967295|R>>>26),R=k+(P^(I|~b))+A[7]+1126891415&4294967295,k=I+(R<<10&4294967295|R>>>22),R=b+(I^(k|~P))+A[14]+2878612391&4294967295,b=k+(R<<15&4294967295|R>>>17),R=P+(k^(b|~I))+A[5]+4237533241&4294967295,P=b+(R<<21&4294967295|R>>>11),R=I+(b^(P|~k))+A[12]+1700485571&4294967295,I=P+(R<<6&4294967295|R>>>26),R=k+(P^(I|~b))+A[3]+2399980690&4294967295,k=I+(R<<10&4294967295|R>>>22),R=b+(I^(k|~P))+A[10]+4293915773&4294967295,b=k+(R<<15&4294967295|R>>>17),R=P+(k^(b|~I))+A[1]+2240044497&4294967295,P=b+(R<<21&4294967295|R>>>11),R=I+(b^(P|~k))+A[8]+1873313359&4294967295,I=P+(R<<6&4294967295|R>>>26),R=k+(P^(I|~b))+A[15]+4264355552&4294967295,k=I+(R<<10&4294967295|R>>>22),R=b+(I^(k|~P))+A[6]+2734768916&4294967295,b=k+(R<<15&4294967295|R>>>17),R=P+(k^(b|~I))+A[13]+1309151649&4294967295,P=b+(R<<21&4294967295|R>>>11),R=I+(b^(P|~k))+A[4]+4149444226&4294967295,I=P+(R<<6&4294967295|R>>>26),R=k+(P^(I|~b))+A[11]+3174756917&4294967295,k=I+(R<<10&4294967295|R>>>22),R=b+(I^(k|~P))+A[2]+718787259&4294967295,b=k+(R<<15&4294967295|R>>>17),R=P+(k^(b|~I))+A[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+b&4294967295,x.g[3]=x.g[3]+k&4294967295}r.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var P=I-this.blockSize,A=this.B,b=this.h,k=0;k<I;){if(b==0)for(;k<=P;)i(this,x,k),k+=this.blockSize;if(typeof x=="string"){for(;k<I;)if(A[b++]=x.charCodeAt(k++),b==this.blockSize){i(this,A),b=0;break}}else for(;k<I;)if(A[b++]=x[k++],b==this.blockSize){i(this,A),b=0;break}}this.h=b,this.o+=I},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var P=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=P&255,P/=256;for(this.u(x),x=Array(16),I=P=0;4>I;++I)for(var A=0;32>A;A+=8)x[P++]=this.g[I]>>>A&255;return x};function s(x,I){var P=a;return Object.prototype.hasOwnProperty.call(P,x)?P[x]:P[x]=I(x)}function o(x,I){this.h=I;for(var P=[],A=!0,b=x.length-1;0<=b;b--){var k=x[b]|0;A&&k==I||(P[b]=k,A=!1)}this.g=P}var a={};function l(x){return-128<=x&&128>x?s(x,function(I){return new o([I|0],0>I?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(0>x)return C(c(-x));for(var I=[],P=1,A=0;x>=P;A++)I[A]=x/P|0,P*=4294967296;return new o(I,0)}function d(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return C(d(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(I,8)),A=h,b=0;b<x.length;b+=8){var k=Math.min(8,x.length-b),R=parseInt(x.substring(b,b+k),I);8>k?(k=c(Math.pow(I,k)),A=A.j(k).add(c(R))):(A=A.j(P),A=A.add(c(R)))}return A}var h=l(0),p=l(1),y=l(16777216);n=o.prototype,n.m=function(){if(T(this))return-C(this).m();for(var x=0,I=1,P=0;P<this.g.length;P++){var A=this.i(P);x+=(0<=A?A:4294967296+A)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(v(this))return"0";if(T(this))return"-"+C(this).toString(x);for(var I=c(Math.pow(x,6)),P=this,A="";;){var b=N(P,I).g;P=_(P,b.j(I));var k=((0<P.g.length?P.g[0]:P.h)>>>0).toString(x);if(P=b,v(P))return k+A;for(;6>k.length;)k="0"+k;A=k+A}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function v(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function T(x){return x.h==-1}n.l=function(x){return x=_(this,x),T(x)?-1:v(x)?0:1};function C(x){for(var I=x.g.length,P=[],A=0;A<I;A++)P[A]=~x.g[A];return new o(P,~x.h).add(p)}n.abs=function(){return T(this)?C(this):this},n.add=function(x){for(var I=Math.max(this.g.length,x.g.length),P=[],A=0,b=0;b<=I;b++){var k=A+(this.i(b)&65535)+(x.i(b)&65535),R=(k>>>16)+(this.i(b)>>>16)+(x.i(b)>>>16);A=R>>>16,k&=65535,R&=65535,P[b]=R<<16|k}return new o(P,P[P.length-1]&-2147483648?-1:0)};function _(x,I){return x.add(C(I))}n.j=function(x){if(v(this)||v(x))return h;if(T(this))return T(x)?C(this).j(C(x)):C(C(this).j(x));if(T(x))return C(this.j(C(x)));if(0>this.l(y)&&0>x.l(y))return c(this.m()*x.m());for(var I=this.g.length+x.g.length,P=[],A=0;A<2*I;A++)P[A]=0;for(A=0;A<this.g.length;A++)for(var b=0;b<x.g.length;b++){var k=this.i(A)>>>16,R=this.i(A)&65535,de=x.i(b)>>>16,Te=x.i(b)&65535;P[2*A+2*b]+=R*Te,w(P,2*A+2*b),P[2*A+2*b+1]+=k*Te,w(P,2*A+2*b+1),P[2*A+2*b+1]+=R*de,w(P,2*A+2*b+1),P[2*A+2*b+2]+=k*de,w(P,2*A+2*b+2)}for(A=0;A<I;A++)P[A]=P[2*A+1]<<16|P[2*A];for(A=I;A<2*I;A++)P[A]=0;return new o(P,0)};function w(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function E(x,I){this.g=x,this.h=I}function N(x,I){if(v(I))throw Error("division by zero");if(v(x))return new E(h,h);if(T(x))return I=N(C(x),I),new E(C(I.g),C(I.h));if(T(I))return I=N(x,C(I)),new E(C(I.g),I.h);if(30<x.g.length){if(T(x)||T(I))throw Error("slowDivide_ only works with positive integers.");for(var P=p,A=I;0>=A.l(x);)P=D(P),A=D(A);var b=F(P,1),k=F(A,1);for(A=F(A,2),P=F(P,2);!v(A);){var R=k.add(A);0>=R.l(x)&&(b=b.add(P),k=R),A=F(A,1),P=F(P,1)}return I=_(x,b.j(I)),new E(b,I)}for(b=h;0<=x.l(I);){for(P=Math.max(1,Math.floor(x.m()/I.m())),A=Math.ceil(Math.log(P)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),k=c(P),R=k.j(I);T(R)||0<R.l(x);)P-=A,k=c(P),R=k.j(I);v(k)&&(k=p),b=b.add(k),x=_(x,R)}return new E(b,x)}n.A=function(x){return N(this,x).h},n.and=function(x){for(var I=Math.max(this.g.length,x.g.length),P=[],A=0;A<I;A++)P[A]=this.i(A)&x.i(A);return new o(P,this.h&x.h)},n.or=function(x){for(var I=Math.max(this.g.length,x.g.length),P=[],A=0;A<I;A++)P[A]=this.i(A)|x.i(A);return new o(P,this.h|x.h)},n.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),P=[],A=0;A<I;A++)P[A]=this.i(A)^x.i(A);return new o(P,this.h^x.h)};function D(x){for(var I=x.g.length+1,P=[],A=0;A<I;A++)P[A]=x.i(A)<<1|x.i(A-1)>>>31;return new o(P,x.h)}function F(x,I){var P=I>>5;I%=32;for(var A=x.g.length-P,b=[],k=0;k<A;k++)b[k]=0<I?x.i(k+P)>>>I|x.i(k+P+1)<<32-I:x.i(k+P);return new o(b,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ax=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,gi=o}).apply(typeof xI<"u"?xI:typeof self<"u"?self:typeof window<"u"?window:{});var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lx,pl,ux,vd,mg,cx,dx,hx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gc=="object"&&Gc];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in g))break e;g=g[L]}u=u[u.length-1],S=g[u],f=f(S),f!=S&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,S=!1,L={next:function(){if(!S&&g<u.length){var j=g++;return{value:f(j,u[j]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,g){return u.call.apply(u.bind,arguments)}function h(u,f,g){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function y(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function v(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(S,L,j){for(var G=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)G[ve-2]=arguments[ve];return f.prototype[L].apply(S,G)}}function T(u){const f=u.length;if(0<f){const g=Array(f);for(let S=0;S<f;S++)g[S]=u[S];return g}return[]}function C(u,f){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const L=u.length||0,j=S.length||0;u.length=L+j;for(let G=0;G<j;G++)u[L+G]=S[G]}else u.push(S)}}class _{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var D=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function F(u,f,g){for(const S in u)f.call(g,u[S],S,u)}function x(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function I(u){const f={};for(const g in u)f[g]=u[g];return f}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)u[g]=S[g];for(let j=0;j<P.length;j++)g=P[j],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function b(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function k(u){a.setTimeout(()=>{throw u},0)}function R(){var u=Q;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class de{constructor(){this.h=this.g=null}add(f,g){const S=Te.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var Te=new _(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,q=!1,Q=new de,Z=()=>{const u=a.Promise.resolve(void 0);ue=()=>{u.then(Se)}};var Se=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(g){k(g)}var f=Te;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}q=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var sr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function or(u,f){if(We.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(D){e:{try{N(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ar[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&or.aa.h.call(this)}}v(or,We);var ar={2:"touch",3:"pen",4:"mouse"};or.prototype.h=function(){or.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var lr="closure_listenable_"+(1e6*Math.random()|0),f1=0;function p1(u,f,g,S,L){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=L,this.key=++f1,this.da=this.fa=!1}function uc(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function cc(u){this.src=u,this.g={},this.h=0}cc.prototype.add=function(u,f,g,S,L){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var G=Uf(u,f,S,L);return-1<G?(f=u[G],g||(f.fa=!1)):(f=new p1(f,this.src,j,!!S,L),f.fa=g,u.push(f)),f};function jf(u,f){var g=f.type;if(g in u.g){var S=u.g[g],L=Array.prototype.indexOf.call(S,f,void 0),j;(j=0<=L)&&Array.prototype.splice.call(S,L,1),j&&(uc(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Uf(u,f,g,S){for(var L=0;L<u.length;++L){var j=u[L];if(!j.da&&j.listener==f&&j.capture==!!g&&j.ha==S)return L}return-1}var Bf="closure_lm_"+(1e6*Math.random()|0),zf={};function Dv(u,f,g,S,L){if(Array.isArray(f)){for(var j=0;j<f.length;j++)Dv(u,f[j],g,S,L);return null}return g=Lv(g),u&&u[lr]?u.K(f,g,c(S)?!!S.capture:!1,L):m1(u,f,g,!1,S,L)}function m1(u,f,g,S,L,j){if(!f)throw Error("Invalid event type");var G=c(L)?!!L.capture:!!L,ve=qf(u);if(ve||(u[Bf]=ve=new cc(u)),g=ve.add(f,g,S,G,j),g.proxy)return g;if(S=g1(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)sr||(L=G),L===void 0&&(L=!1),u.addEventListener(f.toString(),S,L);else if(u.attachEvent)u.attachEvent(Ov(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function g1(){function u(g){return f.call(u.src,u.listener,g)}const f=y1;return u}function Vv(u,f,g,S,L){if(Array.isArray(f))for(var j=0;j<f.length;j++)Vv(u,f[j],g,S,L);else S=c(S)?!!S.capture:!!S,g=Lv(g),u&&u[lr]?(u=u.i,f=String(f).toString(),f in u.g&&(j=u.g[f],g=Uf(j,g,S,L),-1<g&&(uc(j[g]),Array.prototype.splice.call(j,g,1),j.length==0&&(delete u.g[f],u.h--)))):u&&(u=qf(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Uf(f,g,S,L)),(g=-1<u?f[u]:null)&&$f(g))}function $f(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[lr])jf(f.i,u);else{var g=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(g,S,u.capture):f.detachEvent?f.detachEvent(Ov(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=qf(f))?(jf(g,u),g.h==0&&(g.src=null,f[Bf]=null)):uc(u)}}}function Ov(u){return u in zf?zf[u]:zf[u]="on"+u}function y1(u,f){if(u.da)u=!0;else{f=new or(f,this);var g=u.listener,S=u.ha||u.src;u.fa&&$f(u),u=g.call(S,f)}return u}function qf(u){return u=u[Bf],u instanceof cc?u:null}var Wf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lv(u){return typeof u=="function"?u:(u[Wf]||(u[Wf]=function(f){return u.handleEvent(f)}),u[Wf])}function vt(){me.call(this),this.i=new cc(this),this.M=this,this.F=null}v(vt,me),vt.prototype[lr]=!0,vt.prototype.removeEventListener=function(u,f,g,S){Vv(this,u,f,g,S)};function kt(u,f){var g,S=u.F;if(S)for(g=[];S;S=S.F)g.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new We(f,u);else if(f instanceof We)f.target=f.target||u;else{var L=f;f=new We(S,u),A(f,L)}if(L=!0,g)for(var j=g.length-1;0<=j;j--){var G=f.g=g[j];L=dc(G,S,!0,f)&&L}if(G=f.g=u,L=dc(G,S,!0,f)&&L,L=dc(G,S,!1,f)&&L,g)for(j=0;j<g.length;j++)G=f.g=g[j],L=dc(G,S,!1,f)&&L}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],S=0;S<g.length;S++)uc(g[S]);delete u.g[f],u.h--}}this.F=null},vt.prototype.K=function(u,f,g,S){return this.i.add(String(u),f,!1,g,S)},vt.prototype.L=function(u,f,g,S){return this.i.add(String(u),f,!0,g,S)};function dc(u,f,g,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,j=0;j<f.length;++j){var G=f[j];if(G&&!G.da&&G.capture==g){var ve=G.listener,ct=G.ha||G.src;G.fa&&jf(u.i,G),L=ve.call(ct,S)!==!1&&L}}return L&&!S.defaultPrevented}function Mv(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Fv(u){u.g=Mv(()=>{u.g=null,u.i&&(u.i=!1,Fv(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class _1 extends me{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Fv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ba(u){me.call(this),this.h=u,this.g={}}v(ba,me);var jv=[];function Uv(u){F(u.g,function(f,g){this.g.hasOwnProperty(g)&&$f(f)},u),u.g={}}ba.prototype.N=function(){ba.aa.N.call(this),Uv(this)},ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gf=a.JSON.stringify,v1=a.JSON.parse,w1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Hf(){}Hf.prototype.h=null;function Bv(u){return u.h||(u.h=u.i())}function zv(){}var ka={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kf(){We.call(this,"d")}v(Kf,We);function Qf(){We.call(this,"c")}v(Qf,We);var $i={},$v=null;function hc(){return $v=$v||new vt}$i.La="serverreachability";function qv(u){We.call(this,$i.La,u)}v(qv,We);function Na(u){const f=hc();kt(f,new qv(f))}$i.STAT_EVENT="statevent";function Wv(u,f){We.call(this,$i.STAT_EVENT,u),this.stat=f}v(Wv,We);function Nt(u){const f=hc();kt(f,new Wv(f,u))}$i.Ma="timingevent";function Gv(u,f){We.call(this,$i.Ma,u),this.size=f}v(Gv,We);function Da(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Va(){this.g=!0}Va.prototype.xa=function(){this.g=!1};function E1(u,f,g,S,L,j){u.info(function(){if(u.g)if(j)for(var G="",ve=j.split("&"),ct=0;ct<ve.length;ct++){var he=ve[ct].split("=");if(1<he.length){var wt=he[0];he=he[1];var Et=wt.split("_");G=2<=Et.length&&Et[1]=="type"?G+(wt+"="+he+"&"):G+(wt+"=redacted&")}}else G=null;else G=j;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+f+`
`+g+`
`+G})}function I1(u,f,g,S,L,j,G){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+f+`
`+g+`
`+j+" "+G})}function Gs(u,f,g,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+S1(u,g)+(S?" "+S:"")})}function T1(u,f){u.info(function(){return"TIMEOUT: "+f})}Va.prototype.info=function(){};function S1(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var S=g[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return Gf(g)}catch{return f}}var fc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yf;function pc(){}v(pc,Hf),pc.prototype.g=function(){return new XMLHttpRequest},pc.prototype.i=function(){return{}},Yf=new pc;function Ur(u,f,g,S){this.j=u,this.i=f,this.l=g,this.R=S||1,this.U=new ba(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kv}function Kv(){this.i=null,this.g="",this.h=!1}var Qv={},Xf={};function Jf(u,f,g){u.L=1,u.v=_c(ur(f)),u.m=g,u.P=!0,Yv(u,null)}function Yv(u,f){u.F=Date.now(),mc(u),u.A=ur(u.v);var g=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),cw(g.i,"t",S),u.C=0,g=u.j.J,u.h=new Kv,u.g=Rw(u.j,g?f:null,!u.m),0<u.O&&(u.M=new _1(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(jv[0]=L.toString()),L=jv);for(var j=0;j<L.length;j++){var G=Dv(g,L[j],S||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Na(),E1(u.i,u.u,u.A,u.l,u.R,u.m)}Ur.prototype.ca=function(u){u=u.target;const f=this.M;f&&cr(u)==3?f.j():this.Y(u)},Ur.prototype.Y=function(u){try{if(u==this.g)e:{const Et=cr(this.g);var f=this.g.Ba();const Qs=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||yw(this.g)))){this.J||Et!=4||f==7||(f==8||0>=Qs?Na(3):Na(2)),Zf(this);var g=this.g.Z();this.X=g;t:if(Xv(this)){var S=yw(this.g);u="";var L=S.length,j=cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qi(this),Oa(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(j&&f==L-1)});S.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=g==200,I1(this.i,this.u,this.A,this.l,this.R,Et,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,ct=this.g;if((ve=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ve)){var he=ve;break t}}he=null}if(g=he)Gs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ep(this,g);else{this.o=!1,this.s=3,Nt(12),qi(this),Oa(this);break e}}if(this.P){g=!0;let En;for(;!this.J&&this.C<G.length;)if(En=P1(this,G),En==Xf){Et==4&&(this.s=4,Nt(14),g=!1),Gs(this.i,this.l,null,"[Incomplete Response]");break}else if(En==Qv){this.s=4,Nt(15),Gs(this.i,this.l,G,"[Invalid Chunk]"),g=!1;break}else Gs(this.i,this.l,En,null),ep(this,En);if(Xv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||G.length!=0||this.h.h||(this.s=1,Nt(16),g=!1),this.o=this.o&&g,!g)Gs(this.i,this.l,G,"[Invalid Chunked Response]"),qi(this),Oa(this);else if(0<G.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),op(wt),wt.M=!0,Nt(11))}}else Gs(this.i,this.l,G,null),ep(this,G);Et==4&&qi(this),this.o&&!this.J&&(Et==4?Sw(this.j,this):(this.o=!1,mc(this)))}else z1(this.g),g==400&&0<G.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),qi(this),Oa(this)}}}catch{}finally{}};function Xv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function P1(u,f){var g=u.C,S=f.indexOf(`
`,g);return S==-1?Xf:(g=Number(f.substring(g,S)),isNaN(g)?Qv:(S+=1,S+g>f.length?Xf:(f=f.slice(S,S+g),u.C=S+g,f)))}Ur.prototype.cancel=function(){this.J=!0,qi(this)};function mc(u){u.S=Date.now()+u.I,Jv(u,u.I)}function Jv(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Da(p(u.ba,u),f)}function Zf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ur.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(T1(this.i,this.A),this.L!=2&&(Na(),Nt(17)),qi(this),this.s=2,Oa(this)):Jv(this,this.S-u)};function Oa(u){u.j.G==0||u.J||Sw(u.j,u)}function qi(u){Zf(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Uv(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function ep(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||tp(g.h,u))){if(!u.K&&tp(g.h,u)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Sc(g),Ic(g);else break e;sp(g),Nt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Da(p(g.Za,g),6e3));if(1>=tw(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Gi(g,11)}else if((u.K||g.g==u)&&Sc(g),!w(f))for(L=g.Da.g.parse(f),f=0;f<L.length;f++){let he=L[f];if(g.T=he[0],he=he[1],g.G==2)if(he[0]=="c"){g.K=he[1],g.ia=he[2];const wt=he[3];wt!=null&&(g.la=wt,g.j.info("VER="+g.la));const Et=he[4];Et!=null&&(g.Aa=Et,g.j.info("SVER="+g.Aa));const Qs=he[5];Qs!=null&&typeof Qs=="number"&&0<Qs&&(S=1.5*Qs,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const En=u.g;if(En){const Ac=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ac){var j=S.h;j.g||Ac.indexOf("spdy")==-1&&Ac.indexOf("quic")==-1&&Ac.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(np(j,j.h),j.h=null))}if(S.D){const ap=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;ap&&(S.ya=ap,Pe(S.I,S.D,ap))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var G=u;if(S.qa=xw(S,S.J?S.ia:null,S.W),G.K){nw(S.h,G);var ve=G,ct=S.L;ct&&(ve.I=ct),ve.B&&(Zf(ve),mc(ve)),S.g=G}else Iw(S);0<g.i.length&&Tc(g)}else he[0]!="stop"&&he[0]!="close"||Gi(g,7);else g.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?Gi(g,7):ip(g):he[0]!="noop"&&g.l&&g.l.ta(he),g.v=0)}}Na(4)}catch{}}var A1=class{constructor(u,f){this.g=u,this.map=f}};function Zv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ew(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function tw(u){return u.h?1:u.g?u.g.size:0}function tp(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function np(u,f){u.g?u.g.add(f):u.h=f}function nw(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Zv.prototype.cancel=function(){if(this.i=rw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return T(u.i)}function x1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,S=0;S<g;S++)f.push(u[S]);return f}f=[],g=0;for(S in u)f[g++]=u[S];return f}function R1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const S in u)f[g++]=S;return f}}}function iw(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=R1(u),S=x1(u),L=S.length,j=0;j<L;j++)f.call(void 0,S[j],g&&g[j],u)}var sw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function C1(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var S=u[g].indexOf("="),L=null;if(0<=S){var j=u[g].substring(0,S);L=u[g].substring(S+1)}else j=u[g];f(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Wi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Wi){this.h=u.h,gc(this,u.j),this.o=u.o,this.g=u.g,yc(this,u.s),this.l=u.l;var f=u.i,g=new Fa;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),ow(this,g),this.m=u.m}else u&&(f=String(u).match(sw))?(this.h=!1,gc(this,f[1]||"",!0),this.o=La(f[2]||""),this.g=La(f[3]||"",!0),yc(this,f[4]),this.l=La(f[5]||"",!0),ow(this,f[6]||"",!0),this.m=La(f[7]||"")):(this.h=!1,this.i=new Fa(null,this.h))}Wi.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Ma(f,aw,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ma(f,aw,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Ma(g,g.charAt(0)=="/"?N1:k1,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Ma(g,V1)),u.join("")};function ur(u){return new Wi(u)}function gc(u,f,g){u.j=g?La(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function yc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function ow(u,f,g){f instanceof Fa?(u.i=f,O1(u.i,u.h)):(g||(f=Ma(f,D1)),u.i=new Fa(f,u.h))}function Pe(u,f,g){u.i.set(f,g)}function _c(u){return Pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function La(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ma(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,b1),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function b1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var aw=/[#\/\?@]/g,k1=/[#\?:]/g,N1=/[#\?]/g,D1=/[#\?@]/g,V1=/#/g;function Fa(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Br(u){u.g||(u.g=new Map,u.h=0,u.i&&C1(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=Fa.prototype,n.add=function(u,f){Br(this),this.i=null,u=Hs(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function lw(u,f){Br(u),f=Hs(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function uw(u,f){return Br(u),f=Hs(u,f),u.g.has(f)}n.forEach=function(u,f){Br(this),this.g.forEach(function(g,S){g.forEach(function(L){u.call(f,L,S,this)},this)},this)},n.na=function(){Br(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){const L=u[S];for(let j=0;j<L.length;j++)g.push(f[S])}return g},n.V=function(u){Br(this);let f=[];if(typeof u=="string")uw(this,u)&&(f=f.concat(this.g.get(Hs(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},n.set=function(u,f){return Br(this),this.i=null,u=Hs(this,u),uw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function cw(u,f,g){lw(u,f),0<g.length&&(u.i=null,u.g.set(Hs(u,f),T(g)),u.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];const j=encodeURIComponent(String(S)),G=this.V(S);for(S=0;S<G.length;S++){var L=j;G[S]!==""&&(L+="="+encodeURIComponent(String(G[S]))),u.push(L)}}return this.i=u.join("&")};function Hs(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function O1(u,f){f&&!u.j&&(Br(u),u.i=null,u.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(lw(this,S),cw(this,L,g))},u)),u.j=f}function L1(u,f){const g=new Va;if(a.Image){const S=new Image;S.onload=y(zr,g,"TestLoadImage: loaded",!0,f,S),S.onerror=y(zr,g,"TestLoadImage: error",!1,f,S),S.onabort=y(zr,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=y(zr,g,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function M1(u,f){const g=new Va,S=new AbortController,L=setTimeout(()=>{S.abort(),zr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(j=>{clearTimeout(L),j.ok?zr(g,"TestPingServer: ok",!0,f):zr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),zr(g,"TestPingServer: error",!1,f)})}function zr(u,f,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function F1(){this.g=new w1}function j1(u,f,g){const S=g||"";try{iw(u,function(L,j){let G=L;c(L)&&(G=Gf(L)),f.push(S+j+"="+encodeURIComponent(G))})}catch(L){throw f.push(S+"type="+encodeURIComponent("_badmap")),L}}function vc(u){this.l=u.Ub||null,this.j=u.eb||!1}v(vc,Hf),vc.prototype.g=function(){return new wc(this.l,this.j)},vc.prototype.i=function(u){return function(){return u}}({});function wc(u,f){vt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(wc,vt),n=wc.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ua(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ja(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function dw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?ja(this):Ua(this),this.readyState==3&&dw(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,ja(this))},n.Qa=function(u){this.g&&(this.response=u,ja(this))},n.ga=function(){this.g&&ja(this)};function ja(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ua(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Ua(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function hw(u){let f="";return F(u,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function rp(u,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=hw(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Pe(u,f,g))}function Ue(u){vt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ue,vt);var U1=/^https?$/i,B1=["POST","PUT"];n=Ue.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yf.g(),this.v=this.o?Bv(this.o):Bv(Yf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(j){fw(this,j);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const j of S.keys())g.set(j,S.get(j));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(B1,f,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,G]of g)this.g.setRequestHeader(j,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gw(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){fw(this,j)}};function fw(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,pw(u),Ec(u)}function pw(u){u.A||(u.A=!0,kt(u,"complete"),kt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,kt(this,"complete"),kt(this,"abort"),Ec(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ec(this,!0)),Ue.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mw(this):this.bb())},n.bb=function(){mw(this)};function mw(u){if(u.h&&typeof o<"u"&&(!u.v[1]||cr(u)!=4||u.Z()!=2)){if(u.u&&cr(u)==4)Mv(u.Ea,0,u);else if(kt(u,"readystatechange"),cr(u)==4){u.h=!1;try{const G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=G===0){var L=String(u.D).match(sw)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!U1.test(L?L.toLowerCase():"")}g=S}if(g)kt(u,"complete"),kt(u,"success");else{u.m=6;try{var j=2<cr(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",pw(u)}}finally{Ec(u)}}}}function Ec(u,f){if(u.g){gw(u);const g=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||kt(u,"ready");try{g.onreadystatechange=S}catch{}}}function gw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function cr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<cr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),v1(f)}};function yw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function z1(u){const f={};u=(u.g&&2<=cr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(w(u[S]))continue;var g=b(u[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=f[L]||[];f[L]=j,j.push(g)}x(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ba(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function _w(u){this.Aa=0,this.i=[],this.j=new Va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ba("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ba("baseRetryDelayMs",5e3,u),this.cb=Ba("retryDelaySeedMs",1e4,u),this.Wa=Ba("forwardChannelMaxRetries",2,u),this.wa=Ba("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Zv(u&&u.concurrentRequestLimit),this.Da=new F1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_w.prototype,n.la=8,n.G=1,n.connect=function(u,f,g,S){Nt(0),this.W=u,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=xw(this,null,this.W),Tc(this)};function ip(u){if(vw(u),u.G==3){var f=u.U++,g=ur(u.I);if(Pe(g,"SID",u.K),Pe(g,"RID",f),Pe(g,"TYPE","terminate"),za(u,g),f=new Ur(u,u.j,f),f.L=2,f.v=_c(ur(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Rw(f.j,null),f.g.ea(f.v)),f.F=Date.now(),mc(f)}Aw(u)}function Ic(u){u.g&&(op(u),u.g.cancel(),u.g=null)}function vw(u){Ic(u),u.u&&(a.clearTimeout(u.u),u.u=null),Sc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Tc(u){if(!ew(u.h)&&!u.s){u.s=!0;var f=u.Ga;ue||Z(),q||(ue(),q=!0),Q.add(f,u),u.B=0}}function $1(u,f){return tw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Da(p(u.Ga,u,f),Pw(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Ur(this,this.j,u);let j=this.o;if(this.S&&(j?(j=I(j),A(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ew(this,L,f),g=ur(this.I),Pe(g,"RID",u),Pe(g,"CVER",22),this.D&&Pe(g,"X-HTTP-Session-Id",this.D),za(this,g),j&&(this.O?f="headers="+encodeURIComponent(String(hw(j)))+"&"+f:this.m&&rp(g,this.m,j)),np(this.h,L),this.Ua&&Pe(g,"TYPE","init"),this.P?(Pe(g,"$req",f),Pe(g,"SID","null"),L.T=!0,Jf(L,g,null)):Jf(L,g,f),this.G=2}}else this.G==3&&(u?ww(this,u):this.i.length==0||ew(this.h)||ww(this))};function ww(u,f){var g;f?g=f.l:g=u.U++;const S=ur(u.I);Pe(S,"SID",u.K),Pe(S,"RID",g),Pe(S,"AID",u.T),za(u,S),u.m&&u.o&&rp(S,u.m,u.o),g=new Ur(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Ew(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),np(u.h,g),Jf(g,S,f)}function za(u,f){u.H&&F(u.H,function(g,S){Pe(f,S,g)}),u.l&&iw({},function(g,S){Pe(f,S,g)})}function Ew(u,f,g){g=Math.min(u.i.length,g);var S=u.l?p(u.l.Na,u.l,u):null;e:{var L=u.i;let j=-1;for(;;){const G=["count="+g];j==-1?0<g?(j=L[0].g,G.push("ofs="+j)):j=0:G.push("ofs="+j);let ve=!0;for(let ct=0;ct<g;ct++){let he=L[ct].g;const wt=L[ct].map;if(he-=j,0>he)j=Math.max(0,L[ct].g-100),ve=!1;else try{j1(wt,G,"req"+he+"_")}catch{S&&S(wt)}}if(ve){S=G.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,S}function Iw(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ue||Z(),q||(ue(),q=!0),Q.add(f,u),u.v=0}}function sp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Da(p(u.Fa,u),Pw(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Tw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Da(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),Ic(this),Tw(this))};function op(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Tw(u){u.g=new Ur(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=ur(u.qa);Pe(f,"RID","rpc"),Pe(f,"SID",u.K),Pe(f,"AID",u.T),Pe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pe(f,"TO",u.ja),Pe(f,"TYPE","xmlhttp"),za(u,f),u.m&&u.o&&rp(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=_c(ur(f)),g.m=null,g.P=!0,Yv(g,u)}n.Za=function(){this.C!=null&&(this.C=null,Ic(this),sp(this),Nt(19))};function Sc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Sw(u,f){var g=null;if(u.g==f){Sc(u),op(u),u.g=null;var S=2}else if(tp(u.h,f))g=f.D,nw(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;S=hc(),kt(S,new Gv(S,g)),Tc(u)}else Iw(u);else if(L=f.s,L==3||L==0&&0<f.X||!(S==1&&$1(u,f)||S==2&&sp(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),L){case 1:Gi(u,5);break;case 4:Gi(u,10);break;case 3:Gi(u,6);break;default:Gi(u,2)}}}function Pw(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function Gi(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),S=u.Xa;const L=!S;S=new Wi(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gc(S,"https"),_c(S),L?L1(S.toString(),g):M1(S.toString(),g)}else Nt(2);u.G=0,u.l&&u.l.sa(f),Aw(u),vw(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Aw(u){if(u.G=0,u.ka=[],u.l){const f=rw(u.h);(f.length!=0||u.i.length!=0)&&(C(u.ka,f),C(u.ka,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.ra()}}function xw(u,f,g){var S=g instanceof Wi?ur(g):new Wi(g);if(S.g!="")f&&(S.g=f+"."+S.g),yc(S,S.s);else{var L=a.location;S=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var j=new Wi(null);S&&gc(j,S),f&&(j.g=f),L&&yc(j,L),g&&(j.l=g),S=j}return g=u.D,f=u.ya,g&&f&&Pe(S,g,f),Pe(S,"VER",u.la),za(u,S),S}function Rw(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ue(new vc({eb:g})):new Ue(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cw(){}n=Cw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Pc(){}Pc.prototype.g=function(u,f){return new Jt(u,f)};function Jt(u,f){vt.call(this),this.g=new _w(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!w(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Ks(this)}v(Jt,vt),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){ip(this.g)},Jt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Gf(u),u=g);f.i.push(new A1(f.Ya++,u)),f.G==3&&Tc(f)},Jt.prototype.N=function(){this.g.l=null,delete this.j,ip(this.g),delete this.g,Jt.aa.N.call(this)};function bw(u){Kf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}v(bw,Kf);function kw(){Qf.call(this),this.status=1}v(kw,Qf);function Ks(u){this.g=u}v(Ks,Cw),Ks.prototype.ua=function(){kt(this.g,"a")},Ks.prototype.ta=function(u){kt(this.g,new bw(u))},Ks.prototype.sa=function(u){kt(this.g,new kw)},Ks.prototype.ra=function(){kt(this.g,"b")},Pc.prototype.createWebChannel=Pc.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,hx=function(){return new Pc},dx=function(){return hc()},cx=$i,mg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fc.NO_ERROR=0,fc.TIMEOUT=8,fc.HTTP_ERROR=6,vd=fc,Hv.COMPLETE="complete",ux=Hv,zv.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",vt.prototype.listen=vt.prototype.K,pl=zv,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,lx=Ue}).apply(typeof Gc<"u"?Gc:typeof self<"u"?self:typeof window<"u"?window:{});const RI="@firebase/firestore",CI="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new Xh("@firebase/firestore");function io(){return Pi.logLevel}function bF(n){Pi.setLogLevel(n)}function B(n,...e){if(Pi.logLevel<=ie.DEBUG){const t=e.map(I_);Pi.debug(`Firestore (${Ia}): ${n}`,...t)}}function He(n,...e){if(Pi.logLevel<=ie.ERROR){const t=e.map(I_);Pi.error(`Firestore (${Ia}): ${n}`,...t)}}function nr(n,...e){if(Pi.logLevel<=ie.WARN){const t=e.map(I_);Pi.warn(`Firestore (${Ia}): ${n}`,...t)}}function I_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,fx(n,r,t)}function fx(n,e,t){let r=`FIRESTORE (${Ia}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw He(r),new Error(r)}function X(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||fx(e,i,r)}function kF(n,e){n||K(57014,e)}function H(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class U extends Mt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(at.UNAUTHENTICATED))}shutdown(){}}class DF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class VF{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){X(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new gt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gt)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(X(typeof r.accessToken=="string",31837,{l:r}),new px(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string",2055,{h:e}),new at(e)}}class OF{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LF{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new OF(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MF{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ke(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){X(this.o===void 0,3512);const r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(X(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=FF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function te(n,e){return n<e?-1:n>e?1:0}function gg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return Hp(i)===Hp(s)?te(i,s):Hp(i)?1:-1}return te(n.length,e.length)}const jF=55296,UF=57343;function Hp(n){const e=n.charCodeAt(0);return e>=jF&&e<=UF}function Ho(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function mx(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="__name__";class Mn{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&K(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Mn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mn?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Mn.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return te(e.length,t.length)}static compareSegments(e,t){const r=Mn.isNumericId(e),i=Mn.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Mn.extractNumericId(e).compare(Mn.extractNumericId(t)):gg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gi.fromString(e.substring(4,e.length-2))}}class se extends Mn{construct(e,t,r){return new se(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new se(t)}static emptyPath(){return new se([])}}const BF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ne extends Mn{construct(e,t,r){return new Ne(e,t,r)}static isValidIdentifier(e){return BF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ne.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kI}static keyField(){return new Ne([kI])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new U(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ne(t)}static emptyPath(){return new Ne([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(se.fromString(e))}static fromName(e){return new W(se.fromString(e).popFirst(5))}static empty(){return new W(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n,e,t){if(!t)throw new U(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gx(n,e,t,r){if(e===!0&&r===!0)throw new U(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NI(n){if(!W.isDocumentKey(n))throw new U(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DI(n){if(W.isDocumentKey(n))throw new U(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function cf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K(12329,{type:typeof n})}function fe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cf(n);throw new U(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _x(n,e){if(e<=0)throw new U(M.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(n,e){const t={typeString:n};return e&&(t.value=e),t}function Hu(n,e){if(!yx(n))throw new U(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new U(M.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=-62135596800,OI=1e6;class pe{static now(){return pe.fromMillis(Date.now())}static fromDate(e){return pe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*OI);return new pe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<VI)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OI}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hu(e,pe._jsonSchema))return new pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-VI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pe._jsonSchemaVersion="firestore/timestamp/1.0",pe._jsonSchema={type:et("string",pe._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new pe(0,0))}static max(){return new J(new pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=-1;class dh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function yg(n){return n.fields.find(e=>e.kind===2)}function Zi(n){return n.fields.filter(e=>e.kind!==2)}dh.UNKNOWN_ID=-1;class wd{constructor(e,t){this.fieldPath=e,this.kind=t}}class mu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mu(0,un.min())}}function vx(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new pe(t+1,0):new pe(t,r));return new un(i,W.empty(),e)}function wx(n){return new un(n.readTime,n.key,Ko)}class un{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new un(J.min(),W.empty(),Ko)}static max(){return new un(J.max(),W.empty(),Ko)}}function P_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:te(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ix{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(n){if(n.code!==M.FAILED_PRECONDITION||n.message!==Ex)throw n;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof O?t:O.resolve(t)}catch(t){return O.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):O.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):O.reject(t)}static resolve(e){return new O((t,r)=>{t(e)})}static reject(e){return new O((t,r)=>{r(e)})}static waitFor(e){return new O((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=O.resolve(!1);for(const r of e)t=t.next(i=>i?O.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new O((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="SimpleDb";class df{static open(e,t,r,i){try{return new df(t,e.transaction(i,r))}catch(s){throw new Vl(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new gt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Vl(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=A_(r.target.error);this.S.reject(new Vl(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(B(en,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $F(t)}}class Yn{static delete(e){return B(en,"Removing database:",e),ts(Hy().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!lu())return!1;if(Yn.F())return!0;const e=Fe(),t=Yn.M(e),r=0<t&&t<10,i=Tx(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Yn.M(Fe())===12.2&&He("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(B(en,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new Vl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new U(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new U(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Vl(e,o))},i.onupgradeneeded=s=>{B(en,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{B(en,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=df.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),O.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(B(en,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Tx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class zF{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ts(this.U.delete())}}class Vl extends U{constructor(e,t){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ji(n){return n.name==="IndexedDbTransactionError"}class $F{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(B(en,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(B(en,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ts(r)}add(e){return B(en,"ADD",this.store.name,e,e),ts(this.store.add(e))}get(e){return ts(this.store.get(e)).next(t=>(t===void 0&&(t=null),B(en,"GET",this.store.name,e,t),t))}delete(e){return B(en,"DELETE",this.store.name,e),ts(this.store.delete(e))}count(){return B(en,"COUNT",this.store.name),ts(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new O((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,t){B(en,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new O((r,i)=>{t.onerror=s=>{const o=A_(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,t){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new zF(a),c=t(a.primaryKey,a.value,l);if(c instanceof O){const d=c.catch(h=>(l.done(),O.reject(h)));r.push(d)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>O.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ts(n){return new O((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=A_(r.target.error);t(i)}})}let LI=!1;function A_(n){const e=Yn.M(Fe());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LI||(LI=!0,setTimeout(()=>{throw r},0)),r}}return n}const Ol="IndexBackfiller";class qF{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){B(Ol,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();B(Ol,`Documents written: ${t}`)}catch(t){ji(t)?B(Ol,"Ignoring IndexedDB error during index backfill: ",t):await Fi(t)}await this.re(6e4)})}}class WF{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const r=new Set;let i=t,s=!0;return O.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return B(Ol,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(B(Ol,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}_e(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=wx(s);P_(o,r)>0&&(r=o)}),new un(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gt.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=-1;function Ku(n){return n==null}function gu(n){return n===0&&1/n==-1/0}function Sx(n){return typeof n=="number"&&Number.isInteger(n)&&!gu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="";function Rt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=MI(e)),e=GF(n.get(t),e);return MI(e)}function GF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case hh:t+="";break;default:t+=s}}return t}function MI(n){return n+hh+""}function Wn(n){const e=n.length;if(X(e>=2,64408,{path:n}),e===2)return X(n.charAt(0)===hh&&n.charAt(1)==="",56145,{path:n}),se.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf(hh,s);switch((o<0||o>t)&&K(50515,{path:n}),n.charAt(o+1)){case"":const a=n.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:K(61167,{path:n})}s=o+2}return new se(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="remoteDocuments",Qu="owner",Js="owner",yu="mutationQueues",HF="userId",Pn="mutations",FI="batchId",cs="userMutationsIndex",jI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e){return[n,Rt(e)]}function Px(n,e,t){return[n,Rt(e),t]}const KF={},Qo="documentMutations",fh="remoteDocumentsV14",QF=["prefixPath","collectionGroup","readTime","documentId"],Id="documentKeyIndex",YF=["prefixPath","collectionGroup","documentId"],Ax="collectionGroupIndex",XF=["collectionGroup","readTime","prefixPath","documentId"],_u="remoteDocumentGlobal",_g="remoteDocumentGlobalKey",Yo="targets",xx="queryTargetsIndex",JF=["canonicalId","targetId"],Xo="targetDocuments",ZF=["targetId","path"],x_="documentTargetsIndex",ej=["path","targetId"],ph="targetGlobalKey",ys="targetGlobal",vu="collectionParents",tj=["collectionId","parent"],Jo="clientMetadata",nj="clientId",hf="bundles",rj="bundleId",ff="namedQueries",ij="name",R_="indexConfiguration",sj="indexId",vg="collectionGroupIndex",oj="collectionGroup",Ll="indexState",aj=["indexId","uid"],Rx="sequenceNumberIndex",lj=["uid","sequenceNumber"],Ml="indexEntries",uj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cx="documentKeyIndex",cj=["indexId","uid","orderedDocumentKey"],pf="documentOverlays",dj=["userId","collectionPath","documentId"],wg="collectionPathOverlayIndex",hj=["userId","collectionPath","largestBatchId"],bx="collectionGroupOverlayIndex",fj=["userId","collectionGroup","largestBatchId"],C_="globals",pj="name",kx=[yu,Pn,Qo,es,Yo,Qu,ys,Xo,Jo,_u,vu,hf,ff],mj=[...kx,pf],Nx=[yu,Pn,Qo,fh,Yo,Qu,ys,Xo,Jo,_u,vu,hf,ff,pf],Dx=Nx,b_=[...Dx,R_,Ll,Ml],gj=b_,Vx=[...b_,C_],yj=Vx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends Ix{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function it(n,e){const t=H(n);return Yn.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ui(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ox(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,t){this.comparator=e,this.root=t||ht.EMPTY}insert(e,t){return new Ie(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ht.RED,this.left=i??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ht(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new BI(this.data.getIterator())}getIteratorFrom(e){return new BI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _e)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _e(this.comparator);return t.data=e,t}}class BI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zs(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(Ne.comparator)}static empty(){return new Ht([])}unionWith(e){let t=new _e(Ne.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ht(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lx("Invalid base64 string: "+s):s}}(e);return new ze(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ze(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ze.EMPTY_BYTE_STRING=new ze("");const vj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(n){if(X(!!n,39018),typeof n=="string"){let e=0;const t=vj.exec(n);if(X(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(n.seconds),nanos:Ce(n.nanos)}}function Ce(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function kr(n){return typeof n=="string"?ze.fromBase64String(n):ze.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="server_timestamp",Fx="__type__",jx="__previous_value__",Ux="__local_write_time__";function mf(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Fx])==null?void 0:r.stringValue)===Mx}function gf(n){const e=n.mapValue.fields[jx];return mf(e)?gf(e):e}function wu(n){const e=br(n.mapValue.fields[Ux].timestampValue);return new pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,t,r,i,s,o,a,l,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Ig="(default)";class Ai{constructor(e,t){this.projectId=e,this.database=t||Ig}static empty(){return new Ai("","")}get isDefaultDatabase(){return this.database===Ig}isEqual(e){return e instanceof Ai&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="__type__",Bx="__max__",ri={mapValue:{fields:{__type__:{stringValue:Bx}}}},N_="__vector__",Zo="value",Td={nullValue:"NULL_VALUE"};function xi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mf(n)?4:zx(n)?9007199254740991:yf(n)?10:11:K(28295,{value:n})}function rr(n,e){if(n===e)return!0;const t=xi(n);if(t!==xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wu(n).isEqual(wu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=br(i.timestampValue),a=br(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return kr(i.bytesValue).isEqual(kr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ce(i.geoPointValue.latitude)===Ce(s.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ce(i.integerValue)===Ce(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ce(i.doubleValue),a=Ce(s.doubleValue);return o===a?gu(o)===gu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ho(n.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(UI(o)!==UI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!rr(o[l],a[l])))return!1;return!0}(n,e);default:return K(52216,{left:n})}}function Eu(n,e){return(n.values||[]).find(t=>rr(t,e))!==void 0}function Ri(n,e){if(n===e)return 0;const t=xi(n),r=xi(e);if(t!==r)return te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return te(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ce(s.integerValue||s.doubleValue),l=Ce(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return zI(n.timestampValue,e.timestampValue);case 4:return zI(wu(n),wu(e));case 5:return gg(n.stringValue,e.stringValue);case 6:return function(s,o){const a=kr(s),l=kr(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=te(a[c],l[c]);if(d!==0)return d}return te(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=te(Ce(s.latitude),Ce(o.latitude));return a!==0?a:te(Ce(s.longitude),Ce(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return $I(n.arrayValue,e.arrayValue);case 10:return function(s,o){var p,y,v,T;const a=s.fields||{},l=o.fields||{},c=(p=a[Zo])==null?void 0:p.arrayValue,d=(y=l[Zo])==null?void 0:y.arrayValue,h=te(((v=c==null?void 0:c.values)==null?void 0:v.length)||0,((T=d==null?void 0:d.values)==null?void 0:T.length)||0);return h!==0?h:$I(c,d)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ri.mapValue&&o===ri.mapValue)return 0;if(s===ri.mapValue)return 1;if(o===ri.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=gg(l[h],d[h]);if(p!==0)return p;const y=Ri(a[l[h]],c[d[h]]);if(y!==0)return y}return te(l.length,d.length)}(n.mapValue,e.mapValue);default:throw K(23264,{he:t})}}function zI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return te(n,e);const t=br(n),r=br(e),i=te(t.seconds,r.seconds);return i!==0?i:te(t.nanos,r.nanos)}function $I(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Ri(t[i],r[i]);if(s)return s}return te(t.length,r.length)}function ea(n){return Tg(n)}function Tg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=br(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return kr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Tg(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Tg(t.fields[o])}`;return i+"}"}(n.mapValue):K(61005,{value:n})}function Sd(n){switch(xi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gf(n);return e?16+Sd(e):16;case 5:return 2*n.stringValue.length;case 6:return kr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Sd(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ui(r.fields,(s,o)=>{i+=s.length+Sd(o)}),i}(n.mapValue);default:throw K(13486,{value:n})}}function As(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sg(n){return!!n&&"integerValue"in n}function Iu(n){return!!n&&"arrayValue"in n}function qI(n){return!!n&&"nullValue"in n}function WI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pd(n){return!!n&&"mapValue"in n}function yf(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[k_])==null?void 0:r.stringValue)===N_}function Fl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ui(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fl(n.arrayValue.values[t]);return e}return{...n}}function zx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Bx}const $x={mapValue:{fields:{[k_]:{stringValue:N_},[Zo]:{arrayValue:{}}}}};function Ej(n){return"nullValue"in n?Td:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?As(Ai.empty(),W.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?yf(n)?$x:{mapValue:{}}:K(35942,{value:n})}function Ij(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?As(Ai.empty(),W.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?$x:"mapValue"in n?yf(n)?{mapValue:{}}:ri:K(61959,{value:n})}function GI(n,e){const t=Ri(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function HI(n,e){const t=Ri(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.value=e}static empty(){return new ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Pd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fl(t)}setAll(e){let t=Ne.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Fl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Pd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Pd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ui(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ft(Fl(this.value))}}function qx(n){const e=[];return Ui(n.fields,(t,r)=>{const i=new Ne([t]);if(Pd(r)){const s=qx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xe(e,0,J.min(),J.min(),J.min(),ft.empty(),0)}static newFoundDocument(e,t,r,i){return new xe(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new xe(e,2,t,J.min(),J.min(),ft.empty(),0)}static newUnknownDocument(e,t){return new xe(e,3,t,J.min(),J.min(),ft.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t){this.position=e,this.inclusive=t}}function KI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),t.key):r=Ri(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function QI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!rr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Tj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{}class ae extends Wx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Sj(e,t,r):t==="array-contains"?new xj(e,r):t==="in"?new Xx(e,r):t==="not-in"?new Rj(e,r):t==="array-contains-any"?new Cj(e,r):new ae(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Pj(e,r):new Aj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ri(t,this.value)):t!==null&&xi(this.value)===xi(t)&&this.matchesComparison(Ri(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ge extends Wx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ge(e,t)}matches(e){return ta(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ta(n){return n.op==="and"}function Pg(n){return n.op==="or"}function D_(n){return Gx(n)&&ta(n)}function Gx(n){for(const e of n.filters)if(e instanceof ge)return!1;return!0}function Ag(n){if(n instanceof ae)return n.field.canonicalString()+n.op.toString()+ea(n.value);if(D_(n))return n.filters.map(e=>Ag(e)).join(",");{const e=n.filters.map(t=>Ag(t)).join(",");return`${n.op}(${e})`}}function Hx(n,e){return n instanceof ae?function(r,i){return i instanceof ae&&r.op===i.op&&r.field.isEqual(i.field)&&rr(r.value,i.value)}(n,e):n instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Hx(o,i.filters[a]),!0):!1}(n,e):void K(19439)}function Kx(n,e){const t=n.filters.concat(e);return ge.create(t,n.op)}function Qx(n){return n instanceof ae?function(t){return`${t.field.canonicalString()} ${t.op} ${ea(t.value)}`}(n):n instanceof ge?function(t){return t.op.toString()+" {"+t.getFilters().map(Qx).join(" ,")+"}"}(n):"Filter"}class Sj extends ae{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){const t=W.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pj extends ae{constructor(e,t){super(e,"in",t),this.keys=Yx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Aj extends ae{constructor(e,t){super(e,"not-in",t),this.keys=Yx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Yx(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}class xj extends ae{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Iu(t)&&Eu(t.arrayValue,this.value)}}class Xx extends ae{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Eu(this.value.arrayValue,t)}}class Rj extends ae{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Eu(this.value.arrayValue,t)}}class Cj extends ae{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Iu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Eu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function xg(n,e=null,t=[],r=[],i=null,s=null,o=null){return new bj(n,e,t,r,i,s,o)}function xs(n){const e=H(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ag(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ku(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ea(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ea(r)).join(",")),e.Te=t}return e.Te}function Yu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Tj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Hx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QI(n.startAt,e.startAt)&&QI(n.endAt,e.endAt)}function mh(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function gh(n,e){return n.filters.filter(t=>t instanceof ae&&t.field.isEqual(e))}function YI(n,e,t){let r=Td,i=!0;for(const s of gh(n,e)){let o=Td,a=!0;switch(s.op){case"<":case"<=":o=Ej(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Td}GI({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];GI({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function XI(n,e,t){let r=ri,i=!0;for(const s of gh(n,e)){let o=ri,a=!0;switch(s.op){case">=":case">":o=Ij(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ri}HI({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];HI({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Jx(n,e,t,r,i,s,o,a){return new Lr(n,e,t,r,i,s,o,a)}function Ta(n){return new Lr(n)}function JI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function V_(n){return n.collectionGroup!==null}function Do(n){const e=H(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new _e(Ne.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Tu(s,r))}),t.has(Ne.keyField().canonicalString())||e.Ie.push(new Tu(Ne.keyField(),r))}return e.Ie}function Ft(n){const e=H(n);return e.Ee||(e.Ee=kj(e,Do(n))),e.Ee}function kj(n,e){if(n.limitType==="F")return xg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Tu(i.field,s)});const t=n.endAt?new Ci(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ci(n.startAt.position,n.startAt.inclusive):null;return xg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Rg(n,e){const t=n.filters.concat([e]);return new Lr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yh(n,e,t){return new Lr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xu(n,e){return Yu(Ft(n),Ft(e))&&n.limitType===e.limitType}function Zx(n){return`${xs(Ft(n))}|lt:${n.limitType}`}function so(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Qx(i)).join(", ")}]`),Ku(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ea(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ea(i)).join(",")),`Target(${r})`}(Ft(n))}; limitType=${n.limitType})`}function Ju(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Do(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=KI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Do(r),i)||r.endAt&&!function(o,a,l){const c=KI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Do(r),i))}(n,e)}function eR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tR(n){return(e,t)=>{let r=!1;for(const i of Do(n)){const s=Nj(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Nj(n,e,t){const r=n.field.isKeyField()?W.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ri(l,c):K(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Ox(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=new Ie(W.comparator);function Kt(){return Dj}const nR=new Ie(W.comparator);function ml(...n){let e=nR;for(const t of n)e=e.insert(t.key,t);return e}function rR(n){let e=nR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Gn(){return jl()}function iR(){return jl()}function jl(){return new Mr(n=>n.toString(),(n,e)=>n.isEqual(e))}const Vj=new Ie(W.comparator),Oj=new _e(W.comparator);function re(...n){let e=Oj;for(const t of n)e=e.add(t);return e}const Lj=new _e(te);function O_(){return Lj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gu(e)?"-0":e}}function sR(n){return{integerValue:""+n}}function oR(n,e){return Sx(e)?sR(e):L_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this._=void 0}}function Mj(n,e,t){return n instanceof na?function(i,s){const o={fields:{[Fx]:{stringValue:Mx},[Ux]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mf(s)&&(s=gf(s)),s&&(o.fields[jx]=s),{mapValue:o}}(t,e):n instanceof Rs?lR(n,e):n instanceof Cs?uR(n,e):function(i,s){const o=aR(i,s),a=ZI(o)+ZI(i.Ae);return Sg(o)&&Sg(i.Ae)?sR(a):L_(i.serializer,a)}(n,e)}function Fj(n,e,t){return n instanceof Rs?lR(n,e):n instanceof Cs?uR(n,e):t}function aR(n,e){return n instanceof ra?function(r){return Sg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class na extends _f{}class Rs extends _f{constructor(e){super(),this.elements=e}}function lR(n,e){const t=cR(e);for(const r of n.elements)t.some(i=>rr(i,r))||t.push(r);return{arrayValue:{values:t}}}class Cs extends _f{constructor(e){super(),this.elements=e}}function uR(n,e){let t=cR(e);for(const r of n.elements)t=t.filter(i=>!rr(i,r));return{arrayValue:{values:t}}}class ra extends _f{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ZI(n){return Ce(n.integerValue||n.doubleValue)}function cR(n){return Iu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t){this.field=e,this.transform=t}}function jj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Rs&&i instanceof Rs||r instanceof Cs&&i instanceof Cs?Ho(r.elements,i.elements,rr):r instanceof ra&&i instanceof ra?rr(r.Ae,i.Ae):r instanceof na&&i instanceof na}(n.transform,e.transform)}class Uj{constructor(e,t){this.version=e,this.transformResults=t}}class De{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new De}static exists(e){return new De(void 0,e)}static updateTime(e){return new De(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vf{}function dR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pa(n.key,De.none()):new Sa(n.key,n.data,De.none());{const t=n.data,r=ft.empty();let i=new _e(Ne.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Fr(n.key,r,new Ht(i.toArray()),De.none())}}function Bj(n,e,t){n instanceof Sa?function(i,s,o){const a=i.value.clone(),l=tT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Fr?function(i,s,o){if(!Ad(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=tT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(hR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ul(n,e,t,r){return n instanceof Sa?function(s,o,a,l){if(!Ad(s.precondition,o))return a;const c=s.value.clone(),d=nT(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Fr?function(s,o,a,l){if(!Ad(s.precondition,o))return a;const c=nT(s.fieldTransforms,l,o),d=o.data;return d.setAll(hR(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return Ad(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function zj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=aR(r.transform,i||null);s!=null&&(t===null&&(t=ft.empty()),t.set(r.field,s))}return t||null}function eT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ho(r,i,(s,o)=>jj(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Sa extends vf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fr extends vf{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function hR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function tT(n,e,t){const r=new Map;X(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Fj(o,a,t[i]))}return r}function nT(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Mj(s,o,e))}return r}class Pa extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M_ extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Bj(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ul(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ul(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=iR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=dR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),re())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,(t,r)=>eT(t,r))&&Ho(this.baseMutations,e.baseMutations,(t,r)=>eT(t,r))}}class j_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){X(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Vj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new j_(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,le;function fR(n){switch(n){case M.OK:return K(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return K(15467,{code:n})}}function pR(n){if(n===void 0)return He("GRPC error has no .code"),M.UNKNOWN;switch(n){case Ye.OK:return M.OK;case Ye.CANCELLED:return M.CANCELLED;case Ye.UNKNOWN:return M.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return M.INTERNAL;case Ye.UNAVAILABLE:return M.UNAVAILABLE;case Ye.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ye.NOT_FOUND:return M.NOT_FOUND;case Ye.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ye.ABORTED:return M.ABORTED;case Ye.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ye.DATA_LOSS:return M.DATA_LOSS;default:return K(39323,{code:n})}}(le=Ye||(Ye={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=new gi([4294967295,4294967295],0);function rT(n){const e=mR().encode(n),t=new ax;return t.update(e),new Uint8Array(t.digest())}function iT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new gi([t,r],0),new gi([i,s],0)]}class B_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gl(`Invalid padding: ${t}`);if(r<0)throw new gl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=gi.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(gi.fromNumber(r)));return i.compare(qj)===1&&(i=new gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=rT(e),[r,i]=iT(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new B_(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const t=rT(e),[r,i]=iT(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ec(J.min(),i,new Ie(te),Kt(),re())}}class tc{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new tc(r,t,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class gR{constructor(e,t){this.targetId=e,this.Ce=t}}class yR{constructor(e,t,r=ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class sT{constructor(){this.ve=0,this.Fe=oT(),this.Me=ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=re(),t=re(),r=re();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:s})}}),new tc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=oT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,X(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Wj{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kt(),this.Je=Kc(),this.He=Kc(),this.Ye=new Ie(te)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(mh(s))if(r===0){const o=new W(s.path);this.et(t,o,xe.newNoDocument(o,J.min()))}else X(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,c)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=kr(r).toUint8Array()}catch(l){if(l instanceof Lx)return nr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new B_(o,i,s)}catch(l){return nr(l instanceof gl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&mh(a.target)){const l=new W(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,xe.newNoDocument(l,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=re();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new ec(e,t,this.Ye,this.je,r);return this.je=Kt(),this.Je=Kc(),this.He=Kc(),this.Ye=new Ie(te),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new sT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _e(te),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _e(te),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sT),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kc(){return new Ie(W.comparator)}function oT(){return new Ie(W.comparator)}const Gj={asc:"ASCENDING",desc:"DESCENDING"},Hj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kj={and:"AND",or:"OR"};class Qj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cg(n,e){return n.useProto3Json||Ku(e)?e:{value:e}}function ia(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _R(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Yj(n,e){return ia(n,e.toTimestamp())}function Ke(n){return X(!!n,49232),J.fromTimestamp(function(t){const r=br(t);return new pe(r.seconds,r.nanos)}(n))}function z_(n,e){return bg(n,e).canonicalString()}function bg(n,e){const t=function(i){return new se(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function vR(n){const e=se.fromString(n);return X(CR(e),10190,{key:e.toString()}),e}function Su(n,e){return z_(n.databaseId,e.path)}function Xn(n,e){const t=vR(e);if(t.get(1)!==n.databaseId.projectId)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(IR(t))}function wR(n,e){return z_(n.databaseId,e)}function ER(n){const e=vR(n);return e.length===4?se.emptyPath():IR(e)}function kg(n){return new se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IR(n){return X(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function aT(n,e,t){return{name:Su(n,e),fields:t.value.mapValue.fields}}function TR(n,e,t){const r=Xn(n,e.name),i=Ke(e.updateTime),s=e.createTime?Ke(e.createTime):J.min(),o=new ft({mapValue:{fields:e.fields}}),a=xe.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Xj(n,e){return"found"in e?function(r,i){X(!!i.found,43571),i.found.name,i.found.updateTime;const s=Xn(r,i.found.name),o=Ke(i.found.updateTime),a=i.found.createTime?Ke(i.found.createTime):J.min(),l=new ft({mapValue:{fields:i.found.fields}});return xe.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){X(!!i.missing,3894),X(!!i.readTime,22933);const s=Xn(r,i.missing),o=Ke(i.readTime);return xe.newNoDocument(s,o)}(n,e):K(7234,{result:e})}function Jj(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:K(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(X(d===void 0||typeof d=="string",58123),ze.fromBase64String(d||"")):(X(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ze.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?M.UNKNOWN:pR(c.code);return new U(d,c.message||"")}(o);t=new yR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xn(n,r.document.name),s=Ke(r.document.updateTime),o=r.document.createTime?Ke(r.document.createTime):J.min(),a=new ft({mapValue:{fields:r.document.fields}}),l=xe.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];t=new xd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xn(n,r.document),s=r.readTime?Ke(r.readTime):J.min(),o=xe.newNoDocument(i,s),a=r.removedTargetIds||[];t=new xd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xn(n,r.document),s=r.removedTargetIds||[];t=new xd([],s,i,null)}else{if(!("filter"in e))return K(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new $j(i,s),a=r.targetId;t=new gR(a,o)}}return t}function Pu(n,e){let t;if(e instanceof Sa)t={update:aT(n,e.key,e.value)};else if(e instanceof Pa)t={delete:Su(n,e.key)};else if(e instanceof Fr)t={update:aT(n,e.key,e.data),updateMask:i4(e.fieldMask)};else{if(!(e instanceof M_))return K(16599,{Vt:e.type});t={verify:Su(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof na)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ra)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw K(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Yj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K(27497)}(n,e.precondition)),t}function Ng(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?De.updateTime(Ke(s.updateTime)):s.exists!==void 0?De.exists(s.exists):De.none()}(e.currentDocument):De.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)X(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new na;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Rs(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Cs(d)}else"increment"in a?l=new ra(o,a.increment):K(16584,{proto:a});const c=Ne.fromServerFormat(a.fieldPath);return new Zu(c,l)}(n,i)):[];if(e.update){e.update.name;const i=Xn(n,e.update.name),s=new ft({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Ht(c.map(d=>Ne.fromServerFormat(d)))}(e.updateMask);return new Fr(i,s,o,t,r)}return new Sa(i,s,t,r)}if(e.delete){const i=Xn(n,e.delete);return new Pa(i,t)}if(e.verify){const i=Xn(n,e.verify);return new M_(i,t)}return K(1463,{proto:e})}function Zj(n,e){return n&&n.length>0?(X(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?Ke(i.updateTime):Ke(s);return o.isEqual(J.min())&&(o=Ke(s)),new Uj(o,i.transformResults||[])}(t,e))):[]}function SR(n,e){return{documents:[wR(n,e.path)]}}function PR(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=wR(n,i);const s=function(c){if(c.length!==0)return RR(ge.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:oo(p.field),direction:t4(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Cg(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:t,parent:i}}function AR(n){let e=ER(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){X(r===1,65062);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){const p=xR(h);return p instanceof ge&&D_(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(p=>function(v){return new Tu(ao(v.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Ku(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(h){const p=!!h.before,y=h.values||[];return new Ci(y,p)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const p=!h.before,y=h.values||[];return new Ci(y,p)}(t.endAt)),Jx(e,i,o,s,a,"F",l,c)}function e4(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ao(t.unaryFilter.field);return ae.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ao(t.unaryFilter.field);return ae.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ao(t.unaryFilter.field);return ae.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ao(t.unaryFilter.field);return ae.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(n):n.fieldFilter!==void 0?function(t){return ae.create(ao(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ge.create(t.compositeFilter.filters.map(r=>xR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(t.compositeFilter.op))}(n):K(30097,{filter:n})}function t4(n){return Gj[n]}function n4(n){return Hj[n]}function r4(n){return Kj[n]}function oo(n){return{fieldPath:n.canonicalString()}}function ao(n){return Ne.fromServerFormat(n.fieldPath)}function RR(n){return n instanceof ae?function(t){if(t.op==="=="){if(WI(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NAN"}};if(qI(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(WI(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NOT_NAN"}};if(qI(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(t.field),op:n4(t.op),value:t.value}}}(n):n instanceof ge?function(t){const r=t.getFilters().map(i=>RR(i));return r.length===1?r[0]:{compositeFilter:{op:r4(t.op),filters:r}}}(n):K(54877,{filter:n})}function i4(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function CR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,t,r,i,s=J.min(),o=J.min(),a=ze.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.yt=e}}function s4(n,e){let t;if(e.document)t=TR(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=W.fromSegments(e.noDocument.path),i=ks(e.noDocument.readTime);t=xe.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K(56709);{const r=W.fromSegments(e.unknownDocument.path),i=ks(e.unknownDocument.version);t=xe.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new pe(i[0],i[1]);return J.fromTimestamp(s)}(e.readTime)),t}function lT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_h(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Su(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ia(s,o.version.toTimestamp()),createTime:ia(s,o.createTime.toTimestamp())}}(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:bs(e.version)};else{if(!e.isUnknownDocument())return K(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:bs(e.version)}}return r}function _h(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function bs(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ks(n){const e=new pe(n.seconds,n.nanoseconds);return J.fromTimestamp(e)}function ns(n,e){const t=(e.baseMutations||[]).map(s=>Ng(n.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Ng(n.yt,s)),i=pe.fromMillis(e.localWriteTimeMs);return new F_(e.batchId,i,t,r)}function yl(n){const e=ks(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ks(n.lastLimboFreeSnapshotVersion):J.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){const o=s.documents.length;return X(o===1,1966,{count:o}),Ft(Ta(ER(s.documents[0])))}(n.query):function(s){return Ft(AR(s))}(n.query),new _r(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ze.fromBase64String(n.resumeToken))}function kR(n,e){const t=bs(e.snapshotVersion),r=bs(e.lastLimboFreeSnapshotVersion);let i;i=mh(e.target)?SR(n.yt,e.target):PR(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xs(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $_(n){const e=AR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yh(e,e.limit,"L"):e}function Kp(n,e){return new U_(e.largestBatchId,Ng(n.yt,e.overlayMutation))}function uT(n,e){const t=e.path.lastSegment();return[n,Rt(e.path.popLast()),t]}function cT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:bs(r.readTime),documentKey:Rt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{getBundleMetadata(e,t){return dT(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ks(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return dT(e).put(function(i){return{bundleId:i.id,createTime:bs(Ke(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return hT(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:$_(s.bundledQuery),readTime:ks(s.readTime)}}(r)})}saveNamedQuery(e,t){return hT(e).put(function(i){return{name:i.name,readTime:bs(Ke(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function dT(n){return it(n,hf)}function hT(n){return it(n,ff)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new wf(e,r)}getOverlay(e,t){return nl(e).get(uT(this.userId,t)).next(r=>r?Kp(this.serializer,r):null)}getOverlays(e,t){const r=Gn();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new U_(t,o);i.push(this.St(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Rt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(nl(e).Z(wg,a))}),O.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Gn(),s=Rt(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return nl(e).J(wg,o).next(a=>{for(const l of a){const c=Kp(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Gn();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nl(e).ee({index:bx,range:a},(l,c,d)=>{const h=Kp(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}St(e,t){return nl(e).put(function(i,s,o){const[a,l,c]=uT(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Pu(i.yt,o.mutation)}}(this.serializer,this.userId,t))}}function nl(n){return it(n,pf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{bt(e){return it(e,C_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?ze.fromUint8Array(r):ze.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ce(e.integerValue));else if("doubleValue"in e){const r=Ce(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),gu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=br(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(kr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?zx(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):yf(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):K(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var o,a;const r=e.fields||{};this.Ft(t,53);const i=Zo,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(t,15),t.Mt(Ce(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),W.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}rs.Kt=new rs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=255;function l4(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function fT(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=l4(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}class u4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=fT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=fT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(eo),this.sn(255)}_n(){this.an(eo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===eo?(this.sn(eo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===eo?(this.an(eo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class c4{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class d4{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class rl{constructor(){this.cn=new u4,this.ln=new c4(this.cn),this.hn=new d4(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new is(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Rd(this.En),directionalValue:Rd(this.dn),orderedDocumentKey:Rd(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Wr(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=pT(n.En,e.En),t!==0?t:(t=pT(n.dn,e.dn),t!==0?t:W.comparator(n.In,e.In)))}function pT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Rd(n){return KP()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function mT(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}class gT{constructor(e){this.mn=new _e((t,r)=>Ne.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(X(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=yg(e);if(t!==void 0&&!this.wn(t))return!1;const r=Zi(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new _e(Ne.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new wd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new wd(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new wd(r.field,r.dir==="asc"?0:1)));return new dh(dh.UNKNOWN_ID,this.collectionId,t,mu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(n){var t,r;if(X(n instanceof ae||n instanceof ge,20012),n instanceof ae){if(n instanceof Xx){const i=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map(s=>ae.create(n.field,"==",s)))||[];return ge.create(i,"or")}return n}const e=n.filters.map(i=>NR(i));return ge.create(e,n.op)}function h4(n){if(n.getFilters().length===0)return[];const e=Og(NR(n));return X(DR(e),7391),Dg(e)||Vg(e)?[e]:e.getFilters()}function Dg(n){return n instanceof ae}function Vg(n){return n instanceof ge&&D_(n)}function DR(n){return Dg(n)||Vg(n)||function(t){if(t instanceof ge&&Pg(t)){for(const r of t.getFilters())if(!Dg(r)&&!Vg(r))return!1;return!0}return!1}(n)}function Og(n){if(X(n instanceof ae||n instanceof ge,34018),n instanceof ae)return n;if(n.filters.length===1)return Og(n.filters[0]);const e=n.filters.map(r=>Og(r));let t=ge.create(e,n.op);return t=vh(t),DR(t)?t:(X(t instanceof ge,64498),X(ta(t),40251),X(t.filters.length>1,57927),t.filters.reduce((r,i)=>q_(r,i)))}function q_(n,e){let t;return X(n instanceof ae||n instanceof ge,38388),X(e instanceof ae||e instanceof ge,25473),t=n instanceof ae?e instanceof ae?function(i,s){return ge.create([i,s],"and")}(n,e):yT(n,e):e instanceof ae?yT(e,n):function(i,s){if(X(i.filters.length>0&&s.filters.length>0,48005),ta(i)&&ta(s))return Kx(i,s.getFilters());const o=Pg(i)?i:s,a=Pg(i)?s:i,l=o.filters.map(c=>q_(c,a));return ge.create(l,"or")}(n,e),vh(t)}function yT(n,e){if(ta(e))return Kx(e,n.getFilters());{const t=e.filters.map(r=>q_(n,r));return ge.create(t,"or")}}function vh(n){if(X(n instanceof ae||n instanceof ge,11850),n instanceof ae)return n;const e=n.getFilters();if(e.length===1)return vh(e[0]);if(Gx(n))return n;const t=e.map(i=>vh(i)),r=[];return t.forEach(i=>{i instanceof ae?r.push(i):i instanceof ge&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ge.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this.Cn=new W_}addToCollectionParentIndex(e,t){return this.Cn.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(un.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(un.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}}class W_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _e(se.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _e(se.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="IndexedDbIndexManager",Qc=new Uint8Array(0);class p4{constructor(e,t){this.databaseId=t,this.vn=new W_,this.Fn=new Mr(r=>xs(r),(r,i)=>Yu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const s={collectionId:r,parent:Rt(i)};return vT(e).put(s)}return O.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[mx(t),""],!1,!0);return vT(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Wn(o.parent))}return r})}addFieldIndex(e,t){const r=il(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const o=no(e);return s.next(a=>{o.put(cT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=il(e),i=no(e),s=to(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=il(e),r=to(e),i=no(e);return t.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,t){return O.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new gT(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=to(e);let i=!0;const s=new Map;return O.forEach(this.Mn(t),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=re();const a=[];return O.forEach(s,(l,c)=>{B(_T,`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(l)} to execute ${xs(t)}`);const d=function(E,N){const D=yg(N);if(D===void 0)return null;for(const F of gh(E,D.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null}(c,l),h=function(E,N){const D=new Map;for(const F of Zi(N))for(const x of gh(E,F.fieldPath))switch(x.op){case"==":case"in":D.set(F.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return D.set(F.fieldPath.canonicalString(),x.value),Array.from(D.values())}return null}(c,l),p=function(E,N){const D=[];let F=!0;for(const x of Zi(N)){const I=x.kind===0?YI(E,x.fieldPath,E.startAt):XI(E,x.fieldPath,E.startAt);D.push(I.value),F&&(F=I.inclusive)}return new Ci(D,F)}(c,l),y=function(E,N){const D=[];let F=!0;for(const x of Zi(N)){const I=x.kind===0?XI(E,x.fieldPath,E.endAt):YI(E,x.fieldPath,E.endAt);D.push(I.value),F&&(F=I.inclusive)}return new Ci(D,F)}(c,l),v=this.On(l,c,p),T=this.On(l,c,y),C=this.Nn(l,c,h),_=this.Bn(l.indexId,d,v,p.inclusive,T,y.inclusive,C);return O.forEach(_,w=>r.Y(w,t.limit).next(E=>{E.forEach(N=>{const D=W.fromSegments(N.documentKey);o.has(D)||(o=o.add(D),a.push(D))})}))}).next(()=>a)}return O.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=h4(ge.create(e.filters,"and")).map(r=>xg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),c=l/(t!=null?t.length:1),d=[];for(let h=0;h<l;++h){const p=t?this.Ln(t[h/c]):Qc,y=this.kn(e,p,r[h%c],i),v=this.qn(e,p,s[h%c],o),T=a.map(C=>this.kn(e,p,C,!0));d.push(...this.createRange(y,v,T))}return d}kn(e,t,r,i){const s=new is(e,W.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new is(e,W.empty(),t,r);return i?s.An():s}xn(e,t){const r=new gT(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.Mn(t);return O.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new _e(Ne.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Qn(e,t){const r=new rl;for(const i of Zi(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);rs.Kt.Dt(s,o)}return r.un()}Ln(e){const t=new rl;return rs.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new rl;return rs.Kt.Dt(As(this.databaseId,t),r.Pn(function(s){const o=Zi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new rl);let s=0;for(const o of Zi(e)){const a=r[s++];for(const l of i)if(this.Un(t,o.fieldPath)&&Iu(a))i=this.Kn(i,o,a);else{const c=l.Pn(o.kind);rs.Kt.Dt(a,c)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new rl;l.seed(a.un()),rs.Kt.Dt(o,l.Pn(t.kind)),s.push(l)}return s}Un(e,t){return!!e.filters.find(r=>r instanceof ae&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=il(e),i=no(e);return(t?r.J(vg,IDBKeyRange.bound(t,t)):r.J()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new mu(h.sequenceNumber,new un(ks(h.readTime),new W(Wn(h.documentKey)),h.largestBatchId)):mu.empty(),y=d.fields.map(([v,T])=>new wd(Ne.fromServerFormat(v),T));return new dh(d.indexId,d.collectionGroup,y,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:te(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=il(e),s=no(e);return this.Gn(e).next(o=>i.J(vg,IDBKeyRange.bound(t,t)).next(a=>O.forEach(a,l=>s.put(cT(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return O.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,l=>this.zn(e,i,l).next(c=>{const d=this.jn(s,l);return c.isEqual(d)?O.resolve():this.Jn(e,s,l,c,d)}))))})}Hn(e,t,r,i){return to(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return to(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=to(e);let s=new _e(Wr);return i.ee({index:Cx,range:IDBKeyRange.only([r.indexId,this.uid,Rd(this.$n(r,t))])},(o,a)=>{s=s.add(new is(r.indexId,t,mT(a.arrayValue),mT(a.directionalValue)))}).next(()=>s)}jn(e,t){let r=new _e(Wr);const i=this.Qn(t,e);if(i==null)return r;const s=yg(t);if(s!=null){const o=e.data.field(s.fieldPath);if(Iu(o))for(const a of o.arrayValue.values||[])r=r.add(new is(t.indexId,e.key,this.Ln(a),i))}else r=r.add(new is(t.indexId,e.key,Qc,i));return r}Jn(e,t,r,i,s){B(_T,"Updating index entries for document '%s'",t.key);const o=[];return function(l,c,d,h,p){const y=l.getIterator(),v=c.getIterator();let T=Zs(y),C=Zs(v);for(;T||C;){let _=!1,w=!1;if(T&&C){const E=d(T,C);E<0?w=!0:E>0&&(_=!0)}else T!=null?w=!0:_=!0;_?(h(C),C=Zs(v)):w?(p(T),T=Zs(y)):(T=Zs(y),C=Zs(v))}}(i,s,Wr,a=>{o.push(this.Hn(e,t,r,a))},a=>{o.push(this.Yn(e,t,r,a))}),O.waitFor(o)}Gn(e){let t=1;return no(e).ee({index:Rx,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Wr(o,a)).filter((o,a,l)=>!a||Wr(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Wr(o,e),l=Wr(o,t);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Qc,W.empty()),l=i[o+1].Vn(this.uid,Qc,W.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,t){return Wr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wT)}getMinOffset(e,t){return O.mapArray(this.Mn(t),r=>this.xn(e,r).next(i=>i||K(44426))).next(wT)}}function vT(n){return it(n,vu)}function to(n){return it(n,Ml)}function il(n){return it(n,R_)}function no(n){return it(n,Ll)}function wT(n){X(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;P_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new un(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VR=41943040;class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(n,e,t){const r=n.store(Pn),i=n.store(Qo),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.ee({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{X(a===1,47070,{batchId:t.batchId})}));const c=[];for(const d of t.mutations){const h=Px(e,d.key.path,t.batchId);s.push(i.delete(h)),c.push(d.key)}return O.waitFor(s).next(()=>c)}function wh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(VR,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);class Ef{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){X(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Ef(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gr(e).ee({index:cs,range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=lo(e),o=Gr(e);return o.add({}).next(a=>{X(typeof a=="number",49019);const l=new F_(a,t,r,i),c=function(y,v,T){const C=T.baseMutations.map(w=>Pu(y.yt,w)),_=T.mutations.map(w=>Pu(y.yt,w));return{userId:v,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:C,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new _e((p,y)=>te(p.canonicalString(),y.canonicalString()));for(const p of i){const y=Px(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(y,KF))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),O.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return Gr(e).get(t).next(r=>r?(X(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ns(this.serializer,r)):null)}er(e,t){return this.Xn[t]?O.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Gr(e).ee({index:cs,range:i},(o,a,l)=>{a.userId===this.userId&&(X(a.batchId>=r,47524,{tr:r}),s=ns(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=yi;return Gr(e).ee({index:cs,range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,yi],[this.userId,Number.POSITIVE_INFINITY]);return Gr(e).J(cs,t).next(r=>r.map(i=>ns(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ed(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return lo(e).ee({range:i},(o,a,l)=>{const[c,d,h]=o,p=Wn(d);if(c===this.userId&&t.path.isEqual(p))return Gr(e).get(h).next(y=>{if(!y)throw K(61480,{nr:o,batchId:h});X(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:h}),s.push(ns(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _e(te);const i=[];return t.forEach(s=>{const o=Ed(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=lo(e).ee({range:a},(c,d,h)=>{const[p,y,v]=c,T=Wn(y);p===this.userId&&s.path.isEqual(T)?r=r.add(v):h.done()});i.push(l)}),O.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Ed(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new _e(te);return lo(e).ee({range:o},(l,c,d)=>{const[h,p,y]=l,v=Wn(p);h===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(y)):d.done()}).next(()=>this.rr(e,a))}rr(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Gr(e).get(s).next(o=>{if(o===null)throw K(35274,{batchId:s});X(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(ns(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OR(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return O.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return lo(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Wn(s[1]);i.push(l)}else a.done()}).next(()=>{X(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,t){return LR(e,this.userId,t)}_r(e){return MR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:yi,lastStreamToken:""})}}function LR(n,e,t){const r=Ed(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return lo(n).ee({range:s,X:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function Gr(n){return it(n,Pn)}function lo(n){return it(n,Qo)}function MR(n){return it(n,yu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ns(0)}static cr(){return new Ns(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const r=new Ns(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>J.fromTimestamp(new pe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ro(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(X(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return ro(e).ee((o,a)=>{const l=yl(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,t){return ro(e).ee((r,i)=>{const s=yl(i);t(s)})}lr(e){return IT(e).get(ph).next(t=>(X(t!==null,2888),t))}hr(e,t){return IT(e).put(ph,t)}Pr(e,t){return ro(e).put(kR(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xs(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ro(e).ee({range:i,index:xx},(o,a,l)=>{const c=yl(a);Yu(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Zr(e);return t.forEach(o=>{const a=Rt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,t,r){const i=Zr(e);return O.forEach(t,s=>{const o=Rt(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Zr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Zr(e);let s=re();return i.ee({range:r,X:!0},(o,a,l)=>{const c=Wn(o[1]),d=new W(c);s=s.add(d)}).next(()=>s)}containsKey(e,t){const r=Rt(t.path),i=IDBKeyRange.bound([r],[mx(r)],!1,!0);let s=0;return Zr(e).ee({index:x_,X:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}At(e,t){return ro(e).get(t).next(r=>r?yl(r):null)}}function ro(n){return it(n,Yo)}function IT(n){return it(n,ys)}function Zr(n){return it(n,Xo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="LruGarbageCollector",g4=1048576;function ST([n,e],[t,r]){const i=te(n,t);return i===0?te(e,r):i}class y4{constructor(e){this.Ir=e,this.buffer=new _e(ST),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ST(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){B(TT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ji(t)?B(TT,"Ignoring IndexedDB error during garbage collection: ",t):await Fi(t)}await this.Vr(3e5)})}}class _4{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(Gt.ce);const r=new y4(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(ET)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ET):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),io()<=ie.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function jR(n,e){return new _4(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,t){this.db=e,this.garbageCollector=jR(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,i)=>t(i))}addReference(e,t,r){return Yc(e,r)}removeReference(e,t,r){return Yc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Yc(e,t)}br(e,t){return function(i,s){let o=!1;return MR(i).te(a=>LR(i,a,s).next(l=>(l&&(o=!0),O.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=t){const l=this.br(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,J.min()),Zr(e).delete(function(h){return[0,Rt(h.path)]}(o))))});i.push(l)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Yc(e,t)}Sr(e,t){const r=Zr(e);let i,s=Gt.ce;return r.ee({index:x_},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Gt.ce&&t(new W(Wn(i)),s),s=c,i=l):s=Gt.ce}).next(()=>{s!==Gt.ce&&t(new W(Wn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yc(n,e){return Zr(n).put(function(r,i){return{targetId:0,path:Rt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.changes=new Mr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xe.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Hi(e).put(r)}removeEntry(e,t,r){return Hi(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],_h(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=xe.newInvalidDocument(t);return Hi(e).ee({index:Id,range:IDBKeyRange.only(sl(t))},(i,s)=>{r=this.Cr(t,s)}).next(()=>r)}vr(e,t){let r={size:0,document:xe.newInvalidDocument(t)};return Hi(e).ee({index:Id,range:IDBKeyRange.only(sl(t))},(i,s)=>{r={document:this.Cr(t,s),size:wh(s)}}).next(()=>r)}getEntries(e,t){let r=Kt();return this.Fr(e,t,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,t){let r=Kt(),i=new Ie(W.comparator);return this.Fr(e,t,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,wh(o))}).next(()=>({documents:r,Or:i}))}Fr(e,t,r){if(t.isEmpty())return O.resolve();let i=new _e(xT);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(sl(i.first()),sl(i.last())),o=i.getIterator();let a=o.getNext();return Hi(e).ee({index:Id,range:s},(l,c,d)=>{const h=W.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&xT(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(sl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),_h(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hi(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=Kt();for(const h of c){const p=this.Cr(W.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Ju(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Kt();const o=AT(t,r),a=AT(t,un.max());return Hi(e).ee({index:Ax,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(W.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new E4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return PT(e).get(_g).next(t=>(X(!!t,20021),t))}Dr(e,t){return PT(e).put(_g,t)}Cr(e,t){if(t){const r=s4(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return xe.newInvalidDocument(e)}}function BR(n){return new w4(n)}class E4 extends UR{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Mr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new _e((s,o)=>te(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=lT(this.Nr.serializer,o);i=i.add(s.path.popLast());const c=wh(l);r+=c-a.size,t.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=lT(this.Nr.serializer,o.convertToNoDocument(J.min()));t.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Nr.updateMetadata(e,r)),O.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function PT(n){return it(n,_u)}function Hi(n){return it(n,fh)}function sl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AT(n,e){const t=e.documentKey.path.toArray();return[n,_h(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function xT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=te(t[s],r[s]),i)return i;return i=te(t.length,r.length),i||(i=te(t[t.length-2],r[r.length-2]),i||te(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ul(r.mutation,i,Ht.empty(),pe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=re()){const i=Gn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ml();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Gn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,re()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Kt();const o=jl(),a=function(){return jl()}();return t.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Fr)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ul(d.mutation,c,d.mutation.getFieldMask(),pe.now())):o.set(c.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>a.set(c,new I4(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,t){const r=jl();let i=new Ie((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let d=r.get(l)||Ht.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||re()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=iR();d.forEach(p=>{if(!s.has(p)){const y=dR(t.get(p),r.get(p));y!==null&&h.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):V_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(Gn());let a=Ko,l=s;return o.next(c=>O.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,re())).next(d=>({batchId:a,changes:rR(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=ml();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=ml();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,l=>{const c=function(h,p){return new Lr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,xe.newInvalidDocument(d)))});let a=ml();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Ul(d.mutation,c,Ht.empty(),pe.now()),Ju(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return O.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ke(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:$_(i.bundledQuery),readTime:Ke(i.readTime)}}(t)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(){this.overlays=new Ie(W.comparator),this.qr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Gn();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){const i=Gn(),s=t.length+1,o=new W(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ie((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Gn(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Gn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return O.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new U_(t,r));let s=this.qr.get(t);s===void 0&&(s=re(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.sessionToken=ze.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.Qr=new _e(st.$r),this.Ur=new _e(st.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new st(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new st(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new W(new se([])),r=new st(t,e),i=new st(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new W(new se([])),r=new st(t,e),i=new st(t,e+1);let s=re();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new st(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return W.comparator(e.key,t.key)||te(e.Yr,t.Yr)}static Kr(e,t){return te(e.Yr,t.Yr)||W.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _e(st.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new F_(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new st(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?yi:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new st(t,0),i=new st(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _e(te);return t.forEach(i=>{const s=new st(i,0),o=new st(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;W.isDocumentKey(s)||(s=s.child(""));const o=new st(new W(s),0);let a=new _e(te);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)},o),O.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){X(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(t.mutations,i=>{const s=new st(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new st(t,0),i=this.Zr.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.ri=e,this.docs=function(){return new Ie(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():xe.newInvalidDocument(t))}getEntries(e,t){let r=Kt();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xe.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Kt();const o=t.path,a=new W(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||P_(wx(d),r)<=0||(i.has(d.key)||Ju(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){K(9500)}ii(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new R4(this)}getSize(e){return O.resolve(this.size)}}class R4 extends UR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.persistence=e,this.si=new Mr(t=>xs(t),Yu),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.oi=0,this._i=new G_,this.targetCount=0,this.ai=Ns.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),O.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ns(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Pr(t),O.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),O.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Gt(0),this.li=!1,this.li=!0,this.hi=new P4,this.referenceDelegate=e(this),this.Pi=new C4(this),this.indexManager=new f4,this.remoteDocumentCache=function(i){return new x4(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new bR(t),this.Ii=new T4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new S4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new A4(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);const i=new b4(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return O.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class b4 extends Ix{constructor(e){super(),this.currentSequenceNumber=e}}class If{constructor(e){this.persistence=e,this.Ri=new G_,this.Vi=null}static mi(e){return new If(e)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),O.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,r=>{const i=W.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,J.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return O.or([()=>O.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Eh{constructor(e,t){this.persistence=e,this.pi=new Mr(r=>Rt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=jR(this,t)}static mi(e,t){return new Eh(e,t)}Ei(){}di(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return O.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?O.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,J.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),O.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sd(e.data.value)),t}br(e,t,r){return O.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.serializer=e}k(e,t,r,i){const s=new df("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore(Qu)}(e),function(l){l.createObjectStore(yu,{keyPath:HF}),l.createObjectStore(Pn,{keyPath:FI,autoIncrement:!0}).createIndex(cs,jI,{unique:!0}),l.createObjectStore(Qo)}(e),RT(e),function(l){l.createObjectStore(es)}(e));let o=O.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(Xo),l.deleteObjectStore(Yo),l.deleteObjectStore(ys)}(e),RT(e)),o=o.next(()=>function(l){const c=l.store(ys),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return c.put(ph,d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(Pn).J().next(h=>{l.deleteObjectStore(Pn),l.createObjectStore(Pn,{keyPath:FI,autoIncrement:!0}).createIndex(cs,jI,{unique:!0});const p=c.store(Pn),y=h.map(v=>p.put(v));return O.waitFor(y)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(Jo,{keyPath:nj})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(_u)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(hf,{keyPath:rj})})(e),function(l){l.createObjectStore(ff,{keyPath:ij})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(pf,{keyPath:dj});c.createIndex(wg,hj,{unique:!1}),c.createIndex(bx,fj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(fh,{keyPath:QF});c.createIndex(Id,YF),c.createIndex(Ax,XF)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(es))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(R_,{keyPath:sj,autoIncrement:!0}).createIndex(vg,oj,{unique:!1}),l.createObjectStore(Ll,{keyPath:aj}).createIndex(Rx,lj,{unique:!1}),l.createObjectStore(Ml,{keyPath:uj}).createIndex(Cx,cj,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore(Ll).clear()}).next(()=>{t.objectStore(Ml).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(C_,{keyPath:pj})})(e)})),r<18&&i>=18&&KP()&&(o=o.next(()=>{t.objectStore(Ll).clear()}).next(()=>{t.objectStore(Ml).clear()})),o}wi(e){let t=0;return e.store(es).ee((r,i)=>{t+=wh(i)}).next(()=>{const r={byteSize:t};return e.store(_u).put(_g,r)})}yi(e){const t=e.store(yu),r=e.store(Pn);return t.J().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,yi],[s.userId,s.lastAcknowledgedBatchId]);return r.J(cs,o).next(a=>O.forEach(a,l=>{X(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=ns(this.serializer,l);return OR(e,s.userId,c).next(()=>{})}))}))}Si(e){const t=e.store(Xo),r=e.store(es);return e.store(ys).get(ph).next(i=>{const s=[];return r.ee((o,a)=>{const l=new se(o),c=function(h){return[0,Rt(h)]}(l);s.push(t.get(c).next(d=>d?O.resolve():(h=>t.put({targetId:0,path:Rt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>O.waitFor(s))})}bi(e,t){e.createObjectStore(vu,{keyPath:tj});const r=t.store(vu),i=new W_,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Rt(l)})}};return t.store(es).ee({X:!0},(o,a)=>{const l=new se(o);return s(l.popLast())}).next(()=>t.store(Qo).ee({X:!0},([o,a,l],c)=>{const d=Wn(a);return s(d.popLast())}))}Di(e){const t=e.store(Yo);return t.ee((r,i)=>{const s=yl(i),o=kR(this.serializer,s);return t.put(o)})}Ci(e,t){const r=t.store(es),i=[];return r.ee((s,o)=>{const a=t.store(fh),l=function(h){return h.document?new W(se.fromString(h.document.name).popFirst(5)):h.noDocument?W.fromSegments(h.noDocument.path):h.unknownDocument?W.fromSegments(h.unknownDocument.path):K(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>O.waitFor(i))}Fi(e,t){const r=t.store(Pn),i=BR(this.serializer),s=new H_(If.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??re();ns(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),O.forEach(a,(l,c)=>{const d=new at(c),h=wf.wt(this.serializer,d),p=s.getIndexManager(d),y=Ef.wt(d,this.serializer,p,s.referenceDelegate);return new zR(i,y,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Eg(t,Gt.ce),l).next()})})}}function RT(n){n.createObjectStore(Xo,{keyPath:ZF}).createIndex(x_,ej,{unique:!0}),n.createObjectStore(Yo,{keyPath:"targetId"}).createIndex(xx,JF,{unique:!0}),n.createObjectStore(ys)}const Hr="IndexedDbPersistence",Qp=18e5,Yp=5e3,Xp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$R="main";class K_{constructor(e,t,r,i,s,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!K_.v())throw new U(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new v4(this,i),this.$i=t+$R,this.serializer=new bR(l),this.Ui=new Yn(this.$i,this.Ni,new k4(this.serializer)),this.hi=new a4,this.Pi=new m4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=BR(this.serializer),this.Ii=new o4,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&He(Hr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U(M.FAILED_PRECONDITION,Xp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Gt(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(ji(e))return B(Hr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B(Hr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return ol(e).get(Js).next(t=>O.resolve(this.es(t)))}ts(e){return Xc(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Qp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=it(t,Jo);return r.J().next(i=>{const s=this.ss(i,Qp),o=i.filter(a=>s.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?O.resolve(!0):ol(e).get(Js).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Yp)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new U(M.FAILED_PRECONDITION,Xp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xc(e).J().next(r=>this.ss(r,Yp).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&B(Hr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Qu,Jo],e=>{const t=new Eg(e,Gt.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Xc(e).J().next(t=>this.ss(t,Qp).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Ef.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new p4(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return wf.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){B(Hr,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===18?yj:l===17?Vx:l===16?gj:l===15?b_:l===14?Dx:l===13?Nx:l===12?mj:l===11?kx:void K(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new Eg(a,this.ci?this.ci.next():Gt.ce),t==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw He(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new U(M.FAILED_PRECONDITION,Ex);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return ol(e).get(Js).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Yp)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new U(M.FAILED_PRECONDITION,Xp)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ol(e).put(Js,t)}static v(){return Yn.v()}Zi(e){const t=ol(e);return t.get(Js).next(r=>this.es(r)?(B(Hr,"Releasing primary lease."),t.delete(Js)):O.resolve())}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(He(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;HP()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return B(Hr,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return He(Hr,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){He("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ol(n){return it(n,Qu)}function Xc(n){return it(n,Jo)}function Q_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=re(),i=re();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Y_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return HP()?8:Tx(Fe())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new N4;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(io()<=ie.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",so(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(io()<=ie.DEBUG&&B("QueryEngine","Query:",so(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(io()<=ie.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",so(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ft(t))):O.resolve())}ys(e,t){if(JI(t))return O.resolve(null);let r=Ft(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=yh(t,null,"F"),r=Ft(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=re(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(t,a);return this.Cs(t,c,o,l.readTime)?this.ys(e,yh(t,null,"F")):this.vs(e,c,t,l)}))})))}ws(e,t,r,i){return JI(t)||i.isEqual(J.min())?O.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(t,s);return this.Cs(t,o,r,i)?O.resolve(null):(io()<=ie.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),so(t)),this.vs(e,o,t,vx(i,Ko)).next(a=>a))})}Ds(e,t){let r=new _e(tR(e));return t.forEach((i,s)=>{Ju(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return io()<=ie.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",so(t)),this.ps.getDocumentsMatchingQuery(e,t,un.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="LocalStore",D4=3e8;class V4{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ie(te),this.xs=new Mr(s=>xs(s),Yu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function WR(n,e,t,r){return new V4(n,e,t,r)}async function GR(n,e){const t=H(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=re();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function O4(n,e){const t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let y=O.resolve();return p.forEach(v=>{y=y.next(()=>d.getEntry(l,v)).next(T=>{const C=c.docVersions.get(v);X(C!==null,48541),T.version.compareTo(C)<0&&(h.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),d.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=re();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function HR(n){const e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function L4(n,e){const t=H(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(t.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Pi.addMatchingKeys(s,d.addedDocuments,h)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(ze.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),function(T,C,_){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=D4?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,y,d)&&a.push(t.Pi.updateTargetData(s,y))});let l=Kt(),c=re();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(KR(s,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(J.min())){const d=t.Pi.getLastRemoteSnapshotVersion(s).next(h=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ms=i,s))}function KR(n,e,t){let r=re(),i=re();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Kt();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):B(X_,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:i}})}function M4(n,e){const t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=yi),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sa(n,e){const t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new _r(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function oa(n,e,t){const r=H(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ji(o))throw o;B(X_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Ih(n,e,t){const r=H(n);let i=J.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=H(l),p=h.xs.get(d);return p!==void 0?O.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,d)}(r,o,Ft(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:J.min(),t?s:re())).next(a=>(XR(r,eR(e),a),{documents:a,Qs:s})))}function QR(n,e){const t=H(n),r=H(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function YR(n,e){const t=H(n),r=t.Os.get(e)||J.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ns.getAllFromCollectionGroup(i,e,vx(r,Ko),Number.MAX_SAFE_INTEGER)).then(i=>(XR(t,e,i),i))}function XR(n,e,t){let r=n.Os.get(e)||J.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}async function F4(n,e,t,r){const i=H(n);let s=re(),o=Kt();for(const c of t){const d=e.$s(c.metadata.name);c.document&&(s=s.add(d));const h=e.Us(c);h.setReadTime(e.Ks(c.metadata.readTime)),o=o.insert(d,h)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await sa(i,function(d){return Ft(Ta(se.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>KR(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Pi.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.ks,d.qs)).next(()=>d.ks)))}async function j4(n,e,t=re()){const r=await sa(n,Ft($_(e.bundledQuery))),i=H(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ke(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(s,e);const a=r.withResumeToken(ze.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(s,a).next(()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Pi.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="firestore_clients";function CT(n,e){return`${JR}_${n}_${e}`}const ZR="firestore_mutations";function bT(n,e,t){let r=`${ZR}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const eC="firestore_targets";function Jp(n,e){return`${eC}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="SharedClientState";class Th{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new U(i.error.code,i.error.message))),o?new Th(e,t,i.state,s):(He(Fn,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bl{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new U(r.error.code,r.error.message))),s?new Bl(e,r.state,i):(He(Fn,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=O_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Sx(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Sh(e,s):(He(Fn,`Failed to parse client data for instance '${e}': ${t}`),null)}}class J_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new J_(t.clientId,t.onlineState):(He(Fn,`Failed to parse online state: ${e}`),null)}}class Lg{constructor(){this.activeTargetIds=O_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zp{constructor(e,t,r,i,s){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ie(te),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=CT(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Lg),this.ro=new RegExp(`^${JR}_${o}_([^_]*)$`),this.io=new RegExp(`^${ZR}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${eC}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(CT(this.persistenceKey,r));if(i){const s=Sh.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Jp(this.persistenceKey,e));if(i){const s=Bl.Ws(e,i);s&&(r=s.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jp(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return B(Fn,"READ",e,t),t}setItem(e,t){B(Fn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){B(Fn,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(B(Fn,"EVENT",t.key,t.newValue),t.key===this.eo)return void He("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=function(s){let o=Gt.ce;if(s!=null)try{const a=JSON.parse(s);X(typeof a=="number",30636,{So:s}),o=a}catch(a){He(Fn,"Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Gt.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(t)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new Th(this.currentUser,e,t,r),s=bT(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=bT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=Jp(this.persistenceKey,e),s=new Bl(e,t,r);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return Sh.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Th.Ws(new at(s),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return Bl.Ws(i,t)}uo(e){return J_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);B(Fn,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=O_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class tC{constructor(){this.Mo=new Lg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Lg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="ConnectivityMonitor";class NT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){B(kT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){B(kT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function Mg(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="RestConnection",B4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class z4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ig?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const o=Mg(),a=this.zo(e,t.toUriEncodedString());B(em,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(a),d=ya(c);return this.Jo(e,a,l,r,d).then(h=>(B(em,`Received RPC '${e}' ${o}: `,h),h),h=>{throw nr(em,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ia}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){const r=B4[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class q4 extends z4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const o=Mg();return new Promise((a,l)=>{const c=new lx;c.setWithCredentials(!0),c.listenOnce(ux.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case vd.NO_ERROR:const h=c.getResponseJson();B(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case vd.TIMEOUT:B(St,`RPC '${e}' ${o} timed out`),l(new U(M.DEADLINE_EXCEEDED,"Request time out"));break;case vd.HTTP_ERROR:const p=c.getStatus();if(B(St,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const T=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(w)>=0?w:M.UNKNOWN}(v.status);l(new U(T,v.message))}else l(new U(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new U(M.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{B(St,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);B(St,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",d,r,15)})}T_(e,t,r){const i=Mg(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hx(),a=dx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const d=s.join("");B(St,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,y=!1;const v=new $4({Yo:C=>{y?B(St,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(p||(B(St,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),B(St,`RPC '${e}' stream ${i} sending:`,C),h.send(C))},Zo:()=>h.close()}),T=(C,_,w)=>{C.listen(_,E=>{try{w(E)}catch(N){setTimeout(()=>{throw N},0)}})};return T(h,pl.EventType.OPEN,()=>{y||(B(St,`RPC '${e}' stream ${i} transport opened.`),v.o_())}),T(h,pl.EventType.CLOSE,()=>{y||(y=!0,B(St,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(h))}),T(h,pl.EventType.ERROR,C=>{y||(y=!0,nr(St,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),v.a_(new U(M.UNAVAILABLE,"The operation could not be completed")))}),T(h,pl.EventType.MESSAGE,C=>{var _;if(!y){const w=C.data[0];X(!!w,16349);const E=w,N=(E==null?void 0:E.error)||((_=E[0])==null?void 0:_.error);if(N){B(St,`RPC '${e}' stream ${i} received error:`,N);const D=N.status;let F=function(P){const A=Ye[P];if(A!==void 0)return pR(A)}(D),x=N.message;F===void 0&&(F=M.INTERNAL,x="Unknown error status: "+D+" with message "+N.message),y=!0,v.a_(new U(F,x)),h.close()}else B(St,`RPC '${e}' stream ${i} received:`,w),v.u_(w)}}),T(a,cx.STAT_EVENT,C=>{C.stat===mg.PROXY?B(St,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===mg.NOPROXY&&B(St,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(){return typeof window<"u"?window:null}function Cd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(n){return new Qj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="PersistentStream";class rC{constructor(e,t,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Z_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(He(t.toString()),He("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new U(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return B(DT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(B(DT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W4 extends rC{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Jj(this.serializer,e),r=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Ke(o.readTime):J.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=kg(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=mh(l)?{documents:SR(s,l)}:{query:PR(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_R(s,o.resumeToken);const c=Cg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=ia(s,o.snapshotVersion.toTimestamp());const c=Cg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=e4(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=kg(this.serializer),t.removeTarget=e,this.q_(t)}}class G4 extends rC{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return X(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,X(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){X(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Zj(e.writeResults,e.commitTime),r=Ke(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=kg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Pu(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{}class K4 extends H4{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,bg(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(M.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,bg(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Q4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(He(t),this.aa=!1):B("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="RemoteStore";class Y4{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Bi(this)&&(B(Ds,"Restarting streams for network reachability change."),await async function(l){const c=H(l);c.Ea.add(4),await Aa(c),c.Ra.set("Unknown"),c.Ea.delete(4),await rc(c)}(this))})}),this.Ra=new Q4(r,i)}}async function rc(n){if(Bi(n))for(const e of n.da)await e(!0)}async function Aa(n){for(const e of n.da)await e(!1)}function Tf(n,e){const t=H(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),nv(t)?tv(t):Ra(t).O_()&&ev(t,e))}function aa(n,e){const t=H(n),r=Ra(t);t.Ia.delete(e),r.O_()&&iC(t,e),t.Ia.size===0&&(r.O_()?r.L_():Bi(t)&&t.Ra.set("Unknown"))}function ev(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ra(n).Y_(e)}function iC(n,e){n.Va.Ue(e),Ra(n).Z_(e)}function tv(n){n.Va=new Wj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ra(n).start(),n.Ra.ua()}function nv(n){return Bi(n)&&!Ra(n).x_()&&n.Ia.size>0}function Bi(n){return H(n).Ea.size===0}function sC(n){n.Va=void 0}async function X4(n){n.Ra.set("Online")}async function J4(n){n.Ia.forEach((e,t)=>{ev(n,e)})}async function Z4(n,e){sC(n),nv(n)?(n.Ra.ha(e),tv(n)):n.Ra.set("Unknown")}async function eU(n,e,t){if(n.Ra.set("Online"),e instanceof yR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(n,e)}catch(r){B(Ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ph(n,r)}else if(e instanceof xd?n.Va.Ze(e):e instanceof gR?n.Va.st(e):n.Va.tt(e),!t.isEqual(J.min()))try{const r=await HR(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(c);d&&s.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(ze.EMPTY_BYTE_STRING,d.snapshotVersion)),iC(s,l);const h=new _r(d.target,l,c,d.sequenceNumber);ev(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){B(Ds,"Failed to raise snapshot:",r),await Ph(n,r)}}async function Ph(n,e,t){if(!ji(e))throw e;n.Ea.add(1),await Aa(n),n.Ra.set("Offline"),t||(t=()=>HR(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{B(Ds,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await rc(n)})}function oC(n,e){return e().catch(t=>Ph(n,t,e))}async function xa(n){const e=H(n),t=bi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yi;for(;tU(e);)try{const i=await M4(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,nU(e,i)}catch(i){await Ph(e,i)}aC(e)&&lC(e)}function tU(n){return Bi(n)&&n.Ta.length<10}function nU(n,e){n.Ta.push(e);const t=bi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function aC(n){return Bi(n)&&!bi(n).x_()&&n.Ta.length>0}function lC(n){bi(n).start()}async function rU(n){bi(n).ra()}async function iU(n){const e=bi(n);for(const t of n.Ta)e.ea(t.mutations)}async function sU(n,e,t){const r=n.Ta.shift(),i=j_.from(r,e,t);await oC(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await xa(n)}async function oU(n,e){e&&bi(n).X_&&await async function(r,i){if(function(o){return fR(o)&&o!==M.ABORTED}(i.code)){const s=r.Ta.shift();bi(r).B_(),await oC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await xa(r)}}(n,e),aC(n)&&lC(n)}async function VT(n,e){const t=H(n);t.asyncQueue.verifyOperationInProgress(),B(Ds,"RemoteStore received new credentials");const r=Bi(t);t.Ea.add(3),await Aa(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rc(t)}async function Fg(n,e){const t=H(n);e?(t.Ea.delete(2),await rc(t)):e||(t.Ea.add(2),await Aa(t),t.Ra.set("Unknown"))}function Ra(n){return n.ma||(n.ma=function(t,r,i){const s=H(t);return s.sa(),new W4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:X4.bind(null,n),t_:J4.bind(null,n),r_:Z4.bind(null,n),H_:eU.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),nv(n)?tv(n):n.Ra.set("Unknown")):(await n.ma.stop(),sC(n))})),n.ma}function bi(n){return n.fa||(n.fa=function(t,r,i){const s=H(t);return s.sa(),new G4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:rU.bind(null,n),r_:oU.bind(null,n),ta:iU.bind(null,n),na:sU.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await xa(n)):(await n.fa.stop(),n.Ta.length>0&&(B(Ds,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new rv(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ca(n,e){if(He("AsyncQueue",`${e}: ${n}`),ji(n))return new U(M.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=ml(),this.sortedSet=new Ie(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Vo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.ga=new Ie(W.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):K(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class la{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new la(e,t,Vo.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class lU{constructor(){this.queries=LT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=H(t),s=i.queries;i.queries=LT(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new U(M.ABORTED,"Firestore shutting down"))}}function LT(){return new Mr(n=>Zx(n),Xu)}async function iv(n,e){const t=H(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new aU,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Ca(o,`Initialization of query '${so(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&ov(t)}async function sv(n,e){const t=H(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function uU(n,e){const t=H(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&ov(t)}function cU(n,e,t){const r=H(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function ov(n){n.Ca.forEach(e=>{e.next()})}var jg,MT;(MT=jg||(jg={})).Ma="default",MT.Cache="cache";class av{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new la(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.serializer=e}$s(e){return Xn(this.serializer,e)}Us(e){return e.metadata.exists?TR(this.serializer,e.document,!1):xe.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Ke(e)}}class hU{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=uC(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const r=se.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new FT(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||re()).add(s);t.set(o,a)}}return t}async ja(e){const t=await F4(e,new FT(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await j4(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function uC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.key=e}}class dC{constructor(e){this.key=e}}class hC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=re(),this.mutatedKeys=re(),this.eu=tR(e),this.tu=new Vo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new OT,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),y=Ju(this.query,h)?h:null,v=!!p&&this.mutatedKeys.has(p.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;p&&y?p.data.isEqual(y.data)?v!==T&&(r.track({type:3,doc:y}),C=!0):this.su(p,y)||(r.track({type:2,doc:y}),C=!0,(l&&this.eu(y,l)>0||c&&this.eu(y,c)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),C=!0):p&&!y&&(r.track({type:1,doc:p}),C=!0,(l||c)&&(a=!0)),C&&(y?(o=o.add(y),s=T?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(y,v){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:C})}};return T(y)-T(v)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;const a=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new la(this.query,e.tu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new OT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new dC(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new cC(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=re();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return la.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zi="SyncEngine";class fU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pU{constructor(e){this.key=e,this.hu=!1}}class mU{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Mr(a=>Zx(a),Xu),this.Iu=new Map,this.Eu=new Set,this.du=new Ie(W.comparator),this.Au=new Map,this.Ru=new G_,this.Vu={},this.mu=new Map,this.fu=Ns.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gU(n,e,t=!0){const r=Sf(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await fC(r,e,t,!0),i}async function yU(n,e){const t=Sf(n);await fC(t,e,!0,!1)}async function fC(n,e,t,r){const i=await sa(n.localStore,Ft(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await lv(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Tf(n.remoteStore,i),a}async function lv(n,e,t,r,i){n.pu=(h,p,y)=>async function(T,C,_,w){let E=C.view.ru(_);E.Cs&&(E=await Ih(T.localStore,C.query,!1).then(({documents:x})=>C.view.ru(x,E)));const N=w&&w.targetChanges.get(C.targetId),D=w&&w.targetMismatches.get(C.targetId)!=null,F=C.view.applyChanges(E,T.isPrimaryClient,N,D);return Ug(T,C.targetId,F.au),F.snapshot}(n,h,p,y);const s=await Ih(n.localStore,e,!0),o=new hC(e,s.Qs),a=o.ru(s.documents),l=tc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);Ug(n,t,c.au);const d=new fU(e,t,o);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),c.snapshot}async function _U(n,e,t){const r=H(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Xu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await oa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&aa(r.remoteStore,i.targetId),ua(r,i.targetId)}).catch(Fi)):(ua(r,i.targetId),await oa(r.localStore,i.targetId,!0))}async function vU(n,e){const t=H(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),aa(t.remoteStore,r.targetId))}async function wU(n,e,t){const r=hv(n);try{const i=await function(o,a){const l=H(o),c=pe.now(),d=a.reduce((y,v)=>y.add(v.key),re());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let v=Kt(),T=re();return l.Ns.getEntries(y,d).next(C=>{v=C,v.forEach((_,w)=>{w.isValidDocument()||(T=T.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,v)).next(C=>{h=C;const _=[];for(const w of a){const E=zj(w,h.get(w.key).overlayedDocument);E!=null&&_.push(new Fr(w.key,E,qx(E.value.mapValue),De.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,_,a)}).next(C=>{p=C;const _=C.applyToLocalDocumentSet(h,T);return l.documentOverlayCache.saveOverlays(y,C.batchId,_)})}).then(()=>({batchId:p.batchId,changes:rR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ie(te)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,i.batchId,t),await jr(r,i.changes),await xa(r.remoteStore)}catch(i){const s=Ca(i,"Failed to persist write");t.reject(s)}}async function pC(n,e){const t=H(n);try{const r=await L4(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Au.get(s);o&&(X(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?X(o.hu,14607):i.removedDocuments.size>0&&(X(o.hu,42227),o.hu=!1))}),await jr(t,r,e)}catch(r){await Fi(r)}}function jT(n,e,t){const r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=H(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(a)&&(c=!0)}),c&&ov(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EU(n,e,t){const r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ie(W.comparator);o=o.insert(s,xe.newNoDocument(s,J.min()));const a=re().add(s),l=new ec(J.min(),new Map,new Ie(te),o,a);await pC(r,l),r.du=r.du.remove(s),r.Au.delete(e),dv(r)}else await oa(r.localStore,e,!1).then(()=>ua(r,e,t)).catch(Fi)}async function IU(n,e){const t=H(n),r=e.batch.batchId;try{const i=await O4(t.localStore,e);cv(t,r,null),uv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await jr(t,i)}catch(i){await Fi(i)}}async function TU(n,e,t){const r=H(n);try{const i=await function(o,a){const l=H(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(X(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);cv(r,e,t),uv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await jr(r,i)}catch(i){await Fi(i)}}async function SU(n,e){const t=H(n);Bi(t.remoteStore)||B(zi,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=H(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===yi)return void e.resolve();const i=t.mu.get(r)||[];i.push(e),t.mu.set(r,i)}catch(r){const i=Ca(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function uv(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function cv(n,e,t){const r=H(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ua(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||mC(n,r)})}function mC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(aa(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),dv(n))}function Ug(n,e,t){for(const r of t)r instanceof cC?(n.Ru.addReference(r.key,e),PU(n,r)):r instanceof dC?(B(zi,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||mC(n,r.key)):K(19791,{wu:r})}function PU(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(B(zi,"New document in limbo: "+t),n.Eu.add(r),dv(n))}function dv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new W(se.fromString(e)),r=n.fu.next();n.Au.set(r,new pU(t)),n.du=n.du.insert(t,r),Tf(n.remoteStore,new _r(Ft(Ta(t.path)),r,"TargetPurposeLimboResolution",Gt.ce))}}async function jr(n,e,t){const r=H(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,t).then(c=>{var d;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Y_.As(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,c){const d=H(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>O.forEach(c,p=>O.forEach(p.Es,y=>d.persistence.referenceDelegate.addReference(h,p.targetId,y)).next(()=>O.forEach(p.ds,y=>d.persistence.referenceDelegate.removeReference(h,p.targetId,y)))))}catch(h){if(!ji(h))throw h;B(X_,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const y=d.Ms.get(p),v=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(v);d.Ms=d.Ms.insert(p,T)}}}(r.localStore,s))}async function AU(n,e){const t=H(n);if(!t.currentUser.isEqual(e)){B(zi,"User change. New user:",e.toKey());const r=await GR(t.localStore,e);t.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new U(M.CANCELLED,o))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jr(t,r.Ls)}}function xU(n,e){const t=H(n),r=t.Au.get(e);if(r&&r.hu)return re().add(r.key);{let i=re();const s=t.Iu.get(e);if(!s)return i;for(const o of s){const a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function RU(n,e){const t=H(n),r=await Ih(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&Ug(t,e.targetId,i.au),i}async function CU(n,e){const t=H(n);return YR(t.localStore,e).then(r=>jr(t,r))}async function bU(n,e,t,r){const i=H(n),s=await function(a,l){const c=H(a),d=H(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):O.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await xa(i.remoteStore):t==="acknowledged"||t==="rejected"?(cv(i,e,r||null),uv(i,e),function(a,l){H(H(a).mutationQueue).ir(l)}(i.localStore,e)):K(6720,"Unknown batchState",{Su:t}),await jr(i,s)):B(zi,"Cannot apply mutation batch with id: "+e)}async function kU(n,e){const t=H(n);if(Sf(t),hv(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await UT(t,r.toArray());t.gu=!0,await Fg(t.remoteStore,!0);for(const s of i)Tf(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ua(t,o),oa(t.localStore,o,!0))),aa(t.remoteStore,o)}),await i,await UT(t,r),function(o){const a=H(o);a.Au.forEach((l,c)=>{aa(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ie(W.comparator)}(t),t.gu=!1,await Fg(t.remoteStore,!1)}}async function UT(n,e,t){const r=H(n),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await sa(r.localStore,Ft(l[0]));for(const c of l){const d=r.Tu.get(c),h=await RU(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await QR(r.localStore,o);a=await sa(r.localStore,c),await lv(r,gC(c),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function gC(n){return Jx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function NU(n){return function(t){return H(H(t).persistence).Ts()}(H(n).localStore)}async function DU(n,e,t,r){const i=H(n);if(i.gu)return void B(zi,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await YR(i.localStore,eR(s[0])),a=ec.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ze.EMPTY_BYTE_STRING);await jr(i,o,a);break}case"rejected":await oa(i.localStore,e,!0),ua(i,e,r);break;default:K(64155,t)}}async function VU(n,e,t){const r=Sf(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){B(zi,"Adding an already active target "+i);continue}const s=await QR(r.localStore,i),o=await sa(r.localStore,s);await lv(r,gC(s),o.targetId,!1,o.resumeToken),Tf(r.remoteStore,o)}for(const i of t)r.Iu.has(i)&&await oa(r.localStore,i,!1).then(()=>{aa(r.remoteStore,i),ua(r,i)}).catch(Fi)}}function Sf(n){const e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EU.bind(null,e),e.Pu.H_=uU.bind(null,e.eventManager),e.Pu.yu=cU.bind(null,e.eventManager),e}function hv(n){const e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TU.bind(null,e),e}function OU(n,e,t){const r=H(n);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(y,v){const T=H(y),C=Ke(v.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",_=>T.Ii.getBundleMetadata(_,v.id)).then(_=>!!_&&_.createTime.compareTo(C)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(uC(l));const c=new hU(l,o.serializer);let d=await o.bu();for(;d;){const p=await c.Ga(d);p&&a._updateProgress(p),d=await o.bu()}const h=await c.ja(s.localStore);return await jr(s,h.Ha,void 0),await function(y,v){const T=H(y);return T.persistence.runTransaction("Save bundle","readwrite",C=>T.Ii.saveBundleMetadata(C,v))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(l){return nr(zi,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Au{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return WR(this.persistence,new qR,e.initialUser,this.serializer)}Cu(e){return new H_(If.mi,this.serializer)}Du(e){return new tC}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Au.provider={build:()=>new Au};class LU extends Au{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){X(this.persistence.referenceDelegate instanceof Eh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new FR(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new H_(r=>Eh.mi(r,t),this.serializer)}}class yC extends Au{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await hv(this.xu.syncEngine),await xa(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return WR(this.persistence,new qR,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new FR(r,e.asyncQueue,t)}Mu(e,t){const r=new WF(t,this.persistence);return new qF(e.asyncQueue,r)}Cu(e){const t=Q_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new K_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,nC(),Cd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new tC}}class MU extends yC{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Zp&&(this.sharedClientState.syncEngine={Co:bU.bind(null,t),vo:DU.bind(null,t),Fo:VU.bind(null,t),Ts:NU.bind(null,t),Do:CU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await kU(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const t=nC();if(!Zp.v(t))throw new U(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Q_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class xu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AU.bind(null,this.syncEngine),await Fg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lU}()}createDatastore(e){const t=nc(e.databaseInfo.databaseId),r=function(s){return new q4(s)}(e.databaseInfo);return function(s,o,a,l){return new K4(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new Y4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>jT(this.syncEngine,t,0),function(){return NT.v()?new NT:new U4}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,d){const h=new mU(i,s,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=H(i);B(Ds,"RemoteStore shutting down."),s.Ea.add(5),await Aa(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}xu.provider={build:()=>new xu};function BT(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):He("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new gt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.Qu(`length string (${t}) is not valid number`);const i=await this.$u(r);return new dU(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new U(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const o=H(i),a={documents:s.map(h=>Su(o.serializer,h))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,se.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{const p=Xj(o.serializer,h);c.set(p.key.toString(),p)});const d=[];return s.forEach(h=>{const p=c.get(h.toString());X(!!p,55234,{key:h}),d.push(p)}),d}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=W.fromPath(r);this.mutations.push(new M_(i,this.precondition(i)))}),await async function(r,i){const s=H(r),o={writes:i.map(a=>Pu(s.serializer,a))};await s.Go("Commit",s.serializer.databaseId,se.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K(50498,{Gu:e.constructor.name});t=J.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new U(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?De.exists(!1):De.updateTime(t):De.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new U(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return De.updateTime(t)}return De.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new Z_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new jU(this.datastore),t=this.Hu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const t=this.updateFunction(e);return!Ku(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!fR(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="FirestoreClient";class BU{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=at.UNAUTHENTICATED,this.clientId=T_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{B(ki,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(B(ki,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ca(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function tm(n,e){n.asyncQueue.verifyOperationInProgress(),B(ki,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await GR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function zT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await fv(n);B(ki,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>VT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>VT(e.remoteStore,i)),n._onlineComponents=e}async function fv(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B(ki,"Using user provided OfflineComponentProvider");try{await tm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;nr("Error using user provided cache. Falling back to memory cache: "+t),await tm(n,new Au)}}else B(ki,"Using default OfflineComponentProvider"),await tm(n,new LU(void 0));return n._offlineComponents}async function Af(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(B(ki,"Using user provided OnlineComponentProvider"),await zT(n,n._uninitializedComponentsProvider._online)):(B(ki,"Using default OnlineComponentProvider"),await zT(n,new xu))),n._onlineComponents}function _C(n){return fv(n).then(e=>e.persistence)}function pv(n){return fv(n).then(e=>e.localStore)}function vC(n){return Af(n).then(e=>e.remoteStore)}function mv(n){return Af(n).then(e=>e.syncEngine)}function zU(n){return Af(n).then(e=>e.datastore)}async function ca(n){const e=await Af(n),t=e.eventManager;return t.onListen=gU.bind(null,e.syncEngine),t.onUnlisten=_U.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vU.bind(null,e.syncEngine),t}function $U(n){return n.asyncQueue.enqueue(async()=>{const e=await _C(n),t=await vC(n);return e.setNetworkEnabled(!0),function(i){const s=H(i);return s.Ea.delete(0),rc(s)}(t)})}function qU(n){return n.asyncQueue.enqueue(async()=>{const e=await _C(n),t=await vC(n);return e.setNetworkEnabled(!1),async function(i){const s=H(i);s.Ea.add(0),await Aa(s),s.Ra.set("Offline")}(t)})}function WU(n,e){const t=new gt;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,d){const h=H(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new U(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ca(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await pv(n),e,t)),t.promise}function wC(n,e,t={}){const r=new gt;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Pf({next:p=>{d.Nu(),o.enqueueAndForget(()=>sv(s,h));const y=p.docs.has(a);!y&&p.fromCache?c.reject(new U(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?c.reject(new U(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new av(Ta(a.path),d,{includeMetadataChanges:!0,qa:!0});return iv(s,h)}(await ca(n),n.asyncQueue,e,t,r)),r.promise}function GU(n,e){const t=new gt;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Ih(i,s,!0),l=new hC(s,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Ca(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await pv(n),e,t)),t.promise}function EC(n,e,t={}){const r=new gt;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Pf({next:p=>{d.Nu(),o.enqueueAndForget(()=>sv(s,h)),p.fromCache&&l.source==="server"?c.reject(new U(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new av(a,d,{includeMetadataChanges:!0,qa:!0});return iv(s,h)}(await ca(n),n.asyncQueue,e,t,r)),r.promise}function HU(n,e){const t=new Pf(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){H(i).Ca.add(s),s.next()}(await ca(n),t)),()=>{t.Nu(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){H(i).Ca.delete(s)}(await ca(n),t))}}function KU(n,e,t,r){const i=function(o,a){let l;return l=typeof o=="string"?mR().encode(o):o,function(d,h){return new FU(d,h)}(function(d,h){if(d instanceof Uint8Array)return BT(d,h);if(d instanceof ArrayBuffer)return BT(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,nc(e));n.asyncQueue.enqueueAndForget(async()=>{OU(await mv(n),i,r)})}function QU(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=H(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ii.getNamedQuery(o,i))}(await pv(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="firestore.googleapis.com",qT=!0;class WT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new U(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TC,this.ssl=qT}else this.host=e.host,this.ssl=e.ssl??qT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<g4)throw new U(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ic{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NF;switch(r.type){case"firstParty":return new LF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=$T.get(t);r&&(B("ComponentProvider","Removing Datastore"),$T.delete(t),r.terminate())}(this),Promise.resolve()}}function YU(n,e,t,r={}){var c;n=fe(n,ic);const i=ya(e),s=n._getSettings(),o={...s,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;i&&(zP(`https://${a}`),$P("Firestore",!0)),s.host!==TC&&s.host!==a&&nr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!Ei(l,o)&&(n._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=at.MOCK_USER;else{d=QD(r.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new U(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new at(p)}n._authCredentials=new DF(new px(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt=class SC{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new SC(this.firestore,e,this._query)}},Ee=class _l{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _l(this.firestore,e,this._key)}toJSON(){return{type:_l._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Hu(t,_l._jsonSchema))return new _l(e,r||null,new W(se.fromString(t.referencePath)))}};Ee._jsonSchemaVersion="firestore/documentReference/1.0",Ee._jsonSchema={type:et("string",Ee._jsonSchemaVersion),referencePath:et("string")};let _i=class PC extends jt{constructor(e,t,r){super(e,t,Ta(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ee(this.firestore,null,new W(e))}withConverter(e){return new PC(this.firestore,e,this._path)}};function AC(n,e,...t){if(n=ee(n),S_("collection","path",e),n instanceof ic){const r=se.fromString(e,...t);return DI(r),new _i(n,null,r)}{if(!(n instanceof Ee||n instanceof _i))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(se.fromString(e,...t));return DI(r),new _i(n.firestore,null,r)}}function XU(n,e){if(n=fe(n,ic),S_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jt(n,null,function(r){return new Lr(se.emptyPath(),r)}(e))}function Ah(n,e,...t){if(n=ee(n),arguments.length===1&&(e=T_.newId()),S_("doc","path",e),n instanceof ic){const r=se.fromString(e,...t);return NI(r),new Ee(n,null,new W(r))}{if(!(n instanceof Ee||n instanceof _i))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(se.fromString(e,...t));return NI(r),new Ee(n.firestore,n instanceof _i?n.converter:null,new W(r))}}function xC(n,e){return n=ee(n),e=ee(e),(n instanceof Ee||n instanceof _i)&&(e instanceof Ee||e instanceof _i)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function RC(n,e){return n=ee(n),e=ee(e),n instanceof jt&&e instanceof jt&&n.firestore===e.firestore&&Xu(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="AsyncQueue";class HT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Z_(this,"async_queue_retry"),this._c=()=>{const r=Cd();r&&B(GT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Cd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Cd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new gt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ji(e))throw e;B(GT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,He("INTERNAL UNHANDLED ERROR: ",KT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=rv.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&K(47125,{Pc:KT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function KT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class JU{constructor(){this._progressObserver={},this._taskCompletionResolver=new gt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=-1;let Qe=class extends ic{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new HT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new HT(e),this._firestoreClient=void 0,await e}}};function bt(n){if(n._terminated)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CC(n),n._firestoreClient}function CC(n){var r,i,s;const e=n._freezeSettings(),t=function(a,l,c,d){return new wj(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,IC(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new BU(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}function e3(n,e){nr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return bC(n,xu.provider,{build:r=>new yC(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function t3(n){nr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();bC(n,xu.provider,{build:t=>new MU(t,e.cacheSizeBytes)})}function bC(n,e,t){if((n=fe(n,Qe))._firestoreClient||n._terminated)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new U(M.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},CC(n)}function n3(n){if(n._initialized&&!n._terminated)throw new U(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new gt;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Yn.v())return Promise.resolve();const i=r+$R;await Yn.delete(i)}(Q_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function r3(n){return function(t){const r=new gt;return t.asyncQueue.enqueueAndForget(async()=>SU(await mv(t),r)),r.promise}(bt(n=fe(n,Qe)))}function i3(n){return $U(bt(n=fe(n,Qe)))}function s3(n){return qU(bt(n=fe(n,Qe)))}function o3(n,e){const t=bt(n=fe(n,Qe)),r=new JU;return KU(t,n._databaseId,e,r),r}function a3(n,e){return QU(bt(n=fe(n,Qe)),e).then(t=>t?new jt(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xt(ze.fromBase64String(e))}catch(t){throw new U(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xt(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hu(e,xt._jsonSchema))return xt.fromBase64String(e.bytes)}}xt._jsonSchemaVersion="firestore/bytes/1.0",xt._jsonSchema={type:et("string",xt._jsonSchemaVersion),bytes:et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ni=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ne(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kn._jsonSchemaVersion}}static fromJSON(e){if(Hu(e,kn._jsonSchema))return new kn(e.latitude,e.longitude)}}kn._jsonSchemaVersion="firestore/geoPoint/1.0",kn._jsonSchema={type:et("string",kn._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hu(e,Jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Jn(e.vectorValues);throw new U(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:et("string",Jn._jsonSchemaVersion),vectorValues:et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=/^__.*__$/;class u3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sa(e,this.data,t,this.fieldTransforms)}}class kC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:n})}}class xf{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NC(this.Ac)&&l3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class c3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nc(e)}Cc(e,t,r,i=!1){return new xf({Ac:e,methodName:t,Dc:r,path:Ne.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zs(n){const e=n._freezeSettings(),t=nc(n._databaseId);return new c3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Rf(n,e,t,r,i,s={}){const o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);Iv("Data must be an object, but it was:",o,r);const a=OC(r,o);let l,c;if(s.merge)l=new Ht(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=zg(e,h,t);if(!o.contains(p))throw new U(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);MC(d,p)||d.push(p)}l=new Ht(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new u3(new ft(a),l,c)}class sc extends Bs{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sc}}function DC(n,e,t){return new xf({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gv extends Bs{_toFieldTransform(e){return new Zu(e.path,new na)}isEqual(e){return e instanceof gv}}class yv extends Bs{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=DC(this,e,!0),r=this.vc.map(s=>$s(s,t)),i=new Rs(r);return new Zu(e.path,i)}isEqual(e){return e instanceof yv&&Ei(this.vc,e.vc)}}class _v extends Bs{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=DC(this,e,!0),r=this.vc.map(s=>$s(s,t)),i=new Cs(r);return new Zu(e.path,i)}isEqual(e){return e instanceof _v&&Ei(this.vc,e.vc)}}class vv extends Bs{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new ra(e.serializer,oR(e.serializer,this.Fc));return new Zu(e.path,t)}isEqual(e){return e instanceof vv&&this.Fc===e.Fc}}function wv(n,e,t,r){const i=n.Cc(1,e,t);Iv("Data must be an object, but it was:",i,r);const s=[],o=ft.empty();Ui(r,(l,c)=>{const d=Tv(e,l,t);c=ee(c);const h=i.yc(d);if(c instanceof sc)s.push(d);else{const p=$s(c,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new Ht(s);return new kC(o,a,i.fieldTransforms)}function Ev(n,e,t,r,i,s){const o=n.Cc(1,e,t),a=[zg(e,r,t)],l=[i];if(s.length%2!=0)throw new U(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(zg(e,s[p])),l.push(s[p+1]);const c=[],d=ft.empty();for(let p=a.length-1;p>=0;--p)if(!MC(c,a[p])){const y=a[p];let v=l[p];v=ee(v);const T=o.yc(y);if(v instanceof sc)c.push(y);else{const C=$s(v,T);C!=null&&(c.push(y),d.set(y,C))}}const h=new Ht(c);return new kC(d,h,o.fieldTransforms)}function VC(n,e,t,r=!1){return $s(t,n.Cc(r?4:3,e))}function $s(n,e){if(LC(n=ee(n)))return Iv("Unsupported field value:",e,n),OC(n,e);if(n instanceof Bs)return function(r,i){if(!NC(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=$s(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ee(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pe.fromDate(r);return{timestampValue:ia(i.serializer,s)}}if(r instanceof pe){const s=new pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ia(i.serializer,s)}}if(r instanceof kn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xt)return{bytesValue:_R(i.serializer,r._byteString)};if(r instanceof Ee){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:z_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Jn)return function(o,a){return{mapValue:{fields:{[k_]:{stringValue:N_},[Zo]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return L_(a.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${cf(r)}`)}(n,e)}function OC(n,e){const t={};return Ox(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(n,(r,i)=>{const s=$s(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function LC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pe||n instanceof kn||n instanceof xt||n instanceof Ee||n instanceof Bs||n instanceof Jn)}function Iv(n,e,t){if(!LC(t)||!yx(t)){const r=cf(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function zg(n,e,t){if((e=ee(e))instanceof Ni)return e._internalPath;if(typeof e=="string")return Tv(n,e);throw xh("Field path arguments must be of type string or ",n,!1,void 0,t)}const d3=new RegExp("[~\\*/\\[\\]]");function Tv(n,e,t){if(e.search(d3)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ni(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xh(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new U(M.INVALID_ARGUMENT,a+n+l)}function MC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ee(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new h3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class h3 extends Ru{data(){return super.data()}}function Cf(n,e){return typeof e=="string"?Tv(n,e):e instanceof Ni?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sv{}class oc extends Sv{}function Kr(n,e,...t){let r=[];e instanceof Sv&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Pv).length,a=s.filter(l=>l instanceof bf).length;if(o>1||o>0&&a>0)throw new U(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class bf extends oc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new bf(e,t,r)}_apply(e){const t=this._parse(e);return UC(e._query,t),new jt(e.firestore,e.converter,Rg(e._query,t))}_parse(e){const t=zs(e.firestore);return function(s,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new U(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){YT(h,d);const v=[];for(const T of h)v.push(QT(l,s,T));p={arrayValue:{values:v}}}else p=QT(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||YT(h,d),p=VC(a,o,h,d==="in"||d==="not-in");return ae.create(c,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function f3(n,e,t){const r=e,i=Cf("where",n);return bf._create(i,r,t)}class Pv extends Sv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Pv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ge.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)UC(o,l),o=Rg(o,l)}(e._query,t),new jt(e.firestore,e.converter,Rg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Av extends oc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Av(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new U(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tu(s,o)}(e._query,this._field,this._direction);return new jt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Lr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function p3(n,e="asc"){const t=e,r=Cf("orderBy",n);return Av._create(r,t)}class kf extends oc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new kf(e,t,r)}_apply(e){return new jt(e.firestore,e.converter,yh(e._query,this._limit,this._limitType))}}function m3(n){return _x("limit",n),kf._create("limit",n,"F")}function g3(n){return _x("limitToLast",n),kf._create("limitToLast",n,"L")}class Nf extends oc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Nf(e,t,r)}_apply(e){const t=jC(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(i,s){return new Lr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function y3(...n){return Nf._create("startAt",n,!0)}function _3(...n){return Nf._create("startAfter",n,!1)}class Df extends oc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Df(e,t,r)}_apply(e){const t=jC(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(i,s){return new Lr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function v3(...n){return Df._create("endBefore",n,!1)}function w3(...n){return Df._create("endAt",n,!0)}function jC(n,e,t,r){if(t[0]=ee(t[0]),t[0]instanceof Ru)return function(s,o,a,l,c){if(!l)throw new U(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Do(s))if(h.field.isKeyField())d.push(As(o,l.key));else{const p=l.data.field(h.field);if(mf(p))throw new U(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=h.field.canonicalString();throw new U(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(p)}return new Ci(d,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=zs(n.firestore);return function(o,a,l,c,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new U(M.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let v=0;v<d.length;v++){const T=d[v];if(p[v].field.isKeyField()){if(typeof T!="string")throw new U(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!V_(o)&&T.indexOf("/")!==-1)throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const C=o.path.child(se.fromString(T));if(!W.isDocumentKey(C))throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const _=new W(C);y.push(As(a,_))}else{const C=VC(l,c,T);y.push(C)}}return new Ci(y,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function QT(n,e,t){if(typeof(t=ee(t))=="string"){if(t==="")throw new U(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V_(e)&&t.indexOf("/")!==-1)throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(se.fromString(t));if(!W.isDocumentKey(r))throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return As(n,new W(r))}if(t instanceof Ee)return As(n,t._key);throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cf(t)}.`)}function YT(n,e){if(!Array.isArray(n)||n.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UC(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xv{convertValue(e,t="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ui(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var r,i,s;const t=(s=(i=(r=e.fields)==null?void 0:r[Zo].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ce(o.doubleValue));return new Jn(t)}convertGeoPoint(e){return new kn(Ce(e.latitude),Ce(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wu(e));default:return null}}convertTimestamp(e){const t=br(e);return new pe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=se.fromString(e);X(CR(r),9688,{name:e});const i=new Ai(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(t)||He(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class E3 extends xv{constructor(e){super(),this.firestore=e}convertBytes(e){return new xt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ee(this.firestore,null,t)}}class ds{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let yn=class BC extends Ru{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new U(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=BC._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};yn._jsonSchemaVersion="firestore/documentSnapshot/1.0",yn._jsonSchema={type:et("string",yn._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};let zl=class extends yn{data(e={}){return super.data(e)}},Nn=class zC{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zl(this._firestore,this._userDataWriter,r.key,r,new ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new zl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new zl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:I3(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new U(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zC._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=T_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function I3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:n})}}function $C(n,e){return n instanceof yn&&e instanceof yn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Nn&&e instanceof Nn&&n._firestore===e._firestore&&RC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(n){n=fe(n,Ee);const e=fe(n.firestore,Qe);return wC(bt(e),n._key).then(t=>Rv(e,n,t))}Nn._jsonSchemaVersion="firestore/querySnapshot/1.0",Nn._jsonSchema={type:et("string",Nn._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};class qs extends xv{constructor(e){super(),this.firestore=e}convertBytes(e){return new xt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ee(this.firestore,null,t)}}function S3(n){n=fe(n,Ee);const e=fe(n.firestore,Qe),t=bt(e),r=new qs(e);return WU(t,n._key).then(i=>new yn(e,r,n._key,i,new ds(i!==null&&i.hasLocalMutations,!0),n.converter))}function P3(n){n=fe(n,Ee);const e=fe(n.firestore,Qe);return wC(bt(e),n._key,{source:"server"}).then(t=>Rv(e,n,t))}function A3(n){n=fe(n,jt);const e=fe(n.firestore,Qe),t=bt(e),r=new qs(e);return FC(n._query),EC(t,n._query).then(i=>new Nn(e,r,n,i))}function x3(n){n=fe(n,jt);const e=fe(n.firestore,Qe),t=bt(e),r=new qs(e);return GU(t,n._query).then(i=>new Nn(e,r,n,i))}function R3(n){n=fe(n,jt);const e=fe(n.firestore,Qe),t=bt(e),r=new qs(e);return EC(t,n._query,{source:"server"}).then(i=>new Nn(e,r,n,i))}function XT(n,e,t){n=fe(n,Ee);const r=fe(n.firestore,Qe),i=Vf(n.converter,e,t);return ac(r,[Rf(zs(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,De.none())])}function JT(n,e,t,...r){n=fe(n,Ee);const i=fe(n.firestore,Qe),s=zs(i);let o;return o=typeof(e=ee(e))=="string"||e instanceof Ni?Ev(s,"updateDoc",n._key,e,t,r):wv(s,"updateDoc",n._key,e),ac(i,[o.toMutation(n._key,De.exists(!0))])}function C3(n){return ac(fe(n.firestore,Qe),[new Pa(n._key,De.none())])}function b3(n,e){const t=fe(n.firestore,Qe),r=Ah(n),i=Vf(n.converter,e);return ac(t,[Rf(zs(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,De.exists(!1))]).then(()=>r)}function qC(n,...e){var l,c,d;n=ee(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Bg(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Bg(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,o,a;if(n instanceof Ee)o=fe(n.firestore,Qe),a=Ta(n._key.path),s={next:h=>{e[r]&&e[r](Rv(o,n,h))},error:e[r+1],complete:e[r+2]};else{const h=fe(n,jt);o=fe(h.firestore,Qe),a=h._query;const p=new qs(o);s={next:y=>{e[r]&&e[r](new Nn(o,p,h,y))},error:e[r+1],complete:e[r+2]},FC(n._query)}return function(p,y,v,T){const C=new Pf(T),_=new av(y,C,v);return p.asyncQueue.enqueueAndForget(async()=>iv(await ca(p),_)),()=>{C.Nu(),p.asyncQueue.enqueueAndForget(async()=>sv(await ca(p),_))}}(bt(o),a,i,s)}function k3(n,e){return HU(bt(n=fe(n,Qe)),Bg(e)?e:{next:e})}function ac(n,e){return function(r,i){const s=new gt;return r.asyncQueue.enqueueAndForget(async()=>wU(await mv(r),i,s)),s.promise}(bt(n),e)}function Rv(n,e,t){const r=t.docs.get(e._key),i=new qs(n);return new yn(n,i,e._key,r,new ds(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D3=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zs(e)}set(e,t,r){this._verifyNotCommitted();const i=ii(e,this._firestore),s=Vf(i.converter,t,r),o=Rf(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,De.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=ii(e,this._firestore);let o;return o=typeof(t=ee(t))=="string"||t instanceof Ni?Ev(this._dataReader,"WriteBatch.update",s._key,t,r,i):wv(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,De.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ii(e,this._firestore);return this._mutations=this._mutations.concat(new Pa(t._key,De.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new U(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ii(n,e){if((n=ee(n)).firestore!==e)throw new U(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zs(e)}get(e){const t=ii(e,this._firestore),r=new E3(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return K(24041);const s=i[0];if(s.isFoundDocument())return new Ru(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Ru(this._firestore,r,t._key,null,t.converter);throw K(18433,{doc:s})})}set(e,t,r){const i=ii(e,this._firestore),s=Vf(i.converter,t,r),o=Rf(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const s=ii(e,this._firestore);let o;return o=typeof(t=ee(t))=="string"||t instanceof Ni?Ev(this._dataReader,"Transaction.update",s._key,t,r,i):wv(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=ii(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O3=class extends V3{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ii(e,this._firestore),r=new qs(this._firestore);return super.get(e).then(i=>new yn(this._firestore,r,t._key,i._document,new ds(!1,!1),t.converter))}};function L3(n,e,t){n=fe(n,Qe);const r={...N3,...t};return function(s){if(s.maxAttempts<1)throw new U(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new gt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await zU(s);new UU(s.asyncQueue,c,a,o,l).ju()}),l.promise}(bt(n),i=>e(new O3(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(){return new sc("deleteField")}function F3(){return new gv("serverTimestamp")}function j3(...n){return new yv("arrayUnion",n)}function U3(...n){return new _v("arrayRemove",n)}function B3(n){return new vv("increment",n)}(function(e,t=!0){(function(i){Ia=i})(Li),Si(new er("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Qe(new VF(r.getProvider("auth-internal")),new MF(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new U(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(c.options.projectId,d)}(o,i),o);return s={useFetchStreams:t,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),bn(RI,CI,e),bn(RI,CI,"esm2020")})();const z3="@firebase/firestore-compat",$3="0.4.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new U("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(){if(typeof Uint8Array>"u")throw new U("unimplemented","Uint8Arrays are not available in this environment.")}function eS(){if(!_j())throw new U("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Cu{constructor(e){this._delegate=e}static fromBase64String(e){return eS(),new Cu(xt.fromBase64String(e))}static fromUint8Array(e){return ZT(),new Cu(xt.fromUint8Array(e))}toBase64(){return eS(),this._delegate.toBase64()}toUint8Array(){return ZT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(n){return q3(n,["next","error","complete"])}function q3(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{enableIndexedDbPersistence(e,t){return e3(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return t3(e._delegate)}clearIndexedDbPersistence(e){return n3(e._delegate)}}class WC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ai||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&nr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){YU(this._delegate,e,t,r)}enableNetwork(){return i3(this._delegate)}disableNetwork(){return s3(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return r3(this._delegate)}onSnapshotsInSync(e){return k3(this._delegate,e)}get app(){if(!this._appCompat)throw new U("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new da(this,AC(this._delegate,e))}catch(t){throw Ot(t,"collection()","Firestore.collection()")}}doc(e){try{return new mn(this,Ah(this._delegate,e))}catch(t){throw Ot(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vt(this,XU(this._delegate,e))}catch(t){throw Ot(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return L3(this._delegate,t=>e(new GC(this,t)))}batch(){return bt(this._delegate),new HC(new D3(this._delegate,e=>ac(this._delegate,e)))}loadBundle(e){return o3(this._delegate,e)}namedQuery(e){return a3(this._delegate,e).then(t=>t?new Vt(this,t):null)}}class Of extends xv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cu(new xt(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return mn.forKey(t,this.firestore,null)}}function G3(n){bF(n)}class GC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}get(e){const t=hs(e);return this._delegate.get(t).then(r=>new bu(this._firestore,new yn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=hs(e);return r?(Cv("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=hs(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=hs(e);return this._delegate.delete(t),this}}class HC{constructor(e){this._delegate=e}set(e,t,r){const i=hs(e);return r?(Cv("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=hs(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=hs(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vs{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new zl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ku(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Vs.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Vs(e,new Of(e),t),i.set(t,s)),s}}Vs.INSTANCES=new WeakMap;class mn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}static forPath(e,t,r){if(e.length%2!==0)throw new U("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new mn(t,new Ee(t._delegate,r,new W(e)))}static forKey(e,t,r){return new mn(t,new Ee(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new da(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new da(this.firestore,AC(this._delegate,e))}catch(t){throw Ot(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ee(e),e instanceof Ee?xC(this._delegate,e):!1}set(e,t){t=Cv("DocumentReference.set",t);try{return t?XT(this._delegate,e,t):XT(this._delegate,e)}catch(r){throw Ot(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?JT(this._delegate,e):JT(this._delegate,e,t,...r)}catch(i){throw Ot(i,"updateDoc()","DocumentReference.update()")}}delete(){return C3(this._delegate)}onSnapshot(...e){const t=KC(e),r=QC(e,i=>new bu(this.firestore,new yn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return qC(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=S3(this._delegate):(e==null?void 0:e.source)==="server"?t=P3(this._delegate):t=T3(this._delegate),t.then(r=>new bu(this.firestore,new yn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new mn(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ot(n,e,t){return n.message=n.message.replace(e,t),n}function KC(n){for(const e of n)if(typeof e=="object"&&!$g(e))return e;return{}}function QC(n,e){var r,i;let t;return $g(n[0])?t=n[0]:$g(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:s=>{t.next&&t.next(e(s))},error:(r=t.error)==null?void 0:r.bind(t),complete:(i=t.complete)==null?void 0:i.bind(t)}}class bu{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new mn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $C(this._delegate,e._delegate)}}class ku extends bu{data(e){const t=this._delegate.data(e);return this._delegate._converter||kF(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Vt{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}where(e,t,r){try{return new Vt(this.firestore,Kr(this._delegate,f3(e,t,r)))}catch(i){throw Ot(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vt(this.firestore,Kr(this._delegate,p3(e,t)))}catch(r){throw Ot(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vt(this.firestore,Kr(this._delegate,m3(e)))}catch(t){throw Ot(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vt(this.firestore,Kr(this._delegate,g3(e)))}catch(t){throw Ot(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vt(this.firestore,Kr(this._delegate,y3(...e)))}catch(t){throw Ot(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vt(this.firestore,Kr(this._delegate,_3(...e)))}catch(t){throw Ot(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vt(this.firestore,Kr(this._delegate,v3(...e)))}catch(t){throw Ot(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vt(this.firestore,Kr(this._delegate,w3(...e)))}catch(t){throw Ot(t,"endAt()","Query.endAt()")}}isEqual(e){return RC(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=x3(this._delegate):(e==null?void 0:e.source)==="server"?t=R3(this._delegate):t=A3(this._delegate),t.then(r=>new qg(this.firestore,new Nn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=KC(e),r=QC(e,i=>new qg(this.firestore,new Nn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return qC(this._delegate,t,r)}withConverter(e){return new Vt(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class H3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ku(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class qg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ku(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new H3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ku(this._firestore,r))})}isEqual(e){return $C(this._delegate,e._delegate)}}class da extends Vt{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new mn(this.firestore,e):null}doc(e){try{return e===void 0?new mn(this.firestore,Ah(this._delegate)):new mn(this.firestore,Ah(this._delegate,e))}catch(t){throw Ot(t,"doc()","CollectionReference.doc()")}}add(e){return b3(this._delegate,e).then(t=>new mn(this.firestore,t))}isEqual(e){return xC(this._delegate,e._delegate)}withConverter(e){return new da(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function hs(n){return fe(n,Ee)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(...e){this._delegate=new Ni(...e)}static documentId(){return new bv(Ne.keyField().canonicalString())}isEqual(e){return e=ee(e),e instanceof Ni?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{static serverTimestamp(){const e=F3();return e._methodName="FieldValue.serverTimestamp",new ss(e)}static delete(){const e=M3();return e._methodName="FieldValue.delete",new ss(e)}static arrayUnion(...e){const t=j3(...e);return t._methodName="FieldValue.arrayUnion",new ss(t)}static arrayRemove(...e){const t=U3(...e);return t._methodName="FieldValue.arrayRemove",new ss(t)}static increment(e){const t=B3(e);return t._methodName="FieldValue.increment",new ss(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3={Firestore:WC,GeoPoint:kn,Timestamp:pe,Blob:Cu,Transaction:GC,WriteBatch:HC,DocumentReference:mn,DocumentSnapshot:bu,Query:Vt,QueryDocumentSnapshot:ku,QuerySnapshot:qg,CollectionReference:da,FieldPath:bv,FieldValue:ss,setLogLevel:G3,CACHE_SIZE_UNLIMITED:ZU};function Q3(n,e){n.INTERNAL.registerComponent(new er("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...K3}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(n){Q3(n,(e,t)=>new WC(e,t,new W3)),n.registerVersion(z3,$3)}Y3(Rr);const YC=V.createContext(null),X3={apiKey:"AIzaSyBe4RtxN-33AvKTlylvBUzkk9Z5RuQ7Sac",authDomain:"malu-af0b0.firebaseapp.com",projectId:"malu-af0b0",storageBucket:"malu-af0b0.firebasestorage.app",messagingSenderId:"961583120487",appId:"1:961583120487:web:1c17a9d68701e0ab9094c2",measurementId:"G-HVJ8K3R3V2"};Rr.apps.length||Rr.initializeApp(X3);const tS=Rr.auth(),J3=Rr.firestore(),Z3=({children:n})=>{const[e,t]=V.useState(null),[r,i]=V.useState(!0);return V.useEffect(()=>{const s=tS.onAuthStateChanged(o=>{t(o),i(!1)});return()=>s()},[]),m.jsx(YC.Provider,{value:{user:e,auth:tS,db:J3,loading:r},children:n})},Lf=()=>V.useContext(YC),eB=({onOpenAuthModal:n,onOpenServicesModal:e,onOpenProfileModal:t})=>{const{user:r}=Lf(),[i,s]=V.useState("");V.useEffect(()=>{s(r?r.email:"")},[r]);const o=a=>{a.preventDefault(),r?e():n()};return m.jsxs("nav",{className:"topbar","aria-label":"Главное меню",children:[m.jsxs("ul",{"aria-label":"разделы",children:[m.jsx("li",{children:m.jsx(Xi,{to:"/",className:({isActive:a})=>a?"active":"",end:!0,children:"Главная"})}),m.jsx("li",{children:m.jsx(Xi,{to:"/makeup",className:({isActive:a})=>a?"active":"",children:"Макияж"})}),m.jsx("li",{children:m.jsx(Xi,{to:"/haircut",className:({isActive:a})=>a?"active":"",children:"Стрижка волос"})}),m.jsx("li",{children:m.jsx(Xi,{to:"/manicure",className:({isActive:a})=>a?"active":"",children:"Маникюр"})}),m.jsx("li",{children:m.jsx(Xi,{to:"/pedicure",className:({isActive:a})=>a?"active":"",children:"Педикюр"})}),m.jsx("li",{children:m.jsx(Xi,{to:"/contacts",className:({isActive:a})=>a?"active":"",children:"Контакты"})})]}),m.jsxs("div",{className:"auth-controls",style:{display:"flex",gap:12,alignItems:"center"},children:[i&&m.jsx("span",{id:"user-email-display",title:"Открыть профиль",style:{display:"inline",cursor:"pointer"},onClick:()=>t&&t(),children:i}),m.jsx("a",{className:"booking",href:"#",onClick:o,children:"Запись на прием"})]})]})},tB=({isOpen:n,onClose:e})=>{const{auth:t}=Lf(),[r,i]=V.useState(""),[s,o]=V.useState(""),[a,l]=V.useState(""),[c,d]=V.useState(""),[h,p]=V.useState(""),[y,v]=V.useState("");if(!n)return null;const T=async w=>{w.preventDefault();try{await t.createUserWithEmailAndPassword(r,s),l(""),e()}catch(E){l(E.message)}},C=async w=>{w.preventDefault();try{await t.signInWithEmailAndPassword(c,h),v(""),e()}catch(E){v(E.message)}},_=async w=>{const E=new t.GoogleAuthProvider;try{await t.signInWithPopup(E),e()}catch(N){w(N.message)}};return m.jsx("div",{className:"auth-modal",style:{display:n?"block":"none"},children:m.jsxs("div",{className:"auth-modal-content",children:[m.jsx("span",{className:"close-button",onClick:e,children:"×"}),m.jsxs("section",{className:"auth-section",children:[m.jsx("h1",{children:"Авторизация"}),m.jsxs("div",{className:"auth-container",children:[m.jsxs("div",{className:"auth-form-card",children:[m.jsx("h2",{children:"Регистрация"}),m.jsxs("form",{onSubmit:T,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"register-email",children:"Email:"}),m.jsx("input",{type:"email",id:"register-email",value:r,onChange:w=>i(w.target.value),required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"register-password",children:"Пароль:"}),m.jsx("input",{type:"password",id:"register-password",value:s,onChange:w=>o(w.target.value),required:!0})]}),m.jsx("button",{type:"submit",className:"btn-primary",children:"Зарегистрироваться"}),m.jsx("p",{className:"error-message",children:a})]}),m.jsxs("button",{onClick:()=>_(l),className:"btn-secondary",children:[m.jsx("img",{src:"https://www.google.com/images/branding/googleg/1x/googleg_standard_color_128dp.png",alt:"Google",style:{width:20,height:20}}),"Зарегистрироваться через Google"]})]}),m.jsxs("div",{className:"auth-form-card",children:[m.jsx("h2",{children:"Вход"}),m.jsxs("form",{onSubmit:C,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"login-email",children:"Email:"}),m.jsx("input",{type:"email",id:"login-email",value:c,onChange:w=>d(w.target.value),required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"login-password",children:"Пароль:"}),m.jsx("input",{type:"password",id:"login-password",value:h,onChange:w=>p(w.target.value),required:!0})]}),m.jsx("button",{type:"submit",className:"btn-primary",children:"Войти"}),m.jsx("p",{className:"error-message",children:y})]}),m.jsxs("button",{onClick:()=>_(v),className:"btn-secondary",children:[m.jsx("img",{src:"https://www.google.com/images/branding/googleg/1x/googleg_standard_color_128dp.png",alt:"Google",style:{width:20,height:20}}),"Войти через Google"]})]})]})]})]})})},nB=({isOpen:n,onClose:e,initialService:t,initialSubService:r})=>{const{db:i,user:s}=Lf(),[o,a]=V.useState("makeup"),[l,c]=V.useState(""),[d,h]=V.useState(""),[p,y]=V.useState(""),[v,T]=V.useState(""),C={makeup:{label:"Макияж",options:{day:{label:"Дневной",price:1800},evening:{label:"Вечерний",price:3900},bridal:{label:"Свадебный",price:6800}}},haircut:{label:"Стрижка волос",options:{women:{label:"Женская",price:3500},men:{label:"Мужская",price:2e3},kids:{label:"Детская",price:1800}}},manicure:{label:"Маникюр",options:{classic:{label:"Классический",price:1900},gel:{label:"Гель-лак",price:2400},extension:{label:"Наращивание",price:3300},design:{label:"Дизайн ногтей",price:2700}}},pedicure:{label:"Педикюр",options:{classic:{label:"Классический",price:1600},hardware:{label:"Аппаратный",price:2400},spa:{label:"SPA",price:3600},medical:{label:"Лечебный",price:3800}}}},_=V.useMemo(()=>new Date().toISOString().split("T")[0],[]),w=V.useMemo(()=>{var N;return!o||!l?0:((N=C[o].options[l])==null?void 0:N.price)??0},[o,l]);V.useEffect(()=>{if(n){if(t&&C[t]){a(t);const N=r&&C[t].options[r],D=Object.keys(C[t].options)[0];c(N?r:D)}else{const N=Object.keys(C[o].options)[0];c(N)}h(""),y(""),T("")}},[n,t,r]);const E=async N=>{if(N.preventDefault(),!o||!l||!d||!p){T("Ошибка: выберите услугу, подпункт, дату и время.");return}if(!s){alert("Пожалуйста, войдите, чтобы записаться."),e();return}try{await i.collection("bookings").add({userId:s.uid,userEmail:s.email,service:o,subService:l,price:w,date:d,time:p,timestamp:new Date}),T("Запись успешно создана!"),setTimeout(()=>{T(""),e()},2e3)}catch(D){console.error("Ошибка при создании записи:",D),T("Ошибка при создании записи: "+D.message)}};return n?m.jsx("div",{className:"auth-modal",style:{display:"block"},children:m.jsxs("div",{className:"auth-modal-content",children:[m.jsx("span",{className:"close-button",onClick:e,children:"×"}),m.jsxs("section",{className:"auth-section",children:[m.jsx("h1",{children:"Запись на прием и услуги"}),m.jsxs("div",{style:{backgroundColor:"rgba(255,255,255,0.1)",padding:20,borderRadius:8,color:"white"},children:[m.jsxs("form",{onSubmit:E,style:{marginTop:20,textAlign:"left",display:"grid",gap:16},children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"service-select",children:"Выберите услугу:"}),m.jsx("select",{id:"service-select",value:o,onChange:N=>{const D=N.target.value;a(D);const F=Object.keys(C[D].options)[0];c(F)},style:{width:"100%",padding:10,borderRadius:5,border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.1)",color:"#111"},children:Object.entries(C).map(([N,D])=>m.jsx("option",{value:N,children:D.label},N))})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"subservice-select",children:"Выберите тип:"}),m.jsx("select",{id:"subservice-select",value:l,onChange:N=>c(N.target.value),style:{width:"100%",padding:10,borderRadius:5,border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.1)",color:"#111"},children:Object.entries(C[o].options).map(([N,D])=>m.jsxs("option",{value:N,children:[D.label," — ",D.price," ₽"]},N))})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"date-select",children:"Выберите дату:"}),m.jsx("input",{type:"date",id:"date-select",value:d,min:_,onChange:N=>h(N.target.value),style:{width:"100%",padding:10,borderRadius:5,border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.1)",color:"#111"}})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"time-select",children:"Выберите время:"}),m.jsx("input",{type:"time",id:"time-select",value:p,onChange:N=>y(N.target.value),step:"1800",style:{width:"100%",padding:10,borderRadius:5,border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.1)",color:"#111"}})]}),m.jsx("button",{type:"submit",className:"btn-primary",style:{alignSelf:"center"},children:"Записаться"})]}),v&&m.jsx("p",{style:{marginTop:15,color:v.startsWith("Ошибка")?"red":"lightgreen"},children:v}),l&&C[o].options[l]&&m.jsx("div",{"aria-live":"polite",style:{marginTop:16,padding:"12px 14px",background:"rgba(255,255,255,0.15)",borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center"},children:m.jsxs("div",{children:[m.jsx("strong",{children:"Стоимость:"})," ",C[o].options[l].label," —"," ",m.jsxs("span",{style:{fontWeight:700},children:[w.toLocaleString("ru-RU")," ₽"]})]})})]})]})]})}):null},rB=({isOpen:n,onClose:e})=>{const{auth:t,db:r,user:i}=Lf(),[s,o]=V.useState([]),[a,l]=V.useState(!1),[c,d]=V.useState("img/Rectangle.png"),[h,p]=V.useState(!0),[y,v]=V.useState(null),[T,C]=V.useState(""),[_,w]=V.useState(""),[E,N]=V.useState(!1),D=V.useMemo(()=>new Date().toISOString().split("T")[0],[]);V.useEffect(()=>{(async()=>{if(!(!n||!i)){p(!0);try{const R=await r.collection("users").doc(i.uid).get();R.exists&&R.data().profilePicture?d(R.data().profilePicture):d("img/Rectangle.png")}catch{d("img/Rectangle.png")}try{const R=await r.collection("bookings").where("userId","==",i.uid).orderBy("date","asc").get();if(R.empty)o([]),l(!0);else{const de=[];R.forEach(Te=>de.push({id:Te.id,...Te.data()})),o(de),l(!1)}}catch(R){console.error("Ошибка при получении записей:",R),o([{id:"error",service:`Ошибка: ${R.message}`,date:""}])}finally{p(!1)}}})()},[n,i,r]);const F=async()=>{await t.signOut(),e()},x=async k=>{if(window.confirm("Вы уверены, что хотите отменить эту запись?"))try{await r.collection("bookings").doc(k).delete(),o(R=>R.filter(de=>de.id!==k))}catch(R){console.error("Ошибка при отмене записи:",R),alert("Ошибка при отмене записи: "+R.message)}},I=async k=>{var Te;const R=(Te=k.target.files)==null?void 0:Te[0];if(!i)return alert("Пожалуйста, войдите, чтобы загрузить фото профиля.");if(!R)return;if(R.size>1024*1024)return alert("Файл слишком большой! Максимум — 1 МБ.");const de=new FileReader;de.onload=async ne=>{try{const ue=ne.target.result;await r.collection("users").doc(i.uid).set({profilePicture:ue},{merge:!0}),d(ue),alert("Фото профиля успешно загружено!")}catch(ue){alert("Ошибка: "+ue.message)}},de.readAsDataURL(R)},P=k=>{v(k.id),C(k.date||D),w(k.time||"")},A=()=>{v(null),C(""),w("")},b=async()=>{if(!T||!_)return alert("Выберите дату и время.");N(!0);try{await r.collection("bookings").doc(y).update({date:T,time:_,updatedAt:new Date}),o(k=>k.map(R=>R.id===y?{...R,date:T,time:_}:R)),A()}catch(k){alert("Ошибка при переносе записи: "+k.message)}finally{N(!1)}};return!n||!i?null:m.jsx("div",{className:"auth-modal",style:{display:"block"},children:m.jsxs("div",{className:"auth-modal-content",children:[m.jsx("span",{className:"close-button",onClick:e,children:"×"}),m.jsxs("section",{className:"auth-section",children:[m.jsx("h1",{children:"Профиль"}),m.jsx("div",{style:{marginTop:10,textAlign:"center",color:"#fff"},children:m.jsx("span",{style:{opacity:.85},children:i.email})}),m.jsxs("div",{style:{marginTop:20,textAlign:"center"},children:[m.jsx("img",{src:c,alt:"Фото профиля",style:{width:100,height:100,borderRadius:"50%",objectFit:"cover",border:"2px solid rgb(202,93,102)",marginBottom:10}}),m.jsx("input",{type:"file",id:"profile-picture-input",accept:"image/*",style:{display:"none"},onChange:I}),m.jsx("button",{onClick:()=>document.getElementById("profile-picture-input").click(),className:"btn-primary",style:{width:"auto",margin:"0 auto",display:"block"},children:"Загрузить фото"})]}),m.jsx("button",{onClick:F,className:"btn-primary",style:{display:"block",margin:"20px auto"},children:"Выйти"}),m.jsxs("section",{className:"booking-list-section",style:{marginTop:20,textAlign:"center",color:"white"},children:[m.jsx("h2",{children:"Мои записи"}),h?m.jsx("p",{children:"Загрузка…"}):m.jsx("div",{id:"user-bookings-display",style:{display:"grid",gap:12},children:s.length>0?s.map(k=>m.jsxs("div",{className:"booking-card",style:{padding:12,background:"rgba(255,255,255,0.06)",borderRadius:8},children:[m.jsxs("h3",{children:[k.service,k.subService?` • ${k.subService}`:""]}),m.jsxs("p",{children:["Дата: ",k.date||"—"]}),m.jsxs("p",{children:["Время: ",k.time||"—"]}),typeof k.price=="number"&&m.jsxs("p",{children:["Стоимость: ",k.price.toLocaleString("ru-RU")," ₽"]}),m.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[m.jsx("button",{className:"btn-primary",onClick:()=>P(k),children:"Перенести"}),m.jsx("button",{className:"cancel-booking-btn",onClick:()=>x(k.id),children:"Отменить"})]}),y===k.id&&m.jsxs("div",{style:{marginTop:12,padding:12,borderRadius:8,background:"rgba(255,255,255,0.08)"},children:[m.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[m.jsx("label",{htmlFor:`res-date-${k.id}`,children:"Новая дата:"}),m.jsx("input",{type:"date",id:`res-date-${k.id}`,value:T,min:D,onChange:R=>C(R.target.value)})]}),m.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[m.jsx("label",{htmlFor:`res-time-${k.id}`,children:"Новое время:"}),m.jsx("input",{type:"time",id:`res-time-${k.id}`,value:_,onChange:R=>w(R.target.value),step:"1800"})]}),m.jsxs("div",{style:{display:"flex",gap:8},children:[m.jsx("button",{className:"btn-primary",onClick:b,disabled:E,children:E?"Сохраняем…":"Сохранить"}),m.jsx("button",{className:"cancel-booking-btn",onClick:A,children:"Отмена"})]})]})]},k.id)):a&&m.jsx("p",{children:"У вас пока нет записей."})})]})]})]})})};function nS(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function kv(n,e){n===void 0&&(n={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof n[r]>"u"?n[r]=e[r]:nS(e[r])&&nS(n[r])&&Object.keys(e[r]).length>0&&kv(n[r],e[r])})}const XC={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ws(){const n=typeof document<"u"?document:{};return kv(n,XC),n}const iB={document:XC,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function zt(){const n=typeof window<"u"?window:{};return kv(n,iB),n}function sB(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function oB(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function JC(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Rh(){return Date.now()}function aB(n){const e=zt();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function lB(n,e){e===void 0&&(e="x");const t=zt();let r,i,s;const o=aB(n);return t.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(i==="none"?"":i)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?i=s.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(t.WebKitCSSMatrix?i=s.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function Zc(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function uB(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function tn(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const r=t<0||arguments.length<=t?void 0:arguments[t];if(r!=null&&!uB(r)){const i=Object.keys(Object(r)).filter(s=>e.indexOf(s)<0);for(let s=0,o=i.length;s<o;s+=1){const a=i[s],l=Object.getOwnPropertyDescriptor(r,a);l!==void 0&&l.enumerable&&(Zc(n[a])&&Zc(r[a])?r[a].__swiper__?n[a]=r[a]:tn(n[a],r[a]):!Zc(n[a])&&Zc(r[a])?(n[a]={},r[a].__swiper__?n[a]=r[a]:tn(n[a],r[a])):n[a]=r[a])}}}return n}function ed(n,e,t){n.style.setProperty(e,t)}function ZC(n){let{swiper:e,targetPosition:t,side:r}=n;const i=zt(),s=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",d=(p,y)=>c==="next"&&p>=y||c==="prev"&&p<=y,h=()=>{a=new Date().getTime(),o===null&&(o=a);const p=Math.max(Math.min((a-o)/l,1),0),y=.5-Math.cos(p*Math.PI)/2;let v=s+y*(t-s);if(d(v,t)&&(v=t),e.wrapperEl.scrollTo({[r]:v}),d(v,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:v})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(h)};h()}function Hn(n,e){e===void 0&&(e="");const t=zt(),r=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&r.push(...n.assignedElements()),e?r.filter(i=>i.matches(e)):r}function cB(n,e){const t=[e];for(;t.length>0;){const r=t.shift();if(n===r)return!0;t.push(...r.children,...r.shadowRoot?r.shadowRoot.children:[],...r.assignedElements?r.assignedElements():[])}}function dB(n,e){const t=zt();let r=e.contains(n);return!r&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(r=[...e.assignedElements()].includes(n),r||(r=cB(n,e))),r}function Ch(n){try{console.warn(n);return}catch{}}function bh(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:sB(e)),t}function hB(n,e){const t=[];for(;n.previousElementSibling;){const r=n.previousElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function fB(n,e){const t=[];for(;n.nextElementSibling;){const r=n.nextElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function si(n,e){return zt().getComputedStyle(n,null).getPropertyValue(e)}function rS(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function pB(n,e){const t=[];let r=n.parentElement;for(;r;)t.push(r),r=r.parentElement;return t}function iS(n,e,t){const r=zt();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function dr(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function sS(n,e){e===void 0&&(e=""),typeof trustedTypes<"u"?n.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):n.innerHTML=e}let nm;function mB(){const n=zt(),e=Ws();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function e1(){return nm||(nm=mB()),nm}let rm;function gB(n){let{userAgent:e}=n===void 0?{}:n;const t=e1(),r=zt(),i=r.navigator.platform,s=e||r.navigator.userAgent,o={ios:!1,android:!1},a=r.screen.width,l=r.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let d=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),p=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),y=i==="Win32";let v=i==="MacIntel";const T=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&v&&t.touch&&T.indexOf(`${a}x${l}`)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),v=!1),c&&!y&&(o.os="android",o.android=!0),(d||p||h)&&(o.os="ios",o.ios=!0),o}function t1(n){return n===void 0&&(n={}),rm||(rm=gB(n)),rm}let im;function yB(){const n=zt(),e=t1();let t=!1;function r(){const a=n.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(r()){const a=String(n.navigator.userAgent);if(a.includes("Version/")){const[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));t=l<16||l===16&&c<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),s=r(),o=s||i&&e.ios;return{isSafari:t||s,needPerspectiveFix:t,need3dFix:o,isWebView:i}}function n1(){return im||(im=yB()),im}function _B(n){let{swiper:e,on:t,emit:r}=n;const i=zt();let s=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(h=>{o=i.requestAnimationFrame(()=>{const{width:p,height:y}=e;let v=p,T=y;h.forEach(C=>{let{contentBoxSize:_,contentRect:w,target:E}=C;E&&E!==e.el||(v=w?w.width:(_[0]||_).inlineSize,T=w?w.height:(_[0]||_).blockSize)}),(v!==p||T!==y)&&a()})}),s.observe(e.el))},c=()=>{o&&i.cancelAnimationFrame(o),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},d=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){l();return}i.addEventListener("resize",a),i.addEventListener("orientationchange",d)}),t("destroy",()=>{c(),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",d)})}function vB(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const s=[],o=zt(),a=function(d,h){h===void 0&&(h={});const p=o.MutationObserver||o.WebkitMutationObserver,y=new p(v=>{if(e.__preventObserver__)return;if(v.length===1){i("observerUpdate",v[0]);return}const T=function(){i("observerUpdate",v[0])};o.requestAnimationFrame?o.requestAnimationFrame(T):o.setTimeout(T,0)});y.observe(d,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:e.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(y)},l=()=>{if(e.params.observer){if(e.params.observeParents){const d=pB(e.hostEl);for(let h=0;h<d.length;h+=1)a(d[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(d=>{d.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",c)}var wB={on(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=t?"unshift":"push";return n.split(" ").forEach(s=>{r.eventsListeners[s]||(r.eventsListeners[s]=[]),r.eventsListeners[s][i](e)}),r},once(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(){r.off(n,i),i.__emitterProxy&&delete i.__emitterProxy;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e.apply(r,o)}return i.__emitterProxy=e,r.on(n,i,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const r=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[r](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(r=>{typeof e>"u"?t.eventsListeners[r]=[]:t.eventsListeners[r]&&t.eventsListeners[r].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&t.eventsListeners[r].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,r;for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),r=n):(e=s[0].events,t=s[0].data,r=s[0].context||n),t.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(r,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(r,t)})}),n}};function EB(){const n=this;let e,t;const r=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=r.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=r.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(si(r,"padding-left")||0,10)-parseInt(si(r,"padding-right")||0,10),t=t-parseInt(si(r,"padding-top")||0,10)-parseInt(si(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function IB(){const n=this;function e(A,b){return parseFloat(A.getPropertyValue(n.getDirectionLabel(b))||0)}const t=n.params,{wrapperEl:r,slidesEl:i,size:s,rtlTranslate:o,wrongRTL:a}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,d=Hn(i,`.${n.params.slideClass}, swiper-slide`),h=l?n.virtual.slides.length:d.length;let p=[];const y=[],v=[];let T=t.slidesOffsetBefore;typeof T=="function"&&(T=t.slidesOffsetBefore.call(n));let C=t.slidesOffsetAfter;typeof C=="function"&&(C=t.slidesOffsetAfter.call(n));const _=n.snapGrid.length,w=n.slidesGrid.length;let E=t.spaceBetween,N=-T,D=0,F=0;if(typeof s>"u")return;typeof E=="string"&&E.indexOf("%")>=0?E=parseFloat(E.replace("%",""))/100*s:typeof E=="string"&&(E=parseFloat(E)),n.virtualSize=-E,d.forEach(A=>{o?A.style.marginLeft="":A.style.marginRight="",A.style.marginBottom="",A.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(ed(r,"--swiper-centered-offset-before",""),ed(r,"--swiper-centered-offset-after",""));const x=t.grid&&t.grid.rows>1&&n.grid;x?n.grid.initSlides(d):n.grid&&n.grid.unsetSlides();let I;const P=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(A=>typeof t.breakpoints[A].slidesPerView<"u").length>0;for(let A=0;A<h;A+=1){I=0;let b;if(d[A]&&(b=d[A]),x&&n.grid.updateSlide(A,b,d),!(d[A]&&si(b,"display")==="none")){if(t.slidesPerView==="auto"){P&&(d[A].style[n.getDirectionLabel("width")]="");const k=getComputedStyle(b),R=b.style.transform,de=b.style.webkitTransform;if(R&&(b.style.transform="none"),de&&(b.style.webkitTransform="none"),t.roundLengths)I=n.isHorizontal()?iS(b,"width"):iS(b,"height");else{const Te=e(k,"width"),ne=e(k,"padding-left"),ue=e(k,"padding-right"),q=e(k,"margin-left"),Q=e(k,"margin-right"),Z=k.getPropertyValue("box-sizing");if(Z&&Z==="border-box")I=Te+q+Q;else{const{clientWidth:Se,offsetWidth:me}=b;I=Te+ne+ue+q+Q+(me-Se)}}R&&(b.style.transform=R),de&&(b.style.webkitTransform=de),t.roundLengths&&(I=Math.floor(I))}else I=(s-(t.slidesPerView-1)*E)/t.slidesPerView,t.roundLengths&&(I=Math.floor(I)),d[A]&&(d[A].style[n.getDirectionLabel("width")]=`${I}px`);d[A]&&(d[A].swiperSlideSize=I),v.push(I),t.centeredSlides?(N=N+I/2+D/2+E,D===0&&A!==0&&(N=N-s/2-E),A===0&&(N=N-s/2-E),Math.abs(N)<1/1e3&&(N=0),t.roundLengths&&(N=Math.floor(N)),F%t.slidesPerGroup===0&&p.push(N),y.push(N)):(t.roundLengths&&(N=Math.floor(N)),(F-Math.min(n.params.slidesPerGroupSkip,F))%n.params.slidesPerGroup===0&&p.push(N),y.push(N),N=N+I+E),n.virtualSize+=I+E,D=I,F+=1}}if(n.virtualSize=Math.max(n.virtualSize,s)+C,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(r.style.width=`${n.virtualSize+E}px`),t.setWrapperSize&&(r.style[n.getDirectionLabel("width")]=`${n.virtualSize+E}px`),x&&n.grid.updateWrapperSize(I,p),!t.centeredSlides){const A=[];for(let b=0;b<p.length;b+=1){let k=p[b];t.roundLengths&&(k=Math.floor(k)),p[b]<=n.virtualSize-s&&A.push(k)}p=A,Math.floor(n.virtualSize-s)-Math.floor(p[p.length-1])>1&&p.push(n.virtualSize-s)}if(l&&t.loop){const A=v[0]+E;if(t.slidesPerGroup>1){const b=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),k=A*t.slidesPerGroup;for(let R=0;R<b;R+=1)p.push(p[p.length-1]+k)}for(let b=0;b<n.virtual.slidesBefore+n.virtual.slidesAfter;b+=1)t.slidesPerGroup===1&&p.push(p[p.length-1]+A),y.push(y[y.length-1]+A),n.virtualSize+=A}if(p.length===0&&(p=[0]),E!==0){const A=n.isHorizontal()&&o?"marginLeft":n.getDirectionLabel("marginRight");d.filter((b,k)=>!t.cssMode||t.loop?!0:k!==d.length-1).forEach(b=>{b.style[A]=`${E}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let A=0;v.forEach(k=>{A+=k+(E||0)}),A-=E;const b=A>s?A-s:0;p=p.map(k=>k<=0?-T:k>b?b+C:k)}if(t.centerInsufficientSlides){let A=0;v.forEach(k=>{A+=k+(E||0)}),A-=E;const b=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(A+b<s){const k=(s-A-b)/2;p.forEach((R,de)=>{p[de]=R-k}),y.forEach((R,de)=>{y[de]=R+k})}}if(Object.assign(n,{slides:d,snapGrid:p,slidesGrid:y,slidesSizesGrid:v}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){ed(r,"--swiper-centered-offset-before",`${-p[0]}px`),ed(r,"--swiper-centered-offset-after",`${n.size/2-v[v.length-1]/2}px`);const A=-n.snapGrid[0],b=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(k=>k+A),n.slidesGrid=n.slidesGrid.map(k=>k+b)}if(h!==c&&n.emit("slidesLengthChange"),p.length!==_&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),y.length!==w&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const A=`${t.containerModifierClass}backface-hidden`,b=n.el.classList.contains(A);h<=t.maxBackfaceHiddenSlides?b||n.el.classList.add(A):b&&n.el.classList.remove(A)}}function TB(n){const e=this,t=[],r=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const o=a=>r?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!r)break;t.push(o(a))}else t.push(o(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const a=t[s].offsetHeight;i=a>i?a:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function SB(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(n.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-t-n.cssOverflowAdjustment()}const oS=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function PB(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:r,rtlTranslate:i,snapGrid:s}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-n;i&&(o=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<r.length;l+=1){const c=r[l];let d=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(d-=r[0].swiperSlideOffset);const h=(o+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+a),p=(o-s[0]+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+a),y=-(o-d),v=y+e.slidesSizesGrid[l],T=y>=0&&y<=e.size-e.slidesSizesGrid[l],C=y>=0&&y<e.size-1||v>1&&v<=e.size||y<=0&&v>=e.size;C&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),oS(c,C,t.slideVisibleClass),oS(c,T,t.slideFullyVisibleClass),c.progress=i?-h:h,c.originalProgress=i?-p:p}}function AB(n){const e=this;if(typeof n>"u"){const d=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*d||0}const t=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,c=o;if(r===0)i=0,s=!0,o=!0;else{i=(n-e.minTranslate())/r;const d=Math.abs(n-e.minTranslate())<1,h=Math.abs(n-e.maxTranslate())<1;s=d||i<=0,o=h||i>=1,d&&(i=0),h&&(i=1)}if(t.loop){const d=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),p=e.slidesGrid[d],y=e.slidesGrid[h],v=e.slidesGrid[e.slidesGrid.length-1],T=Math.abs(n);T>=p?a=(T-p)/v:a=(T+v-y)/v,a>1&&(a-=1)}Object.assign(e,{progress:i,progressLoop:a,isBeginning:s,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",i)}const sm=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function xB(){const n=this,{slides:e,params:t,slidesEl:r,activeIndex:i}=n,s=n.virtual&&t.virtual.enabled,o=n.grid&&t.grid&&t.grid.rows>1,a=h=>Hn(r,`.${t.slideClass}${h}, swiper-slide${h}`)[0];let l,c,d;if(s)if(t.loop){let h=i-n.virtual.slidesBefore;h<0&&(h=n.virtual.slides.length+h),h>=n.virtual.slides.length&&(h-=n.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${i}"]`);else o?(l=e.find(h=>h.column===i),d=e.find(h=>h.column===i+1),c=e.find(h=>h.column===i-1)):l=e[i];l&&(o||(d=fB(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!d&&(d=e[0]),c=hB(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(h=>{sm(h,h===l,t.slideActiveClass),sm(h,h===d,t.slideNextClass),sm(h,h===c,t.slidePrevClass)}),n.emitSlidesClasses()}const bd=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,r=e.closest(t());if(r){let i=r.querySelector(`.${n.params.lazyPreloaderClass}`);!i&&n.isElement&&(r.shadowRoot?i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},om=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Wg=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const r=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),i=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const o=i,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+r+c)),n.slides.forEach((l,c)=>{a.includes(l.column)&&om(n,c)});return}const s=i+r-1;if(n.params.rewind||n.params.loop)for(let o=i-e;o<=s+e;o+=1){const a=(o%t+t)%t;(a<i||a>s)&&om(n,a)}else for(let o=Math.max(i-e,0);o<=Math.min(s+e,t-1);o+=1)o!==i&&(o>s||o<i)&&om(n,o)};function RB(n){const{slidesGrid:e,params:t}=n,r=n.rtlTranslate?n.translate:-n.translate;let i;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?r>=e[s]&&r<e[s+1]-(e[s+1]-e[s])/2?i=s:r>=e[s]&&r<e[s+1]&&(i=s+1):r>=e[s]&&(i=s);return t.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function CB(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=n,c;const d=y=>{let v=y-e.virtual.slidesBefore;return v<0&&(v=e.virtual.slides.length+v),v>=e.virtual.slides.length&&(v-=e.virtual.slides.length),v};if(typeof l>"u"&&(l=RB(e)),r.indexOf(t)>=0)c=r.indexOf(t);else{const y=Math.min(i.slidesPerGroupSkip,l);c=y+Math.floor((l-y)/i.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===s&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=d(l);return}const h=e.grid&&i.grid&&i.grid.rows>1;let p;if(e.virtual&&i.virtual.enabled&&i.loop)p=d(l);else if(h){const y=e.slides.find(T=>T.column===l);let v=parseInt(y.getAttribute("data-swiper-slide-index"),10);Number.isNaN(v)&&(v=Math.max(e.slides.indexOf(y),0)),p=Math.floor(v/i.grid.rows)}else if(e.slides[l]){const y=e.slides[l].getAttribute("data-swiper-slide-index");y?p=parseInt(y,10):p=l}else p=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:p,previousIndex:s,activeIndex:l}),e.initialized&&Wg(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==p&&e.emit("realIndexChange"),e.emit("slideChange"))}function bB(n,e){const t=this,r=t.params;let i=n.closest(`.${r.slideClass}, swiper-slide`);!i&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(a=>{!i&&a.matches&&a.matches(`.${r.slideClass}, swiper-slide`)&&(i=a)});let s=!1,o;if(i){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===i){s=!0,o=a;break}}if(i&&s)t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var kB={updateSize:EB,updateSlides:IB,updateAutoHeight:TB,updateSlidesOffset:SB,updateSlidesProgress:PB,updateProgress:AB,updateSlidesClasses:xB,updateActiveIndex:CB,updateClickedSlide:bB};function NB(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:r,translate:i,wrapperEl:s}=e;if(t.virtualTranslate)return r?-i:i;if(t.cssMode)return i;let o=lB(s,n);return o+=e.cssOverflowAdjustment(),r&&(o=-o),o||0}function DB(n,e){const t=this,{rtlTranslate:r,params:i,wrapperEl:s,progress:o}=t;let a=0,l=0;const c=0;t.isHorizontal()?a=r?-n:n:l=n,i.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,i.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:i.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let d;const h=t.maxTranslate()-t.minTranslate();h===0?d=0:d=(n-t.minTranslate())/h,d!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function VB(){return-this.snapGrid[0]}function OB(){return-this.snapGrid[this.snapGrid.length-1]}function LB(n,e,t,r,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),r===void 0&&(r=!0);const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let d;if(r&&n>l?d=l:r&&n<c?d=c:d=n,s.updateProgress(d),o.cssMode){const h=s.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return ZC({swiper:s,targetPosition:-d,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-d,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(d),t&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(d),t&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(p){!s||s.destroyed||p.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var MB={getTranslate:NB,setTranslate:DB,minTranslate:VB,maxTranslate:OB,translateTo:LB};function FB(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function r1(n){let{swiper:e,runCallbacks:t,direction:r,step:i}=n;const{activeIndex:s,previousIndex:o}=e;let a=r;a||(s>o?a="next":s<o?a="prev":a="reset"),e.emit(`transition${i}`),t&&a==="reset"?e.emit(`slideResetTransition${i}`):t&&s!==o&&(e.emit(`slideChangeTransition${i}`),a==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`))}function jB(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;r.cssMode||(r.autoHeight&&t.updateAutoHeight(),r1({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function UB(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;t.animating=!1,!r.cssMode&&(t.setTransition(0),r1({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var BB={setTransition:FB,transitionStart:jB,transitionEnd:UB};function zB(n,e,t,r,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let o=n;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:h,rtlTranslate:p,wrapperEl:y,enabled:v}=s;if(!v&&!r&&!i||s.destroyed||s.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const T=Math.min(s.params.slidesPerGroupSkip,o);let C=T+Math.floor((o-T)/s.params.slidesPerGroup);C>=l.length&&(C=l.length-1);const _=-l[C];if(a.normalizeSlideIndex)for(let x=0;x<c.length;x+=1){const I=-Math.floor(_*100),P=Math.floor(c[x]*100),A=Math.floor(c[x+1]*100);typeof c[x+1]<"u"?I>=P&&I<A-(A-P)/2?o=x:I>=P&&I<A&&(o=x+1):I>=P&&(o=x)}if(s.initialized&&o!==h&&(!s.allowSlideNext&&(p?_>s.translate&&_>s.minTranslate():_<s.translate&&_<s.minTranslate())||!s.allowSlidePrev&&_>s.translate&&_>s.maxTranslate()&&(h||0)!==o))return!1;o!==(d||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(_);let w;o>h?w="next":o<h?w="prev":w="reset";const E=s.virtual&&s.params.virtual.enabled;if(!(E&&i)&&(p&&-_===s.translate||!p&&_===s.translate))return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(_),w!=="reset"&&(s.transitionStart(t,w),s.transitionEnd(t,w)),!1;if(a.cssMode){const x=s.isHorizontal(),I=p?_:-_;if(e===0)E&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),E&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{y[x?"scrollLeft":"scrollTop"]=I})):y[x?"scrollLeft":"scrollTop"]=I,E&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return ZC({swiper:s,targetPosition:I,side:x?"left":"top"}),!0;y.scrollTo({[x?"left":"top"]:I,behavior:"smooth"})}return!0}const F=n1().isSafari;return E&&!i&&F&&s.isElement&&s.virtual.update(!1,!1,o),s.setTransition(e),s.setTranslate(_),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,r),s.transitionStart(t,w),e===0?s.transitionEnd(t,w):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(I){!s||s.destroyed||I.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,w))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function $B(n,e,t,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const i=this;if(i.destroyed)return;typeof e>"u"&&(e=i.params.speed);const s=i.grid&&i.params.grid&&i.params.grid.rows>1;let o=n;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)o=o+i.virtual.slidesBefore;else{let a;if(s){const p=o*i.params.grid.rows;a=i.slides.find(y=>y.getAttribute("data-swiper-slide-index")*1===p).column}else a=i.getSlideIndexByData(o);const l=s?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:c}=i.params;let d=i.params.slidesPerView;d==="auto"?d=i.slidesPerViewDynamic():(d=Math.ceil(parseFloat(i.params.slidesPerView,10)),c&&d%2===0&&(d=d+1));let h=l-a<d;if(c&&(h=h||a<Math.ceil(d/2)),r&&c&&i.params.slidesPerView!=="auto"&&!s&&(h=!1),h){const p=c?a<i.activeIndex?"prev":"next":a-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:p,slideTo:!0,activeSlideIndex:p==="next"?a+1:a-l+1,slideRealIndex:p==="next"?i.realIndex:void 0})}if(s){const p=o*i.params.grid.rows;o=i.slides.find(y=>y.getAttribute("data-swiper-slide-index")*1===p).column}else o=i.getSlideIndexByData(o)}return requestAnimationFrame(()=>{i.slideTo(o,e,t,r)}),i}function qB(n,e,t){e===void 0&&(e=!0);const r=this,{enabled:i,params:s,animating:o}=r;if(!i||r.destroyed)return r;typeof n>"u"&&(n=r.params.speed);let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:a,c=r.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,n,e,t)}),!0}return s.rewind&&r.isEnd?r.slideTo(0,n,e,t):r.slideTo(r.activeIndex+l,n,e,t)}function WB(n,e,t){e===void 0&&(e=!0);const r=this,{params:i,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=r;if(!l||r.destroyed)return r;typeof n>"u"&&(n=r.params.speed);const d=r.virtual&&i.virtual.enabled;if(i.loop){if(c&&!d&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const h=a?r.translate:-r.translate;function p(w){return w<0?-Math.floor(Math.abs(w)):Math.floor(w)}const y=p(h),v=s.map(w=>p(w)),T=i.freeMode&&i.freeMode.enabled;let C=s[v.indexOf(y)-1];if(typeof C>"u"&&(i.cssMode||T)){let w;s.forEach((E,N)=>{y>=E&&(w=N)}),typeof w<"u"&&(C=T?s[w]:s[w>0?w-1:w])}let _=0;if(typeof C<"u"&&(_=o.indexOf(C),_<0&&(_=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(_=_-r.slidesPerViewDynamic("previous",!0)+1,_=Math.max(_,0))),i.rewind&&r.isBeginning){const w=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(w,n,e,t)}else if(i.loop&&r.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(_,n,e,t)}),!0;return r.slideTo(_,n,e,t)}function GB(n,e,t){e===void 0&&(e=!0);const r=this;if(!r.destroyed)return typeof n>"u"&&(n=r.params.speed),r.slideTo(r.activeIndex,n,e,t)}function HB(n,e,t,r){e===void 0&&(e=!0),r===void 0&&(r=.5);const i=this;if(i.destroyed)return;typeof n>"u"&&(n=i.params.speed);let s=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[a]){const c=i.snapGrid[a],d=i.snapGrid[a+1];l-c>(d-c)*r&&(s+=i.params.slidesPerGroup)}else{const c=i.snapGrid[a-1],d=i.snapGrid[a];l-c<=(d-c)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,n,e,t)}function KB(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,r=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let i=n.getSlideIndexWhenGrid(n.clickedIndex),s;const o=n.isElement?"swiper-slide":`.${e.slideClass}`,a=n.grid&&n.params.grid&&n.params.grid.rows>1;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?n.slideToLoop(s):i>(a?(n.slides.length-r)/2-(n.params.grid.rows-1):n.slides.length-r)?(n.loopFix(),i=n.getSlideIndex(Hn(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),JC(()=>{n.slideTo(i)})):n.slideTo(i)}else n.slideTo(i)}var QB={slideTo:zB,slideToLoop:$B,slideNext:qB,slidePrev:WB,slideReset:GB,slideToClosest:HB,slideToClickedSlide:KB};function YB(n,e){const t=this,{params:r,slidesEl:i}=t;if(!r.loop||t.virtual&&t.params.virtual.enabled)return;const s=()=>{Hn(i,`.${r.slideClass}, swiper-slide`).forEach((y,v)=>{y.setAttribute("data-swiper-slide-index",v)})},o=()=>{const p=Hn(i,`.${r.slideBlankClass}`);p.forEach(y=>{y.remove()}),p.length>0&&(t.recalcSlides(),t.updateSlides())},a=t.grid&&r.grid&&r.grid.rows>1;r.loopAddBlankSlides&&(r.slidesPerGroup>1||a)&&o();const l=r.slidesPerGroup*(a?r.grid.rows:1),c=t.slides.length%l!==0,d=a&&t.slides.length%r.grid.rows!==0,h=p=>{for(let y=0;y<p;y+=1){const v=t.isElement?bh("swiper-slide",[r.slideBlankClass]):bh("div",[r.slideClass,r.slideBlankClass]);t.slidesEl.append(v)}};if(c){if(r.loopAddBlankSlides){const p=l-t.slides.length%l;h(p),t.recalcSlides(),t.updateSlides()}else Ch("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(d){if(r.loopAddBlankSlides){const p=r.grid.rows-t.slides.length%r.grid.rows;h(p),t.recalcSlides(),t.updateSlides()}else Ch("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();t.loopFix({slideRealIndex:n,direction:r.centeredSlides?void 0:"next",initial:e})}function XB(n){let{slideRealIndex:e,slideTo:t=!0,direction:r,setTranslate:i,activeSlideIndex:s,initial:o,byController:a,byMousewheel:l}=n===void 0?{}:n;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:d,allowSlidePrev:h,allowSlideNext:p,slidesEl:y,params:v}=c,{centeredSlides:T,initialSlide:C}=v;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&v.virtual.enabled){t&&(!v.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):v.centeredSlides&&c.snapIndex<v.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=h,c.allowSlideNext=p,c.emit("loopFix");return}let _=v.slidesPerView;_==="auto"?_=c.slidesPerViewDynamic():(_=Math.ceil(parseFloat(v.slidesPerView,10)),T&&_%2===0&&(_=_+1));const w=v.slidesPerGroupAuto?_:v.slidesPerGroup;let E=T?Math.max(w,Math.ceil(_/2)):w;E%w!==0&&(E+=w-E%w),E+=v.loopAdditionalSlides,c.loopedSlides=E;const N=c.grid&&v.grid&&v.grid.rows>1;d.length<_+E||c.params.effect==="cards"&&d.length<_+E*2?Ch("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):N&&v.grid.fill==="row"&&Ch("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const D=[],F=[],x=N?Math.ceil(d.length/v.grid.rows):d.length,I=o&&x-C<_&&!T;let P=I?C:c.activeIndex;typeof s>"u"?s=c.getSlideIndex(d.find(ne=>ne.classList.contains(v.slideActiveClass))):P=s;const A=r==="next"||!r,b=r==="prev"||!r;let k=0,R=0;const Te=(N?d[s].column:s)+(T&&typeof i>"u"?-_/2+.5:0);if(Te<E){k=Math.max(E-Te,w);for(let ne=0;ne<E-Te;ne+=1){const ue=ne-Math.floor(ne/x)*x;if(N){const q=x-ue-1;for(let Q=d.length-1;Q>=0;Q-=1)d[Q].column===q&&D.push(Q)}else D.push(x-ue-1)}}else if(Te+_>x-E){R=Math.max(Te-(x-E*2),w),I&&(R=Math.max(R,_-x+C+1));for(let ne=0;ne<R;ne+=1){const ue=ne-Math.floor(ne/x)*x;N?d.forEach((q,Q)=>{q.column===ue&&F.push(Q)}):F.push(ue)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),c.params.effect==="cards"&&d.length<_+E*2&&(F.includes(s)&&F.splice(F.indexOf(s),1),D.includes(s)&&D.splice(D.indexOf(s),1)),b&&D.forEach(ne=>{d[ne].swiperLoopMoveDOM=!0,y.prepend(d[ne]),d[ne].swiperLoopMoveDOM=!1}),A&&F.forEach(ne=>{d[ne].swiperLoopMoveDOM=!0,y.append(d[ne]),d[ne].swiperLoopMoveDOM=!1}),c.recalcSlides(),v.slidesPerView==="auto"?c.updateSlides():N&&(D.length>0&&b||F.length>0&&A)&&c.slides.forEach((ne,ue)=>{c.grid.updateSlide(ue,ne,c.slides)}),v.watchSlidesProgress&&c.updateSlidesOffset(),t){if(D.length>0&&b){if(typeof e>"u"){const ne=c.slidesGrid[P],q=c.slidesGrid[P+k]-ne;l?c.setTranslate(c.translate-q):(c.slideTo(P+Math.ceil(k),0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-q,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-q))}else if(i){const ne=N?D.length/v.grid.rows:D.length;c.slideTo(c.activeIndex+ne,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(F.length>0&&A)if(typeof e>"u"){const ne=c.slidesGrid[P],q=c.slidesGrid[P-R]-ne;l?c.setTranslate(c.translate-q):(c.slideTo(P-R,0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-q,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-q))}else{const ne=N?F.length/v.grid.rows:F.length;c.slideTo(c.activeIndex-ne,0,!1,!0)}}if(c.allowSlidePrev=h,c.allowSlideNext=p,c.controller&&c.controller.control&&!a){const ne={slideRealIndex:e,direction:r,setTranslate:i,activeSlideIndex:s,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(ue=>{!ue.destroyed&&ue.params.loop&&ue.loopFix({...ne,slideTo:ue.params.slidesPerView===v.slidesPerView?t:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...ne,slideTo:c.controller.control.params.slidesPerView===v.slidesPerView?t:!1})}c.emit("loopFix")}function JB(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const r=[];n.slides.forEach(i=>{const s=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;r[s]=i}),n.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),r.forEach(i=>{t.append(i)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var ZB={loopCreate:YB,loopFix:XB,loopDestroy:JB};function e6(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function t6(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var n6={setGrabCursor:e6,unsetGrabCursor:t6};function r6(n,e){e===void 0&&(e=this);function t(r){if(!r||r===Ws()||r===zt())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(n);return!i&&!r.getRootNode?null:i||t(r.getRootNode().host)}return t(e)}function aS(n,e,t){const r=zt(),{params:i}=n,s=i.edgeSwipeDetection,o=i.edgeSwipeThreshold;return s&&(t<=o||t>=r.innerWidth-o)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function i6(n){const e=this,t=Ws();let r=n;r.originalEvent&&(r=r.originalEvent);const i=e.touchEventsData;if(r.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==r.pointerId)return;i.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(i.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){aS(e,r,r.targetTouches[0].pageX);return}const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&r.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=r.target;if(s.touchEventsTarget==="wrapper"&&!dB(l,e.wrapperEl)||"which"in r&&r.which===3||"button"in r&&r.button>0||i.isTouched&&i.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",d=r.composedPath?r.composedPath():r.path;c&&r.target&&r.target.shadowRoot&&d&&(l=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,p=!!(r.target&&r.target.shadowRoot);if(s.noSwiping&&(p?r6(h,l):l.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=r.pageX,o.currentY=r.pageY;const y=o.currentX,v=o.currentY;if(!aS(e,r,y))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=y,o.startY=v,i.touchStartTime=Rh(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let T=!0;l.matches(i.focusableElements)&&(T=!1,l.nodeName==="SELECT"&&(i.isTouched=!1)),t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==l&&(r.pointerType==="mouse"||r.pointerType!=="mouse"&&!l.matches(i.focusableElements))&&t.activeElement.blur();const C=T&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||C)&&!l.isContentEditable&&r.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",r)}function s6(n){const e=Ws(),t=this,r=t.touchEventsData,{params:i,touches:s,rtlTranslate:o,enabled:a}=t;if(!a||!i.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(r.touchId!==null||l.pointerId!==r.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].find(D=>D.identifier===r.touchId),!c||c.identifier!==r.touchId)return}else c=l;if(!r.isTouched){r.startMoving&&r.isScrolling&&t.emit("touchMoveOpposite",l);return}const d=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!t.allowTouchMove){l.target.matches(r.focusableElements)||(t.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h}),r.touchStartTime=Rh());return}if(i.touchReleaseOnEdges&&!i.loop)if(t.isVertical()){if(h<s.startY&&t.translate<=t.maxTranslate()||h>s.startY&&t.translate>=t.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else{if(o&&(d>s.startX&&-t.translate<=t.maxTranslate()||d<s.startX&&-t.translate>=t.minTranslate()))return;if(!o&&(d<s.startX&&t.translate<=t.maxTranslate()||d>s.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(r.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,t.allowClick=!1;return}r.allowTouchCallbacks&&t.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=d,s.currentY=h;const p=s.currentX-s.startX,y=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(p**2+y**2)<t.params.threshold)return;if(typeof r.isScrolling>"u"){let D;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:p*p+y*y>=25&&(D=Math.atan2(Math.abs(y),Math.abs(p))*180/Math.PI,r.isScrolling=t.isHorizontal()?D>i.touchAngle:90-D>i.touchAngle)}if(r.isScrolling&&t.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(r.startMoving=!0),r.isScrolling||l.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;t.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let v=t.isHorizontal()?p:y,T=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(v=Math.abs(v)*(o?1:-1),T=Math.abs(T)*(o?1:-1)),s.diff=v,v*=i.touchRatio,o&&(v=-v,T=-T);const C=t.touchesDirection;t.swipeDirection=v>0?"prev":"next",t.touchesDirection=T>0?"prev":"next";const _=t.params.loop&&!i.cssMode,w=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!r.isMoved){if(_&&w&&t.loopFix({direction:t.swipeDirection}),r.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const D=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(D)}r.allowMomentumBounce=!1,i.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}if(new Date().getTime(),i._loopSwapReset!==!1&&r.isMoved&&r.allowThresholdMove&&C!==t.touchesDirection&&_&&w&&Math.abs(v)>=1){Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}t.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=v+r.startTranslate;let E=!0,N=i.resistanceRatio;if(i.touchReleaseOnEdges&&(N=0),v>0?(_&&w&&r.allowThresholdMove&&r.currentTranslate>(i.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(i.slidesPerView!=="auto"&&t.slides.length-i.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>t.minTranslate()&&(E=!1,i.resistance&&(r.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+r.startTranslate+v)**N))):v<0&&(_&&w&&r.allowThresholdMove&&r.currentTranslate<(i.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(i.slidesPerView!=="auto"&&t.slides.length-i.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(i.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<t.maxTranslate()&&(E=!1,i.resistance&&(r.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-r.startTranslate-v)**N))),E&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(v)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&t.freeMode||i.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(r.currentTranslate),t.setTranslate(r.currentTranslate))}function o6(n){const e=this,t=e.touchEventsData;let r=n;r.originalEvent&&(r=r.originalEvent);let i;if(r.type==="touchend"||r.type==="touchcancel"){if(i=[...r.changedTouches].find(D=>D.identifier===t.touchId),!i||i.identifier!==t.touchId)return}else{if(t.touchId!==null||r.pointerId!==t.pointerId)return;i=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:d}=e;if(!d||!o.simulateTouch&&r.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",r),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=Rh(),p=h-t.touchStartTime;if(e.allowClick){const D=r.path||r.composedPath&&r.composedPath();e.updateClickedSlide(D&&D[0]||r.target,D),e.emit("tap click",r),p<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",r)}if(t.lastClickTime=Rh(),JC(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let y;if(o.followFinger?y=l?e.translate:-e.translate:y=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:y});return}const v=y>=-e.maxTranslate()&&!e.params.loop;let T=0,C=e.slidesSizesGrid[0];for(let D=0;D<c.length;D+=D<o.slidesPerGroupSkip?1:o.slidesPerGroup){const F=D<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[D+F]<"u"?(v||y>=c[D]&&y<c[D+F])&&(T=D,C=c[D+F]-c[D]):(v||y>=c[D])&&(T=D,C=c[c.length-1]-c[c.length-2])}let _=null,w=null;o.rewind&&(e.isBeginning?w=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(_=0));const E=(y-c[T])/C,N=T<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(p>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(E>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?_:T+N):e.slideTo(T)),e.swipeDirection==="prev"&&(E>1-o.longSwipesRatio?e.slideTo(T+N):w!==null&&E<0&&Math.abs(E)>o.longSwipesRatio?e.slideTo(w):e.slideTo(T))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(r.target===e.navigation.nextEl||r.target===e.navigation.prevEl)?r.target===e.navigation.nextEl?e.slideTo(T+N):e.slideTo(T):(e.swipeDirection==="next"&&e.slideTo(_!==null?_:T+N),e.swipeDirection==="prev"&&e.slideTo(w!==null?w:T))}}function lS(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=n,o=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!a?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!o?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=i,n.allowSlideNext=r,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function a6(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function l6(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:r}=n;if(!r)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let i;const s=n.maxTranslate()-n.minTranslate();s===0?i=0:i=(n.translate-n.minTranslate())/s,i!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function u6(n){const e=this;bd(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function c6(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const i1=(n,e)=>{const t=Ws(),{params:r,el:i,wrapperEl:s,device:o}=n,a=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!i||typeof i=="string"||(t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:a}),i[l]("touchstart",n.onTouchStart,{passive:!1}),i[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",n.onClick,!0),r.cssMode&&s[l]("scroll",n.onScroll),r.updateOnWindowResize?n[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",lS,!0):n[c]("observerUpdate",lS,!0),i[l]("load",n.onLoad,{capture:!0}))};function d6(){const n=this,{params:e}=n;n.onTouchStart=i6.bind(n),n.onTouchMove=s6.bind(n),n.onTouchEnd=o6.bind(n),n.onDocumentTouchStart=c6.bind(n),e.cssMode&&(n.onScroll=l6.bind(n)),n.onClick=a6.bind(n),n.onLoad=u6.bind(n),i1(n,"on")}function h6(){i1(this,"off")}var f6={attachEvents:d6,detachEvents:h6};const uS=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function p6(){const n=this,{realIndex:e,initialized:t,params:r,el:i}=n,s=r.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=Ws(),a=r.breakpointsBase==="window"||!r.breakpointsBase?r.breakpointsBase:"container",l=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?n.el:o.querySelector(r.breakpointsBase),c=n.getBreakpoint(s,a,l);if(!c||n.currentBreakpoint===c)return;const h=(c in s?s[c]:void 0)||n.originalParams,p=uS(n,r),y=uS(n,h),v=n.params.grabCursor,T=h.grabCursor,C=r.enabled;p&&!y?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),n.emitContainerClasses()):!p&&y&&(i.classList.add(`${r.containerModifierClass}grid`),(h.grid.fill&&h.grid.fill==="column"||!h.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),n.emitContainerClasses()),v&&!T?n.unsetGrabCursor():!v&&T&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(F=>{if(typeof h[F]>"u")return;const x=r[F]&&r[F].enabled,I=h[F]&&h[F].enabled;x&&!I&&n[F].disable(),!x&&I&&n[F].enable()});const _=h.direction&&h.direction!==r.direction,w=r.loop&&(h.slidesPerView!==r.slidesPerView||_),E=r.loop;_&&t&&n.changeDirection(),tn(n.params,h);const N=n.params.enabled,D=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),C&&!N?n.disable():!C&&N&&n.enable(),n.currentBreakpoint=c,n.emit("_beforeBreakpoint",h),t&&(w?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!E&&D?(n.loopCreate(e),n.updateSlides()):E&&!D&&n.loopDestroy()),n.emit("breakpoint",h)}function m6(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let r=!1;const i=zt(),s=e==="window"?i.innerHeight:t.clientHeight,o=Object.keys(n).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?i.matchMedia(`(min-width: ${c}px)`).matches&&(r=l):c<=t.clientWidth&&(r=l)}return r||"max"}var g6={setBreakpoint:p6,getBreakpoint:m6};function y6(n,e){const t=[];return n.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&t.push(e+i)}):typeof r=="string"&&t.push(e+r)}),t}function _6(){const n=this,{classNames:e,params:t,rtl:r,el:i,device:s}=n,o=y6(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:r},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),i.classList.add(...e),n.emitContainerClasses()}function v6(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var w6={addClasses:_6,removeClasses:v6};function E6(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:r}=t;if(r){const i=n.slides.length-1,s=n.slidesGrid[i]+n.slidesSizesGrid[i]+r*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var I6={checkOverflow:E6},Gg={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function T6(n,e){return function(r){r===void 0&&(r={});const i=Object.keys(r)[0],s=r[i];if(typeof s!="object"||s===null){tn(e,r);return}if(n[i]===!0&&(n[i]={enabled:!0}),i==="navigation"&&n[i]&&n[i].enabled&&!n[i].prevEl&&!n[i].nextEl&&(n[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&n[i]&&n[i].enabled&&!n[i].el&&(n[i].auto=!0),!(i in n&&"enabled"in s)){tn(e,r);return}typeof n[i]=="object"&&!("enabled"in n[i])&&(n[i].enabled=!0),n[i]||(n[i]={enabled:!1}),tn(e,r)}}const am={eventsEmitter:wB,update:kB,translate:MB,transition:BB,slide:QB,loop:ZB,grabCursor:n6,events:f6,breakpoints:g6,checkOverflow:I6,classes:w6},lm={};let Nv=class hr{constructor(){let e,t;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?t=i[0]:[e,t]=i,t||(t={}),t=tn({},t),e&&!t.el&&(t.el=e);const o=Ws();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){const d=[];return o.querySelectorAll(t.el).forEach(h=>{const p=tn({},t,{el:h});d.push(new hr(p))}),d}const a=this;a.__swiper__=!0,a.support=e1(),a.device=t1({userAgent:t.userAgent}),a.browser=n1(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const l={};a.modules.forEach(d=>{d({params:t,swiper:a,extendParams:T6(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const c=tn({},Gg,l);return a.params=tn({},c,lm,t),a.originalParams=tn({},a.params),a.passedParams=tn({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(d=>{a.on(d,a.params.on[d])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:r}=this,i=Hn(t,`.${r.slideClass}, swiper-slide`),s=rS(i[0]);return rS(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:r}=e;e.slides=Hn(t,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),o=(r.maxTranslate()-i)*e+i;r.translateTo(o,typeof t>"u"?0:t),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);t.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const r=this,{params:i,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=r;let d=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let h=s[c]?Math.ceil(s[c].swiperSlideSize):0,p;for(let y=c+1;y<s.length;y+=1)s[y]&&!p&&(h+=Math.ceil(s[y].swiperSlideSize),d+=1,h>l&&(p=!0));for(let y=c-1;y>=0;y-=1)s[y]&&!p&&(h+=s[y].swiperSlideSize,d+=1,h>l&&(p=!0))}else if(e==="current")for(let h=c+1;h<s.length;h+=1)(t?o[h]+a[h]-o[c]<l:o[h]-o[c]<l)&&(d+=1);else for(let h=c-1;h>=0;h-=1)o[c]-o[h]<l&&(d+=1);return d}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&bd(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)i(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const o=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(o.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||i()}r.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),r.emit("changeDirection"),t&&r.update()),r}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let r=e||t.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=t,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const i=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):Hn(r,i())[0];return!o&&t.params.createElements&&(o=bh("div",t.params.wrapperClass),r.append(o),Hn(r,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:r,wrapperEl:o,slidesEl:t.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:o,hostEl:t.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||si(r,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||si(r,"direction")==="rtl"),wrongRTL:si(o,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const i=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&i.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(s=>{s.complete?bd(t,s):s.addEventListener("load",o=>{bd(t,o.target)})}),Wg(t),t.initialized=!0,Wg(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const r=this,{params:i,el:s,wrapperEl:o,slides:a}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),t&&(r.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el&&typeof r.el!="string"&&(r.el.swiper=null),oB(r)),r.destroyed=!0),null}static extendDefaults(e){tn(lm,e)}static get extendedDefaults(){return lm}static get defaults(){return Gg}static installModule(e){hr.prototype.__modules__||(hr.prototype.__modules__=[]);const t=hr.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>hr.installModule(t)),hr):(hr.installModule(e),hr)}};Object.keys(am).forEach(n=>{Object.keys(am[n]).forEach(e=>{Nv.prototype[e]=am[n][e]})});Nv.use([_B,vB]);const s1=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Os(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Oo(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof n[r]>"u"?n[r]=e[r]:Os(e[r])&&Os(n[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?n[r]=e[r]:Oo(n[r],e[r]):n[r]=e[r]})}function o1(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function a1(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function l1(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function u1(n){n===void 0&&(n="");const e=n.split(" ").map(r=>r.trim()).filter(r=>!!r),t=[];return e.forEach(r=>{t.indexOf(r)<0&&t.push(r)}),t.join(" ")}function S6(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function P6(n){let{swiper:e,slides:t,passedParams:r,changedParams:i,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:l}=n;const c=i.filter(P=>P!=="children"&&P!=="direction"&&P!=="wrapperClass"),{params:d,pagination:h,navigation:p,scrollbar:y,virtual:v,thumbs:T}=e;let C,_,w,E,N,D,F,x;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&d.thumbs&&(!d.thumbs.swiper||d.thumbs.swiper.destroyed)&&(C=!0),i.includes("controller")&&r.controller&&r.controller.control&&d.controller&&!d.controller.control&&(_=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(d.pagination||d.pagination===!1)&&h&&!h.el&&(w=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(d.scrollbar||d.scrollbar===!1)&&y&&!y.el&&(E=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||o)&&(r.navigation.nextEl||s)&&(d.navigation||d.navigation===!1)&&p&&!p.prevEl&&!p.nextEl&&(N=!0);const I=P=>{e[P]&&(e[P].destroy(),P==="navigation"?(e.isElement&&(e[P].prevEl.remove(),e[P].nextEl.remove()),d[P].prevEl=void 0,d[P].nextEl=void 0,e[P].prevEl=void 0,e[P].nextEl=void 0):(e.isElement&&e[P].el.remove(),d[P].el=void 0,e[P].el=void 0))};i.includes("loop")&&e.isElement&&(d.loop&&!r.loop?D=!0:!d.loop&&r.loop?F=!0:x=!0),c.forEach(P=>{if(Os(d[P])&&Os(r[P]))Object.assign(d[P],r[P]),(P==="navigation"||P==="pagination"||P==="scrollbar")&&"enabled"in r[P]&&!r[P].enabled&&I(P);else{const A=r[P];(A===!0||A===!1)&&(P==="navigation"||P==="pagination"||P==="scrollbar")?A===!1&&I(P):d[P]=r[P]}}),c.includes("controller")&&!_&&e.controller&&e.controller.control&&d.controller&&d.controller.control&&(e.controller.control=d.controller.control),i.includes("children")&&t&&v&&d.virtual.enabled?(v.slides=t,v.update(!0)):i.includes("virtual")&&v&&d.virtual.enabled&&(t&&(v.slides=t),v.update(!0)),i.includes("children")&&t&&d.loop&&(x=!0),C&&T.init()&&T.update(!0),_&&(e.controller.control=d.controller.control),w&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(d.pagination.el=l),h.init(),h.render(),h.update()),E&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(d.scrollbar.el=a),y.init(),y.updateSize(),y.setTranslate()),N&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),sS(s,e.hostEl.constructor.nextButtonSvg),s.part.add("button-next"),e.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),sS(o,e.hostEl.constructor.prevButtonSvg),o.part.add("button-prev"),e.el.appendChild(o))),s&&(d.navigation.nextEl=s),o&&(d.navigation.prevEl=o),p.init(),p.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&e.changeDirection(r.direction,!1),(D||x)&&e.loopDestroy(),(F||x)&&e.loopCreate(),e.update()}function A6(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},r={},i={};Oo(t,Gg),t._emitClasses=!0,t.init=!1;const s={},o=s1.map(l=>l.replace(/_/,"")),a=Object.assign({},n);return Object.keys(a).forEach(l=>{typeof n[l]>"u"||(o.indexOf(l)>=0?Os(n[l])?(t[l]={},i[l]={},Oo(t[l],n[l]),Oo(i[l],n[l])):(t[l]=n[l],i[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?e?r[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:s[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:i,rest:s,events:r}}function x6(n,e){let{el:t,nextEl:r,prevEl:i,paginationEl:s,scrollbarEl:o,swiper:a}=n;o1(e)&&r&&i&&(a.params.navigation.nextEl=r,a.originalParams.navigation.nextEl=r,a.params.navigation.prevEl=i,a.originalParams.navigation.prevEl=i),a1(e)&&s&&(a.params.pagination.el=s,a.originalParams.pagination.el=s),l1(e)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(t)}function R6(n,e,t,r,i){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(t&&r){const l=r.map(i),c=t.map(i);l.join("")!==c.join("")&&o("children"),r.length!==t.length&&o("children")}return s1.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(Os(n[l])&&Os(e[l])){const c=Object.keys(n[l]),d=Object.keys(e[l]);c.length!==d.length?o(l):(c.forEach(h=>{n[l][h]!==e[l][h]&&o(l)}),d.forEach(h=>{n[l][h]!==e[l][h]&&o(l)}))}else n[l]!==e[l]&&o(l)}),s}const C6=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.emit("_virtualUpdated"),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function kh(){return kh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kh.apply(this,arguments)}function c1(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function d1(n){const e=[];return Xe.Children.toArray(n).forEach(t=>{c1(t)?e.push(t):t.props&&t.props.children&&d1(t.props.children).forEach(r=>e.push(r))}),e}function b6(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Xe.Children.toArray(n).forEach(r=>{if(c1(r))e.push(r);else if(r.props&&r.props.slot&&t[r.props.slot])t[r.props.slot].push(r);else if(r.props&&r.props.children){const i=d1(r.props.children);i.length>0?i.forEach(s=>e.push(s)):t["container-end"].push(r)}else t["container-end"].push(r)}),{slides:e,slots:t}}function k6(n,e,t){if(!t)return null;const r=d=>{let h=d;return d<0?h=e.length+d:h>=e.length&&(h=h-e.length),h},i=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:s,to:o}=t,a=n.params.loop?-e.length:0,l=n.params.loop?e.length*2:e.length,c=[];for(let d=a;d<l;d+=1)d>=s&&d<=o&&c.push(e[r(d)]);return c.map((d,h)=>Xe.cloneElement(d,{swiper:n,style:i,key:d.props.virtualIndex||d.key||`slide-${h}`}))}function $l(n,e){return typeof window>"u"?V.useEffect(n,e):V.useLayoutEffect(n,e)}const cS=V.createContext(null),N6=V.createContext(null),lc=V.forwardRef(function(n,e){let{className:t,tag:r="div",wrapperTag:i="div",children:s,onSwiper:o,...a}=n===void 0?{}:n,l=!1;const[c,d]=V.useState("swiper"),[h,p]=V.useState(null),[y,v]=V.useState(!1),T=V.useRef(!1),C=V.useRef(null),_=V.useRef(null),w=V.useRef(null),E=V.useRef(null),N=V.useRef(null),D=V.useRef(null),F=V.useRef(null),x=V.useRef(null),{params:I,passedParams:P,rest:A,events:b}=A6(a),{slides:k,slots:R}=b6(s),de=()=>{v(!y)};Object.assign(I.on,{_containerClasses(Q,Z){d(Z)}});const Te=()=>{Object.assign(I.on,b),l=!0;const Q={...I};if(delete Q.wrapperClass,_.current=new Nv(Q),_.current.virtual&&_.current.params.virtual.enabled){_.current.virtual.slides=k;const Z={cache:!1,slides:k,renderExternal:p,renderExternalUpdate:!1};Oo(_.current.params.virtual,Z),Oo(_.current.originalParams.virtual,Z)}};C.current||Te(),_.current&&_.current.on("_beforeBreakpoint",de);const ne=()=>{l||!b||!_.current||Object.keys(b).forEach(Q=>{_.current.on(Q,b[Q])})},ue=()=>{!b||!_.current||Object.keys(b).forEach(Q=>{_.current.off(Q,b[Q])})};V.useEffect(()=>()=>{_.current&&_.current.off("_beforeBreakpoint",de)}),V.useEffect(()=>{!T.current&&_.current&&(_.current.emitSlidesClasses(),T.current=!0)}),$l(()=>{if(e&&(e.current=C.current),!!C.current)return _.current.destroyed&&Te(),x6({el:C.current,nextEl:N.current,prevEl:D.current,paginationEl:F.current,scrollbarEl:x.current,swiper:_.current},I),o&&!_.current.destroyed&&o(_.current),()=>{_.current&&!_.current.destroyed&&_.current.destroy(!0,!1)}},[]),$l(()=>{ne();const Q=R6(P,w.current,k,E.current,Z=>Z.key);return w.current=P,E.current=k,Q.length&&_.current&&!_.current.destroyed&&P6({swiper:_.current,slides:k,passedParams:P,changedParams:Q,nextEl:N.current,prevEl:D.current,scrollbarEl:x.current,paginationEl:F.current}),()=>{ue()}}),$l(()=>{C6(_.current)},[h]);function q(){return I.virtual?k6(_.current,k,h):k.map((Q,Z)=>Xe.cloneElement(Q,{swiper:_.current,swiperSlideIndex:Z}))}return Xe.createElement(r,kh({ref:C,className:u1(`${c}${t?` ${t}`:""}`)},A),Xe.createElement(N6.Provider,{value:_.current},R["container-start"],Xe.createElement(i,{className:S6(I.wrapperClass)},R["wrapper-start"],q(),R["wrapper-end"]),o1(I)&&Xe.createElement(Xe.Fragment,null,Xe.createElement("div",{ref:D,className:"swiper-button-prev"}),Xe.createElement("div",{ref:N,className:"swiper-button-next"})),l1(I)&&Xe.createElement("div",{ref:x,className:"swiper-scrollbar"}),a1(I)&&Xe.createElement("div",{ref:F,className:"swiper-pagination"}),R["container-end"]))});lc.displayName="Swiper";const pt=V.forwardRef(function(n,e){let{tag:t="div",children:r,className:i="",swiper:s,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:c,...d}=n===void 0?{}:n;const h=V.useRef(null),[p,y]=V.useState("swiper-slide"),[v,T]=V.useState(!1);function C(N,D,F){D===h.current&&y(F)}$l(()=>{if(typeof c<"u"&&(h.current.swiperSlideIndex=c),e&&(e.current=h.current),!(!h.current||!s)){if(s.destroyed){p!=="swiper-slide"&&y("swiper-slide");return}return s.on("_slideClass",C),()=>{s&&s.off("_slideClass",C)}}}),$l(()=>{s&&h.current&&!s.destroyed&&y(s.getSlideClasses(h.current))},[s]);const _={isActive:p.indexOf("swiper-slide-active")>=0,isVisible:p.indexOf("swiper-slide-visible")>=0,isPrev:p.indexOf("swiper-slide-prev")>=0,isNext:p.indexOf("swiper-slide-next")>=0},w=()=>typeof r=="function"?r(_):r,E=()=>{T(!0)};return Xe.createElement(t,kh({ref:h,className:u1(`${p}${i?` ${i}`:""}`),"data-swiper-slide-index":l,onLoad:E},d),o&&Xe.createElement(cS.Provider,{value:_},Xe.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},w(),a&&!v&&Xe.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&Xe.createElement(cS.Provider,{value:_},w(),a&&!v&&Xe.createElement("div",{className:"swiper-lazy-preloader"})))});pt.displayName="SwiperSlide";function D6(n,e,t,r){return n.params.createElements&&Object.keys(r).forEach(i=>{if(!t[i]&&t.auto===!0){let s=Hn(n.el,`.${r[i]}`)[0];s||(s=bh("div",r[i]),s.className=r[i],n.el.append(s)),t[i]=s,e[i]=s}}),t}function Mf(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(v){let T;return v&&typeof v=="string"&&e.isElement&&(T=e.el.querySelector(v)||e.hostEl.querySelector(v),T)?T:(v&&(typeof v=="string"&&(T=[...document.querySelectorAll(v)]),e.params.uniqueNavElements&&typeof v=="string"&&T&&T.length>1&&e.el.querySelectorAll(v).length===1?T=e.el.querySelector(v):T&&T.length===1&&(T=T[0])),v&&!T?v:T)}function o(v,T){const C=e.params.navigation;v=dr(v),v.forEach(_=>{_&&(_.classList[T?"add":"remove"](...C.disabledClass.split(" ")),_.tagName==="BUTTON"&&(_.disabled=T),e.params.watchOverflow&&e.enabled&&_.classList[e.isLocked?"add":"remove"](C.lockClass))})}function a(){const{nextEl:v,prevEl:T}=e.navigation;if(e.params.loop){o(T,!1),o(v,!1);return}o(T,e.isBeginning&&!e.params.rewind),o(v,e.isEnd&&!e.params.rewind)}function l(v){v.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function c(v){v.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function d(){const v=e.params.navigation;if(e.params.navigation=D6(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(v.nextEl||v.prevEl))return;let T=s(v.nextEl),C=s(v.prevEl);Object.assign(e.navigation,{nextEl:T,prevEl:C}),T=dr(T),C=dr(C);const _=(w,E)=>{w&&w.addEventListener("click",E==="next"?c:l),!e.enabled&&w&&w.classList.add(...v.lockClass.split(" "))};T.forEach(w=>_(w,"next")),C.forEach(w=>_(w,"prev"))}function h(){let{nextEl:v,prevEl:T}=e.navigation;v=dr(v),T=dr(T);const C=(_,w)=>{_.removeEventListener("click",w==="next"?c:l),_.classList.remove(...e.params.navigation.disabledClass.split(" "))};v.forEach(_=>C(_,"next")),T.forEach(_=>C(_,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?y():(d(),a())}),r("toEdge fromEdge lock unlock",()=>{a()}),r("destroy",()=>{h()}),r("enable disable",()=>{let{nextEl:v,prevEl:T}=e.navigation;if(v=dr(v),T=dr(T),e.enabled){a();return}[...v,...T].filter(C=>!!C).forEach(C=>C.classList.add(e.params.navigation.lockClass))}),r("click",(v,T)=>{let{nextEl:C,prevEl:_}=e.navigation;C=dr(C),_=dr(_);const w=T.target;let E=_.includes(w)||C.includes(w);if(e.isElement&&!E){const N=T.path||T.composedPath&&T.composedPath();N&&(E=N.find(D=>C.includes(D)||_.includes(D)))}if(e.params.navigation.hideOnClick&&!E){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===w||e.pagination.el.contains(w)))return;let N;C.length?N=C[0].classList.contains(e.params.navigation.hiddenClass):_.length&&(N=_[0].classList.contains(e.params.navigation.hiddenClass)),i(N===!0?"navigationShow":"navigationHide"),[...C,..._].filter(D=>!!D).forEach(D=>D.classList.toggle(e.params.navigation.hiddenClass))}});const p=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),a()},y=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:p,disable:y,update:a,init:d,destroy:h})}const h1=({onSelectOffer:n})=>{const e=t=>{typeof n=="function"&&n({service:"haircut",subService:t})};return m.jsxs("section",{className:"special-offers",children:[m.jsx("h2",{children:"Актуальные спецпредложения по стрижке волос"}),m.jsxs(lc,{modules:[Mf],spaceBetween:20,slidesPerView:3,navigation:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}},className:"offers-container","aria-label":"Спецпредложения по стрижке",children:[m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/haircut-women.jpg",alt:"Женская стрижка"}),m.jsx("button",{className:"offer-category",type:"button",children:"Стрижка"}),m.jsxs("div",{className:"offer-info","data-service":"haircut",role:"button",tabIndex:0,onClick:()=>e("women"),onKeyDown:t=>t.key==="Enter"&&e("women"),"aria-label":"Записаться на Модельную женскую стрижку",children:[m.jsx("h3",{children:"Модельная женская стрижка"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/haircut-men.jpg",alt:"Мужская стрижка"}),m.jsx("button",{className:"offer-category",type:"button",children:"Стрижка"}),m.jsxs("div",{className:"offer-info","data-service":"haircut",role:"button",tabIndex:0,onClick:()=>e("men"),onKeyDown:t=>t.key==="Enter"&&e("men"),"aria-label":"Записаться на Креативную мужскую стрижку",children:[m.jsx("h3",{children:"Креативная мужская стрижка"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/haircut-children.jpg",alt:"Детская стрижка"}),m.jsx("button",{className:"offer-category",type:"button",children:"Стрижка"}),m.jsxs("div",{className:"offer-info","data-service":"haircut",role:"button",tabIndex:0,onClick:()=>e("kids"),onKeyDown:t=>t.key==="Enter"&&e("kids"),"aria-label":"Записаться на Детскую стрижку",children:[m.jsx("h3",{children:"Детская стрижка"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/haircut-stylish.jpg",alt:"Стрижка с укладкой"}),m.jsx("button",{className:"offer-category",type:"button",children:"Стрижка"}),m.jsxs("div",{className:"offer-info","data-service":"haircut",role:"button",tabIndex:0,onClick:()=>e("women"),onKeyDown:t=>t.key==="Enter"&&e("women"),"aria-label":"Записаться на Стрижку с укладкой",children:[m.jsx("h3",{children:"Стрижка с укладкой"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})})]})]})},Ff=()=>m.jsxs("section",{className:"footer-section",children:[m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Стрижка волос"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Уход за волосами"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Укладка волос"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Окрашивание волос"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Телефон"}),m.jsx("p",{className:"contact-info",children:"+7 (999) 999-99-99"}),m.jsx("p",{className:"contact-info",children:"+7 (888) 888-88-88"})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Адрес"}),m.jsx("p",{className:"contact-info",children:"Невский пр. 140"})]})]}),V6=({onSelectOffer:n})=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"hero","aria-label":"Основной блок",children:[m.jsxs("div",{className:"hero-left",children:[m.jsx("h1",{children:"Malu Beauty Studio"}),m.jsx("p",{children:"Добро пожаловать в Malu Beauty Studio, где красота встречается с искусством. Откройте для себя мир преображения с нашими эксклюзивными услугами."})]}),m.jsx("div",{className:"hero-right","aria-label":"Изображение салона",children:m.jsx("img",{src:"img/malu.jpg",alt:"Салон красоты"})})]}),m.jsx(h1,{onSelectOffer:n}),m.jsx(Ff,{})]}),O6=({onSelectOffer:n})=>{const e=t=>{typeof n=="function"&&n({service:"makeup",subService:t})};return m.jsxs("section",{className:"special-offers",children:[m.jsx("h2",{children:"Актуальные спецпредложения"}),m.jsxs(lc,{modules:[Mf],spaceBetween:20,slidesPerView:3,navigation:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}},className:"offers-container","aria-label":"Спецпредложения по макияжу",children:[m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/makeup1.jpg",alt:"Вечерний макияж"}),m.jsx("button",{className:"offer-category",type:"button",children:"Макияж"}),m.jsxs("div",{className:"offer-info","data-service":"makeup",role:"button",tabIndex:0,onClick:()=>e("evening"),onKeyDown:t=>t.key==="Enter"&&e("evening"),"aria-label":"Записаться на Вечерний макияж",children:[m.jsx("h3",{children:"Вечерний макияж"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/makeup2.jpg",alt:"Свадебный макияж"}),m.jsx("button",{className:"offer-category",type:"button",children:"Макияж"}),m.jsxs("div",{className:"offer-info","data-service":"makeup",role:"button",tabIndex:0,onClick:()=>e("bridal"),onKeyDown:t=>t.key==="Enter"&&e("bridal"),"aria-label":"Записаться на Свадебный макияж",children:[m.jsx("h3",{children:"Свадебный макияж"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/makeup3.jpg",alt:"Дневной макияж"}),m.jsx("button",{className:"offer-category",type:"button",children:"Макияж"}),m.jsxs("div",{className:"offer-info","data-service":"makeup",role:"button",tabIndex:0,onClick:()=>e("day"),onKeyDown:t=>t.key==="Enter"&&e("day"),"aria-label":"Записаться на Дневной макияж",children:[m.jsx("h3",{children:"Дневной макияж"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/makeup-hero.jpg",alt:"Nude макияж"}),m.jsx("button",{className:"offer-category",type:"button",children:"Макияж"}),m.jsxs("div",{className:"offer-info","data-service":"makeup",role:"button",tabIndex:0,onClick:()=>e("day"),onKeyDown:t=>t.key==="Enter"&&e("day"),"aria-label":"Записаться на Nude макияж",children:[m.jsx("h3",{children:"Nude макияж"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})})]})]})},L6=({onSelectOffer:n})=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"hero","aria-label":"Основной блок",children:[m.jsxs("div",{className:"hero-left",children:[m.jsx("h1",{children:"Макияж"}),m.jsx("p",{children:"Современный мир диктует новые каноны жизни: ухоженное лицо и тело, стрессоустойчивость, молодость фигуры — сегодня это не роскошь, а необходимость. Наши программы направлены на благополучие и красоту."})]}),m.jsx("div",{className:"hero-right","aria-label":"Изображение процедуры",children:m.jsx("img",{src:"img/makeup-hero.jpg",alt:"Процедура ухода за кожей лица"})})]}),m.jsxs("div",{className:"innovations",children:[m.jsx("div",{className:"innovations-left",children:m.jsxs("div",{className:"innovations-left-text",children:[m.jsxs("div",{className:"innovations-left-text-content",children:[m.jsx("button",{className:"innovations-button",type:"button",children:"Новые техники"}),m.jsx("p",{children:"Откройте для себя последние тренды и инновационные подходы в макияже."})]}),m.jsx("img",{src:"img/makeup-innovation.jpg",alt:"Применение новой техники макияжа"})]})}),m.jsxs("div",{className:"innovations-right",children:[m.jsxs("div",{className:"innovations-text",children:[m.jsx("button",{className:"innovations-button",type:"button",children:"Искусство макияжа"}),m.jsxs("div",{className:"innovations-numbers",children:[m.jsxs("p",{children:["50 ",m.jsx("span",{children:"Видов макияжа для любого случая"})]}),m.jsxs("p",{children:["15 ",m.jsx("span",{children:"Опытных визажистов в нашей команде"})]}),m.jsxs("p",{style:{fontSize:"72px"},children:["10 ",m.jsx("span",{children:"Международных наград за мастерство"})]}),m.jsxs("p",{children:["1000+ ",m.jsx("span",{children:"Довольных клиентов каждый год"})]})]}),m.jsx("div",{})]}),m.jsx("img",{src:"img/certificate.png",alt:"Сертификат визажиста"})]})]}),m.jsxs("section",{className:"news-section",children:[m.jsxs("div",{className:"news-left",children:[m.jsx("button",{className:"news-button",type:"button",children:"Советы визажистов"}),m.jsx("h2",{className:"news-left-title",children:"Как выбрать идеальный макияж для вашего типа лица. Рекомендации экспертов."}),m.jsx("p",{children:"Наши визажисты делятся секретами подбора макияжа, который подчеркнёт вашу индивидуальность."}),m.jsx("p",{children:"Узнайте о последних тенденциях и техниках, чтобы всегда выглядеть безупречно."})]}),m.jsxs("div",{className:"news-right",children:[m.jsx("h2",{children:"Преимущества профессионального макияжа. Мнение специалистов центра"}),m.jsxs("ul",{children:[m.jsx("li",{children:"Профессиональный макияж скрывает недостатки и подчёркивает достоинства, создавая гармоничный образ."}),m.jsx("li",{children:"Качественная косметика и инструменты обеспечивают стойкость на весь день или мероприятие."}),m.jsx("li",{children:"Опытный визажист подберёт макияж под ваш тип кожи, форму лица, цвет глаз и волос."}),m.jsx("li",{children:"Идеально подходит для свадьбы, фотосессии или деловой встречи."})]})]})]}),m.jsx(O6,{onSelectOffer:n}),m.jsx(Ff,{})]}),M6=({onSelectOffer:n})=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"hero","aria-label":"Основной блок",children:[m.jsxs("div",{className:"hero-left",children:[m.jsx("h1",{children:"Стрижка волос"}),m.jsx("p",{children:"Наши мастера создадут для вас идеальную стрижку, которая подчеркнет индивидуальность и стиль. Мы используем современные техники и профессиональные средства для ваших волос."})]}),m.jsx("div",{className:"hero-right","aria-label":"Изображение стрижки",children:m.jsx("img",{src:"img/hair-hero.jpg",alt:"Процесс стрижки"})})]}),m.jsxs("div",{className:"innovations",children:[m.jsx("div",{className:"innovations-left",children:m.jsxs("div",{className:"innovations-left-text",children:[m.jsxs("div",{className:"innovations-left-text-content",children:[m.jsx("button",{className:"innovations-button",children:"Современные тренды"}),m.jsx("p",{children:"Узнайте о последних новинках и тенденциях в мире парикмахерского искусства."})]}),m.jsx("img",{src:"img/haircut-innovation.jpg",alt:"Новая техника стрижки"})]})}),m.jsxs("div",{className:"innovations-right",children:[m.jsxs("div",{className:"innovations-text",children:[m.jsx("button",{className:"innovations-button",children:"Профессионализм"}),m.jsxs("div",{className:"innovations-numbers",children:[m.jsxs("p",{children:["40+ ",m.jsx("span",{children:"Видов стрижек для мужчин и женщин"})]}),m.jsxs("p",{children:["12 ",m.jsx("span",{children:"Опытных стилистов"})]}),m.jsxs("p",{style:{fontSize:"72px"},children:["7 ",m.jsx("span",{children:"Лет опыта"})]}),m.jsxs("p",{children:["700+ ",m.jsx("span",{children:"Довольных клиентов ежемесячно"})]})]}),m.jsx("div",{})]}),m.jsx("img",{src:"img/certificate_hair.png",alt:"Сертификат стилиста"})]})]}),m.jsxs("section",{className:"news-section",children:[m.jsxs("div",{className:"news-left",children:[m.jsx("button",{className:"news-button",children:"Советы стилистов"}),m.jsx("h2",{className:"news-left-title",children:"Как выбрать стрижку, подходящую именно вам."}),m.jsx("p",{children:"Наши специалисты помогут подобрать образ, который подчеркнет вашу индивидуальность."}),m.jsx("p",{children:"Узнайте о современных тенденциях в стрижке и уходе за волосами."})]}),m.jsxs("div",{className:"news-right",children:[m.jsx("h2",{children:"Преимущества профессиональной стрижки"}),m.jsxs("ul",{children:[m.jsx("li",{children:"Качественная стрижка обеспечивает аккуратный и стильный внешний вид."}),m.jsx("li",{children:"Профессионалы учитывают структуру волос и форму лица для лучшего результата."}),m.jsx("li",{children:"Используются современные техники и профессиональные инструменты."}),m.jsx("li",{children:"После стрижки волосы выглядят ухоженными и здоровыми."})]})]})]}),m.jsx(h1,{onSelectOffer:n}),m.jsxs("section",{className:"footer-section",children:[m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Макияж"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Маникюр"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Педикюр"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Укладка волос"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Телефон"}),m.jsx("p",{className:"contact-info",children:"+7 (999) 999-99-99"})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Адрес"}),m.jsx("p",{className:"contact-info",children:"Невский пр. 140"})]})]})]}),F6=({onSelectOffer:n})=>{const e=t=>{n&&n({service:"manicure",subService:t})};return m.jsxs("section",{className:"special-offers",children:[m.jsx("h2",{children:"Актуальные спецпредложения по маникюру"}),m.jsxs(lc,{modules:[Mf],spaceBetween:20,slidesPerView:3,navigation:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}},className:"offers-container",children:[m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/manicure_classic.jpg",alt:"Классический маникюр"}),m.jsx("button",{className:"offer-category",type:"button",children:"Маникюр"}),m.jsxs("div",{className:"offer-info","data-service":"manicure",onClick:()=>e("classic"),children:[m.jsx("h3",{children:"Классический маникюр"}),m.jsx("span",{className:"offer-arrow",children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/manicure1.jpg",alt:"Маникюр гель-лак"}),m.jsx("button",{className:"offer-category",type:"button",children:"Маникюр"}),m.jsxs("div",{className:"offer-info","data-service":"manicure",onClick:()=>e("gel"),children:[m.jsx("h3",{children:"Маникюр гель-лак"}),m.jsx("span",{className:"offer-arrow",children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/manicure.jpg",alt:"Наращивание ногтей"}),m.jsx("button",{className:"offer-category",type:"button",children:"Маникюр"}),m.jsxs("div",{className:"offer-info","data-service":"manicure",onClick:()=>e("extension"),children:[m.jsx("h3",{children:"Наращивание ногтей"}),m.jsx("span",{className:"offer-arrow",children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/manicure_design.jpg",alt:"Дизайн ногтей"}),m.jsx("button",{className:"offer-category",type:"button",children:"Маникюр"}),m.jsxs("div",{className:"offer-info","data-service":"manicure",onClick:()=>e("design"),children:[m.jsx("h3",{children:"Дизайн ногтей"}),m.jsx("span",{className:"offer-arrow",children:"→"})]})]})})]})]})},j6=({onSelectOffer:n})=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"hero","aria-label":"Основной блок",children:[m.jsxs("div",{className:"hero-left",children:[m.jsx("h1",{children:"Маникюр"}),m.jsx("p",{children:"Позвольте вашим рукам быть идеальными. Мы предлагаем широкий спектр услуг по уходу за ногтями, от классического маникюра до сложных дизайнов. Наши мастера используют только лучшие материалы и стерильные инструменты."})]}),m.jsx("div",{className:"hero-right","aria-label":"Изображение маникюра",children:m.jsx("img",{src:"img/manicure-hero.jpg",alt:"Процедура маникюра"})})]}),m.jsxs("div",{className:"innovations",children:[m.jsx("div",{className:"innovations-left",children:m.jsxs("div",{className:"innovations-left-text",children:[m.jsxs("div",{className:"innovations-left-text-content",children:[m.jsx("button",{className:"innovations-button",children:"Новые техники"}),m.jsx("p",{children:"Откройте для себя последние тренды и инновационные подходы в дизайне ногтей."})]}),m.jsx("img",{src:"img/manicure_innovation.jpg",alt:"Применение новой техники маникюра"})]})}),m.jsxs("div",{className:"innovations-right",children:[m.jsxs("div",{className:"innovations-text",children:[m.jsx("button",{className:"innovations-button",children:"Искусство маникюра"}),m.jsxs("div",{className:"innovations-numbers",children:[m.jsxs("p",{children:["30+ ",m.jsx("span",{children:"Видов маникюра для любого стиля"})]}),m.jsxs("p",{children:["10+ ",m.jsx("span",{children:"Опытных мастеров маникюра"})]}),m.jsxs("p",{style:{fontSize:"72px"},children:["5 ",m.jsx("span",{children:"Международных наград за дизайн ногтей"})]}),m.jsxs("p",{children:["500+ ",m.jsx("span",{children:"Довольных клиентов каждый месяц"})]})]}),m.jsx("div",{})]}),m.jsx("img",{src:"img/certificate_manicure.png",alt:"Сертификат мастера маникюра"})]})]}),m.jsxs("section",{className:"news-section",children:[m.jsxs("div",{className:"news-left",children:[m.jsx("button",{className:"news-button",children:"Советы мастеров"}),m.jsx("h2",{className:"news-left-title",children:"Как ухаживать за ногтями, чтобы они всегда были крепкими и здоровыми."}),m.jsx("p",{children:"Наши мастера делятся секретами поддержания здоровья и красоты ваших ногтей."}),m.jsx("p",{children:"Узнайте о последних тенденциях и продуктах для идеального маникюра."})]}),m.jsxs("div",{className:"news-right",children:[m.jsx("h2",{children:"Преимущества профессионального маникюра. Мнение специалистов центра"}),m.jsxs("ul",{children:[m.jsx("li",{children:"Профессиональный маникюр обеспечивает не только красоту, но и здоровье ногтей и кожи рук."}),m.jsx("li",{children:"Использование качественных материалов и стерильных инструментов предотвращает повреждения и инфекции."}),m.jsx("li",{children:"Опытный мастер подберет идеальный уход и дизайн, соответствующий вашим предпочтениям и стилю."}),m.jsx("li",{children:"Регулярный профессиональный маникюр помогает поддерживать руки в идеальном состоянии, придавая им ухоженный вид."})]})]})]}),m.jsx(F6,{onSelectOffer:n}),m.jsx(Ff,{})]}),U6=()=>m.jsxs("section",{className:"special-offers",children:[m.jsx("h2",{children:"Актуальные спецпредложения по педикюру"}),m.jsxs(lc,{modules:[Mf],spaceBetween:20,slidesPerView:3,navigation:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}},className:"offers-container","aria-label":"Спецпредложения по педикюру",children:[m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/pedicure-classic.jpg",alt:"Классический педикюр"}),m.jsx("button",{className:"offer-category",type:"button",children:"Педикюр"}),m.jsxs("div",{className:"offer-info","data-service":"pedicure",children:[m.jsx("h3",{children:"Классический педикюр"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/pedicure-hardware.jpg",alt:"Аппаратный педикюр"}),m.jsx("button",{className:"offer-category",type:"button",children:"Педикюр"}),m.jsxs("div",{className:"offer-info","data-service":"pedicure",children:[m.jsx("h3",{children:"Аппаратный педикюр"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/pedicure-spa.jpg",alt:"SPA-педикюр"}),m.jsx("button",{className:"offer-category",type:"button",children:"Педикюр"}),m.jsxs("div",{className:"offer-info","data-service":"pedicure",children:[m.jsx("h3",{children:"SPA-педикюр"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(pt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/pedicure-treatment.jpg",alt:"Лечебный педикюр"}),m.jsx("button",{className:"offer-category",type:"button",children:"Педикюр"}),m.jsxs("div",{className:"offer-info","data-service":"pedicure",children:[m.jsx("h3",{children:"Лечебный педикюр"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})})]})]}),B6=({onSelectOffer:n})=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"hero","aria-label":"Основной блок",children:[m.jsxs("div",{className:"hero-left",children:[m.jsx("h1",{children:"Педикюр"}),m.jsx("p",{children:"Подарите своим ногам заслуженный уход с профессиональным педикюром. Мы заботимся о здоровье и красоте ваших стоп и ногтей, подбирая оптимальные техники и средства под ваши задачи."})]}),m.jsx("div",{className:"hero-right","aria-label":"Изображение педикюра",children:m.jsx("img",{src:"img/pedicure-hero.jpg",alt:"Процедура педикюра"})})]}),m.jsxs("div",{className:"innovations",children:[m.jsx("div",{className:"innovations-left",children:m.jsxs("div",{className:"innovations-left-text",children:[m.jsxs("div",{className:"innovations-left-text-content",children:[m.jsx("button",{className:"innovations-button",children:"Новые методики"}),m.jsx("p",{children:"Мы используем современные инструменты и техники ухода за стопами, чтобы обеспечить безопасность и долговечный результат."})]}),m.jsx("img",{src:"img/pedicure-innovation.jpg",alt:"Применение новой методики педикюра"})]})}),m.jsxs("div",{className:"innovations-right",children:[m.jsxs("div",{className:"innovations-text",children:[m.jsx("button",{className:"innovations-button",children:"Здоровье и красота стоп"}),m.jsxs("div",{className:"innovations-numbers",children:[m.jsxs("p",{children:["15+ ",m.jsx("span",{children:"Видов педикюра для любых задач"})]}),m.jsxs("p",{children:["8+ ",m.jsx("span",{children:"Опытных мастеров педикюра"})]}),m.jsxs("p",{style:{fontSize:"72px"},children:["3 ",m.jsx("span",{children:"Международных сертификата качества"})]}),m.jsxs("p",{children:["300+ ",m.jsx("span",{children:"Довольных клиентов каждый месяц"})]})]}),m.jsx("div",{})]}),m.jsx("img",{src:"img/certificate_pedicure.png",alt:"Сертификат мастера педикюра"})]})]}),m.jsxs("section",{className:"news-section",children:[m.jsxs("div",{className:"news-left",children:[m.jsx("button",{className:"news-button",children:"Советы подологов"}),m.jsx("h2",{className:"news-left-title",children:"Как ухаживать за ногами в домашних условиях."}),m.jsx("p",{children:"Наши специалисты делятся рекомендациями по профилактике проблем стоп, уходу за ногтями и поддержанию комфорта при ежедневной нагрузке."}),m.jsx("p",{children:"Узнайте, когда необходим профессиональный уход и как продлить эффект после процедуры."})]}),m.jsxs("div",{className:"news-right",children:[m.jsx("h2",{children:"Преимущества профессионального педикюра"}),m.jsxs("ul",{children:[m.jsx("li",{children:"Комплексный уход предотвращает мозоли, натоптыши и вросшие ногти."}),m.jsx("li",{children:"Стерильные инструменты и проверенные средства — безопасная процедура."}),m.jsx("li",{children:"Улучшение кровообращения и ощущение лёгкости после сеанса."}),m.jsx("li",{children:"Ухоженный внешний вид и комфорт каждый день."})]})]})]}),m.jsx(U6,{onSelectOffer:n}),m.jsxs("section",{className:"footer-section",children:[m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Макияж"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Маникюр"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Стрижка волос"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Укладка волос"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Телефон"}),m.jsx("p",{className:"contact-info",children:"+7 (999) 999-99-99"})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Адрес"}),m.jsx("p",{className:"contact-info",children:"Невский пр. 140"})]})]})]}),z6=()=>m.jsxs("div",{children:[m.jsxs("section",{className:"contact-hero",children:[m.jsx("h1",{children:"Контакты"}),m.jsx("p",{children:"Свяжитесь с нами для записи или консультации."})]}),m.jsxs("section",{className:"contact-details",children:[m.jsxs("div",{className:"contact-item",children:[m.jsx("h3",{children:"Телефон"}),m.jsx("p",{children:"+7 (999) 999-99-99"}),m.jsx("p",{children:"+7 (888) 888-88-88"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsx("h3",{children:"Email"}),m.jsx("p",{children:"info@malu.com"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsx("h3",{children:"Адрес"}),m.jsx("p",{children:"Невский пр. 140, Санкт-Петербург"}),m.jsx("a",{href:"https://maps.app.goo.gl/WTcX5jC8JLoBCGY57",target:"_blank",className:"btn-primary",children:"ПОКАЗАТЬ НА КАРТЕ"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsx("h3",{children:"Часы работы"}),m.jsx("p",{children:"Пн-Пт: 9:00 - 21:00"}),m.jsx("p",{children:"Сб: 10:00 - 19:00"}),m.jsx("p",{children:"Вс: Выходной"})]})]}),m.jsx("section",{className:"contact-map",children:m.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1998.7107773295254!2d30.36982991609139!3d59.93049188187807!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4696317d6e5a5f11%3A0xc3f7a6b9f2e7f3a!2z0L3QsNCx0L3RgNC40L3RgdC60LDRjyDQntC00LXRgNGL0LLQsCwgMTQwLCDQodCw0L3QutGCLdCf0LXRgtCw0LvQuNC60LDRgtCw0YbRjNC60L4sINCj0YPQvdGB0LrQvtCz0L7QstGB0LrQsNGPINC-0LHQu9Cw0YHQvtGW0LLQvg!5e0!3m2!1sru!2sru!4v1678822290000!5m2!1sru!2sru",width:"100%",height:"450",style:{border:"0"},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})}),m.jsxs("section",{className:"contact-form-section",children:[m.jsx("h2",{children:"Отправьте нам сообщение"}),m.jsxs("form",{action:"#",method:"post",className:"contact-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"name",children:"Ваше имя:"}),m.jsx("input",{type:"text",id:"name",name:"name",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Ваш Email:"}),m.jsx("input",{type:"email",id:"email",name:"email",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"subject",children:"Тема:"}),m.jsx("input",{type:"text",id:"subject",name:"subject"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"message",children:"Сообщение:"}),m.jsx("textarea",{id:"message",name:"message",rows:"6",required:!0})]}),m.jsx("button",{type:"submit",className:"btn-primary",children:"ОТПРАВИТЬ"})]})]}),m.jsx(Ff,{})]});function $6(){const[n,e]=V.useState(!1),[t,r]=V.useState(!1),[i,s]=V.useState(!1),[o,a]=V.useState({service:null,subService:null}),l=({service:c,subService:d})=>{a({service:c,subService:d}),r(!0)};return m.jsx(bD,{children:m.jsxs("div",{className:"maxwidth-theme",children:[m.jsx(eB,{onOpenAuthModal:()=>e(!0),onOpenServicesModal:()=>r(!0),onOpenProfileModal:()=>s(!0)}),m.jsxs(aD,{children:[m.jsx(Yi,{path:"/",element:m.jsx(V6,{onSelectOffer:l})}),m.jsx(Yi,{path:"/makeup",element:m.jsx(L6,{onSelectOffer:l})}),m.jsx(Yi,{path:"/haircut",element:m.jsx(M6,{onSelectOffer:l})}),m.jsx(Yi,{path:"/manicure",element:m.jsx(j6,{onSelectOffer:l})}),m.jsx(Yi,{path:"/pedicure",element:m.jsx(B6,{onSelectOffer:l})}),m.jsx(Yi,{path:"/contacts",element:m.jsx(z6,{})})]}),m.jsx(tB,{isOpen:n,onClose:()=>e(!1)}),m.jsx(nB,{isOpen:t,onClose:()=>r(!1),initialService:o.service,initialSubService:o.subService}),m.jsx(rB,{isOpen:i,onClose:()=>s(!1)})]})})}um.createRoot(document.getElementById("root")).render(m.jsx(Xe.StrictMode,{children:m.jsx(Z3,{children:m.jsx($6,{})})}));
