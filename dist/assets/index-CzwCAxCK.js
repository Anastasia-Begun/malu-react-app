(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function sN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var YP={exports:{}},yf={},JP={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nc=Symbol.for("react.element"),oN=Symbol.for("react.portal"),aN=Symbol.for("react.fragment"),lN=Symbol.for("react.strict_mode"),uN=Symbol.for("react.profiler"),cN=Symbol.for("react.provider"),dN=Symbol.for("react.context"),hN=Symbol.for("react.forward_ref"),fN=Symbol.for("react.suspense"),pN=Symbol.for("react.memo"),mN=Symbol.for("react.lazy"),eI=Symbol.iterator;function gN(n){return n===null||typeof n!="object"?null:(n=eI&&n[eI]||n["@@iterator"],typeof n=="function"?n:null)}var XP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZP=Object.assign,eA={};function Na(n,e,t){this.props=n,this.context=e,this.refs=eA,this.updater=t||XP}Na.prototype.isReactComponent={};Na.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Na.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function tA(){}tA.prototype=Na.prototype;function n_(n,e,t){this.props=n,this.context=e,this.refs=eA,this.updater=t||XP}var r_=n_.prototype=new tA;r_.constructor=n_;ZP(r_,Na.prototype);r_.isPureReactComponent=!0;var tI=Array.isArray,nA=Object.prototype.hasOwnProperty,i_={current:null},rA={key:!0,ref:!0,__self:!0,__source:!0};function iA(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)nA.call(e,r)&&!rA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:nc,type:n,key:s,ref:o,props:i,_owner:i_.current}}function yN(n,e){return{$$typeof:nc,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function s_(n){return typeof n=="object"&&n!==null&&n.$$typeof===nc}function _N(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var nI=/\/+/g;function im(n,e){return typeof n=="object"&&n!==null&&n.key!=null?_N(""+n.key):e.toString(36)}function kd(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case nc:case oN:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+im(o,0):r,tI(i)?(t="",n!=null&&(t=n.replace(nI,"$&/")+"/"),kd(i,e,t,"",function(c){return c})):i!=null&&(s_(i)&&(i=yN(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(nI,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",tI(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+im(s,a);o+=kd(s,e,t,l,i)}else if(l=gN(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+im(s,a++),o+=kd(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function td(n,e,t){if(n==null)return n;var r=[],i=0;return kd(n,r,"","",function(s){return e.call(t,s,i++)}),r}function vN(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var $t={current:null},bd={transition:null},wN={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:bd,ReactCurrentOwner:i_};function sA(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:td,forEach:function(n,e,t){td(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return td(n,function(){e++}),e},toArray:function(n){return td(n,function(e){return e})||[]},only:function(n){if(!s_(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ue.Component=Na;ue.Fragment=aN;ue.Profiler=uN;ue.PureComponent=n_;ue.StrictMode=lN;ue.Suspense=fN;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wN;ue.act=sA;ue.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=ZP({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=i_.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)nA.call(e,l)&&!rA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:nc,type:n.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(n){return n={$$typeof:dN,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:cN,_context:n},n.Consumer=n};ue.createElement=iA;ue.createFactory=function(n){var e=iA.bind(null,n);return e.type=n,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(n){return{$$typeof:hN,render:n}};ue.isValidElement=s_;ue.lazy=function(n){return{$$typeof:mN,_payload:{_status:-1,_result:n},_init:vN}};ue.memo=function(n,e){return{$$typeof:pN,type:n,compare:e===void 0?null:e}};ue.startTransition=function(n){var e=bd.transition;bd.transition={};try{n()}finally{bd.transition=e}};ue.unstable_act=sA;ue.useCallback=function(n,e){return $t.current.useCallback(n,e)};ue.useContext=function(n){return $t.current.useContext(n)};ue.useDebugValue=function(){};ue.useDeferredValue=function(n){return $t.current.useDeferredValue(n)};ue.useEffect=function(n,e){return $t.current.useEffect(n,e)};ue.useId=function(){return $t.current.useId()};ue.useImperativeHandle=function(n,e,t){return $t.current.useImperativeHandle(n,e,t)};ue.useInsertionEffect=function(n,e){return $t.current.useInsertionEffect(n,e)};ue.useLayoutEffect=function(n,e){return $t.current.useLayoutEffect(n,e)};ue.useMemo=function(n,e){return $t.current.useMemo(n,e)};ue.useReducer=function(n,e,t){return $t.current.useReducer(n,e,t)};ue.useRef=function(n){return $t.current.useRef(n)};ue.useState=function(n){return $t.current.useState(n)};ue.useSyncExternalStore=function(n,e,t){return $t.current.useSyncExternalStore(n,e,t)};ue.useTransition=function(){return $t.current.useTransition()};ue.version="18.3.1";JP.exports=ue;var D=JP.exports;const Xe=sN(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EN=D,IN=Symbol.for("react.element"),TN=Symbol.for("react.fragment"),SN=Object.prototype.hasOwnProperty,PN=EN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AN={key:!0,ref:!0,__self:!0,__source:!0};function oA(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)SN.call(e,r)&&!AN.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:IN,type:n,key:s,ref:o,props:i,_owner:PN.current}}yf.Fragment=TN;yf.jsx=oA;yf.jsxs=oA;YP.exports=yf;var m=YP.exports,lg={},aA={exports:{}},hn={},lA={exports:{}},uA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(z,K){var te=z.length;z.push(K);e:for(;0<te;){var Te=te-1>>>1,ve=z[Te];if(0<i(ve,K))z[Te]=K,z[te]=ve,te=Te;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var K=z[0],te=z.pop();if(te!==K){z[0]=te;e:for(var Te=0,ve=z.length,Ge=ve>>>1;Te<Ge;){var cr=2*(Te+1)-1,dr=z[cr],hr=cr+1,fr=z[hr];if(0>i(dr,te))hr<ve&&0>i(fr,dr)?(z[Te]=fr,z[hr]=te,Te=hr):(z[Te]=dr,z[cr]=te,Te=cr);else if(hr<ve&&0>i(fr,te))z[Te]=fr,z[hr]=te,Te=hr;else break e}}return K}function i(z,K){var te=z.sortIndex-K.sortIndex;return te!==0?te:z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,y=!1,v=!1,T=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(z){for(var K=t(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=z)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(c)}}function b(z){if(T=!1,E(z),!v)if(t(l)!==null)v=!0,ee(O);else{var K=t(c);K!==null&&oe(b,K.startTime-z)}}function O(z,K){v=!1,T&&(T=!1,_(I),I=-1),y=!0;var te=p;try{for(E(K),h=t(l);h!==null&&(!(h.expirationTime>K)||z&&!k());){var Te=h.callback;if(typeof Te=="function"){h.callback=null,p=h.priorityLevel;var ve=Te(h.expirationTime<=K);K=n.unstable_now(),typeof ve=="function"?h.callback=ve:h===t(l)&&r(l),E(K)}else r(l);h=t(l)}if(h!==null)var Ge=!0;else{var cr=t(c);cr!==null&&oe(b,cr.startTime-K),Ge=!1}return Ge}finally{h=null,p=te,y=!1}}var F=!1,A=null,I=-1,P=5,R=-1;function k(){return!(n.unstable_now()-R<P)}function N(){if(A!==null){var z=n.unstable_now();R=z;var K=!0;try{K=A(!0,z)}finally{K?C():(F=!1,A=null)}}else F=!1}var C;if(typeof w=="function")C=function(){w(N)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,he=se.port2;se.port1.onmessage=N,C=function(){he.postMessage(null)}}else C=function(){x(N,0)};function ee(z){A=z,F||(F=!0,C())}function oe(z,K){I=x(function(){z(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){v||y||(v=!0,ee(O))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var te=p;p=K;try{return z()}finally{p=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=p;p=z;try{return K()}finally{p=te}},n.unstable_scheduleCallback=function(z,K,te){var Te=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Te+te:Te):te=Te,z){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=te+ve,z={id:d++,callback:K,priorityLevel:z,startTime:te,expirationTime:ve,sortIndex:-1},te>Te?(z.sortIndex=te,e(c,z),t(l)===null&&z===t(c)&&(T?(_(I),I=-1):T=!0,oe(b,te-Te))):(z.sortIndex=ve,e(l,z),v||y||(v=!0,ee(O))),z},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(z){var K=p;return function(){var te=p;p=K;try{return z.apply(this,arguments)}finally{p=te}}}})(uA);lA.exports=uA;var RN=lA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CN=D,cn=RN;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cA=new Set,hu={};function Qs(n,e){ea(n,e),ea(n+"Capture",e)}function ea(n,e){for(hu[n]=e,n=0;n<e.length;n++)cA.add(e[n])}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ug=Object.prototype.hasOwnProperty,xN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rI={},iI={};function kN(n){return ug.call(iI,n)?!0:ug.call(rI,n)?!1:xN.test(n)?iI[n]=!0:(rI[n]=!0,!1)}function bN(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function NN(n,e,t,r){if(e===null||typeof e>"u"||bN(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){vt[n]=new Bt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];vt[e]=new Bt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){vt[n]=new Bt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){vt[n]=new Bt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){vt[n]=new Bt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){vt[n]=new Bt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){vt[n]=new Bt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){vt[n]=new Bt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){vt[n]=new Bt(n,5,!1,n.toLowerCase(),null,!1,!1)});var o_=/[\-:]([a-z])/g;function a_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(o_,a_);vt[e]=new Bt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(o_,a_);vt[e]=new Bt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(o_,a_);vt[e]=new Bt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){vt[n]=new Bt(n,1,!1,n.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){vt[n]=new Bt(n,1,!1,n.toLowerCase(),null,!0,!0)});function l_(n,e,t,r){var i=vt.hasOwnProperty(e)?vt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NN(e,t,i,r)&&(t=null),r||i===null?kN(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ur=CN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nd=Symbol.for("react.element"),Ao=Symbol.for("react.portal"),Ro=Symbol.for("react.fragment"),u_=Symbol.for("react.strict_mode"),cg=Symbol.for("react.profiler"),dA=Symbol.for("react.provider"),hA=Symbol.for("react.context"),c_=Symbol.for("react.forward_ref"),dg=Symbol.for("react.suspense"),hg=Symbol.for("react.suspense_list"),d_=Symbol.for("react.memo"),ii=Symbol.for("react.lazy"),fA=Symbol.for("react.offscreen"),sI=Symbol.iterator;function ll(n){return n===null||typeof n!="object"?null:(n=sI&&n[sI]||n["@@iterator"],typeof n=="function"?n:null)}var je=Object.assign,sm;function Al(n){if(sm===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);sm=e&&e[1]||""}return`
`+sm+n}var om=!1;function am(n,e){if(!n||om)return"";om=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{om=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Al(n):""}function DN(n){switch(n.tag){case 5:return Al(n.type);case 16:return Al("Lazy");case 13:return Al("Suspense");case 19:return Al("SuspenseList");case 0:case 2:case 15:return n=am(n.type,!1),n;case 11:return n=am(n.type.render,!1),n;case 1:return n=am(n.type,!0),n;default:return""}}function fg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ro:return"Fragment";case Ao:return"Portal";case cg:return"Profiler";case u_:return"StrictMode";case dg:return"Suspense";case hg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case hA:return(n.displayName||"Context")+".Consumer";case dA:return(n._context.displayName||"Context")+".Provider";case c_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case d_:return e=n.displayName||null,e!==null?e:fg(n.type)||"Memo";case ii:e=n._payload,n=n._init;try{return fg(n(e))}catch{}}return null}function ON(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fg(e);case 8:return e===u_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bi(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pA(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VN(n){var e=pA(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function rd(n){n._valueTracker||(n._valueTracker=VN(n))}function mA(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=pA(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function dh(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function pg(n,e){var t=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function oI(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=bi(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gA(n,e){e=e.checked,e!=null&&l_(n,"checked",e,!1)}function mg(n,e){gA(n,e);var t=bi(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?gg(n,e.type,t):e.hasOwnProperty("defaultValue")&&gg(n,e.type,bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function aI(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function gg(n,e,t){(e!=="number"||dh(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Rl=Array.isArray;function Uo(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+bi(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function yg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function lI(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(Rl(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:bi(t)}}function yA(n,e){var t=bi(e.value),r=bi(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function uI(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function _A(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _g(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?_A(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var id,vA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(id=id||document.createElement("div"),id.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=id.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function fu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LN=["Webkit","ms","Moz","O"];Object.keys(Ul).forEach(function(n){LN.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ul[e]=Ul[n]})});function wA(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ul.hasOwnProperty(n)&&Ul[n]?(""+e).trim():e+"px"}function EA(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=wA(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var MN=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vg(n,e){if(e){if(MN[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function wg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eg=null;function h_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ig=null,$o=null,Bo=null;function cI(n){if(n=sc(n)){if(typeof Ig!="function")throw Error(W(280));var e=n.stateNode;e&&(e=If(e),Ig(n.stateNode,n.type,e))}}function IA(n){$o?Bo?Bo.push(n):Bo=[n]:$o=n}function TA(){if($o){var n=$o,e=Bo;if(Bo=$o=null,cI(n),e)for(n=0;n<e.length;n++)cI(e[n])}}function SA(n,e){return n(e)}function PA(){}var lm=!1;function AA(n,e,t){if(lm)return n(e,t);lm=!0;try{return SA(n,e,t)}finally{lm=!1,($o!==null||Bo!==null)&&(PA(),TA())}}function pu(n,e){var t=n.stateNode;if(t===null)return null;var r=If(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var Tg=!1;if(xr)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){Tg=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{Tg=!1}function FN(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var $l=!1,hh=null,fh=!1,Sg=null,jN={onError:function(n){$l=!0,hh=n}};function UN(n,e,t,r,i,s,o,a,l){$l=!1,hh=null,FN.apply(jN,arguments)}function $N(n,e,t,r,i,s,o,a,l){if(UN.apply(this,arguments),$l){if($l){var c=hh;$l=!1,hh=null}else throw Error(W(198));fh||(fh=!0,Sg=c)}}function Ys(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function RA(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function dI(n){if(Ys(n)!==n)throw Error(W(188))}function BN(n){var e=n.alternate;if(!e){if(e=Ys(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return dI(i),n;if(s===r)return dI(i),e;s=s.sibling}throw Error(W(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==r)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function CA(n){return n=BN(n),n!==null?xA(n):null}function xA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=xA(n);if(e!==null)return e;n=n.sibling}return null}var kA=cn.unstable_scheduleCallback,hI=cn.unstable_cancelCallback,zN=cn.unstable_shouldYield,WN=cn.unstable_requestPaint,He=cn.unstable_now,qN=cn.unstable_getCurrentPriorityLevel,f_=cn.unstable_ImmediatePriority,bA=cn.unstable_UserBlockingPriority,ph=cn.unstable_NormalPriority,GN=cn.unstable_LowPriority,NA=cn.unstable_IdlePriority,_f=null,Yn=null;function HN(n){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(_f,n,void 0,(n.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:YN,KN=Math.log,QN=Math.LN2;function YN(n){return n>>>=0,n===0?32:31-(KN(n)/QN|0)|0}var sd=64,od=4194304;function Cl(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function mh(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Cl(a):(s&=o,s!==0&&(r=Cl(s)))}else o=t&~i,o!==0?r=Cl(o):s!==0&&(r=Cl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-bn(e),i=1<<t,r|=n[t],e&=~i;return r}function JN(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XN(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-bn(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=JN(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Pg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function DA(){var n=sd;return sd<<=1,!(sd&4194240)&&(sd=64),n}function um(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function rc(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-bn(e),n[e]=t}function ZN(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-bn(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function p_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-bn(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Ee=0;function OA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var VA,m_,LA,MA,FA,Ag=!1,ad=[],_i=null,vi=null,wi=null,mu=new Map,gu=new Map,oi=[],eD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fI(n,e){switch(n){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":mu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(e.pointerId)}}function cl(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sc(e),e!==null&&m_(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function tD(n,e,t,r,i){switch(e){case"focusin":return _i=cl(_i,n,e,t,r,i),!0;case"dragenter":return vi=cl(vi,n,e,t,r,i),!0;case"mouseover":return wi=cl(wi,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return mu.set(s,cl(mu.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gu.set(s,cl(gu.get(s)||null,n,e,t,r,i)),!0}return!1}function jA(n){var e=ms(n.target);if(e!==null){var t=Ys(e);if(t!==null){if(e=t.tag,e===13){if(e=RA(t),e!==null){n.blockedOn=e,FA(n.priority,function(){LA(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Nd(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Rg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Eg=r,t.target.dispatchEvent(r),Eg=null}else return e=sc(t),e!==null&&m_(e),n.blockedOn=t,!1;e.shift()}return!0}function pI(n,e,t){Nd(n)&&t.delete(e)}function nD(){Ag=!1,_i!==null&&Nd(_i)&&(_i=null),vi!==null&&Nd(vi)&&(vi=null),wi!==null&&Nd(wi)&&(wi=null),mu.forEach(pI),gu.forEach(pI)}function dl(n,e){n.blockedOn===e&&(n.blockedOn=null,Ag||(Ag=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,nD)))}function yu(n){function e(i){return dl(i,n)}if(0<ad.length){dl(ad[0],n);for(var t=1;t<ad.length;t++){var r=ad[t];r.blockedOn===n&&(r.blockedOn=null)}}for(_i!==null&&dl(_i,n),vi!==null&&dl(vi,n),wi!==null&&dl(wi,n),mu.forEach(e),gu.forEach(e),t=0;t<oi.length;t++)r=oi[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<oi.length&&(t=oi[0],t.blockedOn===null);)jA(t),t.blockedOn===null&&oi.shift()}var zo=Ur.ReactCurrentBatchConfig,gh=!0;function rD(n,e,t,r){var i=Ee,s=zo.transition;zo.transition=null;try{Ee=1,g_(n,e,t,r)}finally{Ee=i,zo.transition=s}}function iD(n,e,t,r){var i=Ee,s=zo.transition;zo.transition=null;try{Ee=4,g_(n,e,t,r)}finally{Ee=i,zo.transition=s}}function g_(n,e,t,r){if(gh){var i=Rg(n,e,t,r);if(i===null)vm(n,e,r,yh,t),fI(n,r);else if(tD(i,n,e,t,r))r.stopPropagation();else if(fI(n,r),e&4&&-1<eD.indexOf(n)){for(;i!==null;){var s=sc(i);if(s!==null&&VA(s),s=Rg(n,e,t,r),s===null&&vm(n,e,r,yh,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else vm(n,e,r,null,t)}}var yh=null;function Rg(n,e,t,r){if(yh=null,n=h_(r),n=ms(n),n!==null)if(e=Ys(n),e===null)n=null;else if(t=e.tag,t===13){if(n=RA(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return yh=n,null}function UA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qN()){case f_:return 1;case bA:return 4;case ph:case GN:return 16;case NA:return 536870912;default:return 16}default:return 16}}var hi=null,y_=null,Dd=null;function $A(){if(Dd)return Dd;var n,e=y_,t=e.length,r,i="value"in hi?hi.value:hi.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Dd=i.slice(n,1<r?1-r:void 0)}function Od(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ld(){return!0}function mI(){return!1}function fn(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ld:mI,this.isPropagationStopped=mI,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ld)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ld)},persist:function(){},isPersistent:ld}),e}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},__=fn(Da),ic=je({},Da,{view:0,detail:0}),sD=fn(ic),cm,dm,hl,vf=je({},ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:v_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hl&&(hl&&n.type==="mousemove"?(cm=n.screenX-hl.screenX,dm=n.screenY-hl.screenY):dm=cm=0,hl=n),cm)},movementY:function(n){return"movementY"in n?n.movementY:dm}}),gI=fn(vf),oD=je({},vf,{dataTransfer:0}),aD=fn(oD),lD=je({},ic,{relatedTarget:0}),hm=fn(lD),uD=je({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),cD=fn(uD),dD=je({},Da,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),hD=fn(dD),fD=je({},Da,{data:0}),yI=fn(fD),pD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yD(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=gD[n])?!!e[n]:!1}function v_(){return yD}var _D=je({},ic,{key:function(n){if(n.key){var e=pD[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Od(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mD[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:v_,charCode:function(n){return n.type==="keypress"?Od(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Od(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),vD=fn(_D),wD=je({},vf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_I=fn(wD),ED=je({},ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:v_}),ID=fn(ED),TD=je({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),SD=fn(TD),PD=je({},vf,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),AD=fn(PD),RD=[9,13,27,32],w_=xr&&"CompositionEvent"in window,Bl=null;xr&&"documentMode"in document&&(Bl=document.documentMode);var CD=xr&&"TextEvent"in window&&!Bl,BA=xr&&(!w_||Bl&&8<Bl&&11>=Bl),vI=" ",wI=!1;function zA(n,e){switch(n){case"keyup":return RD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Co=!1;function xD(n,e){switch(n){case"compositionend":return WA(e);case"keypress":return e.which!==32?null:(wI=!0,vI);case"textInput":return n=e.data,n===vI&&wI?null:n;default:return null}}function kD(n,e){if(Co)return n==="compositionend"||!w_&&zA(n,e)?(n=$A(),Dd=y_=hi=null,Co=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BA&&e.locale!=="ko"?null:e.data;default:return null}}var bD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!bD[n.type]:e==="textarea"}function qA(n,e,t,r){IA(r),e=_h(e,"onChange"),0<e.length&&(t=new __("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var zl=null,_u=null;function ND(n){n0(n,0)}function wf(n){var e=bo(n);if(mA(e))return n}function DD(n,e){if(n==="change")return e}var GA=!1;if(xr){var fm;if(xr){var pm="oninput"in document;if(!pm){var II=document.createElement("div");II.setAttribute("oninput","return;"),pm=typeof II.oninput=="function"}fm=pm}else fm=!1;GA=fm&&(!document.documentMode||9<document.documentMode)}function TI(){zl&&(zl.detachEvent("onpropertychange",HA),_u=zl=null)}function HA(n){if(n.propertyName==="value"&&wf(_u)){var e=[];qA(e,_u,n,h_(n)),AA(ND,e)}}function OD(n,e,t){n==="focusin"?(TI(),zl=e,_u=t,zl.attachEvent("onpropertychange",HA)):n==="focusout"&&TI()}function VD(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wf(_u)}function LD(n,e){if(n==="click")return wf(e)}function MD(n,e){if(n==="input"||n==="change")return wf(e)}function FD(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ln=typeof Object.is=="function"?Object.is:FD;function vu(n,e){if(Ln(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!ug.call(e,i)||!Ln(n[i],e[i]))return!1}return!0}function SI(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function PI(n,e){var t=SI(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=SI(t)}}function KA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?KA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function QA(){for(var n=window,e=dh();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=dh(n.document)}return e}function E_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function jD(n){var e=QA(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&KA(t.ownerDocument.documentElement,t)){if(r!==null&&E_(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=PI(t,s);var o=PI(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var UD=xr&&"documentMode"in document&&11>=document.documentMode,xo=null,Cg=null,Wl=null,xg=!1;function AI(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;xg||xo==null||xo!==dh(r)||(r=xo,"selectionStart"in r&&E_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wl&&vu(Wl,r)||(Wl=r,r=_h(Cg,"onSelect"),0<r.length&&(e=new __("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=xo)))}function ud(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ko={animationend:ud("Animation","AnimationEnd"),animationiteration:ud("Animation","AnimationIteration"),animationstart:ud("Animation","AnimationStart"),transitionend:ud("Transition","TransitionEnd")},mm={},YA={};xr&&(YA=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Ef(n){if(mm[n])return mm[n];if(!ko[n])return n;var e=ko[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in YA)return mm[n]=e[t];return n}var JA=Ef("animationend"),XA=Ef("animationiteration"),ZA=Ef("animationstart"),e0=Ef("transitionend"),t0=new Map,RI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zi(n,e){t0.set(n,e),Qs(e,[n])}for(var gm=0;gm<RI.length;gm++){var ym=RI[gm],$D=ym.toLowerCase(),BD=ym[0].toUpperCase()+ym.slice(1);zi($D,"on"+BD)}zi(JA,"onAnimationEnd");zi(XA,"onAnimationIteration");zi(ZA,"onAnimationStart");zi("dblclick","onDoubleClick");zi("focusin","onFocus");zi("focusout","onBlur");zi(e0,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zD=new Set("cancel close invalid load scroll toggle".split(" ").concat(xl));function CI(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,$N(r,e,void 0,n),n.currentTarget=null}function n0(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;CI(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;CI(i,a,c),s=l}}}if(fh)throw n=Sg,fh=!1,Sg=null,n}function xe(n,e){var t=e[Og];t===void 0&&(t=e[Og]=new Set);var r=n+"__bubble";t.has(r)||(r0(e,n,2,!1),t.add(r))}function _m(n,e,t){var r=0;e&&(r|=4),r0(t,n,r,e)}var cd="_reactListening"+Math.random().toString(36).slice(2);function wu(n){if(!n[cd]){n[cd]=!0,cA.forEach(function(t){t!=="selectionchange"&&(zD.has(t)||_m(t,!1,n),_m(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[cd]||(e[cd]=!0,_m("selectionchange",!1,e))}}function r0(n,e,t,r){switch(UA(e)){case 1:var i=rD;break;case 4:i=iD;break;default:i=g_}t=i.bind(null,e,t,n),i=void 0,!Tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function vm(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ms(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}AA(function(){var c=s,d=h_(t),h=[];e:{var p=t0.get(n);if(p!==void 0){var y=__,v=n;switch(n){case"keypress":if(Od(t)===0)break e;case"keydown":case"keyup":y=vD;break;case"focusin":v="focus",y=hm;break;case"focusout":v="blur",y=hm;break;case"beforeblur":case"afterblur":y=hm;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=gI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=aD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=ID;break;case JA:case XA:case ZA:y=cD;break;case e0:y=SD;break;case"scroll":y=sD;break;case"wheel":y=AD;break;case"copy":case"cut":case"paste":y=hD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=_I}var T=(e&4)!==0,x=!T&&n==="scroll",_=T?p!==null?p+"Capture":null:p;T=[];for(var w=c,E;w!==null;){E=w;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,_!==null&&(b=pu(w,_),b!=null&&T.push(Eu(w,b,E)))),x)break;w=w.return}0<T.length&&(p=new y(p,v,null,t,d),h.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",p&&t!==Eg&&(v=t.relatedTarget||t.fromElement)&&(ms(v)||v[kr]))break e;if((y||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,y?(v=t.relatedTarget||t.toElement,y=c,v=v?ms(v):null,v!==null&&(x=Ys(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=c),y!==v)){if(T=gI,b="onMouseLeave",_="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(T=_I,b="onPointerLeave",_="onPointerEnter",w="pointer"),x=y==null?p:bo(y),E=v==null?p:bo(v),p=new T(b,w+"leave",y,t,d),p.target=x,p.relatedTarget=E,b=null,ms(d)===c&&(T=new T(_,w+"enter",v,t,d),T.target=E,T.relatedTarget=x,b=T),x=b,y&&v)t:{for(T=y,_=v,w=0,E=T;E;E=lo(E))w++;for(E=0,b=_;b;b=lo(b))E++;for(;0<w-E;)T=lo(T),w--;for(;0<E-w;)_=lo(_),E--;for(;w--;){if(T===_||_!==null&&T===_.alternate)break t;T=lo(T),_=lo(_)}T=null}else T=null;y!==null&&xI(h,p,y,T,!1),v!==null&&x!==null&&xI(h,x,v,T,!0)}}e:{if(p=c?bo(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var O=DD;else if(EI(p))if(GA)O=MD;else{O=VD;var F=OD}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=LD);if(O&&(O=O(n,c))){qA(h,O,t,d);break e}F&&F(n,p,c),n==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&gg(p,"number",p.value)}switch(F=c?bo(c):window,n){case"focusin":(EI(F)||F.contentEditable==="true")&&(xo=F,Cg=c,Wl=null);break;case"focusout":Wl=Cg=xo=null;break;case"mousedown":xg=!0;break;case"contextmenu":case"mouseup":case"dragend":xg=!1,AI(h,t,d);break;case"selectionchange":if(UD)break;case"keydown":case"keyup":AI(h,t,d)}var A;if(w_)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Co?zA(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(BA&&t.locale!=="ko"&&(Co||I!=="onCompositionStart"?I==="onCompositionEnd"&&Co&&(A=$A()):(hi=d,y_="value"in hi?hi.value:hi.textContent,Co=!0)),F=_h(c,I),0<F.length&&(I=new yI(I,n,null,t,d),h.push({event:I,listeners:F}),A?I.data=A:(A=WA(t),A!==null&&(I.data=A)))),(A=CD?xD(n,t):kD(n,t))&&(c=_h(c,"onBeforeInput"),0<c.length&&(d=new yI("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=A))}n0(h,e)})}function Eu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function _h(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=pu(n,t),s!=null&&r.unshift(Eu(n,s,i)),s=pu(n,e),s!=null&&r.push(Eu(n,s,i))),n=n.return}return r}function lo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function xI(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=pu(t,s),l!=null&&o.unshift(Eu(t,l,a))):i||(l=pu(t,s),l!=null&&o.push(Eu(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var WD=/\r\n?/g,qD=/\u0000|\uFFFD/g;function kI(n){return(typeof n=="string"?n:""+n).replace(WD,`
`).replace(qD,"")}function dd(n,e,t){if(e=kI(e),kI(n)!==e&&t)throw Error(W(425))}function vh(){}var kg=null,bg=null;function Ng(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dg=typeof setTimeout=="function"?setTimeout:void 0,GD=typeof clearTimeout=="function"?clearTimeout:void 0,bI=typeof Promise=="function"?Promise:void 0,HD=typeof queueMicrotask=="function"?queueMicrotask:typeof bI<"u"?function(n){return bI.resolve(null).then(n).catch(KD)}:Dg;function KD(n){setTimeout(function(){throw n})}function wm(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),yu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);yu(e)}function Ei(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function NI(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),qn="__reactFiber$"+Oa,Iu="__reactProps$"+Oa,kr="__reactContainer$"+Oa,Og="__reactEvents$"+Oa,QD="__reactListeners$"+Oa,YD="__reactHandles$"+Oa;function ms(n){var e=n[qn];if(e)return e;for(var t=n.parentNode;t;){if(e=t[kr]||t[qn]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=NI(n);n!==null;){if(t=n[qn])return t;n=NI(n)}return e}n=t,t=n.parentNode}return null}function sc(n){return n=n[qn]||n[kr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function bo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function If(n){return n[Iu]||null}var Vg=[],No=-1;function Wi(n){return{current:n}}function be(n){0>No||(n.current=Vg[No],Vg[No]=null,No--)}function Pe(n,e){No++,Vg[No]=n.current,n.current=e}var Ni={},bt=Wi(Ni),Yt=Wi(!1),xs=Ni;function ta(n,e){var t=n.type.contextTypes;if(!t)return Ni;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Jt(n){return n=n.childContextTypes,n!=null}function wh(){be(Yt),be(bt)}function DI(n,e,t){if(bt.current!==Ni)throw Error(W(168));Pe(bt,e),Pe(Yt,t)}function i0(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,ON(n)||"Unknown",i));return je({},t,r)}function Eh(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ni,xs=bt.current,Pe(bt,n),Pe(Yt,Yt.current),!0}function OI(n,e,t){var r=n.stateNode;if(!r)throw Error(W(169));t?(n=i0(n,e,xs),r.__reactInternalMemoizedMergedChildContext=n,be(Yt),be(bt),Pe(bt,n)):be(Yt),Pe(Yt,t)}var vr=null,Tf=!1,Em=!1;function s0(n){vr===null?vr=[n]:vr.push(n)}function JD(n){Tf=!0,s0(n)}function qi(){if(!Em&&vr!==null){Em=!0;var n=0,e=Ee;try{var t=vr;for(Ee=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}vr=null,Tf=!1}catch(i){throw vr!==null&&(vr=vr.slice(n+1)),kA(f_,qi),i}finally{Ee=e,Em=!1}}return null}var Do=[],Oo=0,Ih=null,Th=0,mn=[],gn=0,ks=null,Er=1,Ir="";function rs(n,e){Do[Oo++]=Th,Do[Oo++]=Ih,Ih=n,Th=e}function o0(n,e,t){mn[gn++]=Er,mn[gn++]=Ir,mn[gn++]=ks,ks=n;var r=Er;n=Ir;var i=32-bn(r)-1;r&=~(1<<i),t+=1;var s=32-bn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Er=1<<32-bn(e)+i|t<<i|r,Ir=s+n}else Er=1<<s|t<<i|r,Ir=n}function I_(n){n.return!==null&&(rs(n,1),o0(n,1,0))}function T_(n){for(;n===Ih;)Ih=Do[--Oo],Do[Oo]=null,Th=Do[--Oo],Do[Oo]=null;for(;n===ks;)ks=mn[--gn],mn[gn]=null,Ir=mn[--gn],mn[gn]=null,Er=mn[--gn],mn[gn]=null}var an=null,sn=null,De=!1,xn=null;function a0(n,e){var t=yn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function VI(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,an=n,sn=Ei(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,an=n,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ks!==null?{id:Er,overflow:Ir}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=yn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,an=n,sn=null,!0):!1;default:return!1}}function Lg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Mg(n){if(De){var e=sn;if(e){var t=e;if(!VI(n,e)){if(Lg(n))throw Error(W(418));e=Ei(t.nextSibling);var r=an;e&&VI(n,e)?a0(r,t):(n.flags=n.flags&-4097|2,De=!1,an=n)}}else{if(Lg(n))throw Error(W(418));n.flags=n.flags&-4097|2,De=!1,an=n}}}function LI(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;an=n}function hd(n){if(n!==an)return!1;if(!De)return LI(n),De=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Ng(n.type,n.memoizedProps)),e&&(e=sn)){if(Lg(n))throw l0(),Error(W(418));for(;e;)a0(n,e),e=Ei(e.nextSibling)}if(LI(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){sn=Ei(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}sn=null}}else sn=an?Ei(n.stateNode.nextSibling):null;return!0}function l0(){for(var n=sn;n;)n=Ei(n.nextSibling)}function na(){sn=an=null,De=!1}function S_(n){xn===null?xn=[n]:xn.push(n)}var XD=Ur.ReactCurrentBatchConfig;function fl(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var r=t.stateNode}if(!r)throw Error(W(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function fd(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function MI(n){var e=n._init;return e(n._payload)}function u0(n){function e(_,w){if(n){var E=_.deletions;E===null?(_.deletions=[w],_.flags|=16):E.push(w)}}function t(_,w){if(!n)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function i(_,w){return _=Pi(_,w),_.index=0,_.sibling=null,_}function s(_,w,E){return _.index=E,n?(E=_.alternate,E!==null?(E=E.index,E<w?(_.flags|=2,w):E):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function a(_,w,E,b){return w===null||w.tag!==6?(w=Cm(E,_.mode,b),w.return=_,w):(w=i(w,E),w.return=_,w)}function l(_,w,E,b){var O=E.type;return O===Ro?d(_,w,E.props.children,b,E.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ii&&MI(O)===w.type)?(b=i(w,E.props),b.ref=fl(_,w,E),b.return=_,b):(b=$d(E.type,E.key,E.props,null,_.mode,b),b.ref=fl(_,w,E),b.return=_,b)}function c(_,w,E,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=xm(E,_.mode,b),w.return=_,w):(w=i(w,E.children||[]),w.return=_,w)}function d(_,w,E,b,O){return w===null||w.tag!==7?(w=Ss(E,_.mode,b,O),w.return=_,w):(w=i(w,E),w.return=_,w)}function h(_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Cm(""+w,_.mode,E),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case nd:return E=$d(w.type,w.key,w.props,null,_.mode,E),E.ref=fl(_,null,w),E.return=_,E;case Ao:return w=xm(w,_.mode,E),w.return=_,w;case ii:var b=w._init;return h(_,b(w._payload),E)}if(Rl(w)||ll(w))return w=Ss(w,_.mode,E,null),w.return=_,w;fd(_,w)}return null}function p(_,w,E,b){var O=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:a(_,w,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nd:return E.key===O?l(_,w,E,b):null;case Ao:return E.key===O?c(_,w,E,b):null;case ii:return O=E._init,p(_,w,O(E._payload),b)}if(Rl(E)||ll(E))return O!==null?null:d(_,w,E,b,null);fd(_,E)}return null}function y(_,w,E,b,O){if(typeof b=="string"&&b!==""||typeof b=="number")return _=_.get(E)||null,a(w,_,""+b,O);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nd:return _=_.get(b.key===null?E:b.key)||null,l(w,_,b,O);case Ao:return _=_.get(b.key===null?E:b.key)||null,c(w,_,b,O);case ii:var F=b._init;return y(_,w,E,F(b._payload),O)}if(Rl(b)||ll(b))return _=_.get(E)||null,d(w,_,b,O,null);fd(w,b)}return null}function v(_,w,E,b){for(var O=null,F=null,A=w,I=w=0,P=null;A!==null&&I<E.length;I++){A.index>I?(P=A,A=null):P=A.sibling;var R=p(_,A,E[I],b);if(R===null){A===null&&(A=P);break}n&&A&&R.alternate===null&&e(_,A),w=s(R,w,I),F===null?O=R:F.sibling=R,F=R,A=P}if(I===E.length)return t(_,A),De&&rs(_,I),O;if(A===null){for(;I<E.length;I++)A=h(_,E[I],b),A!==null&&(w=s(A,w,I),F===null?O=A:F.sibling=A,F=A);return De&&rs(_,I),O}for(A=r(_,A);I<E.length;I++)P=y(A,_,I,E[I],b),P!==null&&(n&&P.alternate!==null&&A.delete(P.key===null?I:P.key),w=s(P,w,I),F===null?O=P:F.sibling=P,F=P);return n&&A.forEach(function(k){return e(_,k)}),De&&rs(_,I),O}function T(_,w,E,b){var O=ll(E);if(typeof O!="function")throw Error(W(150));if(E=O.call(E),E==null)throw Error(W(151));for(var F=O=null,A=w,I=w=0,P=null,R=E.next();A!==null&&!R.done;I++,R=E.next()){A.index>I?(P=A,A=null):P=A.sibling;var k=p(_,A,R.value,b);if(k===null){A===null&&(A=P);break}n&&A&&k.alternate===null&&e(_,A),w=s(k,w,I),F===null?O=k:F.sibling=k,F=k,A=P}if(R.done)return t(_,A),De&&rs(_,I),O;if(A===null){for(;!R.done;I++,R=E.next())R=h(_,R.value,b),R!==null&&(w=s(R,w,I),F===null?O=R:F.sibling=R,F=R);return De&&rs(_,I),O}for(A=r(_,A);!R.done;I++,R=E.next())R=y(A,_,I,R.value,b),R!==null&&(n&&R.alternate!==null&&A.delete(R.key===null?I:R.key),w=s(R,w,I),F===null?O=R:F.sibling=R,F=R);return n&&A.forEach(function(N){return e(_,N)}),De&&rs(_,I),O}function x(_,w,E,b){if(typeof E=="object"&&E!==null&&E.type===Ro&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case nd:e:{for(var O=E.key,F=w;F!==null;){if(F.key===O){if(O=E.type,O===Ro){if(F.tag===7){t(_,F.sibling),w=i(F,E.props.children),w.return=_,_=w;break e}}else if(F.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ii&&MI(O)===F.type){t(_,F.sibling),w=i(F,E.props),w.ref=fl(_,F,E),w.return=_,_=w;break e}t(_,F);break}else e(_,F);F=F.sibling}E.type===Ro?(w=Ss(E.props.children,_.mode,b,E.key),w.return=_,_=w):(b=$d(E.type,E.key,E.props,null,_.mode,b),b.ref=fl(_,w,E),b.return=_,_=b)}return o(_);case Ao:e:{for(F=E.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){t(_,w.sibling),w=i(w,E.children||[]),w.return=_,_=w;break e}else{t(_,w);break}else e(_,w);w=w.sibling}w=xm(E,_.mode,b),w.return=_,_=w}return o(_);case ii:return F=E._init,x(_,w,F(E._payload),b)}if(Rl(E))return v(_,w,E,b);if(ll(E))return T(_,w,E,b);fd(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(t(_,w.sibling),w=i(w,E),w.return=_,_=w):(t(_,w),w=Cm(E,_.mode,b),w.return=_,_=w),o(_)):t(_,w)}return x}var ra=u0(!0),c0=u0(!1),Sh=Wi(null),Ph=null,Vo=null,P_=null;function A_(){P_=Vo=Ph=null}function R_(n){var e=Sh.current;be(Sh),n._currentValue=e}function Fg(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Wo(n,e){Ph=n,P_=Vo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Gt=!0),n.firstContext=null)}function En(n){var e=n._currentValue;if(P_!==n)if(n={context:n,memoizedValue:e,next:null},Vo===null){if(Ph===null)throw Error(W(308));Vo=n,Ph.dependencies={lanes:0,firstContext:n}}else Vo=Vo.next=n;return e}var gs=null;function C_(n){gs===null?gs=[n]:gs.push(n)}function d0(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,C_(e)):(t.next=i.next,i.next=t),e.interleaved=t,br(n,r)}function br(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var si=!1;function x_(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h0(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ar(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ii(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,br(n,t)}return i=r.interleaved,i===null?(e.next=e,C_(r)):(e.next=i.next,i.next=e),r.interleaved=e,br(n,t)}function Vd(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,p_(n,t)}}function FI(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Ah(n,e,t,r){var i=n.updateQueue;si=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,T=a;switch(p=e,y=t,T.tag){case 1:if(v=T.payload,typeof v=="function"){h=v.call(y,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=T.payload,p=typeof v=="function"?v.call(y,h,p):v,p==null)break e;h=je({},h,p);break e;case 2:si=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=h):d=d.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ns|=o,n.lanes=o,n.memoizedState=h}}function jI(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var oc={},Jn=Wi(oc),Tu=Wi(oc),Su=Wi(oc);function ys(n){if(n===oc)throw Error(W(174));return n}function k_(n,e){switch(Pe(Su,e),Pe(Tu,n),Pe(Jn,oc),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_g(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=_g(e,n)}be(Jn),Pe(Jn,e)}function ia(){be(Jn),be(Tu),be(Su)}function f0(n){ys(Su.current);var e=ys(Jn.current),t=_g(e,n.type);e!==t&&(Pe(Tu,n),Pe(Jn,t))}function b_(n){Tu.current===n&&(be(Jn),be(Tu))}var Le=Wi(0);function Rh(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Im=[];function N_(){for(var n=0;n<Im.length;n++)Im[n]._workInProgressVersionPrimary=null;Im.length=0}var Ld=Ur.ReactCurrentDispatcher,Tm=Ur.ReactCurrentBatchConfig,bs=0,Me=null,nt=null,at=null,Ch=!1,ql=!1,Pu=0,ZD=0;function St(){throw Error(W(321))}function D_(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ln(n[t],e[t]))return!1;return!0}function O_(n,e,t,r,i,s){if(bs=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ld.current=n===null||n.memoizedState===null?rO:iO,n=t(r,i),ql){s=0;do{if(ql=!1,Pu=0,25<=s)throw Error(W(301));s+=1,at=nt=null,e.updateQueue=null,Ld.current=sO,n=t(r,i)}while(ql)}if(Ld.current=xh,e=nt!==null&&nt.next!==null,bs=0,at=nt=Me=null,Ch=!1,e)throw Error(W(300));return n}function V_(){var n=Pu!==0;return Pu=0,n}function $n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Me.memoizedState=at=n:at=at.next=n,at}function In(){if(nt===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=nt.next;var e=at===null?Me.memoizedState:at.next;if(e!==null)at=e,nt=n;else{if(n===null)throw Error(W(310));nt=n,n={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},at===null?Me.memoizedState=at=n:at=at.next=n}return at}function Au(n,e){return typeof e=="function"?e(n):e}function Sm(n){var e=In(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=nt,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((bs&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Me.lanes|=d,Ns|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Ln(r,e.memoizedState)||(Gt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Me.lanes|=s,Ns|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Pm(n){var e=In(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Ln(s,e.memoizedState)||(Gt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function p0(){}function m0(n,e){var t=Me,r=In(),i=e(),s=!Ln(r.memoizedState,i);if(s&&(r.memoizedState=i,Gt=!0),r=r.queue,L_(_0.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||at!==null&&at.memoizedState.tag&1){if(t.flags|=2048,Ru(9,y0.bind(null,t,r,i,e),void 0,null),ut===null)throw Error(W(349));bs&30||g0(t,e,i)}return i}function g0(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function y0(n,e,t,r){e.value=t,e.getSnapshot=r,v0(e)&&w0(n)}function _0(n,e,t){return t(function(){v0(e)&&w0(n)})}function v0(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ln(n,t)}catch{return!0}}function w0(n){var e=br(n,1);e!==null&&Nn(e,n,1,-1)}function UI(n){var e=$n();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:n},e.queue=n,n=n.dispatch=nO.bind(null,Me,n),[e.memoizedState,n]}function Ru(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function E0(){return In().memoizedState}function Md(n,e,t,r){var i=$n();Me.flags|=n,i.memoizedState=Ru(1|e,t,void 0,r===void 0?null:r)}function Sf(n,e,t,r){var i=In();r=r===void 0?null:r;var s=void 0;if(nt!==null){var o=nt.memoizedState;if(s=o.destroy,r!==null&&D_(r,o.deps)){i.memoizedState=Ru(e,t,s,r);return}}Me.flags|=n,i.memoizedState=Ru(1|e,t,s,r)}function $I(n,e){return Md(8390656,8,n,e)}function L_(n,e){return Sf(2048,8,n,e)}function I0(n,e){return Sf(4,2,n,e)}function T0(n,e){return Sf(4,4,n,e)}function S0(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function P0(n,e,t){return t=t!=null?t.concat([n]):null,Sf(4,4,S0.bind(null,e,n),t)}function M_(){}function A0(n,e){var t=In();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&D_(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function R0(n,e){var t=In();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&D_(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function C0(n,e,t){return bs&21?(Ln(t,e)||(t=DA(),Me.lanes|=t,Ns|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=t)}function eO(n,e){var t=Ee;Ee=t!==0&&4>t?t:4,n(!0);var r=Tm.transition;Tm.transition={};try{n(!1),e()}finally{Ee=t,Tm.transition=r}}function x0(){return In().memoizedState}function tO(n,e,t){var r=Si(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},k0(n))b0(e,t);else if(t=d0(n,e,t,r),t!==null){var i=Ft();Nn(t,n,r,i),N0(t,e,r)}}function nO(n,e,t){var r=Si(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(k0(n))b0(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Ln(a,o)){var l=e.interleaved;l===null?(i.next=i,C_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=d0(n,e,i,r),t!==null&&(i=Ft(),Nn(t,n,r,i),N0(t,e,r))}}function k0(n){var e=n.alternate;return n===Me||e!==null&&e===Me}function b0(n,e){ql=Ch=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function N0(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,p_(n,t)}}var xh={readContext:En,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},rO={readContext:En,useCallback:function(n,e){return $n().memoizedState=[n,e===void 0?null:e],n},useContext:En,useEffect:$I,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Md(4194308,4,S0.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Md(4194308,4,n,e)},useInsertionEffect:function(n,e){return Md(4,2,n,e)},useMemo:function(n,e){var t=$n();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=$n();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=tO.bind(null,Me,n),[r.memoizedState,n]},useRef:function(n){var e=$n();return n={current:n},e.memoizedState=n},useState:UI,useDebugValue:M_,useDeferredValue:function(n){return $n().memoizedState=n},useTransition:function(){var n=UI(!1),e=n[0];return n=eO.bind(null,n[1]),$n().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Me,i=$n();if(De){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),ut===null)throw Error(W(349));bs&30||g0(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,$I(_0.bind(null,r,s,n),[n]),r.flags|=2048,Ru(9,y0.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=$n(),e=ut.identifierPrefix;if(De){var t=Ir,r=Er;t=(r&~(1<<32-bn(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Pu++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=ZD++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},iO={readContext:En,useCallback:A0,useContext:En,useEffect:L_,useImperativeHandle:P0,useInsertionEffect:I0,useLayoutEffect:T0,useMemo:R0,useReducer:Sm,useRef:E0,useState:function(){return Sm(Au)},useDebugValue:M_,useDeferredValue:function(n){var e=In();return C0(e,nt.memoizedState,n)},useTransition:function(){var n=Sm(Au)[0],e=In().memoizedState;return[n,e]},useMutableSource:p0,useSyncExternalStore:m0,useId:x0,unstable_isNewReconciler:!1},sO={readContext:En,useCallback:A0,useContext:En,useEffect:L_,useImperativeHandle:P0,useInsertionEffect:I0,useLayoutEffect:T0,useMemo:R0,useReducer:Pm,useRef:E0,useState:function(){return Pm(Au)},useDebugValue:M_,useDeferredValue:function(n){var e=In();return nt===null?e.memoizedState=n:C0(e,nt.memoizedState,n)},useTransition:function(){var n=Pm(Au)[0],e=In().memoizedState;return[n,e]},useMutableSource:p0,useSyncExternalStore:m0,useId:x0,unstable_isNewReconciler:!1};function An(n,e){if(n&&n.defaultProps){e=je({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function jg(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:je({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Pf={isMounted:function(n){return(n=n._reactInternals)?Ys(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ft(),i=Si(n),s=Ar(r,i);s.payload=e,t!=null&&(s.callback=t),e=Ii(n,s,i),e!==null&&(Nn(e,n,i,r),Vd(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ft(),i=Si(n),s=Ar(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ii(n,s,i),e!==null&&(Nn(e,n,i,r),Vd(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ft(),r=Si(n),i=Ar(t,r);i.tag=2,e!=null&&(i.callback=e),e=Ii(n,i,r),e!==null&&(Nn(e,n,r,t),Vd(e,n,r))}};function BI(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!vu(t,r)||!vu(i,s):!0}function D0(n,e,t){var r=!1,i=Ni,s=e.contextType;return typeof s=="object"&&s!==null?s=En(s):(i=Jt(e)?xs:bt.current,r=e.contextTypes,s=(r=r!=null)?ta(n,i):Ni),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pf,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function zI(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Pf.enqueueReplaceState(e,e.state,null)}function Ug(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},x_(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=En(s):(s=Jt(e)?xs:bt.current,i.context=ta(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jg(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Pf.enqueueReplaceState(i,i.state,null),Ah(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function sa(n,e){try{var t="",r=e;do t+=DN(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Am(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function $g(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var oO=typeof WeakMap=="function"?WeakMap:Map;function O0(n,e,t){t=Ar(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){bh||(bh=!0,Jg=r),$g(n,e)},t}function V0(n,e,t){t=Ar(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){$g(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){$g(n,e),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function WI(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new oO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=wO.bind(null,n,e,t),e.then(n,n))}function qI(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function GI(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ar(-1,1),e.tag=2,Ii(t,e,1))),t.lanes|=1),n)}var aO=Ur.ReactCurrentOwner,Gt=!1;function Vt(n,e,t,r){e.child=n===null?c0(e,null,t,r):ra(e,n.child,t,r)}function HI(n,e,t,r,i){t=t.render;var s=e.ref;return Wo(e,i),r=O_(n,e,t,r,s,i),t=V_(),n!==null&&!Gt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Nr(n,e,i)):(De&&t&&I_(e),e.flags|=1,Vt(n,e,r,i),e.child)}function KI(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!q_(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,L0(n,e,s,r,i)):(n=$d(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:vu,t(o,r)&&n.ref===e.ref)return Nr(n,e,i)}return e.flags|=1,n=Pi(s,r),n.ref=e.ref,n.return=e,e.child=n}function L0(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(vu(s,r)&&n.ref===e.ref)if(Gt=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Gt=!0);else return e.lanes=n.lanes,Nr(n,e,i)}return Bg(n,e,t,r,i)}function M0(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Mo,en),en|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Pe(Mo,en),en|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Pe(Mo,en),en|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Pe(Mo,en),en|=r;return Vt(n,e,i,t),e.child}function F0(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Bg(n,e,t,r,i){var s=Jt(t)?xs:bt.current;return s=ta(e,s),Wo(e,i),t=O_(n,e,t,r,s,i),r=V_(),n!==null&&!Gt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Nr(n,e,i)):(De&&r&&I_(e),e.flags|=1,Vt(n,e,t,i),e.child)}function QI(n,e,t,r,i){if(Jt(t)){var s=!0;Eh(e)}else s=!1;if(Wo(e,i),e.stateNode===null)Fd(n,e),D0(e,t,r),Ug(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=En(c):(c=Jt(t)?xs:bt.current,c=ta(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&zI(e,o,r,c),si=!1;var p=e.memoizedState;o.state=p,Ah(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Yt.current||si?(typeof d=="function"&&(jg(e,t,d,r),l=e.memoizedState),(a=si||BI(e,t,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,h0(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:An(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=En(l):(l=Jt(t)?xs:bt.current,l=ta(e,l));var y=t.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&zI(e,o,r,l),si=!1,p=e.memoizedState,o.state=p,Ah(e,r,o,i);var v=e.memoizedState;a!==h||p!==v||Yt.current||si?(typeof y=="function"&&(jg(e,t,y,r),v=e.memoizedState),(c=si||BI(e,t,c,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return zg(n,e,t,r,s,i)}function zg(n,e,t,r,i,s){F0(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&OI(e,t,!1),Nr(n,e,s);r=e.stateNode,aO.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=ra(e,n.child,null,s),e.child=ra(e,null,a,s)):Vt(n,e,a,s),e.memoizedState=r.state,i&&OI(e,t,!0),e.child}function j0(n){var e=n.stateNode;e.pendingContext?DI(n,e.pendingContext,e.pendingContext!==e.context):e.context&&DI(n,e.context,!1),k_(n,e.containerInfo)}function YI(n,e,t,r,i){return na(),S_(i),e.flags|=256,Vt(n,e,t,r),e.child}var Wg={dehydrated:null,treeContext:null,retryLane:0};function qg(n){return{baseLanes:n,cachePool:null,transitions:null}}function U0(n,e,t){var r=e.pendingProps,i=Le.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Pe(Le,i&1),n===null)return Mg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Cf(o,r,0,null),n=Ss(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=qg(t),e.memoizedState=Wg,n):F_(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return lO(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Pi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Pi(a,s):(s=Ss(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?qg(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Wg,r}return s=n.child,n=s.sibling,r=Pi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function F_(n,e){return e=Cf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function pd(n,e,t,r){return r!==null&&S_(r),ra(e,n.child,null,t),n=F_(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function lO(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Am(Error(W(422))),pd(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Cf({mode:"visible",children:r.children},i,0,null),s=Ss(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ra(e,n.child,null,o),e.child.memoizedState=qg(o),e.memoizedState=Wg,s);if(!(e.mode&1))return pd(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Am(s,r,void 0),pd(n,e,o,r)}if(a=(o&n.childLanes)!==0,Gt||a){if(r=ut,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,br(n,i),Nn(r,n,i,-1))}return W_(),r=Am(Error(W(421))),pd(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=EO.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,sn=Ei(i.nextSibling),an=e,De=!0,xn=null,n!==null&&(mn[gn++]=Er,mn[gn++]=Ir,mn[gn++]=ks,Er=n.id,Ir=n.overflow,ks=e),e=F_(e,r.children),e.flags|=4096,e)}function JI(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Fg(n.return,e,t)}function Rm(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function $0(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Vt(n,e,r.children,t),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&JI(n,t,e);else if(n.tag===19)JI(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Pe(Le,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Rh(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Rm(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Rh(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Rm(e,!0,t,null,s);break;case"together":Rm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fd(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Nr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ns|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=Pi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Pi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function uO(n,e,t){switch(e.tag){case 3:j0(e),na();break;case 5:f0(e);break;case 1:Jt(e.type)&&Eh(e);break;case 4:k_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pe(Sh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Le,Le.current&1),e.flags|=128,null):t&e.child.childLanes?U0(n,e,t):(Pe(Le,Le.current&1),n=Nr(n,e,t),n!==null?n.sibling:null);Pe(Le,Le.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return $0(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,M0(n,e,t)}return Nr(n,e,t)}var B0,Gg,z0,W0;B0=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Gg=function(){};z0=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,ys(Jn.current);var s=null;switch(t){case"input":i=pg(n,i),r=pg(n,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=yg(n,i),r=yg(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=vh)}vg(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xe("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};W0=function(n,e,t,r){t!==r&&(e.flags|=4)};function pl(n,e){if(!De)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Pt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function cO(n,e,t){var r=e.pendingProps;switch(T_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return Jt(e.type)&&wh(),Pt(e),null;case 3:return r=e.stateNode,ia(),be(Yt),be(bt),N_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(hd(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xn!==null&&(ey(xn),xn=null))),Gg(n,e),Pt(e),null;case 5:b_(e);var i=ys(Su.current);if(t=e.type,n!==null&&e.stateNode!=null)z0(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Pt(e),null}if(n=ys(Jn.current),hd(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[qn]=e,r[Iu]=s,n=(e.mode&1)!==0,t){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<xl.length;i++)xe(xl[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":oI(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":lI(r,s),xe("invalid",r)}vg(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&dd(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&dd(r.textContent,a,n),i=["children",""+a]):hu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(t){case"input":rd(r),aI(r,s,!0);break;case"textarea":rd(r),uI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=vh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=_A(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[qn]=e,n[Iu]=r,B0(n,e,!1,!1),e.stateNode=n;e:{switch(o=wg(t,r),t){case"dialog":xe("cancel",n),xe("close",n),i=r;break;case"iframe":case"object":case"embed":xe("load",n),i=r;break;case"video":case"audio":for(i=0;i<xl.length;i++)xe(xl[i],n);i=r;break;case"source":xe("error",n),i=r;break;case"img":case"image":case"link":xe("error",n),xe("load",n),i=r;break;case"details":xe("toggle",n),i=r;break;case"input":oI(n,r),i=pg(n,r),xe("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),xe("invalid",n);break;case"textarea":lI(n,r),i=yg(n,r),xe("invalid",n);break;default:i=r}vg(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?EA(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vA(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&fu(n,l):typeof l=="number"&&fu(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xe("scroll",n):l!=null&&l_(n,s,l,o))}switch(t){case"input":rd(n),aI(n,r,!1);break;case"textarea":rd(n),uI(n);break;case"option":r.value!=null&&n.setAttribute("value",""+bi(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Uo(n,!!r.multiple,s,!1):r.defaultValue!=null&&Uo(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=vh)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(n&&e.stateNode!=null)W0(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(t=ys(Su.current),ys(Jn.current),hd(e)){if(r=e.stateNode,t=e.memoizedProps,r[qn]=e,(s=r.nodeValue!==t)&&(n=an,n!==null))switch(n.tag){case 3:dd(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&dd(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[qn]=e,e.stateNode=r}return Pt(e),null;case 13:if(be(Le),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(De&&sn!==null&&e.mode&1&&!(e.flags&128))l0(),na(),e.flags|=98560,s=!1;else if(s=hd(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[qn]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),s=!1}else xn!==null&&(ey(xn),xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Le.current&1?rt===0&&(rt=3):W_())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return ia(),Gg(n,e),n===null&&wu(e.stateNode.containerInfo),Pt(e),null;case 10:return R_(e.type._context),Pt(e),null;case 17:return Jt(e.type)&&wh(),Pt(e),null;case 19:if(be(Le),s=e.memoizedState,s===null)return Pt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)pl(s,!1);else{if(rt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Rh(n),o!==null){for(e.flags|=128,pl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Pe(Le,Le.current&1|2),e.child}n=n.sibling}s.tail!==null&&He()>oa&&(e.flags|=128,r=!0,pl(s,!1),e.lanes=4194304)}else{if(!r)if(n=Rh(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),pl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!De)return Pt(e),null}else 2*He()-s.renderingStartTime>oa&&t!==1073741824&&(e.flags|=128,r=!0,pl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=He(),e.sibling=null,t=Le.current,Pe(Le,r?t&1|2:t&1),e):(Pt(e),null);case 22:case 23:return z_(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?en&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function dO(n,e){switch(T_(e),e.tag){case 1:return Jt(e.type)&&wh(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ia(),be(Yt),be(bt),N_(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return b_(e),null;case 13:if(be(Le),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));na()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return be(Le),null;case 4:return ia(),null;case 10:return R_(e.type._context),null;case 22:case 23:return z_(),null;case 24:return null;default:return null}}var md=!1,Ct=!1,hO=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Lo(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Be(n,e,r)}else t.current=null}function Hg(n,e,t){try{t()}catch(r){Be(n,e,r)}}var XI=!1;function fO(n,e){if(kg=gh,n=QA(),E_(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=n,p=null;t:for(;;){for(var y;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)p=h,h=y;for(;;){if(h===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(y=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=y}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(bg={focusedElem:n,selectionRange:t},gh=!1,Y=e;Y!==null;)if(e=Y,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Y=n;else for(;Y!==null;){e=Y;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var T=v.memoizedProps,x=v.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?T:An(e.type,T),x);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(b){Be(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}return v=XI,XI=!1,v}function Gl(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hg(e,t,s)}i=i.next}while(i!==r)}}function Af(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Kg(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function q0(n){var e=n.alternate;e!==null&&(n.alternate=null,q0(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[qn],delete e[Iu],delete e[Og],delete e[QD],delete e[YD])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function G0(n){return n.tag===5||n.tag===3||n.tag===4}function ZI(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||G0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qg(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=vh));else if(r!==4&&(n=n.child,n!==null))for(Qg(n,e,t),n=n.sibling;n!==null;)Qg(n,e,t),n=n.sibling}function Yg(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Yg(n,e,t),n=n.sibling;n!==null;)Yg(n,e,t),n=n.sibling}var ft=null,Rn=!1;function Xr(n,e,t){for(t=t.child;t!==null;)H0(n,e,t),t=t.sibling}function H0(n,e,t){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(_f,t)}catch{}switch(t.tag){case 5:Ct||Lo(t,e);case 6:var r=ft,i=Rn;ft=null,Xr(n,e,t),ft=r,Rn=i,ft!==null&&(Rn?(n=ft,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ft.removeChild(t.stateNode));break;case 18:ft!==null&&(Rn?(n=ft,t=t.stateNode,n.nodeType===8?wm(n.parentNode,t):n.nodeType===1&&wm(n,t),yu(n)):wm(ft,t.stateNode));break;case 4:r=ft,i=Rn,ft=t.stateNode.containerInfo,Rn=!0,Xr(n,e,t),ft=r,Rn=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hg(t,e,o),i=i.next}while(i!==r)}Xr(n,e,t);break;case 1:if(!Ct&&(Lo(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Be(t,e,a)}Xr(n,e,t);break;case 21:Xr(n,e,t);break;case 22:t.mode&1?(Ct=(r=Ct)||t.memoizedState!==null,Xr(n,e,t),Ct=r):Xr(n,e,t);break;default:Xr(n,e,t)}}function eT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new hO),e.forEach(function(r){var i=IO.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Pn(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,Rn=!1;break e;case 3:ft=a.stateNode.containerInfo,Rn=!0;break e;case 4:ft=a.stateNode.containerInfo,Rn=!0;break e}a=a.return}if(ft===null)throw Error(W(160));H0(s,o,i),ft=null,Rn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Be(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)K0(e,n),e=e.sibling}function K0(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Pn(e,n),Un(n),r&4){try{Gl(3,n,n.return),Af(3,n)}catch(T){Be(n,n.return,T)}try{Gl(5,n,n.return)}catch(T){Be(n,n.return,T)}}break;case 1:Pn(e,n),Un(n),r&512&&t!==null&&Lo(t,t.return);break;case 5:if(Pn(e,n),Un(n),r&512&&t!==null&&Lo(t,t.return),n.flags&32){var i=n.stateNode;try{fu(i,"")}catch(T){Be(n,n.return,T)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gA(i,s),wg(a,o);var c=wg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?EA(i,h):d==="dangerouslySetInnerHTML"?vA(i,h):d==="children"?fu(i,h):l_(i,d,h,c)}switch(a){case"input":mg(i,s);break;case"textarea":yA(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Uo(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?Uo(i,!!s.multiple,s.defaultValue,!0):Uo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Iu]=s}catch(T){Be(n,n.return,T)}}break;case 6:if(Pn(e,n),Un(n),r&4){if(n.stateNode===null)throw Error(W(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(T){Be(n,n.return,T)}}break;case 3:if(Pn(e,n),Un(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{yu(e.containerInfo)}catch(T){Be(n,n.return,T)}break;case 4:Pn(e,n),Un(n);break;case 13:Pn(e,n),Un(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($_=He())),r&4&&eT(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Ct=(c=Ct)||d,Pn(e,n),Ct=c):Pn(e,n),Un(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(Y=n,d=n.child;d!==null;){for(h=Y=d;Y!==null;){switch(p=Y,y=p.child,p.tag){case 0:case 11:case 14:case 15:Gl(4,p,p.return);break;case 1:Lo(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(T){Be(r,t,T)}}break;case 5:Lo(p,p.return);break;case 22:if(p.memoizedState!==null){nT(h);continue}}y!==null?(y.return=p,Y=y):nT(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wA("display",o))}catch(T){Be(n,n.return,T)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(T){Be(n,n.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pn(e,n),Un(n),r&4&&eT(n);break;case 21:break;default:Pn(e,n),Un(n)}}function Un(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(G0(t)){var r=t;break e}t=t.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fu(i,""),r.flags&=-33);var s=ZI(n);Yg(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ZI(n);Qg(n,a,o);break;default:throw Error(W(161))}}catch(l){Be(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function pO(n,e,t){Y=n,Q0(n)}function Q0(n,e,t){for(var r=(n.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||md;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ct;a=md;var c=Ct;if(md=o,(Ct=l)&&!c)for(Y=i;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?rT(i):l!==null?(l.return=o,Y=l):rT(i);for(;s!==null;)Y=s,Q0(s),s=s.sibling;Y=i,md=a,Ct=c}tT(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):tT(n)}}function tT(n){for(;Y!==null;){var e=Y;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||Af(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:An(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}jI(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&yu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Ct||e.flags&512&&Kg(e)}catch(p){Be(e,e.return,p)}}if(e===n){Y=null;break}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}}function nT(n){for(;Y!==null;){var e=Y;if(e===n){Y=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Y=t;break}Y=e.return}}function rT(n){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Af(4,e)}catch(l){Be(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Be(e,i,l)}}var s=e.return;try{Kg(e)}catch(l){Be(e,s,l)}break;case 5:var o=e.return;try{Kg(e)}catch(l){Be(e,o,l)}}}catch(l){Be(e,e.return,l)}if(e===n){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var mO=Math.ceil,kh=Ur.ReactCurrentDispatcher,j_=Ur.ReactCurrentOwner,vn=Ur.ReactCurrentBatchConfig,me=0,ut=null,et=null,yt=0,en=0,Mo=Wi(0),rt=0,Cu=null,Ns=0,Rf=0,U_=0,Hl=null,qt=null,$_=0,oa=1/0,_r=null,bh=!1,Jg=null,Ti=null,gd=!1,fi=null,Nh=0,Kl=0,Xg=null,jd=-1,Ud=0;function Ft(){return me&6?He():jd!==-1?jd:jd=He()}function Si(n){return n.mode&1?me&2&&yt!==0?yt&-yt:XD.transition!==null?(Ud===0&&(Ud=DA()),Ud):(n=Ee,n!==0||(n=window.event,n=n===void 0?16:UA(n.type)),n):1}function Nn(n,e,t,r){if(50<Kl)throw Kl=0,Xg=null,Error(W(185));rc(n,t,r),(!(me&2)||n!==ut)&&(n===ut&&(!(me&2)&&(Rf|=t),rt===4&&ai(n,yt)),Xt(n,r),t===1&&me===0&&!(e.mode&1)&&(oa=He()+500,Tf&&qi()))}function Xt(n,e){var t=n.callbackNode;XN(n,e);var r=mh(n,n===ut?yt:0);if(r===0)t!==null&&hI(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&hI(t),e===1)n.tag===0?JD(iT.bind(null,n)):s0(iT.bind(null,n)),HD(function(){!(me&6)&&qi()}),t=null;else{switch(OA(r)){case 1:t=f_;break;case 4:t=bA;break;case 16:t=ph;break;case 536870912:t=NA;break;default:t=ph}t=rR(t,Y0.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Y0(n,e){if(jd=-1,Ud=0,me&6)throw Error(W(327));var t=n.callbackNode;if(qo()&&n.callbackNode!==t)return null;var r=mh(n,n===ut?yt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Dh(n,r);else{e=r;var i=me;me|=2;var s=X0();(ut!==n||yt!==e)&&(_r=null,oa=He()+500,Ts(n,e));do try{_O();break}catch(a){J0(n,a)}while(!0);A_(),kh.current=s,me=i,et!==null?e=0:(ut=null,yt=0,e=rt)}if(e!==0){if(e===2&&(i=Pg(n),i!==0&&(r=i,e=Zg(n,i))),e===1)throw t=Cu,Ts(n,0),ai(n,r),Xt(n,He()),t;if(e===6)ai(n,r);else{if(i=n.current.alternate,!(r&30)&&!gO(i)&&(e=Dh(n,r),e===2&&(s=Pg(n),s!==0&&(r=s,e=Zg(n,s))),e===1))throw t=Cu,Ts(n,0),ai(n,r),Xt(n,He()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:is(n,qt,_r);break;case 3:if(ai(n,r),(r&130023424)===r&&(e=$_+500-He(),10<e)){if(mh(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Ft(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Dg(is.bind(null,n,qt,_r),e);break}is(n,qt,_r);break;case 4:if(ai(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-bn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mO(r/1960))-r,10<r){n.timeoutHandle=Dg(is.bind(null,n,qt,_r),r);break}is(n,qt,_r);break;case 5:is(n,qt,_r);break;default:throw Error(W(329))}}}return Xt(n,He()),n.callbackNode===t?Y0.bind(null,n):null}function Zg(n,e){var t=Hl;return n.current.memoizedState.isDehydrated&&(Ts(n,e).flags|=256),n=Dh(n,e),n!==2&&(e=qt,qt=t,e!==null&&ey(e)),n}function ey(n){qt===null?qt=n:qt.push.apply(qt,n)}function gO(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Ln(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ai(n,e){for(e&=~U_,e&=~Rf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-bn(e),r=1<<t;n[t]=-1,e&=~r}}function iT(n){if(me&6)throw Error(W(327));qo();var e=mh(n,0);if(!(e&1))return Xt(n,He()),null;var t=Dh(n,e);if(n.tag!==0&&t===2){var r=Pg(n);r!==0&&(e=r,t=Zg(n,r))}if(t===1)throw t=Cu,Ts(n,0),ai(n,e),Xt(n,He()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,is(n,qt,_r),Xt(n,He()),null}function B_(n,e){var t=me;me|=1;try{return n(e)}finally{me=t,me===0&&(oa=He()+500,Tf&&qi())}}function Ds(n){fi!==null&&fi.tag===0&&!(me&6)&&qo();var e=me;me|=1;var t=vn.transition,r=Ee;try{if(vn.transition=null,Ee=1,n)return n()}finally{Ee=r,vn.transition=t,me=e,!(me&6)&&qi()}}function z_(){en=Mo.current,be(Mo)}function Ts(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,GD(t)),et!==null)for(t=et.return;t!==null;){var r=t;switch(T_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wh();break;case 3:ia(),be(Yt),be(bt),N_();break;case 5:b_(r);break;case 4:ia();break;case 13:be(Le);break;case 19:be(Le);break;case 10:R_(r.type._context);break;case 22:case 23:z_()}t=t.return}if(ut=n,et=n=Pi(n.current,null),yt=en=e,rt=0,Cu=null,U_=Rf=Ns=0,qt=Hl=null,gs!==null){for(e=0;e<gs.length;e++)if(t=gs[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}gs=null}return n}function J0(n,e){do{var t=et;try{if(A_(),Ld.current=xh,Ch){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ch=!1}if(bs=0,at=nt=Me=null,ql=!1,Pu=0,j_.current=null,t===null||t.return===null){rt=1,Cu=e,et=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=qI(o);if(y!==null){y.flags&=-257,GI(y,o,a,s,e),y.mode&1&&WI(s,c,e),e=y,l=c;var v=e.updateQueue;if(v===null){var T=new Set;T.add(l),e.updateQueue=T}else v.add(l);break e}else{if(!(e&1)){WI(s,c,e),W_();break e}l=Error(W(426))}}else if(De&&a.mode&1){var x=qI(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),GI(x,o,a,s,e),S_(sa(l,a));break e}}s=l=sa(l,a),rt!==4&&(rt=2),Hl===null?Hl=[s]:Hl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=O0(s,l,e);FI(s,_);break e;case 1:a=l;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ti===null||!Ti.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=V0(s,a,e);FI(s,b);break e}}s=s.return}while(s!==null)}eR(t)}catch(O){e=O,et===t&&t!==null&&(et=t=t.return);continue}break}while(!0)}function X0(){var n=kh.current;return kh.current=xh,n===null?xh:n}function W_(){(rt===0||rt===3||rt===2)&&(rt=4),ut===null||!(Ns&268435455)&&!(Rf&268435455)||ai(ut,yt)}function Dh(n,e){var t=me;me|=2;var r=X0();(ut!==n||yt!==e)&&(_r=null,Ts(n,e));do try{yO();break}catch(i){J0(n,i)}while(!0);if(A_(),me=t,kh.current=r,et!==null)throw Error(W(261));return ut=null,yt=0,rt}function yO(){for(;et!==null;)Z0(et)}function _O(){for(;et!==null&&!zN();)Z0(et)}function Z0(n){var e=nR(n.alternate,n,en);n.memoizedProps=n.pendingProps,e===null?eR(n):et=e,j_.current=null}function eR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=dO(t,e),t!==null){t.flags&=32767,et=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{rt=6,et=null;return}}else if(t=cO(t,e,en),t!==null){et=t;return}if(e=e.sibling,e!==null){et=e;return}et=e=n}while(e!==null);rt===0&&(rt=5)}function is(n,e,t){var r=Ee,i=vn.transition;try{vn.transition=null,Ee=1,vO(n,e,t,r)}finally{vn.transition=i,Ee=r}return null}function vO(n,e,t,r){do qo();while(fi!==null);if(me&6)throw Error(W(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(ZN(n,s),n===ut&&(et=ut=null,yt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||gd||(gd=!0,rR(ph,function(){return qo(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=vn.transition,vn.transition=null;var o=Ee;Ee=1;var a=me;me|=4,j_.current=null,fO(n,t),K0(t,n),jD(bg),gh=!!kg,bg=kg=null,n.current=t,pO(t),WN(),me=a,Ee=o,vn.transition=s}else n.current=t;if(gd&&(gd=!1,fi=n,Nh=i),s=n.pendingLanes,s===0&&(Ti=null),HN(t.stateNode),Xt(n,He()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(bh)throw bh=!1,n=Jg,Jg=null,n;return Nh&1&&n.tag!==0&&qo(),s=n.pendingLanes,s&1?n===Xg?Kl++:(Kl=0,Xg=n):Kl=0,qi(),null}function qo(){if(fi!==null){var n=OA(Nh),e=vn.transition,t=Ee;try{if(vn.transition=null,Ee=16>n?16:n,fi===null)var r=!1;else{if(n=fi,fi=null,Nh=0,me&6)throw Error(W(331));var i=me;for(me|=4,Y=n.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:Gl(8,d,s)}var h=d.child;if(h!==null)h.return=d,Y=h;else for(;Y!==null;){d=Y;var p=d.sibling,y=d.return;if(q0(d),d===c){Y=null;break}if(p!==null){p.return=y,Y=p;break}Y=y}}}var v=s.alternate;if(v!==null){var T=v.child;if(T!==null){v.child=null;do{var x=T.sibling;T.sibling=null,T=x}while(T!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gl(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Y=_;break e}Y=s.return}}var w=n.current;for(Y=w;Y!==null;){o=Y;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Y=E;else e:for(o=w;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Af(9,a)}}catch(O){Be(a,a.return,O)}if(a===o){Y=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Y=b;break e}Y=a.return}}if(me=i,qi(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(_f,n)}catch{}r=!0}return r}finally{Ee=t,vn.transition=e}}return!1}function sT(n,e,t){e=sa(t,e),e=O0(n,e,1),n=Ii(n,e,1),e=Ft(),n!==null&&(rc(n,1,e),Xt(n,e))}function Be(n,e,t){if(n.tag===3)sT(n,n,t);else for(;e!==null;){if(e.tag===3){sT(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){n=sa(t,n),n=V0(e,n,1),e=Ii(e,n,1),n=Ft(),e!==null&&(rc(e,1,n),Xt(e,n));break}}e=e.return}}function wO(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ft(),n.pingedLanes|=n.suspendedLanes&t,ut===n&&(yt&t)===t&&(rt===4||rt===3&&(yt&130023424)===yt&&500>He()-$_?Ts(n,0):U_|=t),Xt(n,e)}function tR(n,e){e===0&&(n.mode&1?(e=od,od<<=1,!(od&130023424)&&(od=4194304)):e=1);var t=Ft();n=br(n,e),n!==null&&(rc(n,e,t),Xt(n,t))}function EO(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),tR(n,t)}function IO(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),tR(n,t)}var nR;nR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Yt.current)Gt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Gt=!1,uO(n,e,t);Gt=!!(n.flags&131072)}else Gt=!1,De&&e.flags&1048576&&o0(e,Th,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fd(n,e),n=e.pendingProps;var i=ta(e,bt.current);Wo(e,t),i=O_(null,e,r,n,i,t);var s=V_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(r)?(s=!0,Eh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,x_(e),i.updater=Pf,e.stateNode=i,i._reactInternals=e,Ug(e,r,n,t),e=zg(null,e,r,!0,s,t)):(e.tag=0,De&&s&&I_(e),Vt(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Fd(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=SO(r),n=An(r,n),i){case 0:e=Bg(null,e,r,n,t);break e;case 1:e=QI(null,e,r,n,t);break e;case 11:e=HI(null,e,r,n,t);break e;case 14:e=KI(null,e,r,An(r.type,n),t);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),Bg(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),QI(n,e,r,i,t);case 3:e:{if(j0(e),n===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,h0(n,e),Ah(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=sa(Error(W(423)),e),e=YI(n,e,r,t,i);break e}else if(r!==i){i=sa(Error(W(424)),e),e=YI(n,e,r,t,i);break e}else for(sn=Ei(e.stateNode.containerInfo.firstChild),an=e,De=!0,xn=null,t=c0(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(na(),r===i){e=Nr(n,e,t);break e}Vt(n,e,r,t)}e=e.child}return e;case 5:return f0(e),n===null&&Mg(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Ng(r,i)?o=null:s!==null&&Ng(r,s)&&(e.flags|=32),F0(n,e),Vt(n,e,o,t),e.child;case 6:return n===null&&Mg(e),null;case 13:return U0(n,e,t);case 4:return k_(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=ra(e,null,r,t):Vt(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),HI(n,e,r,i,t);case 7:return Vt(n,e,e.pendingProps,t),e.child;case 8:return Vt(n,e,e.pendingProps.children,t),e.child;case 12:return Vt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Pe(Sh,r._currentValue),r._currentValue=o,s!==null)if(Ln(s.value,o)){if(s.children===i.children&&!Yt.current){e=Nr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ar(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Fg(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Fg(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vt(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Wo(e,t),i=En(i),r=r(i),e.flags|=1,Vt(n,e,r,t),e.child;case 14:return r=e.type,i=An(r,e.pendingProps),i=An(r.type,i),KI(n,e,r,i,t);case 15:return L0(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),Fd(n,e),e.tag=1,Jt(r)?(n=!0,Eh(e)):n=!1,Wo(e,t),D0(e,r,i),Ug(e,r,i,t),zg(null,e,r,!0,n,t);case 19:return $0(n,e,t);case 22:return M0(n,e,t)}throw Error(W(156,e.tag))};function rR(n,e){return kA(n,e)}function TO(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(n,e,t,r){return new TO(n,e,t,r)}function q_(n){return n=n.prototype,!(!n||!n.isReactComponent)}function SO(n){if(typeof n=="function")return q_(n)?1:0;if(n!=null){if(n=n.$$typeof,n===c_)return 11;if(n===d_)return 14}return 2}function Pi(n,e){var t=n.alternate;return t===null?(t=yn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function $d(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")q_(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ro:return Ss(t.children,i,s,e);case u_:o=8,i|=8;break;case cg:return n=yn(12,t,e,i|2),n.elementType=cg,n.lanes=s,n;case dg:return n=yn(13,t,e,i),n.elementType=dg,n.lanes=s,n;case hg:return n=yn(19,t,e,i),n.elementType=hg,n.lanes=s,n;case fA:return Cf(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case dA:o=10;break e;case hA:o=9;break e;case c_:o=11;break e;case d_:o=14;break e;case ii:o=16,r=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=yn(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Ss(n,e,t,r){return n=yn(7,n,r,e),n.lanes=t,n}function Cf(n,e,t,r){return n=yn(22,n,r,e),n.elementType=fA,n.lanes=t,n.stateNode={isHidden:!1},n}function Cm(n,e,t){return n=yn(6,n,null,e),n.lanes=t,n}function xm(n,e,t){return e=yn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function PO(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=um(0),this.expirationTimes=um(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=um(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function G_(n,e,t,r,i,s,o,a,l){return n=new PO(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yn(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},x_(s),n}function AO(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ao,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function iR(n){if(!n)return Ni;n=n._reactInternals;e:{if(Ys(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(Jt(t))return i0(n,t,e)}return e}function sR(n,e,t,r,i,s,o,a,l){return n=G_(t,r,!0,n,i,s,o,a,l),n.context=iR(null),t=n.current,r=Ft(),i=Si(t),s=Ar(r,i),s.callback=e??null,Ii(t,s,i),n.current.lanes=i,rc(n,i,r),Xt(n,r),n}function xf(n,e,t,r){var i=e.current,s=Ft(),o=Si(i);return t=iR(t),e.context===null?e.context=t:e.pendingContext=t,e=Ar(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ii(i,e,o),n!==null&&(Nn(n,i,o,s),Vd(n,i,o)),o}function Oh(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function oT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function H_(n,e){oT(n,e),(n=n.alternate)&&oT(n,e)}function RO(){return null}var oR=typeof reportError=="function"?reportError:function(n){console.error(n)};function K_(n){this._internalRoot=n}kf.prototype.render=K_.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));xf(n,e,null,null)};kf.prototype.unmount=K_.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ds(function(){xf(null,n,null,null)}),e[kr]=null}};function kf(n){this._internalRoot=n}kf.prototype.unstable_scheduleHydration=function(n){if(n){var e=MA();n={blockedOn:null,target:n,priority:e};for(var t=0;t<oi.length&&e!==0&&e<oi[t].priority;t++);oi.splice(t,0,n),t===0&&jA(n)}};function Q_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function bf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function aT(){}function CO(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Oh(o);s.call(c)}}var o=sR(e,r,n,0,null,!1,!1,"",aT);return n._reactRootContainer=o,n[kr]=o.current,wu(n.nodeType===8?n.parentNode:n),Ds(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Oh(l);a.call(c)}}var l=G_(n,0,!1,null,null,!1,!1,"",aT);return n._reactRootContainer=l,n[kr]=l.current,wu(n.nodeType===8?n.parentNode:n),Ds(function(){xf(e,l,t,r)}),l}function Nf(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Oh(o);a.call(l)}}xf(e,o,n,i)}else o=CO(t,e,n,i,r);return Oh(o)}VA=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Cl(e.pendingLanes);t!==0&&(p_(e,t|1),Xt(e,He()),!(me&6)&&(oa=He()+500,qi()))}break;case 13:Ds(function(){var r=br(n,1);if(r!==null){var i=Ft();Nn(r,n,1,i)}}),H_(n,1)}};m_=function(n){if(n.tag===13){var e=br(n,134217728);if(e!==null){var t=Ft();Nn(e,n,134217728,t)}H_(n,134217728)}};LA=function(n){if(n.tag===13){var e=Si(n),t=br(n,e);if(t!==null){var r=Ft();Nn(t,n,e,r)}H_(n,e)}};MA=function(){return Ee};FA=function(n,e){var t=Ee;try{return Ee=n,e()}finally{Ee=t}};Ig=function(n,e,t){switch(e){case"input":if(mg(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=If(r);if(!i)throw Error(W(90));mA(r),mg(r,i)}}}break;case"textarea":yA(n,t);break;case"select":e=t.value,e!=null&&Uo(n,!!t.multiple,e,!1)}};SA=B_;PA=Ds;var xO={usingClientEntryPoint:!1,Events:[sc,bo,If,IA,TA,B_]},ml={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kO={bundleType:ml.bundleType,version:ml.version,rendererPackageName:ml.rendererPackageName,rendererConfig:ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=CA(n),n===null?null:n.stateNode},findFiberByHostInstance:ml.findFiberByHostInstance||RO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yd.isDisabled&&yd.supportsFiber)try{_f=yd.inject(kO),Yn=yd}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xO;hn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q_(e))throw Error(W(200));return AO(n,e,null,t)};hn.createRoot=function(n,e){if(!Q_(n))throw Error(W(299));var t=!1,r="",i=oR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=G_(n,1,!1,null,null,t,!1,r,i),n[kr]=e.current,wu(n.nodeType===8?n.parentNode:n),new K_(e)};hn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=CA(e),n=n===null?null:n.stateNode,n};hn.flushSync=function(n){return Ds(n)};hn.hydrate=function(n,e,t){if(!bf(e))throw Error(W(200));return Nf(null,n,e,!0,t)};hn.hydrateRoot=function(n,e,t){if(!Q_(n))throw Error(W(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=oR;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=sR(e,null,n,1,t??null,i,!1,s,o),n[kr]=e.current,wu(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new kf(e)};hn.render=function(n,e,t){if(!bf(e))throw Error(W(200));return Nf(null,n,e,!1,t)};hn.unmountComponentAtNode=function(n){if(!bf(n))throw Error(W(40));return n._reactRootContainer?(Ds(function(){Nf(null,null,n,!1,function(){n._reactRootContainer=null,n[kr]=null})}),!0):!1};hn.unstable_batchedUpdates=B_;hn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!bf(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return Nf(n,e,t,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function aR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aR)}catch(n){console.error(n)}}aR(),aA.exports=hn;var bO=aA.exports,lT=bO;lg.createRoot=lT.createRoot,lg.hydrateRoot=lT.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var uT="popstate";function NO(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ty("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:xu(i)}return OO(e,t,null,n)}function Fe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function nr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DO(){return Math.random().toString(36).substring(2,10)}function cT(n,e){return{usr:n.state,key:n.key,idx:e}}function ty(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Va(e):e,state:t,key:e&&e.key||r||DO()}}function xu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Va(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function OO(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function h(){a="POP";let x=d(),_=x==null?null:x-c;c=x,l&&l({action:a,location:T.location,delta:_})}function p(x,_){a="PUSH";let w=ty(T.location,x,_);c=d()+1;let E=cT(w,c),b=T.createHref(w);try{o.pushState(E,"",b)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(b)}s&&l&&l({action:a,location:T.location,delta:1})}function y(x,_){a="REPLACE";let w=ty(T.location,x,_);c=d();let E=cT(w,c),b=T.createHref(w);o.replaceState(E,"",b),s&&l&&l({action:a,location:T.location,delta:0})}function v(x){return VO(x)}let T={get action(){return a},get location(){return n(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(uT,h),l=x,()=>{i.removeEventListener(uT,h),l=null}},createHref(x){return e(i,x)},createURL:v,encodeLocation(x){let _=v(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:y,go(x){return o.go(x)}};return T}function VO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:xu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function lR(n,e,t="/"){return LO(n,e,t,!1)}function LO(n,e,t,r){let i=typeof e=="string"?Va(e):e,s=Dr(i.pathname||"/",t);if(s==null)return null;let o=uR(n);MO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=KO(s);a=GO(o[l],c,r)}return a}function uR(n,e=[],t=[],r="",i=!1){let s=(o,a,l=i,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;Fe(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let h=Rr([r,d.relativePath]),p=t.concat(d);o.children&&o.children.length>0&&(Fe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),uR(o.children,e,p,h,l)),!(o.path==null&&!o.index)&&e.push({path:h,score:WO(h,o.index),routesMeta:p})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of cR(o.path))s(o,a,!0,c)}),e}function cR(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=cR(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function MO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:qO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var FO=/^:[\w-]+$/,jO=3,UO=2,$O=1,BO=10,zO=-2,dT=n=>n==="*";function WO(n,e){let t=n.split("/"),r=t.length;return t.some(dT)&&(r+=zO),e&&(r+=UO),t.filter(i=>!dT(i)).reduce((i,s)=>i+(FO.test(s)?jO:s===""?$O:BO),r)}function qO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function GO(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Vh({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h&&c&&t&&!r[r.length-1].route.index&&(h=Vh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Rr([s,h.pathname]),pathnameBase:XO(Rr([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Rr([s,h.pathnameBase]))}return o}function Vh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=HO(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:h},p)=>{if(d==="*"){let v=a[p]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[p];return h&&!y?c[d]=void 0:c[d]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function HO(n,e=!1,t=!0){nr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function KO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Dr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function QO(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Va(n):n;return{pathname:t?t.startsWith("/")?t:YO(t,e):e,search:ZO(r),hash:eV(i)}}function YO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function km(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dR(n){let e=JO(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function hR(n,e,t,r=!1){let i;typeof n=="string"?i=Va(n):(i={...n},Fe(!i.pathname||!i.pathname.includes("?"),km("?","pathname","search",i)),Fe(!i.pathname||!i.pathname.includes("#"),km("#","pathname","hash",i)),Fe(!i.search||!i.search.includes("#"),km("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=QO(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var Rr=n=>n.join("/").replace(/\/\/+/g,"/"),XO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ZO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var fR=["POST","PUT","PATCH","DELETE"];new Set(fR);var nV=["GET",...fR];new Set(nV);var La=D.createContext(null);La.displayName="DataRouter";var Df=D.createContext(null);Df.displayName="DataRouterState";D.createContext(!1);var pR=D.createContext({isTransitioning:!1});pR.displayName="ViewTransition";var rV=D.createContext(new Map);rV.displayName="Fetchers";var iV=D.createContext(null);iV.displayName="Await";var lr=D.createContext(null);lr.displayName="Navigation";var ac=D.createContext(null);ac.displayName="Location";var $r=D.createContext({outlet:null,matches:[],isDataRoute:!1});$r.displayName="Route";var Y_=D.createContext(null);Y_.displayName="RouteError";function sV(n,{relative:e}={}){Fe(lc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=D.useContext(lr),{hash:i,pathname:s,search:o}=uc(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:Rr([t,s])),r.createHref({pathname:a,search:o,hash:i})}function lc(){return D.useContext(ac)!=null}function Js(){return Fe(lc(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(ac).location}var mR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gR(n){D.useContext(lr).static||D.useLayoutEffect(n)}function oV(){let{isDataRoute:n}=D.useContext($r);return n?vV():aV()}function aV(){Fe(lc(),"useNavigate() may be used only in the context of a <Router> component.");let n=D.useContext(La),{basename:e,navigator:t}=D.useContext(lr),{matches:r}=D.useContext($r),{pathname:i}=Js(),s=JSON.stringify(dR(r)),o=D.useRef(!1);return gR(()=>{o.current=!0}),D.useCallback((l,c={})=>{if(nr(o.current,mR),!o.current)return;if(typeof l=="number"){t.go(l);return}let d=hR(l,JSON.parse(s),i,c.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Rr([e,d.pathname])),(c.replace?t.replace:t.push)(d,c.state,c)},[e,t,s,i,n])}D.createContext(null);function uc(n,{relative:e}={}){let{matches:t}=D.useContext($r),{pathname:r}=Js(),i=JSON.stringify(dR(t));return D.useMemo(()=>hR(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function lV(n,e){return yR(n,e)}function yR(n,e,t,r,i){var w;Fe(lc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=D.useContext(lr),{matches:o}=D.useContext($r),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;{let E=h&&h.path||"";_R(c,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=Js(),y;if(e){let E=typeof e=="string"?Va(e):e;Fe(d==="/"||((w=E.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${E.pathname}" was given in the \`location\` prop.`),y=E}else y=p;let v=y.pathname||"/",T=v;if(d!=="/"){let E=d.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let x=lR(n,{pathname:T});nr(h||x!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),nr(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=fV(x&&x.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Rr([d,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:Rr([d,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,t,r,i);return e&&_?D.createElement(ac.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},_):_}function uV(){let n=_V(),e=tV(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:i},t):null,o)}var cV=D.createElement(uV,null),dV=class extends D.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?D.createElement($r.Provider,{value:this.props.routeContext},D.createElement(Y_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hV({routeContext:n,match:e,children:t}){let r=D.useContext(La);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement($r.Provider,{value:n},t)}function fV(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let c=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);Fe(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(t)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:h,errors:p}=t,y=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,d,h)=>{let p,y=!1,v=null,T=null;t&&(p=o&&d.route.id?o[d.route.id]:void 0,v=d.route.errorElement||cV,a&&(l<0&&h===0?(_R("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,T=null):l===h&&(y=!0,T=d.route.hydrateFallbackElement||null)));let x=e.concat(s.slice(0,h+1)),_=()=>{let w;return p?w=v:y?w=T:d.route.Component?w=D.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,D.createElement(hV,{match:d,routeContext:{outlet:c,matches:x,isDataRoute:t!=null},children:w})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(dV,{location:t.location,revalidation:t.revalidation,component:v,error:p,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:r}):_()},null)}function J_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pV(n){let e=D.useContext(La);return Fe(e,J_(n)),e}function mV(n){let e=D.useContext(Df);return Fe(e,J_(n)),e}function gV(n){let e=D.useContext($r);return Fe(e,J_(n)),e}function X_(n){let e=gV(n),t=e.matches[e.matches.length-1];return Fe(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function yV(){return X_("useRouteId")}function _V(){var r;let n=D.useContext(Y_),e=mV("useRouteError"),t=X_("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function vV(){let{router:n}=pV("useNavigate"),e=X_("useNavigate"),t=D.useRef(!1);return gR(()=>{t.current=!0}),D.useCallback(async(i,s={})=>{nr(t.current,mR),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var hT={};function _R(n,e,t){!e&&!hT[n]&&(hT[n]=!0,nr(!1,t))}D.memo(wV);function wV({routes:n,future:e,state:t,unstable_onError:r}){return yR(n,void 0,t,r,e)}function ss(n){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function EV({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){Fe(!lc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=D.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=Va(t));let{pathname:l="/",search:c="",hash:d="",state:h=null,key:p="default"}=t,y=D.useMemo(()=>{let v=Dr(l,o);return v==null?null:{location:{pathname:v,search:c,hash:d,state:h,key:p},navigationType:r}},[o,l,c,d,h,p,r]);return nr(y!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:D.createElement(lr.Provider,{value:a},D.createElement(ac.Provider,{children:e,value:y}))}function IV({children:n,location:e}){return lV(ny(n),e)}function ny(n,e=[]){let t=[];return D.Children.forEach(n,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){t.push.apply(t,ny(r.props.children,s));return}Fe(r.type===ss,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ny(r.props.children,s)),t.push(o)}),t}var Bd="get",zd="application/x-www-form-urlencoded";function Of(n){return n!=null&&typeof n.tagName=="string"}function TV(n){return Of(n)&&n.tagName.toLowerCase()==="button"}function SV(n){return Of(n)&&n.tagName.toLowerCase()==="form"}function PV(n){return Of(n)&&n.tagName.toLowerCase()==="input"}function AV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function RV(n,e){return n.button===0&&(!e||e==="_self")&&!AV(n)}var _d=null;function CV(){if(_d===null)try{new FormData(document.createElement("form"),0),_d=!1}catch{_d=!0}return _d}var xV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bm(n){return n!=null&&!xV.has(n)?(nr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zd}"`),null):n}function kV(n,e){let t,r,i,s,o;if(SV(n)){let a=n.getAttribute("action");r=a?Dr(a,e):null,t=n.getAttribute("method")||Bd,i=bm(n.getAttribute("enctype"))||zd,s=new FormData(n)}else if(TV(n)||PV(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Dr(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||Bd,i=bm(n.getAttribute("formenctype"))||bm(a.getAttribute("enctype"))||zd,s=new FormData(a,n),!CV()){let{name:c,type:d,value:h}=n;if(d==="image"){let p=c?`${c}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else c&&s.append(c,h)}}else{if(Of(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Bd,r=null,i=zd,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Z_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bV(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Dr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function NV(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DV(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function OV(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await NV(s,t);return o.links?o.links():[]}return[]}));return FV(r.flat(1).filter(DV).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function fT(n,e,t,r,i,s){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var d;return t[c].pathname!==l.pathname||((d=t[c].route.path)==null?void 0:d.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var h;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function VV(n,e,{includeHydrateFallback:t}={}){return LV(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function LV(n){return[...new Set(n)]}function MV(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function FV(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(MV(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function vR(){let n=D.useContext(La);return Z_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function jV(){let n=D.useContext(Df);return Z_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ev=D.createContext(void 0);ev.displayName="FrameworkContext";function wR(){let n=D.useContext(ev);return Z_(n,"You must render this element inside a <HydratedRouter> element"),n}function UV(n,e){let t=D.useContext(ev),[r,i]=D.useState(!1),[s,o]=D.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,p=D.useRef(null);D.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let T=_=>{_.forEach(w=>{o(w.isIntersecting)})},x=new IntersectionObserver(T,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[n]),D.useEffect(()=>{if(r){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[r]);let y=()=>{i(!0)},v=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,p,{}]:[s,p,{onFocus:gl(a,y),onBlur:gl(l,v),onMouseEnter:gl(c,y),onMouseLeave:gl(d,v),onTouchStart:gl(h,y)}]:[!1,p,{}]}function gl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function $V({page:n,...e}){let{router:t}=vR(),r=D.useMemo(()=>lR(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?D.createElement(zV,{page:n,matches:r,...e}):null}function BV(n){let{manifest:e,routeModules:t}=wR(),[r,i]=D.useState([]);return D.useEffect(()=>{let s=!1;return OV(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function zV({page:n,matches:e,...t}){let r=Js(),{manifest:i,routeModules:s}=wR(),{basename:o}=vR(),{loaderData:a,matches:l}=jV(),c=D.useMemo(()=>fT(n,e,l,i,r,"data"),[n,e,l,i,r]),d=D.useMemo(()=>fT(n,e,l,i,r,"assets"),[n,e,l,i,r]),h=D.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let v=new Set,T=!1;if(e.forEach(_=>{var E;let w=i.routes[_.route.id];!w||!w.hasLoader||(!c.some(b=>b.route.id===_.route.id)&&_.route.id in a&&((E=s[_.route.id])!=null&&E.shouldRevalidate)||w.hasClientLoader?T=!0:v.add(_.route.id))}),v.size===0)return[];let x=bV(n,o,"data");return T&&v.size>0&&x.searchParams.set("_routes",e.filter(_=>v.has(_.route.id)).map(_=>_.route.id).join(",")),[x.pathname+x.search]},[o,a,r,i,c,e,n,s]),p=D.useMemo(()=>VV(d,i),[d,i]),y=BV(d);return D.createElement(D.Fragment,null,h.map(v=>D.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),p.map(v=>D.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),y.map(({key:v,link:T})=>D.createElement("link",{key:v,nonce:t.nonce,...T})))}function WV(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ER=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ER&&(window.__reactRouterVersion="7.8.2")}catch{}function qV({basename:n,children:e,window:t}){let r=D.useRef();r.current==null&&(r.current=NO({window:t,v5Compat:!0}));let i=r.current,[s,o]=D.useState({action:i.action,location:i.location}),a=D.useCallback(l=>{D.startTransition(()=>o(l))},[o]);return D.useLayoutEffect(()=>i.listen(a),[i,a]),D.createElement(EV,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var IR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TR=D.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h,...p},y){let{basename:v}=D.useContext(lr),T=typeof c=="string"&&IR.test(c),x,_=!1;if(typeof c=="string"&&T&&(x=c,ER))try{let P=new URL(window.location.href),R=c.startsWith("//")?new URL(P.protocol+c):new URL(c),k=Dr(R.pathname,v);R.origin===P.origin&&k!=null?c=k+R.search+R.hash:_=!0}catch{nr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=sV(c,{relative:i}),[E,b,O]=UV(r,p),F=KV(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function A(P){e&&e(P),P.defaultPrevented||F(P)}let I=D.createElement("a",{...p,...O,href:x||w,onClick:_||s?e:A,ref:WV(y,b),target:l,"data-discover":!T&&t==="render"?"true":void 0});return E&&!T?D.createElement(D.Fragment,null,I,D.createElement($V,{page:w})):I});TR.displayName="Link";var os=D.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},d){let h=uc(o,{relative:c.relative}),p=Js(),y=D.useContext(Df),{navigator:v,basename:T}=D.useContext(lr),x=y!=null&&ZV(h)&&a===!0,_=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=p.pathname,E=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(w=w.toLowerCase(),E=E?E.toLowerCase():null,_=_.toLowerCase()),E&&T&&(E=Dr(E,T)||E);const b=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let O=w===_||!i&&w.startsWith(_)&&w.charAt(b)==="/",F=E!=null&&(E===_||!i&&E.startsWith(_)&&E.charAt(_.length)==="/"),A={isActive:O,isPending:F,isTransitioning:x},I=O?e:void 0,P;typeof r=="function"?P=r(A):P=[r,O?"active":null,F?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(A):s;return D.createElement(TR,{...c,"aria-current":I,className:P,ref:d,style:R,to:o,viewTransition:a},typeof l=="function"?l(A):l)});os.displayName="NavLink";var GV=D.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=Bd,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:h,...p},y)=>{let v=JV(),T=XV(a,{relative:c}),x=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&IR.test(a),w=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let b=E.nativeEvent.submitter,O=(b==null?void 0:b.getAttribute("formmethod"))||o;v(b||E.currentTarget,{fetcherKey:e,method:O,navigate:t,replace:i,state:s,relative:c,preventScrollReset:d,viewTransition:h})};return D.createElement("form",{ref:y,method:x,action:T,onSubmit:r?l:w,...p,"data-discover":!_&&n==="render"?"true":void 0})});GV.displayName="Form";function HV(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SR(n){let e=D.useContext(La);return Fe(e,HV(n)),e}function KV(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=oV(),l=Js(),c=uc(n,{relative:s});return D.useCallback(d=>{if(RV(d,e)){d.preventDefault();let h=t!==void 0?t:xu(l)===xu(c);a(n,{replace:h,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,t,r,e,n,i,s,o])}var QV=0,YV=()=>`__${String(++QV)}__`;function JV(){let{router:n}=SR("useSubmit"),{basename:e}=D.useContext(lr),t=yV();return D.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=kV(r,e);if(i.navigate===!1){let d=i.fetcherKey||YV();await n.fetch(d,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function XV(n,{relative:e}={}){let{basename:t}=D.useContext(lr),r=D.useContext($r);Fe(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...uc(n||".",{relative:e})},o=Js();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let d=a.toString();s.search=d?`?${d}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Rr([t,s.pathname])),xu(s)}function ZV(n,{relative:e}={}){let t=D.useContext(pR);Fe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=SR("useViewTransitionState"),i=uc(n,{relative:e});if(!t.isTransitioning)return!1;let s=Dr(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Dr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Vh(i.pathname,o)!=null||Vh(i.pathname,s)!=null}const eL=()=>{};var pT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},tL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},AR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(p=64)),r.push(t[d],t[h],t[p],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(PR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):tL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new nL;const p=s<<2|a>>4;if(r.push(p),c!==64){const y=a<<4&240|c>>2;if(r.push(y),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class nL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rL=function(n){const e=PR(n);return AR.encodeByteArray(e,!0)},Lh=function(n){return rL(n).replace(/\./g,"")},Vf=function(n){try{return AR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Mh(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!iL(t)||(n[t]=Mh(n[t],e[t]));return n}function iL(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=()=>tv().__FIREBASE_DEFAULTS__,oL=()=>{if(typeof process>"u"||typeof pT>"u")return;const n=pT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},aL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Vf(n[1]);return e&&JSON.parse(e)},Lf=()=>{try{return eL()||sL()||oL()||aL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lL=n=>{var e,t;return(t=(e=Lf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},nv=()=>{var n;return(n=Lf())==null?void 0:n.config},rv=n=>{var e;return(e=Lf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Lh(JSON.stringify(t)),Lh(JSON.stringify(o)),""].join(".")}const Ql={};function dL(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ql))Ql[e]?n.emulator.push(e):n.prod.push(e);return n}function hL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let mT=!1;function sv(n,e){if(typeof window>"u"||typeof document>"u"||!Br(window.location.host)||Ql[n]===e||Ql[n]||mT)return;Ql[n]=e;function t(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=dL().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{mT=!0,o()},p}function d(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=hL(r),y=t("text"),v=document.getElementById(y)||document.createElement("span"),T=t("learnmore"),x=document.getElementById(T)||document.createElement("a"),_=t("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const E=p.element;a(E),d(x,T);const b=c();l(w,_),E.append(w,v,x,b),document.body.appendChild(E)}s?(v.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(de())}function Mf(){var e;const n=(e=Lf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fL(){return typeof window<"u"||CR()}function CR(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function xR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ov(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ff(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function av(){const n=de();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kR(){return!Mf()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bR(){return!Mf()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ku(){try{return typeof indexedDB=="object"}catch{return!1}}function pL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL="FirebaseError";class ct extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mL,Object.setPrototypeOf(this,ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ur.prototype.create)}}class ur{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?gL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ct(i,a,r)}}function gL(n,e){return n.replace(yL,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const yL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function NR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Mn(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(yT(s)&&yT(o)){if(!Mn(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function yT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fo(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function kl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function lv(n,e){const t=new _L(n,e);return t.subscribe.bind(t)}class _L{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Nm),i.error===void 0&&(i.error=Nm),i.complete===void 0&&(i.complete=Nm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(n){return n&&n._delegate?n._delegate:n}class Tn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new uL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IL(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EL(n){return n===as?void 0:n}function IL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=[];var ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ae||(ae={}));const OR={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},TL=ae.INFO,SL={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},PL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=SL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cc{constructor(e){this.name=e,this._logLevel=TL,this._logHandler=PL,this._userLogHandler=null,uv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}function AL(n){uv.forEach(e=>{e.setLogLevel(n)})}function RL(n,e){for(const t of uv){let r=null;e&&e.level&&(r=OR[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&n({level:ae[s].toLowerCase(),message:a,args:o,type:i.name})}}}const CL=(n,e)=>e.some(t=>n instanceof t);let _T,vT;function xL(){return _T||(_T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kL(){return vT||(vT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VR=new WeakMap,ry=new WeakMap,LR=new WeakMap,Dm=new WeakMap,cv=new WeakMap;function bL(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ai(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&VR.set(t,n)}).catch(()=>{}),cv.set(e,n),e}function NL(n){if(ry.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});ry.set(n,e)}let iy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ry.get(n);if(e==="objectStoreNames")return n.objectStoreNames||LR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ai(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DL(n){iy=n(iy)}function OL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Om(this),e,...t);return LR.set(r,e.sort?e.sort():[e]),Ai(r)}:kL().includes(n)?function(...e){return n.apply(Om(this),e),Ai(VR.get(this))}:function(...e){return Ai(n.apply(Om(this),e))}}function VL(n){return typeof n=="function"?OL(n):(n instanceof IDBTransaction&&NL(n),CL(n,xL())?new Proxy(n,iy):n)}function Ai(n){if(n instanceof IDBRequest)return bL(n);if(Dm.has(n))return Dm.get(n);const e=VL(n);return e!==n&&(Dm.set(n,e),cv.set(e,n)),e}const Om=n=>cv.get(n);function LL(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Ai(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ai(o.result),l.oldVersion,l.newVersion,Ai(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const ML=["get","getKey","getAll","getAllKeys","count"],FL=["put","add","delete","clear"],Vm=new Map;function wT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vm.get(e))return Vm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=FL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ML.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return Vm.set(e,s),s}DL(n=>({...n,get:(e,t,r)=>wT(e,t)||n.get(e,t,r),has:(e,t)=>!!wT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function UL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fh="@firebase/app",sy="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new cc("@firebase/app"),$L="@firebase/app-compat",BL="@firebase/analytics-compat",zL="@firebase/analytics",WL="@firebase/app-check-compat",qL="@firebase/app-check",GL="@firebase/auth",HL="@firebase/auth-compat",KL="@firebase/database",QL="@firebase/data-connect",YL="@firebase/database-compat",JL="@firebase/functions",XL="@firebase/functions-compat",ZL="@firebase/installations",eM="@firebase/installations-compat",tM="@firebase/messaging",nM="@firebase/messaging-compat",rM="@firebase/performance",iM="@firebase/performance-compat",sM="@firebase/remote-config",oM="@firebase/remote-config-compat",aM="@firebase/storage",lM="@firebase/storage-compat",uM="@firebase/firestore",cM="@firebase/ai",dM="@firebase/firestore-compat",hM="firebase",fM="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="[DEFAULT]",pM={[Fh]:"fire-core",[$L]:"fire-core-compat",[zL]:"fire-analytics",[BL]:"fire-analytics-compat",[qL]:"fire-app-check",[WL]:"fire-app-check-compat",[GL]:"fire-auth",[HL]:"fire-auth-compat",[KL]:"fire-rtdb",[QL]:"fire-data-connect",[YL]:"fire-rtdb-compat",[JL]:"fire-fn",[XL]:"fire-fn-compat",[ZL]:"fire-iid",[eM]:"fire-iid-compat",[tM]:"fire-fcm",[nM]:"fire-fcm-compat",[rM]:"fire-perf",[iM]:"fire-perf-compat",[sM]:"fire-rc",[oM]:"fire-rc-compat",[aM]:"fire-gcs",[lM]:"fire-gcs-compat",[uM]:"fire-fst",[dM]:"fire-fst-compat",[cM]:"fire-vertex","fire-js":"fire-js",[hM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new Map,aa=new Map,la=new Map;function bu(n,e){try{n.container.addComponent(e)}catch(t){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function MR(n,e){n.container.addOrOverwriteComponent(e)}function rr(n){const e=n.name;if(la.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;la.set(e,n);for(const t of Oi.values())bu(t,n);for(const t of aa.values())bu(t,n);return!0}function jf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function mM(n,e,t=Di){jf(n,e).clearInstance(t)}function dv(n){return n.options!==void 0}function FR(n){return dv(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function pe(n){return n==null?!1:n.settings!==void 0}function gM(){la.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ln=new ur("app","Firebase",yM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jR=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(n,e){const t=Vf(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(t).exp*1e3,s=new Date().getTime();i-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class _M extends jR{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig={automaticDataCollectionEnabled:s,...t},this._serverConfig.authIdToken&&ET(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&ET(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,un(Fh,sy,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){fv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ln.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=fM;function hv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Di,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ln.create("bad-app-name",{appName:String(i)});if(t||(t=nv()),!t)throw ln.create("no-options");const s=Oi.get(i);if(s){if(Mn(t,s.options)&&Mn(r,s.config))return s;throw ln.create("duplicate-app",{appName:i})}const o=new DR(i);for(const l of la.values())o.addComponent(l);const a=new jR(t,r,o);return Oi.set(i,a),a}function vM(n,e={}){if(fL()&&!CR())throw ln.create("invalid-server-app-environment");let t,r=e||{};if(n&&(dv(n)?t=n.options:FR(n)?r=n:t=n),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=nv()),!t)throw ln.create("no-options");const i={...r,...t};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const s=d=>[...d].reduce((h,p)=>Math.imul(31,h)+p.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ln.create("finalization-registry-not-supported",{});const o=""+s(JSON.stringify(i)),a=aa.get(o);if(a)return a.incRefCount(r.releaseOnDeref),a;const l=new DR(o);for(const d of la.values())l.addComponent(d);const c=new _M(t,r,o,l);return aa.set(o,c),c}function UR(n=Di){const e=Oi.get(n);if(!e&&n===Di&&nv())return hv();if(!e)throw ln.create("no-app",{appName:n});return e}function wM(){return Array.from(Oi.values())}async function fv(n){let e=!1;const t=n.name;Oi.has(t)?(e=!0,Oi.delete(t)):aa.has(t)&&n.decRefCount()<=0&&(aa.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function un(n,e,t){let r=pM[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(o.join(" "));return}rr(new Tn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function $R(n,e){if(n!==null&&typeof n!="function")throw ln.create("invalid-log-argument");RL(n,e)}function BR(n){AL(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="firebase-heartbeat-database",IM=1,Nu="firebase-heartbeat-store";let Lm=null;function zR(){return Lm||(Lm=LL(EM,IM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ln.create("idb-open",{originalErrorMessage:n.message})})),Lm}async function TM(n){try{const t=(await zR()).transaction(Nu),r=await t.objectStore(Nu).get(WR(n));return await t.done,r}catch(e){if(e instanceof ct)Or.warn(e.message);else{const t=ln.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Or.warn(t.message)}}}async function IT(n,e){try{const r=(await zR()).transaction(Nu,"readwrite");await r.objectStore(Nu).put(e,WR(n)),await r.done}catch(t){if(t instanceof ct)Or.warn(t.message);else{const r=ln.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Or.warn(r.message)}}}function WR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=1024,PM=30;class AM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=TT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>PM){const o=xM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=TT(),{heartbeatsToSend:r,unsentEntries:i}=RM(this._heartbeatsCache.heartbeats),s=Lh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Or.warn(t),""}}}function TT(){return new Date().toISOString().substring(0,10)}function RM(n,e=SM){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ST(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ST(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class CM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ku()?pL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return IT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return IT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ST(n){return Lh(JSON.stringify({version:2,heartbeats:n})).length}function xM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(n){rr(new Tn("platform-logger",e=>new jL(e),"PRIVATE")),rr(new Tn("heartbeat",e=>new AM(e),"PRIVATE")),un(Fh,sy,n),un(Fh,sy,"esm2020"),un("fire-js","")}kM("");const bM=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ct,SDK_VERSION:pn,_DEFAULT_ENTRY_NAME:Di,_addComponent:bu,_addOrOverwriteComponent:MR,_apps:Oi,_clearComponents:gM,_components:la,_getProvider:jf,_isFirebaseApp:dv,_isFirebaseServerApp:pe,_isFirebaseServerAppSettings:FR,_registerComponent:rr,_removeServiceInstance:mM,_serverApps:aa,deleteApp:fv,getApp:UR,getApps:wM,initializeApp:hv,initializeServerApp:vM,onLog:$R,registerVersion:un,setLogLevel:BR},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,t){this._delegate=e,this.firebase=t,bu(e,new Tn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),fv(this._delegate)))}_getService(e,t=Di){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Di){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){bu(this._delegate,e)}_addOrOverwriteComponent(e){MR(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},PT=new ur("app-compat","Firebase",DM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:un,setLogLevel:BR,onLog:$R,apps:null,SDK_VERSION:pn,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:bM}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Di,!gT(e,c))throw PT.create("no-app",{appName:c});return e[c]}i.App=n;function s(c,d={}){const h=hv(c,d);if(gT(e,h.name))return e[h.name];const p=new n(h,t);return e[h.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,h=d.replace("-compat","");if(rr(c)&&c.type==="PUBLIC"){const p=(y=i())=>{if(typeof y[h]!="function")throw PT.create("invalid-app-argument",{appName:d});return y[h]()};c.serviceProps!==void 0&&Mh(p,c.serviceProps),t[h]=p,n.prototype[h]=function(...y){return this._getService.bind(this,d).apply(this,c.multipleInstances?y:[])}}return c.type==="PUBLIC"?t[h]:null}function l(c,d){return d==="serverAuth"?null:d}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){const n=OM(NM);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:qR,extendNamespace:e,createSubscribe:lv,ErrorFactory:ur,deepExtend:Mh};function e(t){Mh(n,t)}return n}const VM=qR();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new cc("@firebase/app-compat"),LM="@firebase/app-compat",MM="0.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(n){un(LM,MM,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=tv();if(n.firebase!==void 0){AT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&AT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ir=VM;FM();var jM="firebase",UM="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir.registerVersion(jM,UM,"app-compat");const yl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},uo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function GR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BM=$M,zM=GR,HR=new ur("auth","Firebase",GR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new cc("@firebase/auth");function WM(n,...e){jh.logLevel<=ae.WARN&&jh.warn(`Auth (${pn}): ${n}`,...e)}function Wd(n,...e){jh.logLevel<=ae.ERROR&&jh.error(`Auth (${pn}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n,...e){throw mv(n,...e)}function it(n,...e){return mv(n,...e)}function pv(n,e,t){const r={...zM(),[e]:t};return new ur("auth","Firebase",r).create(e,{appName:n.name})}function dt(n){return pv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ma(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&wt(n,"argument-error"),pv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return HR.create(n,...e)}function B(n,e,...t){if(!n)throw mv(e,...t)}function Gn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Wd(e),new Error(e)}function Fn(n,e){n||Gn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function gv(){return RT()==="http:"||RT()==="https:"}function RT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gv()||ov()||"connection"in navigator)?navigator.onLine:!0}function GM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fn(t>e,"Short delay should be less than long delay!"),this.isMobile=RR()||Ff()}get(){return qM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(n,e){Fn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KR=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QM=new dc(3e4,6e4);function We(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function qe(n,e,t,r,i={}){return QR(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=jn({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...s};return xR()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&Br(n.emulatorConfig.host)&&(c.credentials="include"),KR.fetch()(await YR(n,n.config.apiHost,t,a),c)})}async function QR(n,e,t){n._canInitEmulator=!1;const r={...HM,...e};try{const i=new JM(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw bl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw bl(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw bl(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw bl(n,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw pv(n,d,c);wt(n,d)}}catch(i){if(i instanceof ct)throw i;wt(n,"network-request-failed",{message:String(i)})}}async function zr(n,e,t,r,i={}){const s=await qe(n,e,t,r,i);return"mfaPendingCredential"in s&&wt(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function YR(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?yv(n.config,i):`${n.config.apiScheme}://${i}`;return KM.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function YM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let JM=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(it(this.auth,"network-request-failed")),QM.get())})}};function bl(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=it(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n){return n!==void 0&&n.getResponse!==void 0}function xT(n){return n!==void 0&&n.enterprise!==void 0}class JR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return YM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(n){return(await qe(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function XR(n,e){return qe(n,"GET","/v2/recaptchaConfig",We(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(n,e){return qe(n,"POST","/v1/accounts:delete",e)}async function e2(n,e){return qe(n,"POST","/v1/accounts:update",e)}async function Uh(n,e){return qe(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t2(n,e=!1){const t=Z(n),r=await t.getIdToken(e),i=Uf(r);B(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Yl(Mm(i.auth_time)),issuedAtTime:Yl(Mm(i.iat)),expirationTime:Yl(Mm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Mm(n){return Number(n)*1e3}function Uf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Wd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vf(t);return i?JSON.parse(i):(Wd("Failed to decode base64 JWT payload"),null)}catch(i){return Wd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function kT(n){const e=Uf(n);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vr(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ct&&n2(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function n2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r2=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(n){var h;const e=n.auth,t=await n.getIdToken(),r=await Vr(n,Uh(e,{idToken:t}));B(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?ZR(i.providerUserInfo):[],o=s2(n.providerData,s),a=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new oy(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(n,d)}async function i2(n){const e=Z(n);await Ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function s2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ZR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(n,e){const t=await QR(n,{},async()=>{const r=jn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await YR(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&Br(n.emulatorConfig.host)&&(l.credentials="include"),KR.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function a2(n,e){return qe(n,"POST","/v2/accounts:revokeToken",We(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fm=class ay{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){B(e.length!==0,"internal-error");const t=kT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await o2(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new ay;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(B(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(B(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ay,this.toJSON())}_performRefresh(){return Gn("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(n,e){B(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}let jo=class Nl{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new r2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new oy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Vr(this,this.stsTokenManager.getToken(this.auth,e));return B(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return t2(this,e)}reload(){return i2(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ou(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pe(this.auth.app))return Promise.reject(dt(this.auth));const e=await this.getIdToken();return await Vr(this,ZM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:y,providerData:v,stsTokenManager:T}=t;B(h&&T,e,"internal-error");const x=Fm.fromJSON(this.name,T);B(typeof h=="string",e,"internal-error"),Zr(r,e.name),Zr(i,e.name),B(typeof p=="boolean",e,"internal-error"),B(typeof y=="boolean",e,"internal-error"),Zr(s,e.name),Zr(o,e.name),Zr(a,e.name),Zr(l,e.name),Zr(c,e.name),Zr(d,e.name);const _=new Nl({uid:h,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:x,createdAt:c,lastLoginAt:d});return v&&Array.isArray(v)&&(_.providerData=v.map(w=>({...w}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,t,r=!1){const i=new Fm;i.updateFromServerResponse(t);const s=new Nl({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ou(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];B(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ZR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Fm;a.updateFromIdToken(r);const l=new Nl({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new oy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=new Map;function on(n){Fn(n instanceof Function,"Expected a class definition");let e=bT.get(n);return e?(Fn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eC=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};eC.type="NONE";const ua=eC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(n,e,t){return`firebase:${n}:${e}:${t}`}let NT=class qd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ps(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ps("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Uh(this.auth,{idToken:e}).catch(()=>{});return t?jo._fromGetAccountInfoResponse(this.auth,t,e):null}return jo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new qd(on(ua),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||on(ua);const o=Ps(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await Uh(e,{idToken:d}).catch(()=>{});if(!p)break;h=await jo._fromGetAccountInfoResponse(e,p,d)}else h=jo._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new qd(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new qd(s,e,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sC(e))return"Blackberry";if(oC(e))return"Webos";if(nC(e))return"Safari";if((e.includes("chrome/")||rC(e))&&!e.includes("edge/"))return"Chrome";if(hc(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tC(n=de()){return/firefox\//i.test(n)}function nC(n=de()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rC(n=de()){return/crios\//i.test(n)}function iC(n=de()){return/iemobile/i.test(n)}function hc(n=de()){return/android/i.test(n)}function sC(n=de()){return/blackberry/i.test(n)}function oC(n=de()){return/webos/i.test(n)}function fc(n=de()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function l2(n=de()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function u2(n=de()){var e;return fc(n)&&!!((e=window.navigator)!=null&&e.standalone)}function c2(){return av()&&document.documentMode===10}function aC(n=de()){return fc(n)||hc(n)||oC(n)||sC(n)||/windows phone/i.test(n)||iC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n,e=[]){let t;switch(n){case"Browser":t=DT(de());break;case"Worker":t=`${DT(de())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pn}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d2=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h2(n,e={}){return qe(n,"GET","/v2/passwordPolicy",We(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=6;let p2=class{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??f2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m2=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OT(this),this.idTokenSubscription=new OT(this),this.beforeStateQueue=new d2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=on(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await NT.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Uh(this,{idToken:e}),r=await jo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(pe(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ou(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pe(this.app))return Promise.reject(dt(this));const t=e?Z(e):null;return t&&B(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pe(this.app)?Promise.reject(dt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pe(this.app)?Promise.reject(dt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(on(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await h2(this),t=new p2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ur("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await a2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&on(e)||this._popupRedirectResolver;B(t,this,"argument-error"),this.redirectPersistenceManager=await NT.create(this,[on(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(pe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&WM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}};function Ue(n){return Z(n)}let OT=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=lv(t=>this.observer=t)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g2(n){pc=n}function _v(n){return pc.loadJS(n)}function y2(){return pc.recaptchaV2Script}function _2(){return pc.recaptchaEnterpriseScript}function v2(){return pc.gapiScript}function uC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=500,E2=6e4,vd=1e12;class I2{constructor(e){this.auth=e,this.counter=vd,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new P2(e,this.auth.name,t||{})),this.counter++,r}reset(e){var r;const t=e||vd;(r=this._widgets.get(t))==null||r.delete(),this._widgets.delete(t)}getResponse(e){var r;const t=e||vd;return((r=this._widgets.get(t))==null?void 0:r.getResponse())||""}async execute(e){var r;const t=e||vd;return(r=this._widgets.get(t))==null||r.execute(),""}}class T2{constructor(){this.enterprise=new S2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class S2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class P2{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;B(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=A2(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},E2)},w2))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function A2(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const R2="recaptcha-enterprise",Jl="NO_RECAPTCHA";class cC{constructor(e){this.type=R2,this.auth=Ue(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{XR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new JR(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;xT(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Jl)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new T2().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&xT(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=_2();l.length!==0&&(l+=a),_v(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function _l(n,e,t,r=!1,i=!1){const s=new cC(n);let o;if(i)o=Jl;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ri(n,e,t,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await _l(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await _l(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await _l(n,e,t);return r(n,a).catch(async l=>{var c;if(((c=n._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const d=await _l(n,e,t,!1,!0);return r(n,d)}return Promise.reject(l)})}else{const a=await _l(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}async function C2(n){const e=Ue(n),t=await XR(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new JR(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new cC(e).verify()}function x2(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(on);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function k2(n,e,t){const r=Ue(n);B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=dC(e),{host:o,port:a}=b2(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){B(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),B(Mn(c,r.config.emulator)&&Mn(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Br(o)?(iv(`${s}//${o}${l}`),sv("Auth",!0)):i||N2()}function dC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function b2(n){const e=dC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:VT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:VT(o)}}}function VT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function N2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fa=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gn("not implemented")}_getIdTokenResponse(e){return Gn("not implemented")}_linkToIdToken(e,t){return Gn("not implemented")}_getReauthenticationResolver(e){return Gn("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(n,e){return qe(n,"POST","/v1/accounts:resetPassword",We(n,e))}async function D2(n,e){return qe(n,"POST","/v1/accounts:update",e)}async function O2(n,e){return qe(n,"POST","/v1/accounts:signUp",e)}async function V2(n,e){return qe(n,"POST","/v1/accounts:update",We(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(n,e){return zr(n,"POST","/v1/accounts:signInWithPassword",We(n,e))}async function $f(n,e){return qe(n,"POST","/v1/accounts:sendOobCode",We(n,e))}async function M2(n,e){return $f(n,e)}async function F2(n,e){return $f(n,e)}async function j2(n,e){return $f(n,e)}async function U2(n,e){return $f(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(n,e){return zr(n,"POST","/v1/accounts:signInWithEmailLink",We(n,e))}async function B2(n,e){return zr(n,"POST","/v1/accounts:signInWithEmailLink",We(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends Fa{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Vu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Vu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ri(e,t,"signInWithPassword",L2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return $2(e,{email:this._email,oobCode:this._password});default:wt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ri(e,r,"signUpPassword",O2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return B2(e,{idToken:t,email:this._email,oobCode:this._password});default:wt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cr(n,e){return zr(n,"POST","/v1/accounts:signInWithIdp",We(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="http://localhost";let Os=class ly extends Fa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ly(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const o=new ly(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Cr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Cr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Cr(e,t)}buildRequest(){const e={requestUri:z2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=jn(t)}return e}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(n,e){return qe(n,"POST","/v1/accounts:sendVerificationCode",We(n,e))}async function W2(n,e){return zr(n,"POST","/v1/accounts:signInWithPhoneNumber",We(n,e))}async function q2(n,e){const t=await zr(n,"POST","/v1/accounts:signInWithPhoneNumber",We(n,e));if(t.temporaryProof)throw bl(n,"account-exists-with-different-credential",t);return t}const G2={USER_NOT_FOUND:"user-not-found"};async function H2(n,e){const t={...e,operation:"REAUTH"};return zr(n,"POST","/v1/accounts:signInWithPhoneNumber",We(n,t),G2)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Fa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new As({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new As({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return W2(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return q2(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return H2(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new As({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Q2(n){const e=Fo(kl(n)).link,t=e?Fo(kl(e)).deep_link_id:null,r=Fo(kl(n)).deep_link_id;return(r?Fo(kl(r)).link:null)||r||t||e||n}class Bf{constructor(e){const t=Fo(kl(e)),r=t.apiKey??null,i=t.oobCode??null,s=K2(t.mode??null);B(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Q2(e);try{return new Bf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.providerId=Gi.PROVIDER_ID}static credential(e,t){return Vu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Bf.parseLink(t);return B(r,"argument-error"),Vu._fromEmailAndCode(e,r.code,r.tenantId)}}Gi.PROVIDER_ID="password";Gi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wr=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja=class extends Wr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};class Go extends ja{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return B("providerId"in t&&"signInMethod"in t,"argument-error"),Os._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return B(e.idToken||e.accessToken,"argument-error"),Os._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Go.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Go.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!t&&!s||!a)return null;try{return new Go(a)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf=class yo extends ja{constructor(){super("facebook.com")}static credential(e){return Os._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yo.credential(e.oauthAccessToken)}catch{return null}}};zf.FACEBOOK_SIGN_IN_METHOD="facebook.com";zf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wf=class _o extends ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Os._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _o.credential(t,r)}catch{return null}}};Wf.GOOGLE_SIGN_IN_METHOD="google.com";Wf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf=class vo extends ja{constructor(){super("github.com")}static credential(e){return Os._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vo.credential(e.oauthAccessToken)}catch{return null}}};qf.GITHUB_SIGN_IN_METHOD="github.com";qf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="http://localhost";class ca extends Fa{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Cr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Cr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Cr(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new ca(r,s)}static _create(e,t){return new ca(e,t)}buildRequest(){return{requestUri:Y2,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="saml.";class $h extends Wr{constructor(e){B(e.startsWith(J2),"argument-error"),super(e)}static credentialFromResult(e){return $h.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return $h.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=ca.fromJSON(e);return B(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return ca._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf=class wo extends ja{constructor(){super("twitter.com")}static credential(e,t){return Os._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return wo.credential(t,r)}catch{return null}}};Gf.TWITTER_SIGN_IN_METHOD="twitter.com";Gf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(n,e){return zr(n,"POST","/v1/accounts:signUp",We(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lr=class uy{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await jo._fromIdTokenResponse(e,r,i),o=MT(r);return new uy({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=MT(r);return new uy({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function MT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(n){var i;if(pe(n.app))return Promise.reject(dt(n));const e=Ue(n);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new Lr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await fC(e,{returnSecureToken:!0}),r=await Lr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z2=class cy extends ct{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cy.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new cy(e,t,r,i)}};function pC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Z2._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(n,e){const t=Z(n);await Hf(!0,t,e);const{providerUserInfo:r}=await e2(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=mC(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function vv(n,e,t=!1){const r=await Vr(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Lr._forOperation(n,"link",r)}async function Hf(n,e,t){await Ou(e);const r=mC(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";B(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(n,e,t=!1){const{auth:r}=n;if(pe(r.app))return Promise.reject(dt(r));const i="reauthenticate";try{const s=await Vr(n,pC(r,i,e,n),t);B(s.idToken,r,"internal-error");const o=Uf(s.idToken);B(o,r,"internal-error");const{sub:a}=o;return B(n.uid===a,r,"user-mismatch"),Lr._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&wt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(n,e,t=!1){if(pe(n.app))return Promise.reject(dt(n));const r="signIn",i=await pC(n,r,e),s=await Lr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function Kf(n,e){return yC(Ue(n),e)}async function _C(n,e){const t=Z(n);return await Hf(!1,t,e.providerId),vv(t,e)}async function vC(n,e){return gC(Z(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(n,e){return zr(n,"POST","/v1/accounts:signInWithCustomToken",We(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(n,e){if(pe(n.app))return Promise.reject(dt(n));const t=Ue(n),r=await tF(t,{token:e,returnSecureToken:!0}),i=await Lr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?wv._fromServerResponse(e,t):"totpInfo"in t?Ev._fromServerResponse(e,t):wt(e,"internal-error")}}class wv extends mc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new wv(t)}}class Ev extends mc{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Ev(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(n,e,t){var r;B(((r=t.url)==null?void 0:r.length)>0,n,"invalid-continue-uri"),B(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),B(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(B(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(B(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iv(n){const e=Ue(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rF(n,e,t){const r=Ue(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Qf(r,i,t),await Ri(r,i,"getOobCode",F2,"EMAIL_PASSWORD_PROVIDER")}async function iF(n,e,t){await hC(Z(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Iv(n),r})}async function sF(n,e){await V2(Z(n),{oobCode:e})}async function wC(n,e){const t=Z(n),r=await hC(t,{oobCode:e}),i=r.requestType;switch(B(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(r.mfaInfo,t,"internal-error");default:B(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=mc._fromServerResponse(Ue(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function oF(n,e){const{data:t}=await wC(Z(n),e);return t.email}async function aF(n,e,t){if(pe(n.app))return Promise.reject(dt(n));const r=Ue(n),o=await Ri(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fC,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Iv(n),l}),a=await Lr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function lF(n,e,t){return pe(n.app)?Promise.reject(dt(n)):Kf(Z(n),Gi.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Iv(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uF(n,e,t){const r=Ue(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){B(a.handleCodeInApp,r,"argument-error"),a&&Qf(r,o,a)}s(i,t),await Ri(r,i,"getOobCode",j2,"EMAIL_PASSWORD_PROVIDER")}function cF(n,e){const t=Bf.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function dF(n,e,t){if(pe(n.app))return Promise.reject(dt(n));const r=Z(n),i=Gi.credentialWithLink(e,t||Du());return B(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Kf(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(n,e){return qe(n,"POST","/v1/accounts:createAuthUri",We(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(n,e){const t=gv()?Du():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await hF(Z(n),r);return i||[]}async function pF(n,e){const t=Z(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Qf(t.auth,i,e);const{email:s}=await M2(t.auth,i);s!==n.email&&await n.reload()}async function mF(n,e,t){const r=Z(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Qf(r.auth,s,t);const{email:o}=await U2(r.auth,s);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gF(n,e){return qe(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Z(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Vr(r,gF(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function _F(n,e){const t=Z(n);return pe(t.auth.app)?Promise.reject(dt(t.auth)):EC(t,e,null)}function vF(n,e){return EC(Z(n),null,e)}async function EC(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=await Vr(n,D2(r,s));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(n){var i,s;if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(n!=null&&n.idToken)){const o=(s=(i=Uf(n.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Ho(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new EF(r,t);case"github.com":return new IF(r,t);case"google.com":return new TF(r,t);case"twitter.com":return new SF(r,t,n.screenName||null);case"custom":case"anonymous":return new Ho(r,null);default:return new Ho(r,e,t)}}class Ho{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class IC extends Ho{constructor(e,t,r,i){super(e,t,r),this.username=i}}class EF extends Ho{constructor(e,t){super(e,"facebook.com",t)}}class IF extends IC{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class TF extends Ho{constructor(e,t){super(e,"google.com",t)}}class SF extends IC{constructor(e,t,r){super(e,"twitter.com",t,r)}}function PF(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:wF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new _s("enroll",e,t)}static _fromMfaPendingCredential(e){return new _s("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return _s._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return _s._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Ue(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>mc._fromServerResponse(r,a));B(i.mfaPendingCredential,r,"internal-error");const o=_s._fromMfaPendingCredential(i.mfaPendingCredential);return new Tv(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c={...i,idToken:l.idToken,refreshToken:l.refreshToken};switch(t.operationType){case"signIn":const d=await Lr._fromIdTokenResponse(r,t.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return B(t.user,r,"internal-error"),Lr._forOperation(t.user,t.operationType,c);default:wt(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function AF(n,e){var i;const t=Z(n),r=e;return B(e.customData.operationType,t,"argument-error"),B((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,t,"argument-error"),Tv._fromError(t,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(n,e){return qe(n,"POST","/v2/accounts/mfaEnrollment:start",We(n,e))}function RF(n,e){return qe(n,"POST","/v2/accounts/mfaEnrollment:finalize",We(n,e))}function CF(n,e){return qe(n,"POST","/v2/accounts/mfaEnrollment:withdraw",We(n,e))}class Sv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>mc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Sv(e)}async getSession(){return _s._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await Vr(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Vr(this.user,CF(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const jm=new WeakMap;function xF(n){const e=Z(n);return jm.has(e)||jm.set(e,Sv._fromUser(e)),jm.get(e)}const Bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TC=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=1e3,bF=10;let SC=class extends TC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);c2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bF):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},kF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};SC.type="LOCAL";const Pv=SC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PC=class extends TC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}};PC.type="SESSION";const Vs=PC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AC=class RC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new RC(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await NF(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};AC.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DF=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=gc("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(){return window}function OF(n){Ze().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(){return typeof Ze().WorkerGlobalScope<"u"&&typeof Ze().importScripts=="function"}async function VF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function MF(){return Av()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="firebaseLocalStorageDb",FF=1,zh="firebaseLocalStorage",xC="fbase_key";let yc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Yf(n,e){return n.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function jF(){const n=indexedDB.deleteDatabase(CC);return new yc(n).toPromise()}function dy(){const n=indexedDB.open(CC,FF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(zh,{keyPath:xC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(zh)?e(r):(r.close(),await jF(),e(await dy()))})})}async function jT(n,e,t){const r=Yf(n,!0).put({[xC]:e,value:t});return new yc(r).toPromise()}async function UF(n,e){const t=Yf(n,!1).get(e),r=await new yc(t).toPromise();return r===void 0?null:r.value}function UT(n,e){const t=Yf(n,!0).delete(e);return new yc(t).toPromise()}const $F=800,BF=3;let kC=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>BF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Av()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=AC._getInstance(MF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await VF(),!this.activeServiceWorker)return;this.sender=new DF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dy();return await jT(e,Bh,"1"),await UT(e,Bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>jT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>UF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>UT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Yf(i,!1).getAll();return new yc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$F)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};kC.type="LOCAL";const Lu=kC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(n,e){return qe(n,"POST","/v2/accounts/mfaSignIn:start",We(n,e))}function zF(n,e){return qe(n,"POST","/v2/accounts/mfaSignIn:finalize",We(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=uC("rcb"),WF=new dc(3e4,6e4);class qF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Ze().grecaptcha)!=null&&e.render)}load(e,t=""){return B(GF(t),e,"argument-error"),this.shouldResolveImmediately(t)&&CT(Ze().grecaptcha)?Promise.resolve(Ze().grecaptcha):new Promise((r,i)=>{const s=Ze().setTimeout(()=>{i(it(e,"network-request-failed"))},WF.get());Ze()[Um]=()=>{Ze().clearTimeout(s),delete Ze()[Um];const a=Ze().grecaptcha;if(!a||!CT(a)){i(it(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const h=l(c,d);return this.counter++,h},this.hostLanguage=t,r(a)};const o=`${y2()}?${jn({onload:Um,render:"explicit",hl:t})}`;_v(o).catch(()=>{clearTimeout(s),i(it(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=Ze().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function GF(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class HF{async load(e){return new I2(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl="recaptcha",KF={theme:"light",type:"image"};let QF=class{constructor(e,t,r={...KF}){this.parameters=r,this.type=Xl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ue(e),this.isInvisible=this.parameters.size==="invisible",B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;B(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new HF:new qF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Ze()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){B(gv()&&!Av(),this.auth,"internal-error"),await YF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await XM(this.auth);B(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function YF(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=As._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function JF(n,e,t){if(pe(n.app))return Promise.reject(dt(n));const r=Ue(n),i=await Jf(r,e,Z(t));return new Rv(i,s=>Kf(r,s))}async function XF(n,e,t){const r=Z(n);await Hf(!1,r,"phone");const i=await Jf(r.auth,e,Z(t));return new Rv(i,s=>_C(r,s))}async function ZF(n,e,t){const r=Z(n);if(pe(r.auth.app))return Promise.reject(dt(r.auth));const i=await Jf(r.auth,e,Z(t));return new Rv(i,s=>vC(r,s))}async function Jf(n,e,t){var r;if(!n._getRecaptchaConfig())try{await C2(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){B(s.type==="enroll",n,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ri(n,o,"mfaSmsEnrollment",async(d,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===Jl){B((t==null?void 0:t.type)===Xl,d,"argument-error");const p=await $m(d,h,t);return FT(d,p)}return FT(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{B(s.type==="signin",n,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;B(o,n,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ri(n,a,"mfaSmsSignIn",async(h,p)=>{if(p.phoneSignInInfo.captchaResponse===Jl){B((t==null?void 0:t.type)===Xl,h,"argument-error");const y=await $m(h,p,t);return $T(h,y)}return $T(h,p)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ri(n,s,"sendVerificationCode",async(c,d)=>{if(d.captchaResponse===Jl){B((t==null?void 0:t.type)===Xl,c,"argument-error");const h=await $m(c,d,t);return LT(c,h)}return LT(c,d)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{t==null||t._reset()}}async function ej(n,e){const t=Z(n);if(pe(t.auth.app))return Promise.reject(dt(t.auth));await vv(t,e)}async function $m(n,e,t){B(t.type===Xl,n,"argument-error");const r=await t.verify();B(typeof r=="string",n,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ls=class Gd{constructor(e){this.providerId=Gd.PROVIDER_ID,this.auth=Ue(e)}verifyPhoneNumber(e,t){return Jf(this.auth,e,Z(t))}static credential(e,t){return As._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Gd.credentialFromTaggedObject(t)}static credentialFromError(e){return Gd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?As._fromTokenResponse(t,r):null}};Ls.PROVIDER_ID="phone";Ls.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(n,e){return e?on(e):(B(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cv=class extends Fa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function tj(n){return yC(n.auth,new Cv(n),n.bypassAuthState)}function nj(n){const{auth:e,user:t}=n;return B(t,e,"internal-error"),gC(t,new Cv(n),n.bypassAuthState)}async function rj(n){const{auth:e,user:t}=n;return B(t,e,"internal-error"),vv(t,new Cv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bC=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tj;case"linkViaPopup":case"linkViaRedirect":return rj;case"reauthViaPopup":case"reauthViaRedirect":return nj;default:wt(this.auth,"internal-error")}}resolve(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new dc(2e3,1e4);async function sj(n,e,t){if(pe(n.app))return Promise.reject(it(n,"operation-not-supported-in-this-environment"));const r=Ue(n);Ma(n,e,Wr);const i=Xs(r,t);return new Xf(r,"signInViaPopup",e,i).executeNotNull()}async function oj(n,e,t){const r=Z(n);if(pe(r.auth.app))return Promise.reject(it(r.auth,"operation-not-supported-in-this-environment"));Ma(r.auth,e,Wr);const i=Xs(r.auth,t);return new Xf(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function aj(n,e,t){const r=Z(n);Ma(r.auth,e,Wr);const i=Xs(r.auth,t);return new Xf(r.auth,"linkViaPopup",e,i,r).executeNotNull()}let Xf=class Dl extends bC{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Dl.currentPopupAction&&Dl.currentPopupAction.cancel(),Dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return B(e,this.auth,"internal-error"),e}async onExecution(){Fn(this.filter.length===1,"Popup operations only handle one event");const e=gc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(it(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(it(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(it(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ij.get())};e()}};Xf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj="pendingRedirect",Zl=new Map;let uj=class extends bC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zl.get(this.auth._key());if(!e){try{const r=await cj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zl.set(this.auth._key(),e)}return this.bypassAuthState||Zl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function cj(n,e){const t=DC(e),r=NC(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function xv(n,e){return NC(n)._set(DC(e),"true")}function dj(){Zl.clear()}function kv(n,e){Zl.set(n._key(),e)}function NC(n){return on(n._redirectPersistence)}function DC(n){return Ps(lj,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(n,e,t){return fj(n,e,t)}async function fj(n,e,t){if(pe(n.app))return Promise.reject(dt(n));const r=Ue(n);Ma(n,e,Wr),await r._initializationPromise;const i=Xs(r,t);return await xv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function pj(n,e,t){return mj(n,e,t)}async function mj(n,e,t){const r=Z(n);if(Ma(r.auth,e,Wr),pe(r.auth.app))return Promise.reject(dt(r.auth));await r.auth._initializationPromise;const i=Xs(r.auth,t);await xv(i,r.auth);const s=await OC(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function gj(n,e,t){return yj(n,e,t)}async function yj(n,e,t){const r=Z(n);Ma(r.auth,e,Wr),await r.auth._initializationPromise;const i=Xs(r.auth,t);await Hf(!1,r,e.providerId),await xv(i,r.auth);const s=await OC(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function _j(n,e){return await Ue(n)._initializationPromise,Zf(n,e,!1)}async function Zf(n,e,t=!1){if(pe(n.app))return Promise.reject(dt(n));const r=Ue(n),i=Xs(r,e),o=await new uj(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function OC(n){const e=gc(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=10*60*1e3;let VC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!LC(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(it(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vj&&this.cachedEventUids.clear(),this.cachedEventUids.has(BT(e))}saveEventToCache(e){this.cachedEventUids.add(BT(e)),this.lastProcessedEventTime=Date.now()}};function BT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function LC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(n,e={}){return qe(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ij=/^https?/;async function Tj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await MC(n);for(const t of e)try{if(Sj(t))return}catch{}wt(n,"unauthorized-domain")}function Sj(n){const e=Du(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Ij.test(t))return!1;if(Ej.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=new dc(3e4,6e4);function zT(){const n=Ze().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Aj(n){return new Promise((e,t)=>{var i,s,o;function r(){zT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zT(),t(it(n,"network-request-failed"))},timeout:Pj.get()})}if((s=(i=Ze().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Ze().gapi)!=null&&o.load)r();else{const a=uC("iframefcb");return Ze()[a]=()=>{gapi.load?r():t(it(n,"network-request-failed"))},_v(`${v2()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Hd=null,e})}let Hd=null;function Rj(n){return Hd=Hd||Aj(n),Hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=new dc(5e3,15e3),xj="__/auth/iframe",kj="emulator/auth/iframe",bj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dj(n){const e=n.config;B(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?yv(e,kj):`https://${n.config.authDomain}/${xj}`,r={apiKey:e.apiKey,appName:n.name,v:pn},i=Nj.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${jn(r).slice(1)}`}async function Oj(n){const e=await Rj(n),t=Ze().gapi;return B(t,n,"internal-error"),e.open({where:document.body,url:Dj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bj,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=it(n,"network-request-failed"),a=Ze().setTimeout(()=>{s(o)},Cj.get());function l(){Ze().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lj=500,Mj=600,Fj="_blank",jj="http://localhost";let WT=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Uj(n,e,t,r=Lj,i=Mj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...Vj,width:r.toString(),height:i.toString(),top:s,left:o},c=de().toLowerCase();t&&(a=rC(c)?Fj:t),tC(c)&&(e=e||jj,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[y,v])=>`${p}${y}=${v},`,"");if(u2(c)&&a!=="_self")return $j(e||"",a),new WT(null);const h=window.open(e||"",a,d);B(h,n,"popup-blocked");try{h.focus()}catch{}return new WT(h)}function $j(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="__/auth/handler",zj="emulator/auth/handler",Wj=encodeURIComponent("fac");async function hy(n,e,t,r,i,s){B(n.config.authDomain,n,"auth-domain-config-required"),B(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pn,eventId:i};if(e instanceof Wr){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",NR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof ja){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),c=l?`#${Wj}=${encodeURIComponent(l)}`:"";return`${qj(n)}?${jn(a).slice(1)}${c}`}function qj({config:n}){return n.emulator?yv(n,zj):`https://${n.authDomain}/${Bj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="webStorageSupport";let Gj=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vs,this._completeRedirectFn=Zf,this._overrideRedirectResult=kv}async _openPopup(e,t,r,i){var o;Fn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await hy(e,t,r,Du(),i);return Uj(e,s,gc())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await hy(e,t,r,Du(),i);return OF(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Fn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Oj(e),r=new VC(e);return t.register("authEvent",i=>(B(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bm,{type:Bm},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Bm];s!==void 0&&t(!!s),wt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Tj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return aC()||nC()||fc()}};const Hj=Gj;class Kj{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Gn("unexpected MultiFactorSessionType")}}}class bv extends Kj{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new bv(e)}_finalizeEnroll(e,t,r){return RF(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return zF(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class FC{constructor(){}static assertion(e){return bv._fromCredential(e)}}FC.FACTOR_ID="phone";var qT="@firebase/auth",GT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qj=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jj(n){rr(new Tn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lC(n)},c=new m2(r,i,s,l);return x2(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),rr(new Tn("auth-internal",e=>{const t=Ue(e.getProvider("auth").getImmediate());return(r=>new Qj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),un(qT,GT,Yj(n)),un(qT,GT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=5*60;rv("authIdTokenMaxAge");function Zj(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}g2({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=it("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Zj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jj("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU=2e3;async function tU(n,e,t){const{BuildInfo:r}=Ms();Fn(e.sessionId,"AuthEvent did not contain a session ID");const i=await oU(e.sessionId),s={};return fc()?s.ibi=r.packageName:hc()?s.apn=r.packageName:wt(n,"operation-not-supported-in-this-environment"),r.displayName&&(s.appDisplayName=r.displayName),s.sessionId=i,hy(n,t,e.type,void 0,e.eventId??void 0,s)}async function nU(n){const{BuildInfo:e}=Ms(),t={};fc()?t.iosBundleId=e.packageName:hc()?t.androidPackageName=e.packageName:wt(n,"operation-not-supported-in-this-environment"),await MC(n,t)}function rU(n){const{cordova:e}=Ms();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,l2()?"_blank":"_system","location=yes"),t(i)})})}async function iU(n,e,t){const{cordova:r}=Ms();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var p;s();const h=(p=r.plugins.browsertab)==null?void 0:p.close;typeof h=="function"&&h(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function c(){a||(a=window.setTimeout(()=>{o(it(n,"redirect-cancelled-by-user"))},eU))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),hc()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function sU(n){var t,r,i,s,o,a,l,c,d,h;const e=Ms();B(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B(typeof((o=(s=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:s.browsertab)==null?void 0:o.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B(typeof((c=(l=(a=e==null?void 0:e.cordova)==null?void 0:a.plugins)==null?void 0:l.browsertab)==null?void 0:c.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B(typeof((h=(d=e==null?void 0:e.cordova)==null?void 0:d.InAppBrowser)==null?void 0:h.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function oU(n){const e=aU(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function aU(n){if(Fn(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=20;class uU extends VC{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function cU(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:fU(),postBody:null,tenantId:n.tenantId,error:it(n,"no-auth-event")}}function dU(n,e){return fy()._set(py(n),e)}async function HT(n){const e=await fy()._get(py(n));return e&&await fy()._remove(py(n)),e}function hU(n,e){var r,i;const t=mU(e);if(t.includes("/__/auth/callback")){const s=Kd(t),o=s.firebaseError?pU(decodeURIComponent(s.firebaseError)):null,a=(i=(r=o==null?void 0:o.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],l=a?it(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function fU(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<lU;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function fy(){return on(Pv)}function py(n){return Ps("authEvent",n.config.apiKey,n.name)}function pU(n){try{return JSON.parse(n)}catch{return null}}function mU(n){const e=Kd(n),t=e.link?decodeURIComponent(e.link):void 0,r=Kd(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Kd(i).link||i||r||t||n}function Kd(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return Fo(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=500;class yU{constructor(){this._redirectPersistence=Vs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Zf,this._overrideRedirectResult=kv}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new uU(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){wt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){sU(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),dj(),await this._originValidation(e);const o=cU(e,r,i);await dU(e,o);const a=await tU(e,o,t),l=await rU(a);return iU(e,s,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nU(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Ms(),o=setTimeout(async()=>{await HT(e),t.onEvent(KT())},gU),a=async d=>{clearTimeout(o);const h=await HT(e);let p=null;h&&(d!=null&&d.url)&&(p=hU(h,d.url)),t.onEvent(p||KT())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;Ms().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&a({url:d}),typeof l=="function")try{l(d)}catch(h){console.error(h)}}}}const _U=yU;function KT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:it("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(n,e){Ue(n)._logFramework(e)}var wU="@firebase/auth-compat",EU="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=1e3;function eu(){var n;return((n=self==null?void 0:self.location)==null?void 0:n.protocol)||null}function TU(){return eu()==="http:"||eu()==="https:"}function jC(n=de()){return!!((eu()==="file:"||eu()==="ionic:"||eu()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function SU(){return Ff()||Mf()}function PU(){return av()&&(document==null?void 0:document.documentMode)===11}function AU(n=de()){return/Edge\/\d+/.test(n)}function RU(n=de()){return PU()||AU(n)}function UC(){try{const n=self.localStorage,e=gc();if(n)return n.setItem(e,"1"),n.removeItem(e),RU()?ku():!0}catch{return Nv()&&ku()}return!1}function Nv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zm(){return(TU()||ov()||jC())&&!SU()&&UC()&&!Nv()}function $C(){return jC()&&typeof document<"u"}async function CU(){return $C()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},IU);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function xU(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn={LOCAL:"local",NONE:"none",SESSION:"session"},vl=B,BC="persistence";function kU(n,e){if(vl(Object.values(rn).includes(e),n,"invalid-persistence-type"),Ff()){vl(e!==rn.SESSION,n,"unsupported-persistence-type");return}if(Mf()){vl(e===rn.NONE,n,"unsupported-persistence-type");return}if(Nv()){vl(e===rn.NONE||e===rn.LOCAL&&ku(),n,"unsupported-persistence-type");return}vl(e===rn.NONE||UC(),n,"unsupported-persistence-type")}async function my(n){await n._initializationPromise;const e=zC(),t=Ps(BC,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function bU(n,e){const t=zC();if(!t)return[];const r=Ps(BC,n,e);switch(t.getItem(r)){case rn.NONE:return[ua];case rn.LOCAL:return[Lu,Vs];case rn.SESSION:return[Vs];default:return[]}}function zC(){var n;try{return((n=xU())==null?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=B;class pi{constructor(){this.browserResolver=on(Hj),this.cordovaResolver=on(_U),this.underlyingResolver=null,this._redirectPersistence=Vs,this._completeRedirectFn=Zf,this._overrideRedirectResult=kv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return $C()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return NU(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await CU();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(n){return n.unwrap()}function DU(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(n){return qC(n)}function VU(n,e){var r;const t=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new LU(n,AF(n,e))}else if(t){const i=qC(e),s=e;i&&(s.credential=i,s.tenantId=t.tenantId||void 0,s.email=t.email||void 0,s.phoneNumber=t.phoneNumber||void 0)}}function qC(n){const{_tokenResponse:e}=n instanceof ct?n.customData:n;if(!e)return null;if(!(n instanceof ct)&&"temporaryProof"in e&&"phoneNumber"in e)return Ls.credentialFromResult(n);const t=e.providerId;if(!t||t===yl.PASSWORD)return null;let r;switch(t){case yl.GOOGLE:r=Wf;break;case yl.FACEBOOK:r=zf;break;case yl.GITHUB:r=qf;break;case yl.TWITTER:r=Gf;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?t.startsWith("saml.")?ca._create(t,a):Os._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:i,accessToken:s}):new Go(t).credential({idToken:i,accessToken:s,rawNonce:l})}return n instanceof ct?r.credentialFromError(n):r.credentialFromResult(n)}function Wt(n,e){return e.catch(t=>{throw t instanceof ct&&VU(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:OU(t),additionalUserInfo:PF(t),user:ep.getOrCreate(i)}})}async function gy(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Wt(n,t.confirm(r))}}class LU{constructor(e,t){this.resolver=t,this.auth=DU(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Wt(WC(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep=class Ol{constructor(e){this._delegate=e,this.multiFactor=xF(e)}static getOrCreate(e){return Ol.USER_MAP.has(e)||Ol.USER_MAP.set(e,new Ol(e)),Ol.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Wt(this.auth,_C(this._delegate,e))}async linkWithPhoneNumber(e,t){return gy(this.auth,XF(this._delegate,e,t))}async linkWithPopup(e){return Wt(this.auth,aj(this._delegate,e,pi))}async linkWithRedirect(e){return await my(Ue(this.auth)),gj(this._delegate,e,pi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Wt(this.auth,vC(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return gy(this.auth,ZF(this._delegate,e,t))}reauthenticateWithPopup(e){return Wt(this.auth,oj(this._delegate,e,pi))}async reauthenticateWithRedirect(e){return await my(Ue(this.auth)),pj(this._delegate,e,pi)}sendEmailVerification(e){return pF(this._delegate,e)}async unlink(e){return await eF(this._delegate,e),this}updateEmail(e){return _F(this._delegate,e)}updatePassword(e){return vF(this._delegate,e)}updatePhoneNumber(e){return ej(this._delegate,e)}updateProfile(e){return yF(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return mF(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};ep.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=B;class yy{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;wl(r,"invalid-api-key",{appName:e.name}),wl(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?pi:void 0;this._delegate=t.initialize({options:{persistence:MU(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(BM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ep.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){k2(this._delegate,e,t)}applyActionCode(e){return sF(this._delegate,e)}checkActionCode(e){return wC(this._delegate,e)}confirmPasswordReset(e,t){return iF(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Wt(this._delegate,aF(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return fF(this._delegate,e)}isSignInWithEmailLink(e){return cF(this._delegate,e)}async getRedirectResult(){wl(zm(),this._delegate,"operation-not-supported-in-this-environment");const e=await _j(this._delegate,pi);return e?Wt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){vU(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:o}=QT(e,t,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:o}=QT(e,t,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,t){return uF(this._delegate,e,t)}sendPasswordResetEmail(e,t){return rF(this._delegate,e,t||void 0)}async setPersistence(e){kU(this._delegate,e);let t;switch(e){case rn.SESSION:t=Vs;break;case rn.LOCAL:t=await on(Lu)._isAvailable()?Lu:Pv;break;case rn.NONE:t=ua;break;default:return wt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Wt(this._delegate,X2(this._delegate))}signInWithCredential(e){return Wt(this._delegate,Kf(this._delegate,e))}signInWithCustomToken(e){return Wt(this._delegate,nF(this._delegate,e))}signInWithEmailAndPassword(e,t){return Wt(this._delegate,lF(this._delegate,e,t))}signInWithEmailLink(e,t){return Wt(this._delegate,dF(this._delegate,e,t))}signInWithPhoneNumber(e,t){return gy(this._delegate,JF(this._delegate,e,t))}async signInWithPopup(e){return wl(zm(),this._delegate,"operation-not-supported-in-this-environment"),Wt(this._delegate,sj(this._delegate,e,pi))}async signInWithRedirect(e){return wl(zm(),this._delegate,"operation-not-supported-in-this-environment"),await my(this._delegate),hj(this._delegate,e,pi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return oF(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}yy.Persistence=rn;function QT(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&ep.getOrCreate(o)),error:e,complete:t}}function MU(n,e){const t=bU(n,e);if(typeof self<"u"&&!t.includes(Lu)&&t.push(Lu),typeof window<"u")for(const r of[Pv,Vs])t.includes(r)||t.push(r);return t.includes(ua)||t.push(ua),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{static credential(e,t){return Ls.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Ls(WC(ir.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Dv.PHONE_SIGN_IN_METHOD=Ls.PHONE_SIGN_IN_METHOD;Dv.PROVIDER_ID=Ls.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=B;class jU{constructor(e,t,r=ir.app()){var i;FU((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new QF(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU="auth-compat";function $U(n){n.INTERNAL.registerComponent(new Tn(UU,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new yy(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:uo.EMAIL_SIGNIN,PASSWORD_RESET:uo.PASSWORD_RESET,RECOVER_EMAIL:uo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:uo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:uo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:uo.VERIFY_EMAIL}},EmailAuthProvider:Gi,FacebookAuthProvider:zf,GithubAuthProvider:qf,GoogleAuthProvider:Wf,OAuthProvider:Go,SAMLAuthProvider:$h,PhoneAuthProvider:Dv,PhoneMultiFactorGenerator:FC,RecaptchaVerifier:jU,TwitterAuthProvider:Gf,Auth:yy,AuthCredential:Fa,Error:ct}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(wU,EU)}$U(ir);var YT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,GC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,I){function P(){}P.prototype=I.prototype,A.D=I.prototype,A.prototype=new P,A.prototype.constructor=A,A.C=function(R,k,N){for(var C=Array(arguments.length-2),se=2;se<arguments.length;se++)C[se-2]=arguments[se];return I.prototype[k].apply(R,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,I,P){P||(P=0);var R=Array(16);if(typeof I=="string")for(var k=0;16>k;++k)R[k]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(k=0;16>k;++k)R[k]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=A.g[0],P=A.g[1],k=A.g[2];var N=A.g[3],C=I+(N^P&(k^N))+R[0]+3614090360&4294967295;I=P+(C<<7&4294967295|C>>>25),C=N+(k^I&(P^k))+R[1]+3905402710&4294967295,N=I+(C<<12&4294967295|C>>>20),C=k+(P^N&(I^P))+R[2]+606105819&4294967295,k=N+(C<<17&4294967295|C>>>15),C=P+(I^k&(N^I))+R[3]+3250441966&4294967295,P=k+(C<<22&4294967295|C>>>10),C=I+(N^P&(k^N))+R[4]+4118548399&4294967295,I=P+(C<<7&4294967295|C>>>25),C=N+(k^I&(P^k))+R[5]+1200080426&4294967295,N=I+(C<<12&4294967295|C>>>20),C=k+(P^N&(I^P))+R[6]+2821735955&4294967295,k=N+(C<<17&4294967295|C>>>15),C=P+(I^k&(N^I))+R[7]+4249261313&4294967295,P=k+(C<<22&4294967295|C>>>10),C=I+(N^P&(k^N))+R[8]+1770035416&4294967295,I=P+(C<<7&4294967295|C>>>25),C=N+(k^I&(P^k))+R[9]+2336552879&4294967295,N=I+(C<<12&4294967295|C>>>20),C=k+(P^N&(I^P))+R[10]+4294925233&4294967295,k=N+(C<<17&4294967295|C>>>15),C=P+(I^k&(N^I))+R[11]+2304563134&4294967295,P=k+(C<<22&4294967295|C>>>10),C=I+(N^P&(k^N))+R[12]+1804603682&4294967295,I=P+(C<<7&4294967295|C>>>25),C=N+(k^I&(P^k))+R[13]+4254626195&4294967295,N=I+(C<<12&4294967295|C>>>20),C=k+(P^N&(I^P))+R[14]+2792965006&4294967295,k=N+(C<<17&4294967295|C>>>15),C=P+(I^k&(N^I))+R[15]+1236535329&4294967295,P=k+(C<<22&4294967295|C>>>10),C=I+(k^N&(P^k))+R[1]+4129170786&4294967295,I=P+(C<<5&4294967295|C>>>27),C=N+(P^k&(I^P))+R[6]+3225465664&4294967295,N=I+(C<<9&4294967295|C>>>23),C=k+(I^P&(N^I))+R[11]+643717713&4294967295,k=N+(C<<14&4294967295|C>>>18),C=P+(N^I&(k^N))+R[0]+3921069994&4294967295,P=k+(C<<20&4294967295|C>>>12),C=I+(k^N&(P^k))+R[5]+3593408605&4294967295,I=P+(C<<5&4294967295|C>>>27),C=N+(P^k&(I^P))+R[10]+38016083&4294967295,N=I+(C<<9&4294967295|C>>>23),C=k+(I^P&(N^I))+R[15]+3634488961&4294967295,k=N+(C<<14&4294967295|C>>>18),C=P+(N^I&(k^N))+R[4]+3889429448&4294967295,P=k+(C<<20&4294967295|C>>>12),C=I+(k^N&(P^k))+R[9]+568446438&4294967295,I=P+(C<<5&4294967295|C>>>27),C=N+(P^k&(I^P))+R[14]+3275163606&4294967295,N=I+(C<<9&4294967295|C>>>23),C=k+(I^P&(N^I))+R[3]+4107603335&4294967295,k=N+(C<<14&4294967295|C>>>18),C=P+(N^I&(k^N))+R[8]+1163531501&4294967295,P=k+(C<<20&4294967295|C>>>12),C=I+(k^N&(P^k))+R[13]+2850285829&4294967295,I=P+(C<<5&4294967295|C>>>27),C=N+(P^k&(I^P))+R[2]+4243563512&4294967295,N=I+(C<<9&4294967295|C>>>23),C=k+(I^P&(N^I))+R[7]+1735328473&4294967295,k=N+(C<<14&4294967295|C>>>18),C=P+(N^I&(k^N))+R[12]+2368359562&4294967295,P=k+(C<<20&4294967295|C>>>12),C=I+(P^k^N)+R[5]+4294588738&4294967295,I=P+(C<<4&4294967295|C>>>28),C=N+(I^P^k)+R[8]+2272392833&4294967295,N=I+(C<<11&4294967295|C>>>21),C=k+(N^I^P)+R[11]+1839030562&4294967295,k=N+(C<<16&4294967295|C>>>16),C=P+(k^N^I)+R[14]+4259657740&4294967295,P=k+(C<<23&4294967295|C>>>9),C=I+(P^k^N)+R[1]+2763975236&4294967295,I=P+(C<<4&4294967295|C>>>28),C=N+(I^P^k)+R[4]+1272893353&4294967295,N=I+(C<<11&4294967295|C>>>21),C=k+(N^I^P)+R[7]+4139469664&4294967295,k=N+(C<<16&4294967295|C>>>16),C=P+(k^N^I)+R[10]+3200236656&4294967295,P=k+(C<<23&4294967295|C>>>9),C=I+(P^k^N)+R[13]+681279174&4294967295,I=P+(C<<4&4294967295|C>>>28),C=N+(I^P^k)+R[0]+3936430074&4294967295,N=I+(C<<11&4294967295|C>>>21),C=k+(N^I^P)+R[3]+3572445317&4294967295,k=N+(C<<16&4294967295|C>>>16),C=P+(k^N^I)+R[6]+76029189&4294967295,P=k+(C<<23&4294967295|C>>>9),C=I+(P^k^N)+R[9]+3654602809&4294967295,I=P+(C<<4&4294967295|C>>>28),C=N+(I^P^k)+R[12]+3873151461&4294967295,N=I+(C<<11&4294967295|C>>>21),C=k+(N^I^P)+R[15]+530742520&4294967295,k=N+(C<<16&4294967295|C>>>16),C=P+(k^N^I)+R[2]+3299628645&4294967295,P=k+(C<<23&4294967295|C>>>9),C=I+(k^(P|~N))+R[0]+4096336452&4294967295,I=P+(C<<6&4294967295|C>>>26),C=N+(P^(I|~k))+R[7]+1126891415&4294967295,N=I+(C<<10&4294967295|C>>>22),C=k+(I^(N|~P))+R[14]+2878612391&4294967295,k=N+(C<<15&4294967295|C>>>17),C=P+(N^(k|~I))+R[5]+4237533241&4294967295,P=k+(C<<21&4294967295|C>>>11),C=I+(k^(P|~N))+R[12]+1700485571&4294967295,I=P+(C<<6&4294967295|C>>>26),C=N+(P^(I|~k))+R[3]+2399980690&4294967295,N=I+(C<<10&4294967295|C>>>22),C=k+(I^(N|~P))+R[10]+4293915773&4294967295,k=N+(C<<15&4294967295|C>>>17),C=P+(N^(k|~I))+R[1]+2240044497&4294967295,P=k+(C<<21&4294967295|C>>>11),C=I+(k^(P|~N))+R[8]+1873313359&4294967295,I=P+(C<<6&4294967295|C>>>26),C=N+(P^(I|~k))+R[15]+4264355552&4294967295,N=I+(C<<10&4294967295|C>>>22),C=k+(I^(N|~P))+R[6]+2734768916&4294967295,k=N+(C<<15&4294967295|C>>>17),C=P+(N^(k|~I))+R[13]+1309151649&4294967295,P=k+(C<<21&4294967295|C>>>11),C=I+(k^(P|~N))+R[4]+4149444226&4294967295,I=P+(C<<6&4294967295|C>>>26),C=N+(P^(I|~k))+R[11]+3174756917&4294967295,N=I+(C<<10&4294967295|C>>>22),C=k+(I^(N|~P))+R[2]+718787259&4294967295,k=N+(C<<15&4294967295|C>>>17),C=P+(N^(k|~I))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,A.g[2]=A.g[2]+k&4294967295,A.g[3]=A.g[3]+N&4294967295}r.prototype.u=function(A,I){I===void 0&&(I=A.length);for(var P=I-this.blockSize,R=this.B,k=this.h,N=0;N<I;){if(k==0)for(;N<=P;)i(this,A,N),N+=this.blockSize;if(typeof A=="string"){for(;N<I;)if(R[k++]=A.charCodeAt(N++),k==this.blockSize){i(this,R),k=0;break}}else for(;N<I;)if(R[k++]=A[N++],k==this.blockSize){i(this,R),k=0;break}}this.h=k,this.o+=I},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;var P=8*this.o;for(I=A.length-8;I<A.length;++I)A[I]=P&255,P/=256;for(this.u(A),A=Array(16),I=P=0;4>I;++I)for(var R=0;32>R;R+=8)A[P++]=this.g[I]>>>R&255;return A};function s(A,I){var P=a;return Object.prototype.hasOwnProperty.call(P,A)?P[A]:P[A]=I(A)}function o(A,I){this.h=I;for(var P=[],R=!0,k=A.length-1;0<=k;k--){var N=A[k]|0;R&&N==I||(P[k]=N,R=!1)}this.g=P}var a={};function l(A){return-128<=A&&128>A?s(A,function(I){return new o([I|0],0>I?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(0>A)return x(c(-A));for(var I=[],P=1,R=0;A>=P;R++)I[R]=A/P|0,P*=4294967296;return new o(I,0)}function d(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return x(d(A.substring(1),I));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(I,8)),R=h,k=0;k<A.length;k+=8){var N=Math.min(8,A.length-k),C=parseInt(A.substring(k,k+N),I);8>N?(N=c(Math.pow(I,N)),R=R.j(N).add(c(C))):(R=R.j(P),R=R.add(c(C)))}return R}var h=l(0),p=l(1),y=l(16777216);n=o.prototype,n.m=function(){if(T(this))return-x(this).m();for(var A=0,I=1,P=0;P<this.g.length;P++){var R=this.i(P);A+=(0<=R?R:4294967296+R)*I,I*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(v(this))return"0";if(T(this))return"-"+x(this).toString(A);for(var I=c(Math.pow(A,6)),P=this,R="";;){var k=b(P,I).g;P=_(P,k.j(I));var N=((0<P.g.length?P.g[0]:P.h)>>>0).toString(A);if(P=k,v(P))return N+R;for(;6>N.length;)N="0"+N;R=N+R}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function v(A){if(A.h!=0)return!1;for(var I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function T(A){return A.h==-1}n.l=function(A){return A=_(this,A),T(A)?-1:v(A)?0:1};function x(A){for(var I=A.g.length,P=[],R=0;R<I;R++)P[R]=~A.g[R];return new o(P,~A.h).add(p)}n.abs=function(){return T(this)?x(this):this},n.add=function(A){for(var I=Math.max(this.g.length,A.g.length),P=[],R=0,k=0;k<=I;k++){var N=R+(this.i(k)&65535)+(A.i(k)&65535),C=(N>>>16)+(this.i(k)>>>16)+(A.i(k)>>>16);R=C>>>16,N&=65535,C&=65535,P[k]=C<<16|N}return new o(P,P[P.length-1]&-2147483648?-1:0)};function _(A,I){return A.add(x(I))}n.j=function(A){if(v(this)||v(A))return h;if(T(this))return T(A)?x(this).j(x(A)):x(x(this).j(A));if(T(A))return x(this.j(x(A)));if(0>this.l(y)&&0>A.l(y))return c(this.m()*A.m());for(var I=this.g.length+A.g.length,P=[],R=0;R<2*I;R++)P[R]=0;for(R=0;R<this.g.length;R++)for(var k=0;k<A.g.length;k++){var N=this.i(R)>>>16,C=this.i(R)&65535,se=A.i(k)>>>16,he=A.i(k)&65535;P[2*R+2*k]+=C*he,w(P,2*R+2*k),P[2*R+2*k+1]+=N*he,w(P,2*R+2*k+1),P[2*R+2*k+1]+=C*se,w(P,2*R+2*k+1),P[2*R+2*k+2]+=N*se,w(P,2*R+2*k+2)}for(R=0;R<I;R++)P[R]=P[2*R+1]<<16|P[2*R];for(R=I;R<2*I;R++)P[R]=0;return new o(P,0)};function w(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function E(A,I){this.g=A,this.h=I}function b(A,I){if(v(I))throw Error("division by zero");if(v(A))return new E(h,h);if(T(A))return I=b(x(A),I),new E(x(I.g),x(I.h));if(T(I))return I=b(A,x(I)),new E(x(I.g),I.h);if(30<A.g.length){if(T(A)||T(I))throw Error("slowDivide_ only works with positive integers.");for(var P=p,R=I;0>=R.l(A);)P=O(P),R=O(R);var k=F(P,1),N=F(R,1);for(R=F(R,2),P=F(P,2);!v(R);){var C=N.add(R);0>=C.l(A)&&(k=k.add(P),N=C),R=F(R,1),P=F(P,1)}return I=_(A,k.j(I)),new E(k,I)}for(k=h;0<=A.l(I);){for(P=Math.max(1,Math.floor(A.m()/I.m())),R=Math.ceil(Math.log(P)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),N=c(P),C=N.j(I);T(C)||0<C.l(A);)P-=R,N=c(P),C=N.j(I);v(N)&&(N=p),k=k.add(N),A=_(A,C)}return new E(k,A)}n.A=function(A){return b(this,A).h},n.and=function(A){for(var I=Math.max(this.g.length,A.g.length),P=[],R=0;R<I;R++)P[R]=this.i(R)&A.i(R);return new o(P,this.h&A.h)},n.or=function(A){for(var I=Math.max(this.g.length,A.g.length),P=[],R=0;R<I;R++)P[R]=this.i(R)|A.i(R);return new o(P,this.h|A.h)},n.xor=function(A){for(var I=Math.max(this.g.length,A.g.length),P=[],R=0;R<I;R++)P[R]=this.i(R)^A.i(R);return new o(P,this.h^A.h)};function O(A){for(var I=A.g.length+1,P=[],R=0;R<I;R++)P[R]=A.i(R)<<1|A.i(R-1)>>>31;return new o(P,A.h)}function F(A,I){var P=I>>5;I%=32;for(var R=A.g.length-P,k=[],N=0;N<R;N++)k[N]=0<I?A.i(N+P)>>>I|A.i(N+P+1)<<32-I:A.i(N+P);return new o(k,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ci=o}).apply(typeof YT<"u"?YT:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HC,Vl,KC,Qd,_y,QC,YC,JC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in g))break e;g=g[L]}u=u[u.length-1],S=g[u],f=f(S),f!=S&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,S=!1,L={next:function(){if(!S&&g<u.length){var j=g++;return{value:f(j,u[j]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,g){return u.call.apply(u.bind,arguments)}function h(u,f,g){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function y(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function v(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(S,L,j){for(var G=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)G[Se-2]=arguments[Se];return f.prototype[L].apply(S,G)}}function T(u){const f=u.length;if(0<f){const g=Array(f);for(let S=0;S<f;S++)g[S]=u[S];return g}return[]}function x(u,f){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const L=u.length||0,j=S.length||0;u.length=L+j;for(let G=0;G<j;G++)u[L+G]=S[G]}else u.push(S)}}class _{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var O=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function F(u,f,g){for(const S in u)f.call(g,u[S],S,u)}function A(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function I(u){const f={};for(const g in u)f[g]=u[g];return f}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(u,f){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)u[g]=S[g];for(let j=0;j<P.length;j++)g=P[j],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function k(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function N(u){a.setTimeout(()=>{throw u},0)}function C(){var u=K;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class se{constructor(){this.h=this.g=null}add(f,g){const S=he.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var he=new _(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,z=!1,K=new se,te=()=>{const u=a.Promise.resolve(void 0);oe=()=>{u.then(Te)}};var Te=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(g){N(g)}var f=he;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}z=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var cr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function dr(u,f){if(Ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(O){e:{try{b(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:hr[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&dr.aa.h.call(this)}}v(dr,Ge);var hr={2:"touch",3:"pen",4:"mouse"};dr.prototype.h=function(){dr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var fr="closure_listenable_"+(1e6*Math.random()|0),Cb=0;function xb(u,f,g,S,L){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=L,this.key=++Cb,this.da=this.fa=!1}function Mc(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Fc(u){this.src=u,this.g={},this.h=0}Fc.prototype.add=function(u,f,g,S,L){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var G=Lp(u,f,S,L);return-1<G?(f=u[G],g||(f.fa=!1)):(f=new xb(f,this.src,j,!!S,L),f.fa=g,u.push(f)),f};function Vp(u,f){var g=f.type;if(g in u.g){var S=u.g[g],L=Array.prototype.indexOf.call(S,f,void 0),j;(j=0<=L)&&Array.prototype.splice.call(S,L,1),j&&(Mc(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Lp(u,f,g,S){for(var L=0;L<u.length;++L){var j=u[L];if(!j.da&&j.listener==f&&j.capture==!!g&&j.ha==S)return L}return-1}var Mp="closure_lm_"+(1e6*Math.random()|0),Fp={};function tE(u,f,g,S,L){if(Array.isArray(f)){for(var j=0;j<f.length;j++)tE(u,f[j],g,S,L);return null}return g=iE(g),u&&u[fr]?u.K(f,g,c(S)?!!S.capture:!1,L):kb(u,f,g,!1,S,L)}function kb(u,f,g,S,L,j){if(!f)throw Error("Invalid event type");var G=c(L)?!!L.capture:!!L,Se=Up(u);if(Se||(u[Mp]=Se=new Fc(u)),g=Se.add(f,g,S,G,j),g.proxy)return g;if(S=bb(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)cr||(L=G),L===void 0&&(L=!1),u.addEventListener(f.toString(),S,L);else if(u.attachEvent)u.attachEvent(rE(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function bb(){function u(g){return f.call(u.src,u.listener,g)}const f=Nb;return u}function nE(u,f,g,S,L){if(Array.isArray(f))for(var j=0;j<f.length;j++)nE(u,f[j],g,S,L);else S=c(S)?!!S.capture:!!S,g=iE(g),u&&u[fr]?(u=u.i,f=String(f).toString(),f in u.g&&(j=u.g[f],g=Lp(j,g,S,L),-1<g&&(Mc(j[g]),Array.prototype.splice.call(j,g,1),j.length==0&&(delete u.g[f],u.h--)))):u&&(u=Up(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Lp(f,g,S,L)),(g=-1<u?f[u]:null)&&jp(g))}function jp(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[fr])Vp(f.i,u);else{var g=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(g,S,u.capture):f.detachEvent?f.detachEvent(rE(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=Up(f))?(Vp(g,u),g.h==0&&(g.src=null,f[Mp]=null)):Mc(u)}}}function rE(u){return u in Fp?Fp[u]:Fp[u]="on"+u}function Nb(u,f){if(u.da)u=!0;else{f=new dr(f,this);var g=u.listener,S=u.ha||u.src;u.fa&&jp(u),u=g.call(S,f)}return u}function Up(u){return u=u[Mp],u instanceof Fc?u:null}var $p="__closure_events_fn_"+(1e9*Math.random()>>>0);function iE(u){return typeof u=="function"?u:(u[$p]||(u[$p]=function(f){return u.handleEvent(f)}),u[$p])}function Et(){ve.call(this),this.i=new Fc(this),this.M=this,this.F=null}v(Et,ve),Et.prototype[fr]=!0,Et.prototype.removeEventListener=function(u,f,g,S){nE(this,u,f,g,S)};function Dt(u,f){var g,S=u.F;if(S)for(g=[];S;S=S.F)g.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new Ge(f,u);else if(f instanceof Ge)f.target=f.target||u;else{var L=f;f=new Ge(S,u),R(f,L)}if(L=!0,g)for(var j=g.length-1;0<=j;j--){var G=f.g=g[j];L=jc(G,S,!0,f)&&L}if(G=f.g=u,L=jc(G,S,!0,f)&&L,L=jc(G,S,!1,f)&&L,g)for(j=0;j<g.length;j++)G=f.g=g[j],L=jc(G,S,!1,f)&&L}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],S=0;S<g.length;S++)Mc(g[S]);delete u.g[f],u.h--}}this.F=null},Et.prototype.K=function(u,f,g,S){return this.i.add(String(u),f,!1,g,S)},Et.prototype.L=function(u,f,g,S){return this.i.add(String(u),f,!0,g,S)};function jc(u,f,g,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,j=0;j<f.length;++j){var G=f[j];if(G&&!G.da&&G.capture==g){var Se=G.listener,ht=G.ha||G.src;G.fa&&Vp(u.i,G),L=Se.call(ht,S)!==!1&&L}}return L&&!S.defaultPrevented}function sE(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function oE(u){u.g=sE(()=>{u.g=null,u.i&&(u.i=!1,oE(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Db extends ve{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:oE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qa(u){ve.call(this),this.h=u,this.g={}}v(Qa,ve);var aE=[];function lE(u){F(u.g,function(f,g){this.g.hasOwnProperty(g)&&jp(f)},u),u.g={}}Qa.prototype.N=function(){Qa.aa.N.call(this),lE(this)},Qa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bp=a.JSON.stringify,Ob=a.JSON.parse,Vb=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function zp(){}zp.prototype.h=null;function uE(u){return u.h||(u.h=u.i())}function cE(){}var Ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wp(){Ge.call(this,"d")}v(Wp,Ge);function qp(){Ge.call(this,"c")}v(qp,Ge);var Xi={},dE=null;function Uc(){return dE=dE||new Et}Xi.La="serverreachability";function hE(u){Ge.call(this,Xi.La,u)}v(hE,Ge);function Ja(u){const f=Uc();Dt(f,new hE(f))}Xi.STAT_EVENT="statevent";function fE(u,f){Ge.call(this,Xi.STAT_EVENT,u),this.stat=f}v(fE,Ge);function Ot(u){const f=Uc();Dt(f,new fE(f,u))}Xi.Ma="timingevent";function pE(u,f){Ge.call(this,Xi.Ma,u),this.size=f}v(pE,Ge);function Xa(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Za(){this.g=!0}Za.prototype.xa=function(){this.g=!1};function Lb(u,f,g,S,L,j){u.info(function(){if(u.g)if(j)for(var G="",Se=j.split("&"),ht=0;ht<Se.length;ht++){var ge=Se[ht].split("=");if(1<ge.length){var It=ge[0];ge=ge[1];var Tt=It.split("_");G=2<=Tt.length&&Tt[1]=="type"?G+(It+"="+ge+"&"):G+(It+"=redacted&")}}else G=null;else G=j;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+f+`
`+g+`
`+G})}function Mb(u,f,g,S,L,j,G){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+f+`
`+g+`
`+j+" "+G})}function io(u,f,g,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+jb(u,g)+(S?" "+S:"")})}function Fb(u,f){u.info(function(){return"TIMEOUT: "+f})}Za.prototype.info=function(){};function jb(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var S=g[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return Bp(g)}catch{return f}}var $c={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gp;function Bc(){}v(Bc,zp),Bc.prototype.g=function(){return new XMLHttpRequest},Bc.prototype.i=function(){return{}},Gp=new Bc;function Qr(u,f,g,S){this.j=u,this.i=f,this.l=g,this.R=S||1,this.U=new Qa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gE}function gE(){this.i=null,this.g="",this.h=!1}var yE={},Hp={};function Kp(u,f,g){u.L=1,u.v=Gc(pr(f)),u.m=g,u.P=!0,_E(u,null)}function _E(u,f){u.F=Date.now(),zc(u),u.A=pr(u.v);var g=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),NE(g.i,"t",S),u.C=0,g=u.j.J,u.h=new gE,u.g=YE(u.j,g?f:null,!u.m),0<u.O&&(u.M=new Db(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(aE[0]=L.toString()),L=aE);for(var j=0;j<L.length;j++){var G=tE(g,L[j],S||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Ja(),Lb(u.i,u.u,u.A,u.l,u.R,u.m)}Qr.prototype.ca=function(u){u=u.target;const f=this.M;f&&mr(u)==3?f.j():this.Y(u)},Qr.prototype.Y=function(u){try{if(u==this.g)e:{const Tt=mr(this.g);var f=this.g.Ba();const ao=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||jE(this.g)))){this.J||Tt!=4||f==7||(f==8||0>=ao?Ja(3):Ja(2)),Qp(this);var g=this.g.Z();this.X=g;t:if(vE(this)){var S=jE(this.g);u="";var L=S.length,j=mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zi(this),el(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(j&&f==L-1)});S.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=g==200,Mb(this.i,this.u,this.A,this.l,this.R,Tt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ht=this.g;if((Se=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Se)){var ge=Se;break t}}ge=null}if(g=ge)io(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yp(this,g);else{this.o=!1,this.s=3,Ot(12),Zi(this),el(this);break e}}if(this.P){g=!0;let Sn;for(;!this.J&&this.C<G.length;)if(Sn=Ub(this,G),Sn==Hp){Tt==4&&(this.s=4,Ot(14),g=!1),io(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==yE){this.s=4,Ot(15),io(this.i,this.l,G,"[Invalid Chunk]"),g=!1;break}else io(this.i,this.l,Sn,null),Yp(this,Sn);if(vE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||G.length!=0||this.h.h||(this.s=1,Ot(16),g=!1),this.o=this.o&&g,!g)io(this.i,this.l,G,"[Invalid Chunked Response]"),Zi(this),el(this);else if(0<G.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),nm(It),It.M=!0,Ot(11))}}else io(this.i,this.l,G,null),Yp(this,G);Tt==4&&Zi(this),this.o&&!this.J&&(Tt==4?GE(this.j,this):(this.o=!1,zc(this)))}else rN(this.g),g==400&&0<G.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),Zi(this),el(this)}}}catch{}finally{}};function vE(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ub(u,f){var g=u.C,S=f.indexOf(`
`,g);return S==-1?Hp:(g=Number(f.substring(g,S)),isNaN(g)?yE:(S+=1,S+g>f.length?Hp:(f=f.slice(S,S+g),u.C=S+g,f)))}Qr.prototype.cancel=function(){this.J=!0,Zi(this)};function zc(u){u.S=Date.now()+u.I,wE(u,u.I)}function wE(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Xa(p(u.ba,u),f)}function Qp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Qr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Fb(this.i,this.A),this.L!=2&&(Ja(),Ot(17)),Zi(this),this.s=2,el(this)):wE(this,this.S-u)};function el(u){u.j.G==0||u.J||GE(u.j,u)}function Zi(u){Qp(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,lE(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Yp(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Jp(g.h,u))){if(!u.K&&Jp(g.h,u)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Xc(g),Yc(g);else break e;tm(g),Ot(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Xa(p(g.Za,g),6e3));if(1>=TE(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ts(g,11)}else if((u.K||g.g==u)&&Xc(g),!w(f))for(L=g.Da.g.parse(f),f=0;f<L.length;f++){let ge=L[f];if(g.T=ge[0],ge=ge[1],g.G==2)if(ge[0]=="c"){g.K=ge[1],g.ia=ge[2];const It=ge[3];It!=null&&(g.la=It,g.j.info("VER="+g.la));const Tt=ge[4];Tt!=null&&(g.Aa=Tt,g.j.info("SVER="+g.Aa));const ao=ge[5];ao!=null&&typeof ao=="number"&&0<ao&&(S=1.5*ao,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Sn=u.g;if(Sn){const ed=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ed){var j=S.h;j.g||ed.indexOf("spdy")==-1&&ed.indexOf("quic")==-1&&ed.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Xp(j,j.h),j.h=null))}if(S.D){const rm=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;rm&&(S.ya=rm,Ce(S.I,S.D,rm))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var G=u;if(S.qa=QE(S,S.J?S.ia:null,S.W),G.K){SE(S.h,G);var Se=G,ht=S.L;ht&&(Se.I=ht),Se.B&&(Qp(Se),zc(Se)),S.g=G}else WE(S);0<g.i.length&&Jc(g)}else ge[0]!="stop"&&ge[0]!="close"||ts(g,7);else g.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ts(g,7):em(g):ge[0]!="noop"&&g.l&&g.l.ta(ge),g.v=0)}}Ja(4)}catch{}}var $b=class{constructor(u,f){this.g=u,this.map=f}};function EE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function IE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function TE(u){return u.h?1:u.g?u.g.size:0}function Jp(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Xp(u,f){u.g?u.g.add(f):u.h=f}function SE(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}EE.prototype.cancel=function(){if(this.i=PE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function PE(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return T(u.i)}function Bb(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,S=0;S<g;S++)f.push(u[S]);return f}f=[],g=0;for(S in u)f[g++]=u[S];return f}function zb(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const S in u)f[g++]=S;return f}}}function AE(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=zb(u),S=Bb(u),L=S.length,j=0;j<L;j++)f.call(void 0,S[j],g&&g[j],u)}var RE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wb(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var S=u[g].indexOf("="),L=null;if(0<=S){var j=u[g].substring(0,S);L=u[g].substring(S+1)}else j=u[g];f(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function es(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof es){this.h=u.h,Wc(this,u.j),this.o=u.o,this.g=u.g,qc(this,u.s),this.l=u.l;var f=u.i,g=new rl;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),CE(this,g),this.m=u.m}else u&&(f=String(u).match(RE))?(this.h=!1,Wc(this,f[1]||"",!0),this.o=tl(f[2]||""),this.g=tl(f[3]||"",!0),qc(this,f[4]),this.l=tl(f[5]||"",!0),CE(this,f[6]||"",!0),this.m=tl(f[7]||"")):(this.h=!1,this.i=new rl(null,this.h))}es.prototype.toString=function(){var u=[],f=this.j;f&&u.push(nl(f,xE,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(nl(f,xE,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(nl(g,g.charAt(0)=="/"?Hb:Gb,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",nl(g,Qb)),u.join("")};function pr(u){return new es(u)}function Wc(u,f,g){u.j=g?tl(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function qc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function CE(u,f,g){f instanceof rl?(u.i=f,Yb(u.i,u.h)):(g||(f=nl(f,Kb)),u.i=new rl(f,u.h))}function Ce(u,f,g){u.i.set(f,g)}function Gc(u){return Ce(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function tl(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function nl(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,qb),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function qb(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var xE=/[#\/\?@]/g,Gb=/[#\?:]/g,Hb=/[#\?]/g,Kb=/[#\?@]/g,Qb=/#/g;function rl(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Yr(u){u.g||(u.g=new Map,u.h=0,u.i&&Wb(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=rl.prototype,n.add=function(u,f){Yr(this),this.i=null,u=so(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function kE(u,f){Yr(u),f=so(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function bE(u,f){return Yr(u),f=so(u,f),u.g.has(f)}n.forEach=function(u,f){Yr(this),this.g.forEach(function(g,S){g.forEach(function(L){u.call(f,L,S,this)},this)},this)},n.na=function(){Yr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){const L=u[S];for(let j=0;j<L.length;j++)g.push(f[S])}return g},n.V=function(u){Yr(this);let f=[];if(typeof u=="string")bE(this,u)&&(f=f.concat(this.g.get(so(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},n.set=function(u,f){return Yr(this),this.i=null,u=so(this,u),bE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function NE(u,f,g){kE(u,f),0<g.length&&(u.i=null,u.g.set(so(u,f),T(g)),u.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];const j=encodeURIComponent(String(S)),G=this.V(S);for(S=0;S<G.length;S++){var L=j;G[S]!==""&&(L+="="+encodeURIComponent(String(G[S]))),u.push(L)}}return this.i=u.join("&")};function so(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Yb(u,f){f&&!u.j&&(Yr(u),u.i=null,u.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(kE(this,S),NE(this,L,g))},u)),u.j=f}function Jb(u,f){const g=new Za;if(a.Image){const S=new Image;S.onload=y(Jr,g,"TestLoadImage: loaded",!0,f,S),S.onerror=y(Jr,g,"TestLoadImage: error",!1,f,S),S.onabort=y(Jr,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=y(Jr,g,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function Xb(u,f){const g=new Za,S=new AbortController,L=setTimeout(()=>{S.abort(),Jr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(j=>{clearTimeout(L),j.ok?Jr(g,"TestPingServer: ok",!0,f):Jr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Jr(g,"TestPingServer: error",!1,f)})}function Jr(u,f,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function Zb(){this.g=new Vb}function eN(u,f,g){const S=g||"";try{AE(u,function(L,j){let G=L;c(L)&&(G=Bp(L)),f.push(S+j+"="+encodeURIComponent(G))})}catch(L){throw f.push(S+"type="+encodeURIComponent("_badmap")),L}}function Hc(u){this.l=u.Ub||null,this.j=u.eb||!1}v(Hc,zp),Hc.prototype.g=function(){return new Kc(this.l,this.j)},Hc.prototype.i=function(u){return function(){return u}}({});function Kc(u,f){Et.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Kc,Et),n=Kc.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,sl(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,il(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,sl(this)),this.g&&(this.readyState=3,sl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;DE(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function DE(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?il(this):sl(this),this.readyState==3&&DE(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,il(this))},n.Qa=function(u){this.g&&(this.response=u,il(this))},n.ga=function(){this.g&&il(this)};function il(u){u.readyState=4,u.l=null,u.j=null,u.v=null,sl(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function sl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function OE(u){let f="";return F(u,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function Zp(u,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=OE(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Ce(u,f,g))}function $e(u){Et.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v($e,Et);var tN=/^https?$/i,nN=["POST","PUT"];n=$e.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gp.g(),this.v=this.o?uE(this.o):uE(Gp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(j){VE(this,j);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const j of S.keys())g.set(j,S.get(j));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(nN,f,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,G]of g)this.g.setRequestHeader(j,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{FE(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){VE(this,j)}};function VE(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,LE(u),Qc(u)}function LE(u){u.A||(u.A=!0,Dt(u,"complete"),Dt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Dt(this,"complete"),Dt(this,"abort"),Qc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qc(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ME(this):this.bb())},n.bb=function(){ME(this)};function ME(u){if(u.h&&typeof o<"u"&&(!u.v[1]||mr(u)!=4||u.Z()!=2)){if(u.u&&mr(u)==4)sE(u.Ea,0,u);else if(Dt(u,"readystatechange"),mr(u)==4){u.h=!1;try{const G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=G===0){var L=String(u.D).match(RE)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!tN.test(L?L.toLowerCase():"")}g=S}if(g)Dt(u,"complete"),Dt(u,"success");else{u.m=6;try{var j=2<mr(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",LE(u)}}finally{Qc(u)}}}}function Qc(u,f){if(u.g){FE(u);const g=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Dt(u,"ready");try{g.onreadystatechange=S}catch{}}}function FE(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function mr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<mr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Ob(f)}};function jE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function rN(u){const f={};u=(u.g&&2<=mr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(w(u[S]))continue;var g=k(u[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=f[L]||[];f[L]=j,j.push(g)}A(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ol(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function UE(u){this.Aa=0,this.i=[],this.j=new Za,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ol("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ol("baseRetryDelayMs",5e3,u),this.cb=ol("retryDelaySeedMs",1e4,u),this.Wa=ol("forwardChannelMaxRetries",2,u),this.wa=ol("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new EE(u&&u.concurrentRequestLimit),this.Da=new Zb,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=UE.prototype,n.la=8,n.G=1,n.connect=function(u,f,g,S){Ot(0),this.W=u,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=QE(this,null,this.W),Jc(this)};function em(u){if($E(u),u.G==3){var f=u.U++,g=pr(u.I);if(Ce(g,"SID",u.K),Ce(g,"RID",f),Ce(g,"TYPE","terminate"),al(u,g),f=new Qr(u,u.j,f),f.L=2,f.v=Gc(pr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=YE(f.j,null),f.g.ea(f.v)),f.F=Date.now(),zc(f)}KE(u)}function Yc(u){u.g&&(nm(u),u.g.cancel(),u.g=null)}function $E(u){Yc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Xc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Jc(u){if(!IE(u.h)&&!u.s){u.s=!0;var f=u.Ga;oe||te(),z||(oe(),z=!0),K.add(f,u),u.B=0}}function iN(u,f){return TE(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Xa(p(u.Ga,u,f),HE(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Qr(this,this.j,u);let j=this.o;if(this.S&&(j?(j=I(j),R(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=zE(this,L,f),g=pr(this.I),Ce(g,"RID",u),Ce(g,"CVER",22),this.D&&Ce(g,"X-HTTP-Session-Id",this.D),al(this,g),j&&(this.O?f="headers="+encodeURIComponent(String(OE(j)))+"&"+f:this.m&&Zp(g,this.m,j)),Xp(this.h,L),this.Ua&&Ce(g,"TYPE","init"),this.P?(Ce(g,"$req",f),Ce(g,"SID","null"),L.T=!0,Kp(L,g,null)):Kp(L,g,f),this.G=2}}else this.G==3&&(u?BE(this,u):this.i.length==0||IE(this.h)||BE(this))};function BE(u,f){var g;f?g=f.l:g=u.U++;const S=pr(u.I);Ce(S,"SID",u.K),Ce(S,"RID",g),Ce(S,"AID",u.T),al(u,S),u.m&&u.o&&Zp(S,u.m,u.o),g=new Qr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=zE(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Xp(u.h,g),Kp(g,S,f)}function al(u,f){u.H&&F(u.H,function(g,S){Ce(f,S,g)}),u.l&&AE({},function(g,S){Ce(f,S,g)})}function zE(u,f,g){g=Math.min(u.i.length,g);var S=u.l?p(u.l.Na,u.l,u):null;e:{var L=u.i;let j=-1;for(;;){const G=["count="+g];j==-1?0<g?(j=L[0].g,G.push("ofs="+j)):j=0:G.push("ofs="+j);let Se=!0;for(let ht=0;ht<g;ht++){let ge=L[ht].g;const It=L[ht].map;if(ge-=j,0>ge)j=Math.max(0,L[ht].g-100),Se=!1;else try{eN(It,G,"req"+ge+"_")}catch{S&&S(It)}}if(Se){S=G.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,S}function WE(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;oe||te(),z||(oe(),z=!0),K.add(f,u),u.v=0}}function tm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Xa(p(u.Fa,u),HE(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,qE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Xa(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),Yc(this),qE(this))};function nm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function qE(u){u.g=new Qr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=pr(u.qa);Ce(f,"RID","rpc"),Ce(f,"SID",u.K),Ce(f,"AID",u.T),Ce(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ce(f,"TO",u.ja),Ce(f,"TYPE","xmlhttp"),al(u,f),u.m&&u.o&&Zp(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Gc(pr(f)),g.m=null,g.P=!0,_E(g,u)}n.Za=function(){this.C!=null&&(this.C=null,Yc(this),tm(this),Ot(19))};function Xc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function GE(u,f){var g=null;if(u.g==f){Xc(u),nm(u),u.g=null;var S=2}else if(Jp(u.h,f))g=f.D,SE(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;S=Uc(),Dt(S,new pE(S,g)),Jc(u)}else WE(u);else if(L=f.s,L==3||L==0&&0<f.X||!(S==1&&iN(u,f)||S==2&&tm(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),L){case 1:ts(u,5);break;case 4:ts(u,10);break;case 3:ts(u,6);break;default:ts(u,2)}}}function HE(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function ts(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),S=u.Xa;const L=!S;S=new es(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wc(S,"https"),Gc(S),L?Jb(S.toString(),g):Xb(S.toString(),g)}else Ot(2);u.G=0,u.l&&u.l.sa(f),KE(u),$E(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function KE(u){if(u.G=0,u.ka=[],u.l){const f=PE(u.h);(f.length!=0||u.i.length!=0)&&(x(u.ka,f),x(u.ka,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.ra()}}function QE(u,f,g){var S=g instanceof es?pr(g):new es(g);if(S.g!="")f&&(S.g=f+"."+S.g),qc(S,S.s);else{var L=a.location;S=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var j=new es(null);S&&Wc(j,S),f&&(j.g=f),L&&qc(j,L),g&&(j.l=g),S=j}return g=u.D,f=u.ya,g&&f&&Ce(S,g,f),Ce(S,"VER",u.la),al(u,S),S}function YE(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new $e(new Hc({eb:g})):new $e(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function JE(){}n=JE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Zc(){}Zc.prototype.g=function(u,f){return new Zt(u,f)};function Zt(u,f){Et.call(this),this.g=new UE(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!w(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new oo(this)}v(Zt,Et),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){em(this.g)},Zt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Bp(u),u=g);f.i.push(new $b(f.Ya++,u)),f.G==3&&Jc(f)},Zt.prototype.N=function(){this.g.l=null,delete this.j,em(this.g),delete this.g,Zt.aa.N.call(this)};function XE(u){Wp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}v(XE,Wp);function ZE(){qp.call(this),this.status=1}v(ZE,qp);function oo(u){this.g=u}v(oo,JE),oo.prototype.ua=function(){Dt(this.g,"a")},oo.prototype.ta=function(u){Dt(this.g,new XE(u))},oo.prototype.sa=function(u){Dt(this.g,new ZE)},oo.prototype.ra=function(){Dt(this.g,"b")},Zc.prototype.createWebChannel=Zc.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,JC=function(){return new Zc},YC=function(){return Uc()},QC=Xi,_y={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$c.NO_ERROR=0,$c.TIMEOUT=8,$c.HTTP_ERROR=6,Qd=$c,mE.COMPLETE="complete",KC=mE,cE.EventType=Ya,Ya.OPEN="a",Ya.CLOSE="b",Ya.ERROR="c",Ya.MESSAGE="d",Et.prototype.listen=Et.prototype.K,Vl=cE,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,HC=$e}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});const JT="@firebase/firestore",XT="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new cc("@firebase/firestore");function Eo(){return Vi.logLevel}function BU(n){Vi.setLogLevel(n)}function $(n,...e){if(Vi.logLevel<=ae.DEBUG){const t=e.map(Ov);Vi.debug(`Firestore (${Ua}): ${n}`,...t)}}function Ke(n,...e){if(Vi.logLevel<=ae.ERROR){const t=e.map(Ov);Vi.error(`Firestore (${Ua}): ${n}`,...t)}}function sr(n,...e){if(Vi.logLevel<=ae.WARN){const t=e.map(Ov);Vi.warn(`Firestore (${Ua}): ${n}`,...t)}}function Ov(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,XC(n,r,t)}function XC(n,e,t){let r=`FIRESTORE (${Ua}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ke(r),new Error(r)}function J(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||XC(e,i,r)}function zU(n,e){n||Q(57014,e)}function H(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class U extends ct{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(lt.UNAUTHENTICATED))}shutdown(){}}class qU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GU{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){J(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new _t;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _t,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _t)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J(typeof r.accessToken=="string",31837,{l:r}),new ZC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string",2055,{h:e}),new lt(e)}}class HU{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KU{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new HU(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QU{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pe(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){J(this.o===void 0,3512);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ZT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(J(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ZT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=YU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function re(n,e){return n<e?-1:n>e?1:0}function vy(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return Wm(i)===Wm(s)?re(i,s):Wm(i)?1:-1}return re(n.length,e.length)}const JU=55296,XU=57343;function Wm(n){const e=n.charCodeAt(0);return e>=JU&&e<=XU}function da(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ex(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="__name__";class zn{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zn?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=zn.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return re(e.length,t.length)}static compareSegments(e,t){const r=zn.isNumericId(e),i=zn.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?zn.extractNumericId(e).compare(zn.extractNumericId(t)):vy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class le extends zn{construct(e,t,r){return new le(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new le(t)}static emptyPath(){return new le([])}}const ZU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Oe extends zn{construct(e,t,r){return new Oe(e,t,r)}static isValidIdentifier(e){return ZU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Oe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eS}static keyField(){return new Oe([eS])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new U(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Oe(t)}static emptyPath(){return new Oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(le.fromString(e))}static fromName(e){return new q(le.fromString(e).popFirst(5))}static empty(){return new q(le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(n,e,t){if(!t)throw new U(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tx(n,e,t,r){if(e===!0&&r===!0)throw new U(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tS(n){if(!q.isDocumentKey(n))throw new U(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nS(n){if(q.isDocumentKey(n))throw new U(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function tp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q(12329,{type:typeof n})}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tp(n);throw new U(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rx(n,e){if(e<=0)throw new U(M.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(n,e){const t={typeString:n};return e&&(t.value=e),t}function _c(n,e){if(!nx(n))throw new U(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new U(M.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=-62135596800,iS=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*iS);return new ye(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rS)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iS}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_c(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:tt("string",ye._jsonSchemaVersion),seconds:tt("number"),nanoseconds:tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new ye(0,0))}static max(){return new X(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=-1;class Wh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function wy(n){return n.fields.find(e=>e.kind===2)}function ls(n){return n.fields.filter(e=>e.kind!==2)}Wh.UNKNOWN_ID=-1;class Yd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mu(0,dn.min())}}function ix(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new ye(t+1,0):new ye(t,r));return new dn(i,q.empty(),e)}function sx(n){return new dn(n.readTime,n.key,ha)}class dn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new dn(X.min(),q.empty(),ha)}static max(){return new dn(X.max(),q.empty(),ha)}}function Mv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ax{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(n){if(n.code!==M.FAILED_PRECONDITION||n.message!==ox)throw n;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof V?t:V.resolve(t)}catch(t){return V.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):V.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):V.reject(t)}static resolve(e){return new V((t,r)=>{t(e)})}static reject(e){return new V((t,r)=>{r(e)})}static waitFor(e){return new V((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=V.resolve(!1);for(const r of e)t=t.next(i=>i?V.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new V((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new V((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="SimpleDb";class np{static open(e,t,r,i){try{return new np(t,e.transaction(i,r))}catch(s){throw new tu(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new _t,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new tu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Fv(r.target.error);this.S.reject(new tu(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($(tn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new t4(t)}}class Xn{static delete(e){return $(tn,"Removing database:",e),cs(tv().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ku())return!1;if(Xn.F())return!0;const e=de(),t=Xn.M(e),r=0<t&&t<10,i=lx(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Xn.M(de())===12.2&&Ke("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||($(tn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new tu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new U(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new U(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new tu(e,o))},i.onupgradeneeded=s=>{$(tn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{$(tn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=np.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),V.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if($(tn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function lx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class e4{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return cs(this.U.delete())}}class tu extends U{constructor(e,t){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ki(n){return n.name==="IndexedDbTransactionError"}class t4{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?($(tn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):($(tn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cs(r)}add(e){return $(tn,"ADD",this.store.name,e,e),cs(this.store.add(e))}get(e){return cs(this.store.get(e)).next(t=>(t===void 0&&(t=null),$(tn,"GET",this.store.name,e,t),t))}delete(e){return $(tn,"DELETE",this.store.name,e),cs(this.store.delete(e))}count(){return $(tn,"COUNT",this.store.name),cs(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new V((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new V((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,t){$(tn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new V((r,i)=>{t.onerror=s=>{const o=Fv(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,t){const r=[];return new V((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new e4(a),c=t(a.primaryKey,a.value,l);if(c instanceof V){const d=c.catch(h=>(l.done(),V.reject(h)));r.push(d)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>V.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cs(n){return new V((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Fv(r.target.error);t(i)}})}let sS=!1;function Fv(n){const e=Xn.M(de());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sS||(sS=!0,setTimeout(()=>{throw r},0)),r}}return n}const nu="IndexBackfiller";class n4{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){$(nu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();$(nu,`Documents written: ${t}`)}catch(t){Ki(t)?$(nu,"Ignoring IndexedDB error during index backfill: ",t):await Hi(t)}await this.re(6e4)})}}class r4{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const r=new Set;let i=t,s=!0;return V.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $(nu,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>($(nu,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}_e(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=sx(s);Mv(o,r)>0&&(r=o)}),new dn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ht.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=-1;function vc(n){return n==null}function Fu(n){return n===0&&1/n==-1/0}function ux(n){return typeof n=="number"&&Number.isInteger(n)&&!Fu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="";function kt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oS(e)),e=i4(n.get(t),e);return oS(e)}function i4(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case qh:t+="";break;default:t+=s}}return t}function oS(n){return n+qh+""}function Hn(n){const e=n.length;if(J(e>=2,64408,{path:n}),e===2)return J(n.charAt(0)===qh&&n.charAt(1)==="",56145,{path:n}),le.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf(qh,s);switch((o<0||o>t)&&Q(50515,{path:n}),n.charAt(o+1)){case"":const a=n.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:Q(61167,{path:n})}s=o+2}return new le(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="remoteDocuments",wc="owner",co="owner",ju="mutationQueues",s4="userId",Cn="mutations",aS="batchId",vs="userMutationsIndex",lS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(n,e){return[n,kt(e)]}function cx(n,e,t){return[n,kt(e),t]}const o4={},fa="documentMutations",Gh="remoteDocumentsV14",a4=["prefixPath","collectionGroup","readTime","documentId"],Xd="documentKeyIndex",l4=["prefixPath","collectionGroup","documentId"],dx="collectionGroupIndex",u4=["collectionGroup","readTime","prefixPath","documentId"],Uu="remoteDocumentGlobal",Ey="remoteDocumentGlobalKey",pa="targets",hx="queryTargetsIndex",c4=["canonicalId","targetId"],ma="targetDocuments",d4=["targetId","path"],jv="documentTargetsIndex",h4=["path","targetId"],Hh="targetGlobalKey",Rs="targetGlobal",$u="collectionParents",f4=["collectionId","parent"],ga="clientMetadata",p4="clientId",rp="bundles",m4="bundleId",ip="namedQueries",g4="name",Uv="indexConfiguration",y4="indexId",Iy="collectionGroupIndex",_4="collectionGroup",ru="indexState",v4=["indexId","uid"],fx="sequenceNumberIndex",w4=["uid","sequenceNumber"],iu="indexEntries",E4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],px="documentKeyIndex",I4=["indexId","uid","orderedDocumentKey"],sp="documentOverlays",T4=["userId","collectionPath","documentId"],Ty="collectionPathOverlayIndex",S4=["userId","collectionPath","largestBatchId"],mx="collectionGroupOverlayIndex",P4=["userId","collectionGroup","largestBatchId"],$v="globals",A4="name",gx=[ju,Cn,fa,us,pa,wc,Rs,ma,ga,Uu,$u,rp,ip],R4=[...gx,sp],yx=[ju,Cn,fa,Gh,pa,wc,Rs,ma,ga,Uu,$u,rp,ip,sp],_x=yx,Bv=[..._x,Uv,ru,iu],C4=Bv,vx=[...Bv,$v],x4=vx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy extends ax{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function st(n,e){const t=H(n);return Xn.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,t){this.comparator=e,this.root=t||pt.EMPTY}insert(e,t){return new Re(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ed(this.root,e,this.comparator,!0)}}class Ed{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??pt.RED,this.left=i??pt.EMPTY,this.right=s??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new pt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return pt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cS(this.data.getIterator())}getIteratorFrom(e){return new cS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ie)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ie(this.comparator);return t.data=e,t}}class cS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ho(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(Oe.comparator)}static empty(){return new Kt([])}unionWith(e){let t=new Ie(Oe.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Kt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return da(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ex("Invalid base64 string: "+s):s}}(e);return new ze(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ze(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ze.EMPTY_BYTE_STRING=new ze("");const b4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(n){if(J(!!n,39018),typeof n=="string"){let e=0;const t=b4.exec(n);if(J(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fr(n){return typeof n=="string"?ze.fromBase64String(n):ze.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="server_timestamp",Tx="__type__",Sx="__previous_value__",Px="__local_write_time__";function op(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Tx])==null?void 0:r.stringValue)===Ix}function ap(n){const e=n.mapValue.fields[Sx];return op(e)?ap(e):e}function Bu(n){const e=Mr(n.mapValue.fields[Px].timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,t,r,i,s,o,a,l,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Py="(default)";class Li{constructor(e,t){this.projectId=e,this.database=t||Py}static empty(){return new Li("","")}get isDefaultDatabase(){return this.database===Py}isEqual(e){return e instanceof Li&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="__type__",Ax="__max__",mi={mapValue:{fields:{__type__:{stringValue:Ax}}}},Wv="__vector__",ya="value",Zd={nullValue:"NULL_VALUE"};function Mi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?op(n)?4:Rx(n)?9007199254740991:lp(n)?10:11:Q(28295,{value:n})}function or(n,e){if(n===e)return!0;const t=Mi(n);if(t!==Mi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bu(n).isEqual(Bu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Mr(i.timestampValue),a=Mr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Fr(i.bytesValue).isEqual(Fr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ne(i.geoPointValue.latitude)===Ne(s.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ne(i.integerValue)===Ne(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ne(i.doubleValue),a=Ne(s.doubleValue);return o===a?Fu(o)===Fu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return da(n.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(uS(o)!==uS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!or(o[l],a[l])))return!1;return!0}(n,e);default:return Q(52216,{left:n})}}function zu(n,e){return(n.values||[]).find(t=>or(t,e))!==void 0}function Fi(n,e){if(n===e)return 0;const t=Mi(n),r=Mi(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ne(s.integerValue||s.doubleValue),l=Ne(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return dS(n.timestampValue,e.timestampValue);case 4:return dS(Bu(n),Bu(e));case 5:return vy(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Fr(s),l=Fr(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=re(a[c],l[c]);if(d!==0)return d}return re(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=re(Ne(s.latitude),Ne(o.latitude));return a!==0?a:re(Ne(s.longitude),Ne(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return hS(n.arrayValue,e.arrayValue);case 10:return function(s,o){var p,y,v,T;const a=s.fields||{},l=o.fields||{},c=(p=a[ya])==null?void 0:p.arrayValue,d=(y=l[ya])==null?void 0:y.arrayValue,h=re(((v=c==null?void 0:c.values)==null?void 0:v.length)||0,((T=d==null?void 0:d.values)==null?void 0:T.length)||0);return h!==0?h:hS(c,d)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===mi.mapValue&&o===mi.mapValue)return 0;if(s===mi.mapValue)return 1;if(o===mi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=vy(l[h],d[h]);if(p!==0)return p;const y=Fi(a[l[h]],c[d[h]]);if(y!==0)return y}return re(l.length,d.length)}(n.mapValue,e.mapValue);default:throw Q(23264,{he:t})}}function dS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);const t=Mr(n),r=Mr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function hS(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Fi(t[i],r[i]);if(s)return s}return re(t.length,r.length)}function _a(n){return Ay(n)}function Ay(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Mr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Fr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Ay(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ay(t.fields[o])}`;return i+"}"}(n.mapValue):Q(61005,{value:n})}function eh(n){switch(Mi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ap(n);return e?16+eh(e):16;case 5:return 2*n.stringValue.length;case 6:return Fr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+eh(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Qi(r.fields,(s,o)=>{i+=s.length+eh(o)}),i}(n.mapValue);default:throw Q(13486,{value:n})}}function Fs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ry(n){return!!n&&"integerValue"in n}function Wu(n){return!!n&&"arrayValue"in n}function fS(n){return!!n&&"nullValue"in n}function pS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function th(n){return!!n&&"mapValue"in n}function lp(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[zv])==null?void 0:r.stringValue)===Wv}function su(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Qi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=su(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=su(n.arrayValue.values[t]);return e}return{...n}}function Rx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Ax}const Cx={mapValue:{fields:{[zv]:{stringValue:Wv},[ya]:{arrayValue:{}}}}};function D4(n){return"nullValue"in n?Zd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fs(Li.empty(),q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?lp(n)?Cx:{mapValue:{}}:Q(35942,{value:n})}function O4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fs(Li.empty(),q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Cx:"mapValue"in n?lp(n)?{mapValue:{}}:mi:Q(61959,{value:n})}function mS(n,e){const t=Fi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function gS(n,e){const t=Fi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.value=e}static empty(){return new mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!th(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(t)}setAll(e){let t=Oe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=su(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());th(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];th(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qi(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new mt(su(this.value))}}function xx(n){const e=[];return Qi(n.fields,(t,r)=>{const i=new Oe([t]);if(th(r)){const s=xx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ke(e,0,X.min(),X.min(),X.min(),mt.empty(),0)}static newFoundDocument(e,t,r,i){return new ke(e,1,t,X.min(),r,i,0)}static newNoDocument(e,t){return new ke(e,2,t,X.min(),X.min(),mt.empty(),0)}static newUnknownDocument(e,t){return new ke(e,3,t,X.min(),X.min(),mt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ke&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t){this.position=e,this.inclusive=t}}function yS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),t.key):r=Fi(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _S(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!or(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function V4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{}class ce extends kx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new L4(e,t,r):t==="array-contains"?new j4(e,r):t==="in"?new Lx(e,r):t==="not-in"?new U4(e,r):t==="array-contains-any"?new $4(e,r):new ce(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new M4(e,r):new F4(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fi(t,this.value)):t!==null&&Mi(this.value)===Mi(t)&&this.matchesComparison(Fi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class we extends kx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new we(e,t)}matches(e){return va(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function va(n){return n.op==="and"}function Cy(n){return n.op==="or"}function qv(n){return bx(n)&&va(n)}function bx(n){for(const e of n.filters)if(e instanceof we)return!1;return!0}function xy(n){if(n instanceof ce)return n.field.canonicalString()+n.op.toString()+_a(n.value);if(qv(n))return n.filters.map(e=>xy(e)).join(",");{const e=n.filters.map(t=>xy(t)).join(",");return`${n.op}(${e})`}}function Nx(n,e){return n instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.field.isEqual(i.field)&&or(r.value,i.value)}(n,e):n instanceof we?function(r,i){return i instanceof we&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Nx(o,i.filters[a]),!0):!1}(n,e):void Q(19439)}function Dx(n,e){const t=n.filters.concat(e);return we.create(t,n.op)}function Ox(n){return n instanceof ce?function(t){return`${t.field.canonicalString()} ${t.op} ${_a(t.value)}`}(n):n instanceof we?function(t){return t.op.toString()+" {"+t.getFilters().map(Ox).join(" ,")+"}"}(n):"Filter"}class L4 extends ce{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){const t=q.comparator(e.key,this.key);return this.matchesComparison(t)}}class M4 extends ce{constructor(e,t){super(e,"in",t),this.keys=Vx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class F4 extends ce{constructor(e,t){super(e,"not-in",t),this.keys=Vx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vx(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}class j4 extends ce{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wu(t)&&zu(t.arrayValue,this.value)}}class Lx extends ce{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&zu(this.value.arrayValue,t)}}class U4 extends ce{constructor(e,t){super(e,"not-in",t)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zu(this.value.arrayValue,t)}}class $4 extends ce{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function ky(n,e=null,t=[],r=[],i=null,s=null,o=null){return new B4(n,e,t,r,i,s,o)}function js(n){const e=H(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>xy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),vc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_a(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_a(r)).join(",")),e.Te=t}return e.Te}function Ec(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!V4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Nx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_S(n.startAt,e.startAt)&&_S(n.endAt,e.endAt)}function Kh(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Qh(n,e){return n.filters.filter(t=>t instanceof ce&&t.field.isEqual(e))}function vS(n,e,t){let r=Zd,i=!0;for(const s of Qh(n,e)){let o=Zd,a=!0;switch(s.op){case"<":case"<=":o=D4(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Zd}mS({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];mS({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function wS(n,e,t){let r=mi,i=!0;for(const s of Qh(n,e)){let o=mi,a=!0;switch(s.op){case">=":case">":o=O4(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=mi}gS({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];gS({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Mx(n,e,t,r,i,s,o,a){return new qr(n,e,t,r,i,s,o,a)}function $a(n){return new qr(n)}function ES(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gv(n){return n.collectionGroup!==null}function Ko(n){const e=H(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ie(Oe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new qu(s,r))}),t.has(Oe.keyField().canonicalString())||e.Ie.push(new qu(Oe.keyField(),r))}return e.Ie}function jt(n){const e=H(n);return e.Ee||(e.Ee=z4(e,Ko(n))),e.Ee}function z4(n,e){if(n.limitType==="F")return ky(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new qu(i.field,s)});const t=n.endAt?new ji(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ji(n.startAt.position,n.startAt.inclusive):null;return ky(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function by(n,e){const t=n.filters.concat([e]);return new qr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Yh(n,e,t){return new qr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ic(n,e){return Ec(jt(n),jt(e))&&n.limitType===e.limitType}function Fx(n){return`${js(jt(n))}|lt:${n.limitType}`}function Io(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Ox(i)).join(", ")}]`),vc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_a(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_a(i)).join(",")),`Target(${r})`}(jt(n))}; limitType=${n.limitType})`}function Tc(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Ko(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=yS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ko(r),i)||r.endAt&&!function(o,a,l){const c=yS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ko(r),i))}(n,e)}function jx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ux(n){return(e,t)=>{let r=!1;for(const i of Ko(n)){const s=W4(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function W4(n,e,t){const r=n.field.isKeyField()?q.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Fi(l,c):Q(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qi(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return wx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=new Re(q.comparator);function Qt(){return q4}const $x=new Re(q.comparator);function Ll(...n){let e=$x;for(const t of n)e=e.insert(t.key,t);return e}function Bx(n){let e=$x;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Kn(){return ou()}function zx(){return ou()}function ou(){return new Gr(n=>n.toString(),(n,e)=>n.isEqual(e))}const G4=new Re(q.comparator),H4=new Ie(q.comparator);function ie(...n){let e=H4;for(const t of n)e=e.add(t);return e}const K4=new Ie(re);function Hv(){return K4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(e)?"-0":e}}function Wx(n){return{integerValue:""+n}}function qx(n,e){return ux(e)?Wx(e):Kv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this._=void 0}}function Q4(n,e,t){return n instanceof wa?function(i,s){const o={fields:{[Tx]:{stringValue:Ix},[Px]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&op(s)&&(s=ap(s)),s&&(o.fields[Sx]=s),{mapValue:o}}(t,e):n instanceof Us?Hx(n,e):n instanceof $s?Kx(n,e):function(i,s){const o=Gx(i,s),a=IS(o)+IS(i.Ae);return Ry(o)&&Ry(i.Ae)?Wx(a):Kv(i.serializer,a)}(n,e)}function Y4(n,e,t){return n instanceof Us?Hx(n,e):n instanceof $s?Kx(n,e):t}function Gx(n,e){return n instanceof Ea?function(r){return Ry(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class wa extends up{}class Us extends up{constructor(e){super(),this.elements=e}}function Hx(n,e){const t=Qx(e);for(const r of n.elements)t.some(i=>or(i,r))||t.push(r);return{arrayValue:{values:t}}}class $s extends up{constructor(e){super(),this.elements=e}}function Kx(n,e){let t=Qx(e);for(const r of n.elements)t=t.filter(i=>!or(i,r));return{arrayValue:{values:t}}}class Ea extends up{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function IS(n){return Ne(n.integerValue||n.doubleValue)}function Qx(n){return Wu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t){this.field=e,this.transform=t}}function J4(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Us&&i instanceof Us||r instanceof $s&&i instanceof $s?da(r.elements,i.elements,or):r instanceof Ea&&i instanceof Ea?or(r.Ae,i.Ae):r instanceof wa&&i instanceof wa}(n.transform,e.transform)}class X4{constructor(e,t){this.version=e,this.transformResults=t}}class Ve{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ve}static exists(e){return new Ve(void 0,e)}static updateTime(e){return new Ve(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cp{}function Yx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new za(n.key,Ve.none()):new Ba(n.key,n.data,Ve.none());{const t=n.data,r=mt.empty();let i=new Ie(Oe.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Hr(n.key,r,new Kt(i.toArray()),Ve.none())}}function Z4(n,e,t){n instanceof Ba?function(i,s,o){const a=i.value.clone(),l=SS(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Hr?function(i,s,o){if(!nh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=SS(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Jx(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function au(n,e,t,r){return n instanceof Ba?function(s,o,a,l){if(!nh(s.precondition,o))return a;const c=s.value.clone(),d=PS(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Hr?function(s,o,a,l){if(!nh(s.precondition,o))return a;const c=PS(s.fieldTransforms,l,o),d=o.data;return d.setAll(Jx(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return nh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function e$(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Gx(r.transform,i||null);s!=null&&(t===null&&(t=mt.empty()),t.set(r.field,s))}return t||null}function TS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&da(r,i,(s,o)=>J4(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ba extends cp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hr extends cp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Jx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function SS(n,e,t){const r=new Map;J(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Y4(o,a,t[i]))}return r}function PS(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Q4(s,o,e))}return r}class za extends cp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qv extends cp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Z4(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=au(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=au(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=zx();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=Yx(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&da(this.mutations,e.mutations,(t,r)=>TS(t,r))&&da(this.baseMutations,e.baseMutations,(t,r)=>TS(t,r))}}class Jv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){J(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return G4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Jv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,fe;function Xx(n){switch(n){case M.OK:return Q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return Q(15467,{code:n})}}function Zx(n){if(n===void 0)return Ke("GRPC error has no .code"),M.UNKNOWN;switch(n){case Je.OK:return M.OK;case Je.CANCELLED:return M.CANCELLED;case Je.UNKNOWN:return M.UNKNOWN;case Je.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Je.INTERNAL:return M.INTERNAL;case Je.UNAVAILABLE:return M.UNAVAILABLE;case Je.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Je.NOT_FOUND:return M.NOT_FOUND;case Je.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Je.ABORTED:return M.ABORTED;case Je.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Je.DATA_LOSS:return M.DATA_LOSS;default:return Q(39323,{code:n})}}(fe=Je||(Je={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=new Ci([4294967295,4294967295],0);function AS(n){const e=ek().encode(n),t=new GC;return t.update(e),new Uint8Array(t.digest())}function RS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ci([t,r],0),new Ci([i,s],0)]}class Zv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ml(`Invalid padding: ${t}`);if(r<0)throw new Ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ml(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ml(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ci.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ci.fromNumber(r)));return i.compare(n$)===1&&(i=new Ci([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=AS(e),[r,i]=RS(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Zv(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const t=AS(e),[r,i]=RS(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Pc(X.min(),i,new Re(re),Qt(),ie())}}class Ac{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ac(r,t,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class tk{constructor(e,t){this.targetId=e,this.Ce=t}}class nk{constructor(e,t,r=ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class CS{constructor(){this.ve=0,this.Fe=xS(),this.Me=ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),t=ie(),r=ie();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:s})}}),new Ac(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=xS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,J(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class r${constructor(e){this.Ge=e,this.ze=new Map,this.je=Qt(),this.Je=Id(),this.He=Id(),this.Ye=new Re(re)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(Kh(s))if(r===0){const o=new q(s.path);this.et(t,o,ke.newNoDocument(o,X.min()))}else J(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,c)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Fr(r).toUint8Array()}catch(l){if(l instanceof Ex)return sr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Zv(o,i,s)}catch(l){return sr(l instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Kh(a.target)){const l=new q(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ke.newNoDocument(l,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=ie();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Pc(e,t,this.Ye,this.je,r);return this.je=Qt(),this.Je=Id(),this.He=Id(),this.Ye=new Re(re),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new CS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ie(re),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ie(re),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||$("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new CS),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Id(){return new Re(q.comparator)}function xS(){return new Re(q.comparator)}const i$={asc:"ASCENDING",desc:"DESCENDING"},s$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o$={and:"AND",or:"OR"};class a${constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ny(n,e){return n.useProto3Json||vc(e)?e:{value:e}}function Ia(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function l$(n,e){return Ia(n,e.toTimestamp())}function Qe(n){return J(!!n,49232),X.fromTimestamp(function(t){const r=Mr(t);return new ye(r.seconds,r.nanos)}(n))}function ew(n,e){return Dy(n,e).canonicalString()}function Dy(n,e){const t=function(i){return new le(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ik(n){const e=le.fromString(n);return J(pk(e),10190,{key:e.toString()}),e}function Gu(n,e){return ew(n.databaseId,e.path)}function Zn(n,e){const t=ik(e);if(t.get(1)!==n.databaseId.projectId)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(ak(t))}function sk(n,e){return ew(n.databaseId,e)}function ok(n){const e=ik(n);return e.length===4?le.emptyPath():ak(e)}function Oy(n){return new le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ak(n){return J(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kS(n,e,t){return{name:Gu(n,e),fields:t.value.mapValue.fields}}function lk(n,e,t){const r=Zn(n,e.name),i=Qe(e.updateTime),s=e.createTime?Qe(e.createTime):X.min(),o=new mt({mapValue:{fields:e.fields}}),a=ke.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function u$(n,e){return"found"in e?function(r,i){J(!!i.found,43571),i.found.name,i.found.updateTime;const s=Zn(r,i.found.name),o=Qe(i.found.updateTime),a=i.found.createTime?Qe(i.found.createTime):X.min(),l=new mt({mapValue:{fields:i.found.fields}});return ke.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){J(!!i.missing,3894),J(!!i.readTime,22933);const s=Zn(r,i.missing),o=Qe(i.readTime);return ke.newNoDocument(s,o)}(n,e):Q(7234,{result:e})}function c$(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Q(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(J(d===void 0||typeof d=="string",58123),ze.fromBase64String(d||"")):(J(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ze.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?M.UNKNOWN:Zx(c.code);return new U(d,c.message||"")}(o);t=new nk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Zn(n,r.document.name),s=Qe(r.document.updateTime),o=r.document.createTime?Qe(r.document.createTime):X.min(),a=new mt({mapValue:{fields:r.document.fields}}),l=ke.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];t=new rh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Zn(n,r.document),s=r.readTime?Qe(r.readTime):X.min(),o=ke.newNoDocument(i,s),a=r.removedTargetIds||[];t=new rh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Zn(n,r.document),s=r.removedTargetIds||[];t=new rh([],s,i,null)}else{if(!("filter"in e))return Q(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new t$(i,s),a=r.targetId;t=new tk(a,o)}}return t}function Hu(n,e){let t;if(e instanceof Ba)t={update:kS(n,e.key,e.value)};else if(e instanceof za)t={delete:Gu(n,e.key)};else if(e instanceof Hr)t={update:kS(n,e.key,e.data),updateMask:g$(e.fieldMask)};else{if(!(e instanceof Qv))return Q(16599,{Vt:e.type});t={verify:Gu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof wa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Us)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $s)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ea)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Q(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:l$(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(n,e.precondition)),t}function Vy(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Ve.updateTime(Qe(s.updateTime)):s.exists!==void 0?Ve.exists(s.exists):Ve.none()}(e.currentDocument):Ve.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)J(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new wa;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Us(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new $s(d)}else"increment"in a?l=new Ea(o,a.increment):Q(16584,{proto:a});const c=Oe.fromServerFormat(a.fieldPath);return new Sc(c,l)}(n,i)):[];if(e.update){e.update.name;const i=Zn(n,e.update.name),s=new mt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Kt(c.map(d=>Oe.fromServerFormat(d)))}(e.updateMask);return new Hr(i,s,o,t,r)}return new Ba(i,s,t,r)}if(e.delete){const i=Zn(n,e.delete);return new za(i,t)}if(e.verify){const i=Zn(n,e.verify);return new Qv(i,t)}return Q(1463,{proto:e})}function d$(n,e){return n&&n.length>0?(J(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?Qe(i.updateTime):Qe(s);return o.isEqual(X.min())&&(o=Qe(s)),new X4(o,i.transformResults||[])}(t,e))):[]}function uk(n,e){return{documents:[sk(n,e.path)]}}function ck(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sk(n,i);const s=function(c){if(c.length!==0)return fk(we.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:To(p.field),direction:f$(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Ny(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:t,parent:i}}function dk(n){let e=ok(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){J(r===1,65062);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){const p=hk(h);return p instanceof we&&qv(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(p=>function(v){return new qu(So(v.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,vc(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(h){const p=!!h.before,y=h.values||[];return new ji(y,p)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const p=!h.before,y=h.values||[];return new ji(y,p)}(t.endAt)),Mx(e,i,o,s,a,"F",l,c)}function h$(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hk(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=So(t.unaryFilter.field);return ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=So(t.unaryFilter.field);return ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=So(t.unaryFilter.field);return ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=So(t.unaryFilter.field);return ce.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(n):n.fieldFilter!==void 0?function(t){return ce.create(So(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return we.create(t.compositeFilter.filters.map(r=>hk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(t.compositeFilter.op))}(n):Q(30097,{filter:n})}function f$(n){return i$[n]}function p$(n){return s$[n]}function m$(n){return o$[n]}function To(n){return{fieldPath:n.canonicalString()}}function So(n){return Oe.fromServerFormat(n.fieldPath)}function fk(n){return n instanceof ce?function(t){if(t.op==="=="){if(pS(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NAN"}};if(fS(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pS(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NAN"}};if(fS(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(t.field),op:p$(t.op),value:t.value}}}(n):n instanceof we?function(t){const r=t.getFilters().map(i=>fk(i));return r.length===1?r[0]:{compositeFilter:{op:m$(t.op),filters:r}}}(n):Q(54877,{filter:n})}function g$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t,r,i,s=X.min(),o=X.min(),a=ze.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.yt=e}}function y$(n,e){let t;if(e.document)t=lk(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=q.fromSegments(e.noDocument.path),i=zs(e.noDocument.readTime);t=ke.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q(56709);{const r=q.fromSegments(e.unknownDocument.path),i=zs(e.unknownDocument.version);t=ke.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new ye(i[0],i[1]);return X.fromTimestamp(s)}(e.readTime)),t}function bS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Gu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ia(s,o.version.toTimestamp()),createTime:Ia(s,o.createTime.toTimestamp())}}(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bs(e.version)};else{if(!e.isUnknownDocument())return Q(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Bs(e.version)}}return r}function Jh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bs(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zs(n){const e=new ye(n.seconds,n.nanoseconds);return X.fromTimestamp(e)}function ds(n,e){const t=(e.baseMutations||[]).map(s=>Vy(n.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Vy(n.yt,s)),i=ye.fromMillis(e.localWriteTimeMs);return new Yv(e.batchId,i,t,r)}function Fl(n){const e=zs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?zs(n.lastLimboFreeSnapshotVersion):X.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){const o=s.documents.length;return J(o===1,1966,{count:o}),jt($a(ok(s.documents[0])))}(n.query):function(s){return jt(dk(s))}(n.query),new Tr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ze.fromBase64String(n.resumeToken))}function gk(n,e){const t=Bs(e.snapshotVersion),r=Bs(e.lastLimboFreeSnapshotVersion);let i;i=Kh(e.target)?uk(n.yt,e.target):ck(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:js(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tw(n){const e=dk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Yh(e,e.limit,"L"):e}function qm(n,e){return new Xv(e.largestBatchId,Vy(n.yt,e.overlayMutation))}function NS(n,e){const t=e.path.lastSegment();return[n,kt(e.path.popLast()),t]}function DS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Bs(r.readTime),documentKey:kt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${getBundleMetadata(e,t){return OS(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:zs(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return OS(e).put(function(i){return{bundleId:i.id,createTime:Bs(Qe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return VS(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:tw(s.bundledQuery),readTime:zs(s.readTime)}}(r)})}saveNamedQuery(e,t){return VS(e).put(function(i){return{name:i.name,readTime:Bs(Qe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function OS(n){return st(n,rp)}function VS(n){return st(n,ip)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new dp(e,r)}getOverlay(e,t){return El(e).get(NS(this.userId,t)).next(r=>r?qm(this.serializer,r):null)}getOverlays(e,t){const r=Kn();return V.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new Xv(t,o);i.push(this.St(e,a))}),V.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(kt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(El(e).Z(Ty,a))}),V.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Kn(),s=kt(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return El(e).J(Ty,o).next(a=>{for(const l of a){const c=qm(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Kn();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return El(e).ee({index:mx,range:a},(l,c,d)=>{const h=qm(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}St(e,t){return El(e).put(function(i,s,o){const[a,l,c]=NS(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Hu(i.yt,o.mutation)}}(this.serializer,this.userId,t))}}function El(n){return st(n,sp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${bt(e){return st(e,$v)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?ze.fromUint8Array(r):ze.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ne(e.integerValue));else if("doubleValue"in e){const r=Ne(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Fu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Mr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Fr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Rx(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):lp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Q(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var o,a;const r=e.fields||{};this.Ft(t,53);const i=ya,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(t,15),t.Mt(Ne(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),q.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}hs.Kt=new hs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=255;function w$(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function LS(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=w$(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}class E${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=LS(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=LS(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(fo),this.sn(255)}_n(){this.an(fo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===fo?(this.sn(fo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===fo?(this.an(fo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class I${constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class T${constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Il{constructor(){this.cn=new E$,this.ln=new I$(this.cn),this.hn=new T$(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new fs(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:ih(this.En),directionalValue:ih(this.dn),orderedDocumentKey:ih(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function ei(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=MS(n.En,e.En),t!==0?t:(t=MS(n.dn,e.dn),t!==0?t:q.comparator(n.In,e.In)))}function MS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function ih(n){return bR()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function FS(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}class jS{constructor(e){this.mn=new Ie((t,r)=>Oe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(J(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=wy(e);if(t!==void 0&&!this.wn(t))return!1;const r=ls(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ie(Oe.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Yd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Yd(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Yd(r.field,r.dir==="asc"?0:1)));return new Wh(Wh.UNKNOWN_ID,this.collectionId,t,Mu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(n){var t,r;if(J(n instanceof ce||n instanceof we,20012),n instanceof ce){if(n instanceof Lx){const i=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map(s=>ce.create(n.field,"==",s)))||[];return we.create(i,"or")}return n}const e=n.filters.map(i=>yk(i));return we.create(e,n.op)}function S$(n){if(n.getFilters().length===0)return[];const e=Fy(yk(n));return J(_k(e),7391),Ly(e)||My(e)?[e]:e.getFilters()}function Ly(n){return n instanceof ce}function My(n){return n instanceof we&&qv(n)}function _k(n){return Ly(n)||My(n)||function(t){if(t instanceof we&&Cy(t)){for(const r of t.getFilters())if(!Ly(r)&&!My(r))return!1;return!0}return!1}(n)}function Fy(n){if(J(n instanceof ce||n instanceof we,34018),n instanceof ce)return n;if(n.filters.length===1)return Fy(n.filters[0]);const e=n.filters.map(r=>Fy(r));let t=we.create(e,n.op);return t=Xh(t),_k(t)?t:(J(t instanceof we,64498),J(va(t),40251),J(t.filters.length>1,57927),t.filters.reduce((r,i)=>nw(r,i)))}function nw(n,e){let t;return J(n instanceof ce||n instanceof we,38388),J(e instanceof ce||e instanceof we,25473),t=n instanceof ce?e instanceof ce?function(i,s){return we.create([i,s],"and")}(n,e):US(n,e):e instanceof ce?US(e,n):function(i,s){if(J(i.filters.length>0&&s.filters.length>0,48005),va(i)&&va(s))return Dx(i,s.getFilters());const o=Cy(i)?i:s,a=Cy(i)?s:i,l=o.filters.map(c=>nw(c,a));return we.create(l,"or")}(n,e),Xh(t)}function US(n,e){if(va(e))return Dx(e,n.getFilters());{const t=e.filters.map(r=>nw(n,r));return we.create(t,"or")}}function Xh(n){if(J(n instanceof ce||n instanceof we,11850),n instanceof ce)return n;const e=n.getFilters();if(e.length===1)return Xh(e[0]);if(bx(n))return n;const t=e.map(i=>Xh(i)),r=[];return t.forEach(i=>{i instanceof ce?r.push(i):i instanceof we&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:we.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(){this.Cn=new rw}addToCollectionParentIndex(e,t){return this.Cn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(dn.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(dn.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}}class rw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ie(le.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ie(le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="IndexedDbIndexManager",Td=new Uint8Array(0);class A${constructor(e,t){this.databaseId=t,this.vn=new rw,this.Fn=new Gr(r=>js(r),(r,i)=>Ec(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const s={collectionId:r,parent:kt(i)};return BS(e).put(s)}return V.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ex(t),""],!1,!0);return BS(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Hn(o.parent))}return r})}addFieldIndex(e,t){const r=Tl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const o=mo(e);return s.next(a=>{o.put(DS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Tl(e),i=mo(e),s=po(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Tl(e),r=po(e),i=mo(e);return t.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,t){return V.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new jS(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=po(e);let i=!0;const s=new Map;return V.forEach(this.Mn(t),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ie();const a=[];return V.forEach(s,(l,c)=>{$($S,`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(b=>`${b.fieldPath}:${b.kind}`).join(",")}`}(l)} to execute ${js(t)}`);const d=function(E,b){const O=wy(b);if(O===void 0)return null;for(const F of Qh(E,O.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null}(c,l),h=function(E,b){const O=new Map;for(const F of ls(b))for(const A of Qh(E,F.fieldPath))switch(A.op){case"==":case"in":O.set(F.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return O.set(F.fieldPath.canonicalString(),A.value),Array.from(O.values())}return null}(c,l),p=function(E,b){const O=[];let F=!0;for(const A of ls(b)){const I=A.kind===0?vS(E,A.fieldPath,E.startAt):wS(E,A.fieldPath,E.startAt);O.push(I.value),F&&(F=I.inclusive)}return new ji(O,F)}(c,l),y=function(E,b){const O=[];let F=!0;for(const A of ls(b)){const I=A.kind===0?wS(E,A.fieldPath,E.endAt):vS(E,A.fieldPath,E.endAt);O.push(I.value),F&&(F=I.inclusive)}return new ji(O,F)}(c,l),v=this.On(l,c,p),T=this.On(l,c,y),x=this.Nn(l,c,h),_=this.Bn(l.indexId,d,v,p.inclusive,T,y.inclusive,x);return V.forEach(_,w=>r.Y(w,t.limit).next(E=>{E.forEach(b=>{const O=q.fromSegments(b.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return V.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=S$(we.create(e.filters,"and")).map(r=>ky(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),c=l/(t!=null?t.length:1),d=[];for(let h=0;h<l;++h){const p=t?this.Ln(t[h/c]):Td,y=this.kn(e,p,r[h%c],i),v=this.qn(e,p,s[h%c],o),T=a.map(x=>this.kn(e,p,x,!0));d.push(...this.createRange(y,v,T))}return d}kn(e,t,r,i){const s=new fs(e,q.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new fs(e,q.empty(),t,r);return i?s.An():s}xn(e,t){const r=new jS(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.Mn(t);return V.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Ie(Oe.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Qn(e,t){const r=new Il;for(const i of ls(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);hs.Kt.Dt(s,o)}return r.un()}Ln(e){const t=new Il;return hs.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Il;return hs.Kt.Dt(Fs(this.databaseId,t),r.Pn(function(s){const o=ls(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Il);let s=0;for(const o of ls(e)){const a=r[s++];for(const l of i)if(this.Un(t,o.fieldPath)&&Wu(a))i=this.Kn(i,o,a);else{const c=l.Pn(o.kind);hs.Kt.Dt(a,c)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Il;l.seed(a.un()),hs.Kt.Dt(o,l.Pn(t.kind)),s.push(l)}return s}Un(e,t){return!!e.filters.find(r=>r instanceof ce&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Tl(e),i=mo(e);return(t?r.J(Iy,IDBKeyRange.bound(t,t)):r.J()).next(s=>{const o=[];return V.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new Mu(h.sequenceNumber,new dn(zs(h.readTime),new q(Hn(h.documentKey)),h.largestBatchId)):Mu.empty(),y=d.fields.map(([v,T])=>new Yd(Oe.fromServerFormat(v),T));return new Wh(d.indexId,d.collectionGroup,y,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Tl(e),s=mo(e);return this.Gn(e).next(o=>i.J(Iy,IDBKeyRange.bound(t,t)).next(a=>V.forEach(a,l=>s.put(DS(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return V.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),V.forEach(a,l=>this.zn(e,i,l).next(c=>{const d=this.jn(s,l);return c.isEqual(d)?V.resolve():this.Jn(e,s,l,c,d)}))))})}Hn(e,t,r,i){return po(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return po(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=po(e);let s=new Ie(ei);return i.ee({index:px,range:IDBKeyRange.only([r.indexId,this.uid,ih(this.$n(r,t))])},(o,a)=>{s=s.add(new fs(r.indexId,t,FS(a.arrayValue),FS(a.directionalValue)))}).next(()=>s)}jn(e,t){let r=new Ie(ei);const i=this.Qn(t,e);if(i==null)return r;const s=wy(t);if(s!=null){const o=e.data.field(s.fieldPath);if(Wu(o))for(const a of o.arrayValue.values||[])r=r.add(new fs(t.indexId,e.key,this.Ln(a),i))}else r=r.add(new fs(t.indexId,e.key,Td,i));return r}Jn(e,t,r,i,s){$($S,"Updating index entries for document '%s'",t.key);const o=[];return function(l,c,d,h,p){const y=l.getIterator(),v=c.getIterator();let T=ho(y),x=ho(v);for(;T||x;){let _=!1,w=!1;if(T&&x){const E=d(T,x);E<0?w=!0:E>0&&(_=!0)}else T!=null?w=!0:_=!0;_?(h(x),x=ho(v)):w?(p(T),T=ho(y)):(T=ho(y),x=ho(v))}}(i,s,ei,a=>{o.push(this.Hn(e,t,r,a))},a=>{o.push(this.Yn(e,t,r,a))}),V.waitFor(o)}Gn(e){let t=1;return mo(e).ee({index:fx,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>ei(o,a)).filter((o,a,l)=>!a||ei(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=ei(o,e),l=ei(o,t);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Td,q.empty()),l=i[o+1].Vn(this.uid,Td,q.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,t){return ei(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zS)}getMinOffset(e,t){return V.mapArray(this.Mn(t),r=>this.xn(e,r).next(i=>i||Q(44426))).next(zS)}}function BS(n){return st(n,$u)}function po(n){return st(n,iu)}function Tl(n){return st(n,Uv)}function mo(n){return st(n,ru)}function zS(n){J(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Mv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new dn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vk=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(n,e,t){const r=n.store(Cn),i=n.store(fa),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.ee({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{J(a===1,47070,{batchId:t.batchId})}));const c=[];for(const d of t.mutations){const h=cx(e,d.key.path,t.batchId);s.push(i.delete(h)),c.push(d.key)}return V.waitFor(s).next(()=>c)}function Zh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Q(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(vk,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);class hp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){J(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new hp(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).ee({index:vs,range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Po(e),o=ti(e);return o.add({}).next(a=>{J(typeof a=="number",49019);const l=new Yv(a,t,r,i),c=function(y,v,T){const x=T.baseMutations.map(w=>Hu(y.yt,w)),_=T.mutations.map(w=>Hu(y.yt,w));return{userId:v,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:x,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new Ie((p,y)=>re(p.canonicalString(),y.canonicalString()));for(const p of i){const y=cx(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(y,o4))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return ti(e).get(t).next(r=>r?(J(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ds(this.serializer,r)):null)}er(e,t){return this.Xn[t]?V.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ti(e).ee({index:vs,range:i},(o,a,l)=>{a.userId===this.userId&&(J(a.batchId>=r,47524,{tr:r}),s=ds(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=xi;return ti(e).ee({index:vs,range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,xi],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).J(vs,t).next(r=>r.map(i=>ds(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Jd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Po(e).ee({range:i},(o,a,l)=>{const[c,d,h]=o,p=Hn(d);if(c===this.userId&&t.path.isEqual(p))return ti(e).get(h).next(y=>{if(!y)throw Q(61480,{nr:o,batchId:h});J(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:h}),s.push(ds(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ie(re);const i=[];return t.forEach(s=>{const o=Jd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Po(e).ee({range:a},(c,d,h)=>{const[p,y,v]=c,T=Hn(y);p===this.userId&&s.path.isEqual(T)?r=r.add(v):h.done()});i.push(l)}),V.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Jd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ie(re);return Po(e).ee({range:o},(l,c,d)=>{const[h,p,y]=l,v=Hn(p);h===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(y)):d.done()}).next(()=>this.rr(e,a))}rr(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ti(e).get(s).next(o=>{if(o===null)throw Q(35274,{batchId:s});J(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(ds(this.serializer,o))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return wk(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Po(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Hn(s[1]);i.push(l)}else a.done()}).next(()=>{J(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,t){return Ek(e,this.userId,t)}_r(e){return Ik(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:xi,lastStreamToken:""})}}function Ek(n,e,t){const r=Jd(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Po(n).ee({range:s,X:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function ti(n){return st(n,Cn)}function Po(n){return st(n,fa)}function Ik(n){return st(n,ju)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ws(0)}static cr(){return new Ws(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const r=new Ws(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>X.fromTimestamp(new ye(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>go(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(J(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return go(e).ee((o,a)=>{const l=Fl(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(s)).next(()=>i)}forEachTarget(e,t){return go(e).ee((r,i)=>{const s=Fl(i);t(s)})}lr(e){return qS(e).get(Hh).next(t=>(J(t!==null,2888),t))}hr(e,t){return qS(e).put(Hh,t)}Pr(e,t){return go(e).put(gk(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=js(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return go(e).ee({range:i,index:hx},(o,a,l)=>{const c=Fl(a);Ec(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=li(e);return t.forEach(o=>{const a=kt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(i)}removeMatchingKeys(e,t,r){const i=li(e);return V.forEach(t,s=>{const o=kt(s.path);return V.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=li(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=li(e);let s=ie();return i.ee({range:r,X:!0},(o,a,l)=>{const c=Hn(o[1]),d=new q(c);s=s.add(d)}).next(()=>s)}containsKey(e,t){const r=kt(t.path),i=IDBKeyRange.bound([r],[ex(r)],!1,!0);let s=0;return li(e).ee({index:jv,X:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}At(e,t){return go(e).get(t).next(r=>r?Fl(r):null)}}function go(n){return st(n,pa)}function qS(n){return st(n,Rs)}function li(n){return st(n,ma)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="LruGarbageCollector",C$=1048576;function HS([n,e],[t,r]){const i=re(n,t);return i===0?re(e,r):i}class x${constructor(e){this.Ir=e,this.buffer=new Ie(HS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();HS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Tk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(GS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ki(t)?$(GS,"Ignoring IndexedDB error during garbage collection: ",t):await Hi(t)}await this.Vr(3e5)})}}class k${constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(Ht.ce);const r=new x$(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(WS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WS):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Eo()<=ae.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function Sk(n,e){return new k$(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e,t){this.db=e,this.garbageCollector=Sk(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,i)=>t(i))}addReference(e,t,r){return Sd(e,r)}removeReference(e,t,r){return Sd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Sd(e,t)}br(e,t){return function(i,s){let o=!1;return Ik(i).te(a=>Ek(i,a,s).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=t){const l=this.br(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,X.min()),li(e).delete(function(h){return[0,kt(h.path)]}(o))))});i.push(l)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Sd(e,t)}Sr(e,t){const r=li(e);let i,s=Ht.ce;return r.ee({index:jv},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Ht.ce&&t(new q(Hn(i)),s),s=c,i=l):s=Ht.ce}).next(()=>{s!==Ht.ce&&t(new q(Hn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sd(n,e){return li(n).put(function(r,i){return{targetId:0,path:kt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.changes=new Gr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ke.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ns(e).put(r)}removeEntry(e,t,r){return ns(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Jh(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=ke.newInvalidDocument(t);return ns(e).ee({index:Xd,range:IDBKeyRange.only(Sl(t))},(i,s)=>{r=this.Cr(t,s)}).next(()=>r)}vr(e,t){let r={size:0,document:ke.newInvalidDocument(t)};return ns(e).ee({index:Xd,range:IDBKeyRange.only(Sl(t))},(i,s)=>{r={document:this.Cr(t,s),size:Zh(s)}}).next(()=>r)}getEntries(e,t){let r=Qt();return this.Fr(e,t,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,t){let r=Qt(),i=new Re(q.comparator);return this.Fr(e,t,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,Zh(o))}).next(()=>({documents:r,Or:i}))}Fr(e,t,r){if(t.isEmpty())return V.resolve();let i=new Ie(YS);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Sl(i.first()),Sl(i.last())),o=i.getIterator();let a=o.getNext();return ns(e).ee({index:Xd,range:s},(l,c,d)=>{const h=q.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&YS(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Sl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Jh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ns(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=Qt();for(const h of c){const p=this.Cr(q.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Tc(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Qt();const o=QS(t,r),a=QS(t,dn.max());return ns(e).ee({index:dx,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(q.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new D$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return KS(e).get(Ey).next(t=>(J(!!t,20021),t))}Dr(e,t){return KS(e).put(Ey,t)}Cr(e,t){if(t){const r=y$(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(X.min())))return r}return ke.newInvalidDocument(e)}}function Ak(n){return new N$(n)}class D$ extends Pk{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Gr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Ie((s,o)=>re(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=bS(this.Nr.serializer,o);i=i.add(s.path.popLast());const c=Zh(l);r+=c-a.size,t.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=bS(this.Nr.serializer,o.convertToNoDocument(X.min()));t.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Nr.updateMetadata(e,r)),V.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function KS(n){return st(n,Uu)}function ns(n){return st(n,Gh)}function Sl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QS(n,e){const t=e.documentKey.path.toArray();return[n,Jh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function YS(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=re(t[s],r[s]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&au(r.mutation,i,Kt.empty(),ye.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){const i=Kn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ll();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Kn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Qt();const o=ou(),a=function(){return ou()}();return t.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Hr)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),au(d.mutation,c,d.mutation.getFieldMask(),ye.now())):o.set(c.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>a.set(c,new O$(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,t){const r=ou();let i=new Re((o,a)=>o-a),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let d=r.get(l)||Kt.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||ie()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=zx();d.forEach(p=>{if(!s.has(p)){const y=Yx(t.get(p),r.get(p));y!==null&&h.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):V.resolve(Kn());let a=ha,l=s;return o.next(c=>V.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ie())).next(d=>({batchId:a,changes:Bx(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=Ll();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Ll();return this.indexManager.getCollectionParents(e,s).next(a=>V.forEach(a,l=>{const c=function(h,p){return new qr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,ke.newInvalidDocument(d)))});let a=Ll();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&au(d.mutation,c,Kt.empty(),ye.now()),Tc(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return V.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qe(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:tw(i.bundledQuery),readTime:Qe(i.readTime)}}(t)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(){this.overlays=new Re(q.comparator),this.qr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Kn();return V.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),V.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){const i=Kn(),s=t.length+1,o=new q(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Re((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Kn(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Kn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return V.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Xv(t,r));let s=this.qr.get(t);s===void 0&&(s=ie(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(){this.sessionToken=ze.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.Qr=new Ie(ot.$r),this.Ur=new Ie(ot.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ot(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new ot(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new q(new le([])),r=new ot(t,e),i=new ot(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new q(new le([])),r=new ot(t,e),i=new ot(t,e+1);let s=ie();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ot(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ot{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return q.comparator(e.key,t.key)||re(e.Yr,t.Yr)}static Kr(e,t){return re(e.Yr,t.Yr)||q.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ie(ot.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Yv(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new ot(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,t){return V.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?xi:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ot(t,0),i=new ot(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ie(re);return t.forEach(i=>{const s=new ot(i,0),o=new ot(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const o=new ot(new q(s),0);let a=new Ie(re);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)},o),V.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){J(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(t.mutations,i=>{const s=new ot(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new ot(t,0),i=this.Zr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e){this.ri=e,this.docs=function(){return new Re(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():ke.newInvalidDocument(t))}getEntries(e,t){let r=Qt();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ke.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Qt();const o=t.path,a=new q(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Mv(sx(d),r)<=0||(i.has(d.key)||Tc(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Q(9500)}ii(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new U$(this)}getSize(e){return V.resolve(this.size)}}class U$ extends Pk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e){this.persistence=e,this.si=new Gr(t=>js(t),Ec),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.oi=0,this._i=new iw,this.targetCount=0,this.ai=Ws.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),V.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ws(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Pr(t),V.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),V.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ht(0),this.li=!1,this.li=!0,this.hi=new M$,this.referenceDelegate=e(this),this.Pi=new $$(this),this.indexManager=new P$,this.remoteDocumentCache=function(i){return new j$(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new mk(t),this.Ii=new V$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new L$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new F$(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){$("MemoryPersistence","Starting transaction:",e);const i=new B$(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class B$ extends ax{constructor(e){super(),this.currentSequenceNumber=e}}class fp{constructor(e){this.persistence=e,this.Ri=new iw,this.Vi=null}static mi(e){return new fp(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),V.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const i=q.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,X.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return V.or([()=>V.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ef{constructor(e,t){this.persistence=e,this.pi=new Gr(r=>kt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Sk(this,t)}static mi(e,t){return new ef(e,t)}Ei(){}di(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return V.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,X.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),V.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=eh(e.data.value)),t}br(e,t,r){return V.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e){this.serializer=e}k(e,t,r,i){const s=new np("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore(wc)}(e),function(l){l.createObjectStore(ju,{keyPath:s4}),l.createObjectStore(Cn,{keyPath:aS,autoIncrement:!0}).createIndex(vs,lS,{unique:!0}),l.createObjectStore(fa)}(e),JS(e),function(l){l.createObjectStore(us)}(e));let o=V.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(ma),l.deleteObjectStore(pa),l.deleteObjectStore(Rs)}(e),JS(e)),o=o.next(()=>function(l){const c=l.store(Rs),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return c.put(Hh,d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(Cn).J().next(h=>{l.deleteObjectStore(Cn),l.createObjectStore(Cn,{keyPath:aS,autoIncrement:!0}).createIndex(vs,lS,{unique:!0});const p=c.store(Cn),y=h.map(v=>p.put(v));return V.waitFor(y)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(ga,{keyPath:p4})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Uu)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(rp,{keyPath:m4})})(e),function(l){l.createObjectStore(ip,{keyPath:g4})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(sp,{keyPath:T4});c.createIndex(Ty,S4,{unique:!1}),c.createIndex(mx,P4,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Gh,{keyPath:a4});c.createIndex(Xd,l4),c.createIndex(dx,u4)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(us))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(Uv,{keyPath:y4,autoIncrement:!0}).createIndex(Iy,_4,{unique:!1}),l.createObjectStore(ru,{keyPath:v4}).createIndex(fx,w4,{unique:!1}),l.createObjectStore(iu,{keyPath:E4}).createIndex(px,I4,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore(ru).clear()}).next(()=>{t.objectStore(iu).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore($v,{keyPath:A4})})(e)})),r<18&&i>=18&&bR()&&(o=o.next(()=>{t.objectStore(ru).clear()}).next(()=>{t.objectStore(iu).clear()})),o}wi(e){let t=0;return e.store(us).ee((r,i)=>{t+=Zh(i)}).next(()=>{const r={byteSize:t};return e.store(Uu).put(Ey,r)})}yi(e){const t=e.store(ju),r=e.store(Cn);return t.J().next(i=>V.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,xi],[s.userId,s.lastAcknowledgedBatchId]);return r.J(vs,o).next(a=>V.forEach(a,l=>{J(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=ds(this.serializer,l);return wk(e,s.userId,c).next(()=>{})}))}))}Si(e){const t=e.store(ma),r=e.store(us);return e.store(Rs).get(Hh).next(i=>{const s=[];return r.ee((o,a)=>{const l=new le(o),c=function(h){return[0,kt(h)]}(l);s.push(t.get(c).next(d=>d?V.resolve():(h=>t.put({targetId:0,path:kt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(s))})}bi(e,t){e.createObjectStore($u,{keyPath:f4});const r=t.store($u),i=new rw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:kt(l)})}};return t.store(us).ee({X:!0},(o,a)=>{const l=new le(o);return s(l.popLast())}).next(()=>t.store(fa).ee({X:!0},([o,a,l],c)=>{const d=Hn(a);return s(d.popLast())}))}Di(e){const t=e.store(pa);return t.ee((r,i)=>{const s=Fl(i),o=gk(this.serializer,s);return t.put(o)})}Ci(e,t){const r=t.store(us),i=[];return r.ee((s,o)=>{const a=t.store(Gh),l=function(h){return h.document?new q(le.fromString(h.document.name).popFirst(5)):h.noDocument?q.fromSegments(h.noDocument.path):h.unknownDocument?q.fromSegments(h.unknownDocument.path):Q(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>V.waitFor(i))}Fi(e,t){const r=t.store(Cn),i=Ak(this.serializer),s=new sw(fp.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??ie();ds(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),V.forEach(a,(l,c)=>{const d=new lt(c),h=dp.wt(this.serializer,d),p=s.getIndexManager(d),y=hp.wt(d,this.serializer,p,s.referenceDelegate);return new Rk(i,y,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Sy(t,Ht.ce),l).next()})})}}function JS(n){n.createObjectStore(ma,{keyPath:d4}).createIndex(jv,h4,{unique:!0}),n.createObjectStore(pa,{keyPath:"targetId"}).createIndex(hx,c4,{unique:!0}),n.createObjectStore(Rs)}const ni="IndexedDbPersistence",Gm=18e5,Hm=5e3,Km="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ck="main";class ow{constructor(e,t,r,i,s,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!ow.v())throw new U(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new b$(this,i),this.$i=t+Ck,this.serializer=new mk(l),this.Ui=new Xn(this.$i,this.Ni,new z$(this.serializer)),this.hi=new v$,this.Pi=new R$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ak(this.serializer),this.Ii=new _$,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&Ke(ni,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U(M.FAILED_PRECONDITION,Km);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Ht(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ki(e))return $(ni,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $(ni,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Pl(e).get(co).next(t=>V.resolve(this.es(t)))}ts(e){return Pd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Gm)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=st(t,ga);return r.J().next(i=>{const s=this.ss(i,Gm),o=i.filter(a=>s.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):Pl(e).get(co).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Hm)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new U(M.FAILED_PRECONDITION,Km);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pd(e).J().next(r=>this.ss(r,Hm).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&$(ni,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[wc,ga],e=>{const t=new Sy(e,Ht.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Pd(e).J().next(t=>this.ss(t,Gm).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return hp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new A$(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return dp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){$(ni,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===18?x4:l===17?vx:l===16?C4:l===15?Bv:l===14?_x:l===13?yx:l===12?R4:l===11?gx:void Q(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new Sy(a,this.ci?this.ci.next():Ht.ce),t==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw Ke(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new U(M.FAILED_PRECONDITION,ox);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Pl(e).get(co).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Hm)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new U(M.FAILED_PRECONDITION,Km)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pl(e).put(co,t)}static v(){return Xn.v()}Zi(e){const t=Pl(e);return t.get(co).next(r=>this.es(r)?($(ni,"Releasing primary lease."),t.delete(co)):V.resolve())}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ke(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;kR()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return $(ni,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ke(ni,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ke("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pl(n){return st(n,wc)}function Pd(n){return st(n,ga)}function aw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ie(),i=ie();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new lw(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return kR()?8:lx(de())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new W$;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Eo()<=ae.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Io(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(Eo()<=ae.DEBUG&&$("QueryEngine","Query:",Io(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Eo()<=ae.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Io(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jt(t))):V.resolve())}ys(e,t){if(ES(t))return V.resolve(null);let r=jt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Yh(t,null,"F"),r=jt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ie(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(t,a);return this.Cs(t,c,o,l.readTime)?this.ys(e,Yh(t,null,"F")):this.vs(e,c,t,l)}))})))}ws(e,t,r,i){return ES(t)||i.isEqual(X.min())?V.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(t,s);return this.Cs(t,o,r,i)?V.resolve(null):(Eo()<=ae.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Io(t)),this.vs(e,o,t,ix(i,ha)).next(a=>a))})}Ds(e,t){let r=new Ie(Ux(e));return t.forEach((i,s)=>{Tc(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Eo()<=ae.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Io(t)),this.ps.getDocumentsMatchingQuery(e,t,dn.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="LocalStore",q$=3e8;class G${constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Re(re),this.xs=new Gr(s=>js(s),Ec),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function kk(n,e,t,r){return new G$(n,e,t,r)}async function bk(n,e){const t=H(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ie();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function H$(n,e){const t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let y=V.resolve();return p.forEach(v=>{y=y.next(()=>d.getEntry(l,v)).next(T=>{const x=c.docVersions.get(v);J(x!==null,48541),T.version.compareTo(x)<0&&(h.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),d.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Nk(n){const e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function K$(n,e){const t=H(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(t.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Pi.addMatchingKeys(s,d.addedDocuments,h)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(ze.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),function(T,x,_){return T.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=q$?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,y,d)&&a.push(t.Pi.updateTargetData(s,y))});let l=Qt(),c=ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Dk(s,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(X.min())){const d=t.Pi.getLastRemoteSnapshotVersion(s).next(h=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ms=i,s))}function Dk(n,e,t){let r=ie(),i=ie();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Qt();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(X.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$(uw,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:i}})}function Q$(n,e){const t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xi),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ta(n,e){const t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new Tr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Sa(n,e,t){const r=H(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ki(o))throw o;$(uw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function tf(n,e,t){const r=H(n);let i=X.min(),s=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=H(l),p=h.xs.get(d);return p!==void 0?V.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,d)}(r,o,jt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:X.min(),t?s:ie())).next(a=>(Lk(r,jx(e),a),{documents:a,Qs:s})))}function Ok(n,e){const t=H(n),r=H(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function Vk(n,e){const t=H(n),r=t.Os.get(e)||X.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ns.getAllFromCollectionGroup(i,e,ix(r,ha),Number.MAX_SAFE_INTEGER)).then(i=>(Lk(t,e,i),i))}function Lk(n,e,t){let r=n.Os.get(e)||X.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}async function Y$(n,e,t,r){const i=H(n);let s=ie(),o=Qt();for(const c of t){const d=e.$s(c.metadata.name);c.document&&(s=s.add(d));const h=e.Us(c);h.setReadTime(e.Ks(c.metadata.readTime)),o=o.insert(d,h)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await Ta(i,function(d){return jt($a(le.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>Dk(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Pi.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.ks,d.qs)).next(()=>d.ks)))}async function J$(n,e,t=ie()){const r=await Ta(n,jt(tw(e.bundledQuery))),i=H(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Qe(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(s,e);const a=r.withResumeToken(ze.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(s,a).next(()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Pi.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="firestore_clients";function XS(n,e){return`${Mk}_${n}_${e}`}const Fk="firestore_mutations";function ZS(n,e,t){let r=`${Fk}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const jk="firestore_targets";function Qm(n,e){return`${jk}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn="SharedClientState";class nf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new U(i.error.code,i.error.message))),o?new nf(e,t,i.state,s):(Ke(Wn,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new U(r.error.code,r.error.message))),s?new lu(e,r.state,i):(Ke(Wn,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Hv();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=ux(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new rf(e,s):(Ke(Wn,`Failed to parse client data for instance '${e}': ${t}`),null)}}class cw{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new cw(t.clientId,t.onlineState):(Ke(Wn,`Failed to parse online state: ${e}`),null)}}class jy{constructor(){this.activeTargetIds=Hv()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ym{constructor(e,t,r,i,s){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Re(re),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=XS(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new jy),this.ro=new RegExp(`^${Mk}_${o}_([^_]*)$`),this.io=new RegExp(`^${Fk}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${jk}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(XS(this.persistenceKey,r));if(i){const s=rf.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Qm(this.persistenceKey,e));if(i){const s=lu.Ws(e,i);s&&(r=s.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qm(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $(Wn,"READ",e,t),t}setItem(e,t){$(Wn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){$(Wn,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if($(Wn,"EVENT",t.key,t.newValue),t.key===this.eo)return void Ke("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=function(s){let o=Ht.ce;if(s!=null)try{const a=JSON.parse(s);J(typeof a=="number",30636,{So:s}),o=a}catch(a){Ke(Wn,"Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Ht.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(t)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new nf(this.currentUser,e,t,r),s=ZS(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=ZS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=Qm(this.persistenceKey,e),s=new lu(e,t,r);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return rf.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return nf.Ws(new lt(s),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return lu.Ws(i,t)}uo(e){return cw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);$(Wn,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Hv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Uk{constructor(){this.Mo=new jy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new jy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="ConnectivityMonitor";class tP{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(eP,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(eP,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad=null;function Uy(){return Ad===null?Ad=function(){return 268435456+Math.round(2147483648*Math.random())}():Ad++,"0x"+Ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="RestConnection",Z$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Py?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const o=Uy(),a=this.zo(e,t.toUriEncodedString());$(Jm,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(a),d=Br(c);return this.Jo(e,a,l,r,d).then(h=>($(Jm,`Received RPC '${e}' ${o}: `,h),h),h=>{throw sr(Jm,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ua}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){const r=Z$[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class nB extends eB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const o=Uy();return new Promise((a,l)=>{const c=new HC;c.setWithCredentials(!0),c.listenOnce(KC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Qd.NO_ERROR:const h=c.getResponseJson();$(At,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Qd.TIMEOUT:$(At,`RPC '${e}' ${o} timed out`),l(new U(M.DEADLINE_EXCEEDED,"Request time out"));break;case Qd.HTTP_ERROR:const p=c.getStatus();if($(At,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const T=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(w)>=0?w:M.UNKNOWN}(v.status);l(new U(T,v.message))}else l(new U(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new U(M.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{$(At,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);$(At,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",d,r,15)})}T_(e,t,r){const i=Uy(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=JC(),a=YC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const d=s.join("");$(At,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,y=!1;const v=new tB({Yo:x=>{y?$(At,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||($(At,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),$(At,`RPC '${e}' stream ${i} sending:`,x),h.send(x))},Zo:()=>h.close()}),T=(x,_,w)=>{x.listen(_,E=>{try{w(E)}catch(b){setTimeout(()=>{throw b},0)}})};return T(h,Vl.EventType.OPEN,()=>{y||($(At,`RPC '${e}' stream ${i} transport opened.`),v.o_())}),T(h,Vl.EventType.CLOSE,()=>{y||(y=!0,$(At,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(h))}),T(h,Vl.EventType.ERROR,x=>{y||(y=!0,sr(At,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),v.a_(new U(M.UNAVAILABLE,"The operation could not be completed")))}),T(h,Vl.EventType.MESSAGE,x=>{var _;if(!y){const w=x.data[0];J(!!w,16349);const E=w,b=(E==null?void 0:E.error)||((_=E[0])==null?void 0:_.error);if(b){$(At,`RPC '${e}' stream ${i} received error:`,b);const O=b.status;let F=function(P){const R=Je[P];if(R!==void 0)return Zx(R)}(O),A=b.message;F===void 0&&(F=M.INTERNAL,A="Unknown error status: "+O+" with message "+b.message),y=!0,v.a_(new U(F,A)),h.close()}else $(At,`RPC '${e}' stream ${i} received:`,w),v.u_(w)}}),T(a,QC.STAT_EVENT,x=>{x.stat===_y.PROXY?$(At,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===_y.NOPROXY&&$(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(){return typeof window<"u"?window:null}function sh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(n){return new a$(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="PersistentStream";class Bk{constructor(e,t,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Ke(t.toString()),Ke("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new U(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(nP,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():($(nP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rB extends Bk{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=c$(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?Qe(o.readTime):X.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Oy(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=Kh(l)?{documents:uk(s,l)}:{query:ck(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=rk(s,o.resumeToken);const c=Ny(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=Ia(s,o.snapshotVersion.toTimestamp());const c=Ny(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=h$(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Oy(this.serializer),t.removeTarget=e,this.q_(t)}}class iB extends Bk{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return J(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,J(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){J(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=d$(e.writeResults,e.commitTime),r=Qe(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Oy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Hu(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{}class oB extends sB{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Dy(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(M.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Dy(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class aB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ke(t),this.aa=!1):$("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="RemoteStore";class lB{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Yi(this)&&($(qs,"Restarting streams for network reachability change."),await async function(l){const c=H(l);c.Ea.add(4),await Wa(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Cc(c)}(this))})}),this.Ra=new aB(r,i)}}async function Cc(n){if(Yi(n))for(const e of n.da)await e(!0)}async function Wa(n){for(const e of n.da)await e(!1)}function pp(n,e){const t=H(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),pw(t)?fw(t):Ga(t).O_()&&hw(t,e))}function Pa(n,e){const t=H(n),r=Ga(t);t.Ia.delete(e),r.O_()&&zk(t,e),t.Ia.size===0&&(r.O_()?r.L_():Yi(t)&&t.Ra.set("Unknown"))}function hw(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ga(n).Y_(e)}function zk(n,e){n.Va.Ue(e),Ga(n).Z_(e)}function fw(n){n.Va=new r$({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ga(n).start(),n.Ra.ua()}function pw(n){return Yi(n)&&!Ga(n).x_()&&n.Ia.size>0}function Yi(n){return H(n).Ea.size===0}function Wk(n){n.Va=void 0}async function uB(n){n.Ra.set("Online")}async function cB(n){n.Ia.forEach((e,t)=>{hw(n,e)})}async function dB(n,e){Wk(n),pw(n)?(n.Ra.ha(e),fw(n)):n.Ra.set("Unknown")}async function hB(n,e,t){if(n.Ra.set("Online"),e instanceof nk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(n,e)}catch(r){$(qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sf(n,r)}else if(e instanceof rh?n.Va.Ze(e):e instanceof tk?n.Va.st(e):n.Va.tt(e),!t.isEqual(X.min()))try{const r=await Nk(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(c);d&&s.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(ze.EMPTY_BYTE_STRING,d.snapshotVersion)),zk(s,l);const h=new Tr(d.target,l,c,d.sequenceNumber);hw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){$(qs,"Failed to raise snapshot:",r),await sf(n,r)}}async function sf(n,e,t){if(!Ki(e))throw e;n.Ea.add(1),await Wa(n),n.Ra.set("Offline"),t||(t=()=>Nk(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{$(qs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Cc(n)})}function qk(n,e){return e().catch(t=>sf(n,t,e))}async function qa(n){const e=H(n),t=Ui(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xi;for(;fB(e);)try{const i=await Q$(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,pB(e,i)}catch(i){await sf(e,i)}Gk(e)&&Hk(e)}function fB(n){return Yi(n)&&n.Ta.length<10}function pB(n,e){n.Ta.push(e);const t=Ui(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Gk(n){return Yi(n)&&!Ui(n).x_()&&n.Ta.length>0}function Hk(n){Ui(n).start()}async function mB(n){Ui(n).ra()}async function gB(n){const e=Ui(n);for(const t of n.Ta)e.ea(t.mutations)}async function yB(n,e,t){const r=n.Ta.shift(),i=Jv.from(r,e,t);await qk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await qa(n)}async function _B(n,e){e&&Ui(n).X_&&await async function(r,i){if(function(o){return Xx(o)&&o!==M.ABORTED}(i.code)){const s=r.Ta.shift();Ui(r).B_(),await qk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await qa(r)}}(n,e),Gk(n)&&Hk(n)}async function rP(n,e){const t=H(n);t.asyncQueue.verifyOperationInProgress(),$(qs,"RemoteStore received new credentials");const r=Yi(t);t.Ea.add(3),await Wa(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cc(t)}async function $y(n,e){const t=H(n);e?(t.Ea.delete(2),await Cc(t)):e||(t.Ea.add(2),await Wa(t),t.Ra.set("Unknown"))}function Ga(n){return n.ma||(n.ma=function(t,r,i){const s=H(t);return s.sa(),new rB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:uB.bind(null,n),t_:cB.bind(null,n),r_:dB.bind(null,n),H_:hB.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),pw(n)?fw(n):n.Ra.set("Unknown")):(await n.ma.stop(),Wk(n))})),n.ma}function Ui(n){return n.fa||(n.fa=function(t,r,i){const s=H(t);return s.sa(),new iB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:mB.bind(null,n),r_:_B.bind(null,n),ta:gB.bind(null,n),na:yB.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await qa(n)):(await n.fa.stop(),n.Ta.length>0&&($(qs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new mw(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ha(n,e){if(Ke("AsyncQueue",`${e}: ${n}`),Ki(n))return new U(M.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=Ll(),this.sortedSet=new Re(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Qo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.ga=new Re(q.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class Aa{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Aa(e,t,Qo.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class wB{constructor(){this.queries=sP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=H(t),s=i.queries;i.queries=sP(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new U(M.ABORTED,"Firestore shutting down"))}}function sP(){return new Gr(n=>Fx(n),Ic)}async function gw(n,e){const t=H(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new vB,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Ha(o,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&_w(t)}async function yw(n,e){const t=H(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function EB(n,e){const t=H(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&_w(t)}function IB(n,e,t){const r=H(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function _w(n){n.Ca.forEach(e=>{e.next()})}var By,oP;(oP=By||(By={})).Ma="default",oP.Cache="cache";class vw{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Aa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==By.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.serializer=e}$s(e){return Zn(this.serializer,e)}Us(e){return e.metadata.exists?lk(this.serializer,e.document,!1):ke.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Qe(e)}}class SB{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=Kk(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const r=le.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new aP(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ie()).add(s);t.set(o,a)}}return t}async ja(e){const t=await Y$(e,new aP(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await J$(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function Kk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.key=e}}class Yk{constructor(e){this.key=e}}class Jk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ie(),this.mutatedKeys=ie(),this.eu=Ux(e),this.tu=new Qo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new iP,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),y=Tc(this.query,h)?h:null,v=!!p&&this.mutatedKeys.has(p.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;p&&y?p.data.isEqual(y.data)?v!==T&&(r.track({type:3,doc:y}),x=!0):this.su(p,y)||(r.track({type:2,doc:y}),x=!0,(l&&this.eu(y,l)>0||c&&this.eu(y,c)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),x=!0):p&&!y&&(r.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(y?(o=o.add(y),s=T?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(y,v){const T=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:x})}};return T(y)-T(v)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;const a=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Aa(this.query,e.tu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iP,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Yk(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Qk(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=ie();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Aa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ji="SyncEngine";class PB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AB{constructor(e){this.key=e,this.hu=!1}}class RB{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Gr(a=>Fx(a),Ic),this.Iu=new Map,this.Eu=new Set,this.du=new Re(q.comparator),this.Au=new Map,this.Ru=new iw,this.Vu={},this.mu=new Map,this.fu=Ws.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CB(n,e,t=!0){const r=mp(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Xk(r,e,t,!0),i}async function xB(n,e){const t=mp(n);await Xk(t,e,!0,!1)}async function Xk(n,e,t,r){const i=await Ta(n.localStore,jt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await ww(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&pp(n.remoteStore,i),a}async function ww(n,e,t,r,i){n.pu=(h,p,y)=>async function(T,x,_,w){let E=x.view.ru(_);E.Cs&&(E=await tf(T.localStore,x.query,!1).then(({documents:A})=>x.view.ru(A,E)));const b=w&&w.targetChanges.get(x.targetId),O=w&&w.targetMismatches.get(x.targetId)!=null,F=x.view.applyChanges(E,T.isPrimaryClient,b,O);return zy(T,x.targetId,F.au),F.snapshot}(n,h,p,y);const s=await tf(n.localStore,e,!0),o=new Jk(e,s.Qs),a=o.ru(s.documents),l=Ac.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);zy(n,t,c.au);const d=new PB(e,t,o);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),c.snapshot}async function kB(n,e,t){const r=H(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Ic(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Pa(r.remoteStore,i.targetId),Ra(r,i.targetId)}).catch(Hi)):(Ra(r,i.targetId),await Sa(r.localStore,i.targetId,!0))}async function bB(n,e){const t=H(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Pa(t.remoteStore,r.targetId))}async function NB(n,e,t){const r=Sw(n);try{const i=await function(o,a){const l=H(o),c=ye.now(),d=a.reduce((y,v)=>y.add(v.key),ie());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let v=Qt(),T=ie();return l.Ns.getEntries(y,d).next(x=>{v=x,v.forEach((_,w)=>{w.isValidDocument()||(T=T.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,v)).next(x=>{h=x;const _=[];for(const w of a){const E=e$(w,h.get(w.key).overlayedDocument);E!=null&&_.push(new Hr(w.key,E,xx(E.value.mapValue),Ve.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,_,a)}).next(x=>{p=x;const _=x.applyToLocalDocumentSet(h,T);return l.documentOverlayCache.saveOverlays(y,x.batchId,_)})}).then(()=>({batchId:p.batchId,changes:Bx(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Re(re)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,i.batchId,t),await Kr(r,i.changes),await qa(r.remoteStore)}catch(i){const s=Ha(i,"Failed to persist write");t.reject(s)}}async function Zk(n,e){const t=H(n);try{const r=await K$(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Au.get(s);o&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?J(o.hu,14607):i.removedDocuments.size>0&&(J(o.hu,42227),o.hu=!1))}),await Kr(t,r,e)}catch(r){await Hi(r)}}function lP(n,e,t){const r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=H(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(a)&&(c=!0)}),c&&_w(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DB(n,e,t){const r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Re(q.comparator);o=o.insert(s,ke.newNoDocument(s,X.min()));const a=ie().add(s),l=new Pc(X.min(),new Map,new Re(re),o,a);await Zk(r,l),r.du=r.du.remove(s),r.Au.delete(e),Tw(r)}else await Sa(r.localStore,e,!1).then(()=>Ra(r,e,t)).catch(Hi)}async function OB(n,e){const t=H(n),r=e.batch.batchId;try{const i=await H$(t.localStore,e);Iw(t,r,null),Ew(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Kr(t,i)}catch(i){await Hi(i)}}async function VB(n,e,t){const r=H(n);try{const i=await function(o,a){const l=H(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(J(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);Iw(r,e,t),Ew(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Kr(r,i)}catch(i){await Hi(i)}}async function LB(n,e){const t=H(n);Yi(t.remoteStore)||$(Ji,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=H(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===xi)return void e.resolve();const i=t.mu.get(r)||[];i.push(e),t.mu.set(r,i)}catch(r){const i=Ha(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Ew(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function Iw(n,e,t){const r=H(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ra(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||e1(n,r)})}function e1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Pa(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Tw(n))}function zy(n,e,t){for(const r of t)r instanceof Qk?(n.Ru.addReference(r.key,e),MB(n,r)):r instanceof Yk?($(Ji,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||e1(n,r.key)):Q(19791,{wu:r})}function MB(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||($(Ji,"New document in limbo: "+t),n.Eu.add(r),Tw(n))}function Tw(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new q(le.fromString(e)),r=n.fu.next();n.Au.set(r,new AB(t)),n.du=n.du.insert(t,r),pp(n.remoteStore,new Tr(jt($a(t.path)),r,"TargetPurposeLimboResolution",Ht.ce))}}async function Kr(n,e,t){const r=H(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,t).then(c=>{var d;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=lw.As(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,c){const d=H(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,p=>V.forEach(p.Es,y=>d.persistence.referenceDelegate.addReference(h,p.targetId,y)).next(()=>V.forEach(p.ds,y=>d.persistence.referenceDelegate.removeReference(h,p.targetId,y)))))}catch(h){if(!Ki(h))throw h;$(uw,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const y=d.Ms.get(p),v=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(v);d.Ms=d.Ms.insert(p,T)}}}(r.localStore,s))}async function FB(n,e){const t=H(n);if(!t.currentUser.isEqual(e)){$(Ji,"User change. New user:",e.toKey());const r=await bk(t.localStore,e);t.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new U(M.CANCELLED,o))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Kr(t,r.Ls)}}function jB(n,e){const t=H(n),r=t.Au.get(e);if(r&&r.hu)return ie().add(r.key);{let i=ie();const s=t.Iu.get(e);if(!s)return i;for(const o of s){const a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function UB(n,e){const t=H(n),r=await tf(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&zy(t,e.targetId,i.au),i}async function $B(n,e){const t=H(n);return Vk(t.localStore,e).then(r=>Kr(t,r))}async function BB(n,e,t,r){const i=H(n),s=await function(a,l){const c=H(a),d=H(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):V.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await qa(i.remoteStore):t==="acknowledged"||t==="rejected"?(Iw(i,e,r||null),Ew(i,e),function(a,l){H(H(a).mutationQueue).ir(l)}(i.localStore,e)):Q(6720,"Unknown batchState",{Su:t}),await Kr(i,s)):$(Ji,"Cannot apply mutation batch with id: "+e)}async function zB(n,e){const t=H(n);if(mp(t),Sw(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await uP(t,r.toArray());t.gu=!0,await $y(t.remoteStore,!0);for(const s of i)pp(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ra(t,o),Sa(t.localStore,o,!0))),Pa(t.remoteStore,o)}),await i,await uP(t,r),function(o){const a=H(o);a.Au.forEach((l,c)=>{Pa(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Re(q.comparator)}(t),t.gu=!1,await $y(t.remoteStore,!1)}}async function uP(n,e,t){const r=H(n),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Ta(r.localStore,jt(l[0]));for(const c of l){const d=r.Tu.get(c),h=await UB(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await Ok(r.localStore,o);a=await Ta(r.localStore,c),await ww(r,t1(c),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function t1(n){return Mx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function WB(n){return function(t){return H(H(t).persistence).Ts()}(H(n).localStore)}async function qB(n,e,t,r){const i=H(n);if(i.gu)return void $(Ji,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await Vk(i.localStore,jx(s[0])),a=Pc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ze.EMPTY_BYTE_STRING);await Kr(i,o,a);break}case"rejected":await Sa(i.localStore,e,!0),Ra(i,e,r);break;default:Q(64155,t)}}async function GB(n,e,t){const r=mp(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$(Ji,"Adding an already active target "+i);continue}const s=await Ok(r.localStore,i),o=await Ta(r.localStore,s);await ww(r,t1(s),o.targetId,!1,o.resumeToken),pp(r.remoteStore,o)}for(const i of t)r.Iu.has(i)&&await Sa(r.localStore,i,!1).then(()=>{Pa(r.remoteStore,i),Ra(r,i)}).catch(Hi)}}function mp(n){const e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DB.bind(null,e),e.Pu.H_=EB.bind(null,e.eventManager),e.Pu.yu=IB.bind(null,e.eventManager),e}function Sw(n){const e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VB.bind(null,e),e}function HB(n,e,t){const r=H(n);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(y,v){const T=H(y),x=Qe(v.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",_=>T.Ii.getBundleMetadata(_,v.id)).then(_=>!!_&&_.createTime.compareTo(x)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(Kk(l));const c=new SB(l,o.serializer);let d=await o.bu();for(;d;){const p=await c.Ga(d);p&&a._updateProgress(p),d=await o.bu()}const h=await c.ja(s.localStore);return await Kr(s,h.Ha,void 0),await function(y,v){const T=H(y);return T.persistence.runTransaction("Save bundle","readwrite",x=>T.Ii.saveBundleMetadata(x,v))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(l){return sr(Ji,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Ku{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kk(this.persistence,new xk,e.initialUser,this.serializer)}Cu(e){return new sw(fp.mi,this.serializer)}Du(e){return new Uk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ku.provider={build:()=>new Ku};class KB extends Ku{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){J(this.persistence.referenceDelegate instanceof ef,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Tk(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new sw(r=>ef.mi(r,t),this.serializer)}}class n1 extends Ku{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Sw(this.xu.syncEngine),await qa(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return kk(this.persistence,new xk,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new Tk(r,e.asyncQueue,t)}Mu(e,t){const r=new r4(t,this.persistence);return new n4(e.asyncQueue,r)}Cu(e){const t=aw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new ow(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$k(),sh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Uk}}class QB extends n1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Ym&&(this.sharedClientState.syncEngine={Co:BB.bind(null,t),vo:qB.bind(null,t),Fo:GB.bind(null,t),Ts:WB.bind(null,t),Do:$B.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await zB(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const t=$k();if(!Ym.v(t))throw new U(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=aw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ym(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FB.bind(null,this.syncEngine),await $y(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wB}()}createDatastore(e){const t=Rc(e.databaseInfo.databaseId),r=function(s){return new nB(s)}(e.databaseInfo);return function(s,o,a,l){return new oB(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new lB(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>lP(this.syncEngine,t,0),function(){return tP.v()?new tP:new X$}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,d){const h=new RB(i,s,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=H(i);$(qs,"RemoteStore shutting down."),s.Ea.add(5),await Wa(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Qu.provider={build:()=>new Qu};function cP(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ke("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new _t,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.Qu(`length string (${t}) is not valid number`);const i=await this.$u(r);return new TB(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new U(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const o=H(i),a={documents:s.map(h=>Gu(o.serializer,h))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,le.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{const p=u$(o.serializer,h);c.set(p.key.toString(),p)});const d=[];return s.forEach(h=>{const p=c.get(h.toString());J(!!p,55234,{key:h}),d.push(p)}),d}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new za(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=q.fromPath(r);this.mutations.push(new Qv(i,this.precondition(i)))}),await async function(r,i){const s=H(r),o={writes:i.map(a=>Hu(s.serializer,a))};await s.Go("Commit",s.serializer.databaseId,le.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Q(50498,{Gu:e.constructor.name});t=X.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new U(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(X.min())?Ve.exists(!1):Ve.updateTime(t):Ve.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(X.min()))throw new U(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ve.updateTime(t)}return Ve.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new dw(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new JB(this.datastore),t=this.Hu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const t=this.updateFunction(e);return!vc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Xx(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="FirestoreClient";class ZB{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=lt.UNAUTHENTICATED,this.clientId=Vv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$($i,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($($i,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ha(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xm(n,e){n.asyncQueue.verifyOperationInProgress(),$($i,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await bk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function dP(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Pw(n);$($i,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>rP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>rP(e.remoteStore,i)),n._onlineComponents=e}async function Pw(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$($i,"Using user provided OfflineComponentProvider");try{await Xm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;sr("Error using user provided cache. Falling back to memory cache: "+t),await Xm(n,new Ku)}}else $($i,"Using default OfflineComponentProvider"),await Xm(n,new KB(void 0));return n._offlineComponents}async function yp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($($i,"Using user provided OnlineComponentProvider"),await dP(n,n._uninitializedComponentsProvider._online)):($($i,"Using default OnlineComponentProvider"),await dP(n,new Qu))),n._onlineComponents}function r1(n){return Pw(n).then(e=>e.persistence)}function Aw(n){return Pw(n).then(e=>e.localStore)}function i1(n){return yp(n).then(e=>e.remoteStore)}function Rw(n){return yp(n).then(e=>e.syncEngine)}function e3(n){return yp(n).then(e=>e.datastore)}async function Ca(n){const e=await yp(n),t=e.eventManager;return t.onListen=CB.bind(null,e.syncEngine),t.onUnlisten=kB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bB.bind(null,e.syncEngine),t}function t3(n){return n.asyncQueue.enqueue(async()=>{const e=await r1(n),t=await i1(n);return e.setNetworkEnabled(!0),function(i){const s=H(i);return s.Ea.delete(0),Cc(s)}(t)})}function n3(n){return n.asyncQueue.enqueue(async()=>{const e=await r1(n),t=await i1(n);return e.setNetworkEnabled(!1),async function(i){const s=H(i);s.Ea.add(0),await Wa(s),s.Ra.set("Offline")}(t)})}function r3(n,e){const t=new _t;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,d){const h=H(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new U(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ha(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Aw(n),e,t)),t.promise}function s1(n,e,t={}){const r=new _t;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new gp({next:p=>{d.Nu(),o.enqueueAndForget(()=>yw(s,h));const y=p.docs.has(a);!y&&p.fromCache?c.reject(new U(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?c.reject(new U(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new vw($a(a.path),d,{includeMetadataChanges:!0,qa:!0});return gw(s,h)}(await Ca(n),n.asyncQueue,e,t,r)),r.promise}function i3(n,e){const t=new _t;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await tf(i,s,!0),l=new Jk(s,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Ha(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Aw(n),e,t)),t.promise}function o1(n,e,t={}){const r=new _t;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new gp({next:p=>{d.Nu(),o.enqueueAndForget(()=>yw(s,h)),p.fromCache&&l.source==="server"?c.reject(new U(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new vw(a,d,{includeMetadataChanges:!0,qa:!0});return gw(s,h)}(await Ca(n),n.asyncQueue,e,t,r)),r.promise}function s3(n,e){const t=new gp(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){H(i).Ca.add(s),s.next()}(await Ca(n),t)),()=>{t.Nu(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){H(i).Ca.delete(s)}(await Ca(n),t))}}function o3(n,e,t,r){const i=function(o,a){let l;return l=typeof o=="string"?ek().encode(o):o,function(d,h){return new YB(d,h)}(function(d,h){if(d instanceof Uint8Array)return cP(d,h);if(d instanceof ArrayBuffer)return cP(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,Rc(e));n.asyncQueue.enqueueAndForget(async()=>{HB(await Rw(n),i,r)})}function a3(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=H(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ii.getNamedQuery(o,i))}(await Aw(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firestore.googleapis.com",fP=!0;class pP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new U(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=l1,this.ssl=fP}else this.host=e.host,this.ssl=e.ssl??fP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<C$)throw new U(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xc{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WU;switch(r.type){case"firstParty":return new KU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=hP.get(t);r&&($("ComponentProvider","Removing Datastore"),hP.delete(t),r.terminate())}(this),Promise.resolve()}}function l3(n,e,t,r={}){var c;n=_e(n,xc);const i=Br(e),s=n._getSettings(),o={...s,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;i&&(iv(`https://${a}`),sv("Firestore",!0)),s.host!==l1&&s.host!==a&&sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!Mn(l,o)&&(n._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=lt.MOCK_USER;else{d=cL(r.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new U(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new lt(p)}n._authCredentials=new qU(new ZC(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ut=class u1{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new u1(this.firestore,e,this._query)}},Ae=class jl{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jl(this.firestore,e,this._key)}toJSON(){return{type:jl._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(_c(t,jl._jsonSchema))return new jl(e,r||null,new q(le.fromString(t.referencePath)))}};Ae._jsonSchemaVersion="firestore/documentReference/1.0",Ae._jsonSchema={type:tt("string",Ae._jsonSchemaVersion),referencePath:tt("string")};let ki=class c1 extends Ut{constructor(e,t,r){super(e,t,$a(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ae(this.firestore,null,new q(e))}withConverter(e){return new c1(this.firestore,e,this._path)}};function _p(n,e,...t){if(n=Z(n),Lv("collection","path",e),n instanceof xc){const r=le.fromString(e,...t);return nS(r),new ki(n,null,r)}{if(!(n instanceof Ae||n instanceof ki))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(le.fromString(e,...t));return nS(r),new ki(n.firestore,null,r)}}function u3(n,e){if(n=_e(n,xc),Lv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ut(n,null,function(r){return new qr(le.emptyPath(),r)}(e))}function xa(n,e,...t){if(n=Z(n),arguments.length===1&&(e=Vv.newId()),Lv("doc","path",e),n instanceof xc){const r=le.fromString(e,...t);return tS(r),new Ae(n,null,new q(r))}{if(!(n instanceof Ae||n instanceof ki))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(le.fromString(e,...t));return tS(r),new Ae(n.firestore,n instanceof ki?n.converter:null,new q(r))}}function d1(n,e){return n=Z(n),e=Z(e),(n instanceof Ae||n instanceof ki)&&(e instanceof Ae||e instanceof ki)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function h1(n,e){return n=Z(n),e=Z(e),n instanceof Ut&&e instanceof Ut&&n.firestore===e.firestore&&Ic(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="AsyncQueue";class gP{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dw(this,"async_queue_retry"),this._c=()=>{const r=sh();r&&$(mP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=sh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=sh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new _t;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ki(e))throw e;$(mP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ke("INTERNAL UNHANDLED ERROR: ",yP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=mw.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Q(47125,{Pc:yP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function yP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class c3{constructor(){this._progressObserver={},this._taskCompletionResolver=new _t,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=-1;let Ye=class extends xc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gP,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gP(e),this._firestoreClient=void 0,await e}}};function Nt(n){if(n._terminated)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||f1(n),n._firestoreClient}function f1(n){var r,i,s;const e=n._freezeSettings(),t=function(a,l,c,d){return new N4(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,a1(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ZB(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}function h3(n,e){sr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return p1(n,Qu.provider,{build:r=>new n1(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function f3(n){sr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();p1(n,Qu.provider,{build:t=>new QB(t,e.cacheSizeBytes)})}function p1(n,e,t){if((n=_e(n,Ye))._firestoreClient||n._terminated)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new U(M.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},f1(n)}function p3(n){if(n._initialized&&!n._terminated)throw new U(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _t;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Xn.v())return Promise.resolve();const i=r+Ck;await Xn.delete(i)}(aw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function m3(n){return function(t){const r=new _t;return t.asyncQueue.enqueueAndForget(async()=>LB(await Rw(t),r)),r.promise}(Nt(n=_e(n,Ye)))}function g3(n){return t3(Nt(n=_e(n,Ye)))}function y3(n){return n3(Nt(n=_e(n,Ye)))}function _3(n,e){const t=Nt(n=_e(n,Ye)),r=new c3;return o3(t,n._databaseId,e,r),r}function v3(n,e){return a3(Nt(n=_e(n,Ye)),e).then(t=>t?new Ut(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xt(ze.fromBase64String(e))}catch(t){throw new U(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xt(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_c(e,xt._jsonSchema))return xt.fromBase64String(e.bytes)}}xt._jsonSchemaVersion="firestore/bytes/1.0",xt._jsonSchema={type:tt("string",xt._jsonSchemaVersion),bytes:tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zs=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dn._jsonSchemaVersion}}static fromJSON(e){if(_c(e,Dn._jsonSchema))return new Dn(e.latitude,e.longitude)}}Dn._jsonSchemaVersion="firestore/geoPoint/1.0",Dn._jsonSchema={type:tt("string",Dn._jsonSchemaVersion),latitude:tt("number"),longitude:tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_c(e,er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new er(e.vectorValues);throw new U(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}er._jsonSchemaVersion="firestore/vectorValue/1.0",er._jsonSchema={type:tt("string",er._jsonSchemaVersion),vectorValues:tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=/^__.*__$/;class E3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ba(e,this.data,t,this.fieldTransforms)}}class m1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function g1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:n})}}class vp{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return of(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(g1(this.Ac)&&w3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class I3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Rc(e)}Cc(e,t,r,i=!1){return new vp({Ac:e,methodName:t,Dc:r,path:Oe.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eo(n){const e=n._freezeSettings(),t=Rc(n._databaseId);return new I3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wp(n,e,t,r,i,s={}){const o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);Ow("Data must be an object, but it was:",o,r);const a=v1(r,o);let l,c;if(s.merge)l=new Kt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=qy(e,h,t);if(!o.contains(p))throw new U(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);E1(d,p)||d.push(p)}l=new Kt(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new E3(new mt(a),l,c)}class kc extends Zs{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kc}}function y1(n,e,t){return new vp({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cw extends Zs{_toFieldTransform(e){return new Sc(e.path,new wa)}isEqual(e){return e instanceof Cw}}class xw extends Zs{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=y1(this,e,!0),r=this.vc.map(s=>to(s,t)),i=new Us(r);return new Sc(e.path,i)}isEqual(e){return e instanceof xw&&Mn(this.vc,e.vc)}}class kw extends Zs{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=y1(this,e,!0),r=this.vc.map(s=>to(s,t)),i=new $s(r);return new Sc(e.path,i)}isEqual(e){return e instanceof kw&&Mn(this.vc,e.vc)}}class bw extends Zs{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Ea(e.serializer,qx(e.serializer,this.Fc));return new Sc(e.path,t)}isEqual(e){return e instanceof bw&&this.Fc===e.Fc}}function Nw(n,e,t,r){const i=n.Cc(1,e,t);Ow("Data must be an object, but it was:",i,r);const s=[],o=mt.empty();Qi(r,(l,c)=>{const d=Vw(e,l,t);c=Z(c);const h=i.yc(d);if(c instanceof kc)s.push(d);else{const p=to(c,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new Kt(s);return new m1(o,a,i.fieldTransforms)}function Dw(n,e,t,r,i,s){const o=n.Cc(1,e,t),a=[qy(e,r,t)],l=[i];if(s.length%2!=0)throw new U(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(qy(e,s[p])),l.push(s[p+1]);const c=[],d=mt.empty();for(let p=a.length-1;p>=0;--p)if(!E1(c,a[p])){const y=a[p];let v=l[p];v=Z(v);const T=o.yc(y);if(v instanceof kc)c.push(y);else{const x=to(v,T);x!=null&&(c.push(y),d.set(y,x))}}const h=new Kt(c);return new m1(d,h,o.fieldTransforms)}function _1(n,e,t,r=!1){return to(t,n.Cc(r?4:3,e))}function to(n,e){if(w1(n=Z(n)))return Ow("Unsupported field value:",e,n),v1(n,e);if(n instanceof Zs)return function(r,i){if(!g1(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=to(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Z(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ye.fromDate(r);return{timestampValue:Ia(i.serializer,s)}}if(r instanceof ye){const s=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ia(i.serializer,s)}}if(r instanceof Dn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xt)return{bytesValue:rk(i.serializer,r._byteString)};if(r instanceof Ae){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ew(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof er)return function(o,a){return{mapValue:{fields:{[zv]:{stringValue:Wv},[ya]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Kv(a.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${tp(r)}`)}(n,e)}function v1(n,e){const t={};return wx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qi(n,(r,i)=>{const s=to(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function w1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ye||n instanceof Dn||n instanceof xt||n instanceof Ae||n instanceof Zs||n instanceof er)}function Ow(n,e,t){if(!w1(t)||!nx(t)){const r=tp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function qy(n,e,t){if((e=Z(e))instanceof Bi)return e._internalPath;if(typeof e=="string")return Vw(n,e);throw of("Field path arguments must be of type string or ",n,!1,void 0,t)}const T3=new RegExp("[~\\*/\\[\\]]");function Vw(n,e,t){if(e.search(T3)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bi(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function of(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new U(M.INVALID_ARGUMENT,a+n+l)}function E1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ae(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new S3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ep("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class S3 extends Yu{data(){return super.data()}}function Ep(n,e){return typeof e=="string"?Vw(n,e):e instanceof Bi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lw{}class bc extends Lw{}function Bn(n,e,...t){let r=[];e instanceof Lw&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Mw).length,a=s.filter(l=>l instanceof Ip).length;if(o>1||o>0&&a>0)throw new U(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Ip extends bc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ip(e,t,r)}_apply(e){const t=this._parse(e);return P1(e._query,t),new Ut(e.firestore,e.converter,by(e._query,t))}_parse(e){const t=eo(e.firestore);return function(s,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new U(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){vP(h,d);const v=[];for(const T of h)v.push(_P(l,s,T));p={arrayValue:{values:v}}}else p=_P(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||vP(h,d),p=_1(a,o,h,d==="in"||d==="not-in");return ce.create(c,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ju(n,e,t){const r=e,i=Ep("where",n);return Ip._create(i,r,t)}class Mw extends Lw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mw(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:we.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)P1(o,l),o=by(o,l)}(e._query,t),new Ut(e.firestore,e.converter,by(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fw extends bc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fw(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new U(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qu(s,o)}(e._query,this._field,this._direction);return new Ut(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new qr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function T1(n,e="asc"){const t=e,r=Ep("orderBy",n);return Fw._create(r,t)}class Tp extends bc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Tp(e,t,r)}_apply(e){return new Ut(e.firestore,e.converter,Yh(e._query,this._limit,this._limitType))}}function P3(n){return rx("limit",n),Tp._create("limit",n,"F")}function A3(n){return rx("limitToLast",n),Tp._create("limitToLast",n,"L")}class Sp extends bc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Sp(e,t,r)}_apply(e){const t=S1(e,this.type,this._docOrFields,this._inclusive);return new Ut(e.firestore,e.converter,function(i,s){return new qr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function R3(...n){return Sp._create("startAt",n,!0)}function C3(...n){return Sp._create("startAfter",n,!1)}class Pp extends bc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Pp(e,t,r)}_apply(e){const t=S1(e,this.type,this._docOrFields,this._inclusive);return new Ut(e.firestore,e.converter,function(i,s){return new qr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function x3(...n){return Pp._create("endBefore",n,!1)}function k3(...n){return Pp._create("endAt",n,!0)}function S1(n,e,t,r){if(t[0]=Z(t[0]),t[0]instanceof Yu)return function(s,o,a,l,c){if(!l)throw new U(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Ko(s))if(h.field.isKeyField())d.push(Fs(o,l.key));else{const p=l.data.field(h.field);if(op(p))throw new U(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=h.field.canonicalString();throw new U(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(p)}return new ji(d,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=eo(n.firestore);return function(o,a,l,c,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new U(M.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let v=0;v<d.length;v++){const T=d[v];if(p[v].field.isKeyField()){if(typeof T!="string")throw new U(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!Gv(o)&&T.indexOf("/")!==-1)throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const x=o.path.child(le.fromString(T));if(!q.isDocumentKey(x))throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const _=new q(x);y.push(Fs(a,_))}else{const x=_1(l,c,T);y.push(x)}}return new ji(y,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _P(n,e,t){if(typeof(t=Z(t))=="string"){if(t==="")throw new U(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gv(e)&&t.indexOf("/")!==-1)throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(le.fromString(t));if(!q.isDocumentKey(r))throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fs(n,new q(r))}if(t instanceof Ae)return Fs(n,t._key);throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tp(t)}.`)}function vP(n,e){if(!Array.isArray(n)||n.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function P1(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jw{convertValue(e,t="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Qi(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var r,i,s;const t=(s=(i=(r=e.fields)==null?void 0:r[ya].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ne(o.doubleValue));return new er(t)}convertGeoPoint(e){return new Dn(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ap(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bu(e));default:return null}}convertTimestamp(e){const t=Mr(e);return new ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=le.fromString(e);J(pk(r),9688,{name:e});const i=new Li(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(t)||Ke(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class b3 extends jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new xt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ae(this.firestore,null,t)}}class ws{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let wn=class A1 extends Yu{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ep("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new U(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=A1._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};wn._jsonSchemaVersion="firestore/documentSnapshot/1.0",wn._jsonSchema={type:tt("string",wn._jsonSchemaVersion),bundleSource:tt("string","DocumentSnapshot"),bundleName:tt("string"),bundle:tt("string")};let uu=class extends wn{data(e={}){return super.data(e)}},On=class R1{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ws(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new uu(this._firestore,this._userDataWriter,r.key,r,new ws(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new uu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ws(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new uu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ws(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:N3(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new U(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=R1._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function N3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:n})}}function C1(n,e){return n instanceof wn&&e instanceof wn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof On&&e instanceof On&&n._firestore===e._firestore&&h1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(n){n=_e(n,Ae);const e=_e(n.firestore,Ye);return s1(Nt(e),n._key).then(t=>Uw(e,n,t))}On._jsonSchemaVersion="firestore/querySnapshot/1.0",On._jsonSchema={type:tt("string",On._jsonSchemaVersion),bundleSource:tt("string","QuerySnapshot"),bundleName:tt("string"),bundle:tt("string")};class no extends jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new xt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ae(this.firestore,null,t)}}function O3(n){n=_e(n,Ae);const e=_e(n.firestore,Ye),t=Nt(e),r=new no(e);return r3(t,n._key).then(i=>new wn(e,r,n._key,i,new ws(i!==null&&i.hasLocalMutations,!0),n.converter))}function V3(n){n=_e(n,Ae);const e=_e(n.firestore,Ye);return s1(Nt(e),n._key,{source:"server"}).then(t=>Uw(e,n,t))}function L3(n){n=_e(n,Ut);const e=_e(n.firestore,Ye),t=Nt(e),r=new no(e);return I1(n._query),o1(t,n._query).then(i=>new On(e,r,n,i))}function M3(n){n=_e(n,Ut);const e=_e(n.firestore,Ye),t=Nt(e),r=new no(e);return i3(t,n._query).then(i=>new On(e,r,n,i))}function F3(n){n=_e(n,Ut);const e=_e(n.firestore,Ye),t=Nt(e),r=new no(e);return o1(t,n._query,{source:"server"}).then(i=>new On(e,r,n,i))}function wP(n,e,t){n=_e(n,Ae);const r=_e(n.firestore,Ye),i=Ap(n.converter,e,t);return Nc(r,[wp(eo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ve.none())])}function Gy(n,e,t,...r){n=_e(n,Ae);const i=_e(n.firestore,Ye),s=eo(i);let o;return o=typeof(e=Z(e))=="string"||e instanceof Bi?Dw(s,"updateDoc",n._key,e,t,r):Nw(s,"updateDoc",n._key,e),Nc(i,[o.toMutation(n._key,Ve.exists(!0))])}function j3(n){return Nc(_e(n.firestore,Ye),[new za(n._key,Ve.none())])}function U3(n,e){const t=_e(n.firestore,Ye),r=xa(n),i=Ap(n.converter,e);return Nc(t,[wp(eo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ve.exists(!1))]).then(()=>r)}function Rp(n,...e){var l,c,d;n=Z(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Wy(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Wy(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,o,a;if(n instanceof Ae)o=_e(n.firestore,Ye),a=$a(n._key.path),s={next:h=>{e[r]&&e[r](Uw(o,n,h))},error:e[r+1],complete:e[r+2]};else{const h=_e(n,Ut);o=_e(h.firestore,Ye),a=h._query;const p=new no(o);s={next:y=>{e[r]&&e[r](new On(o,p,h,y))},error:e[r+1],complete:e[r+2]},I1(n._query)}return function(p,y,v,T){const x=new gp(T),_=new vw(y,x,v);return p.asyncQueue.enqueueAndForget(async()=>gw(await Ca(p),_)),()=>{x.Nu(),p.asyncQueue.enqueueAndForget(async()=>yw(await Ca(p),_))}}(Nt(o),a,i,s)}function $3(n,e){return s3(Nt(n=_e(n,Ye)),Wy(e)?e:{next:e})}function Nc(n,e){return function(r,i){const s=new _t;return r.asyncQueue.enqueueAndForget(async()=>NB(await Rw(r),i,s)),s.promise}(Nt(n),e)}function Uw(n,e,t){const r=t.docs.get(e._key),i=new no(n);return new wn(n,i,e._key,r,new ws(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z3=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=eo(e)}set(e,t,r){this._verifyNotCommitted();const i=gi(e,this._firestore),s=Ap(i.converter,t,r),o=wp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ve.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=gi(e,this._firestore);let o;return o=typeof(t=Z(t))=="string"||t instanceof Bi?Dw(this._dataReader,"WriteBatch.update",s._key,t,r,i):Nw(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Ve.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gi(e,this._firestore);return this._mutations=this._mutations.concat(new za(t._key,Ve.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new U(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function gi(n,e){if((n=Z(n)).firestore!==e)throw new U(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=eo(e)}get(e){const t=gi(e,this._firestore),r=new b3(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return Q(24041);const s=i[0];if(s.isFoundDocument())return new Yu(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Yu(this._firestore,r,t._key,null,t.converter);throw Q(18433,{doc:s})})}set(e,t,r){const i=gi(e,this._firestore),s=Ap(i.converter,t,r),o=wp(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const s=gi(e,this._firestore);let o;return o=typeof(t=Z(t))=="string"||t instanceof Bi?Dw(this._dataReader,"Transaction.update",s._key,t,r,i):Nw(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=gi(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q3=class extends W3{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gi(e,this._firestore),r=new no(this._firestore);return super.get(e).then(i=>new wn(this._firestore,r,t._key,i._document,new ws(!1,!1),t.converter))}};function x1(n,e,t){n=_e(n,Ye);const r={...B3,...t};return function(s){if(s.maxAttempts<1)throw new U(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new _t;return s.asyncQueue.enqueueAndForget(async()=>{const c=await e3(s);new XB(s.asyncQueue,c,a,o,l).ju()}),l.promise}(Nt(n),i=>e(new q3(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(){return new kc("deleteField")}function Ky(){return new Cw("serverTimestamp")}function G3(...n){return new xw("arrayUnion",n)}function H3(...n){return new kw("arrayRemove",n)}function K3(n){return new bw("increment",n)}(function(e,t=!0){(function(i){Ua=i})(pn),rr(new Tn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ye(new GU(r.getProvider("auth-internal")),new QU(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new U(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Li(c.options.projectId,d)}(o,i),o);return s={useFetchStreams:t,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),un(JT,XT,e),un(JT,XT,"esm2020")})();const Q3="@firebase/firestore-compat",Y3="0.4.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new U("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(){if(typeof Uint8Array>"u")throw new U("unimplemented","Uint8Arrays are not available in this environment.")}function IP(){if(!k4())throw new U("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Xu{constructor(e){this._delegate=e}static fromBase64String(e){return IP(),new Xu(xt.fromBase64String(e))}static fromUint8Array(e){return EP(),new Xu(xt.fromUint8Array(e))}toBase64(){return IP(),this._delegate.toBase64()}toUint8Array(){return EP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(n){return J3(n,["next","error","complete"])}function J3(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{enableIndexedDbPersistence(e,t){return h3(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return f3(e._delegate)}clearIndexedDbPersistence(e){return p3(e._delegate)}}class k1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Li||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){l3(this._delegate,e,t,r)}enableNetwork(){return g3(this._delegate)}disableNetwork(){return y3(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,tx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return m3(this._delegate)}onSnapshotsInSync(e){return $3(this._delegate,e)}get app(){if(!this._appCompat)throw new U("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ka(this,_p(this._delegate,e))}catch(t){throw Mt(t,"collection()","Firestore.collection()")}}doc(e){try{return new _n(this,xa(this._delegate,e))}catch(t){throw Mt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Lt(this,u3(this._delegate,e))}catch(t){throw Mt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return x1(this._delegate,t=>e(new b1(this,t)))}batch(){return Nt(this._delegate),new N1(new z3(this._delegate,e=>Nc(this._delegate,e)))}loadBundle(e){return _3(this._delegate,e)}namedQuery(e){return v3(this._delegate,e).then(t=>t?new Lt(this,t):null)}}class Cp extends jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(new xt(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _n.forKey(t,this.firestore,null)}}function Z3(n){BU(n)}class b1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}get(e){const t=Es(e);return this._delegate.get(t).then(r=>new Zu(this._firestore,new wn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Es(e);return r?($w("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Es(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Es(e);return this._delegate.delete(t),this}}class N1{constructor(e){this._delegate=e}set(e,t,r){const i=Es(e);return r?($w("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Es(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Es(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gs{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new uu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ec(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Gs.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Gs(e,new Cp(e),t),i.set(t,s)),s}}Gs.INSTANCES=new WeakMap;class _n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new U("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _n(t,new Ae(t._delegate,r,new q(e)))}static forKey(e,t,r){return new _n(t,new Ae(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ka(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ka(this.firestore,_p(this._delegate,e))}catch(t){throw Mt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Z(e),e instanceof Ae?d1(this._delegate,e):!1}set(e,t){t=$w("DocumentReference.set",t);try{return t?wP(this._delegate,e,t):wP(this._delegate,e)}catch(r){throw Mt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Gy(this._delegate,e):Gy(this._delegate,e,t,...r)}catch(i){throw Mt(i,"updateDoc()","DocumentReference.update()")}}delete(){return j3(this._delegate)}onSnapshot(...e){const t=D1(e),r=O1(e,i=>new Zu(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Rp(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=O3(this._delegate):(e==null?void 0:e.source)==="server"?t=V3(this._delegate):t=D3(this._delegate),t.then(r=>new Zu(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _n(this.firestore,e?this._delegate.withConverter(Gs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Mt(n,e,t){return n.message=n.message.replace(e,t),n}function D1(n){for(const e of n)if(typeof e=="object"&&!Qy(e))return e;return{}}function O1(n,e){var r,i;let t;return Qy(n[0])?t=n[0]:Qy(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:s=>{t.next&&t.next(e(s))},error:(r=t.error)==null?void 0:r.bind(t),complete:(i=t.complete)==null?void 0:i.bind(t)}}class Zu{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _n(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return C1(this._delegate,e._delegate)}}class ec extends Zu{data(e){const t=this._delegate.data(e);return this._delegate._converter||zU(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Lt{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}where(e,t,r){try{return new Lt(this.firestore,Bn(this._delegate,Ju(e,t,r)))}catch(i){throw Mt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Lt(this.firestore,Bn(this._delegate,T1(e,t)))}catch(r){throw Mt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Lt(this.firestore,Bn(this._delegate,P3(e)))}catch(t){throw Mt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Lt(this.firestore,Bn(this._delegate,A3(e)))}catch(t){throw Mt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Lt(this.firestore,Bn(this._delegate,R3(...e)))}catch(t){throw Mt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Lt(this.firestore,Bn(this._delegate,C3(...e)))}catch(t){throw Mt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Lt(this.firestore,Bn(this._delegate,x3(...e)))}catch(t){throw Mt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Lt(this.firestore,Bn(this._delegate,k3(...e)))}catch(t){throw Mt(t,"endAt()","Query.endAt()")}}isEqual(e){return h1(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=M3(this._delegate):(e==null?void 0:e.source)==="server"?t=F3(this._delegate):t=L3(this._delegate),t.then(r=>new Yy(this.firestore,new On(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=D1(e),r=O1(e,i=>new Yy(this.firestore,new On(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Rp(this._delegate,t,r)}withConverter(e){return new Lt(this.firestore,e?this._delegate.withConverter(Gs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class ez{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ec(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Yy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Lt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ec(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ez(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ec(this._firestore,r))})}isEqual(e){return C1(this._delegate,e._delegate)}}class ka extends Lt{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _n(this.firestore,e):null}doc(e){try{return e===void 0?new _n(this.firestore,xa(this._delegate)):new _n(this.firestore,xa(this._delegate,e))}catch(t){throw Mt(t,"doc()","CollectionReference.doc()")}}add(e){return U3(this._delegate,e).then(t=>new _n(this.firestore,t))}isEqual(e){return d1(this._delegate,e._delegate)}withConverter(e){return new ka(this.firestore,e?this._delegate.withConverter(Gs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Es(n){return _e(n,Ae)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(...e){this._delegate=new Bi(...e)}static documentId(){return new Bw(Oe.keyField().canonicalString())}isEqual(e){return e=Z(e),e instanceof Bi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{static serverTimestamp(){const e=Ky();return e._methodName="FieldValue.serverTimestamp",new ps(e)}static delete(){const e=Hy();return e._methodName="FieldValue.delete",new ps(e)}static arrayUnion(...e){const t=G3(...e);return t._methodName="FieldValue.arrayUnion",new ps(t)}static arrayRemove(...e){const t=H3(...e);return t._methodName="FieldValue.arrayRemove",new ps(t)}static increment(e){const t=K3(e);return t._methodName="FieldValue.increment",new ps(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz={Firestore:k1,GeoPoint:Dn,Timestamp:ye,Blob:Xu,Transaction:b1,WriteBatch:N1,DocumentReference:_n,DocumentSnapshot:Zu,Query:Lt,QueryDocumentSnapshot:ec,QuerySnapshot:Yy,CollectionReference:ka,FieldPath:Bw,FieldValue:ps,setLogLevel:Z3,CACHE_SIZE_UNLIMITED:d3};function nz(n,e){n.INTERNAL.registerComponent(new Tn("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...tz}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(n){nz(n,(e,t)=>new k1(e,t,new X3)),n.registerVersion(Q3,Y3)}rz(ir);const V1=D.createContext(null),iz={apiKey:"AIzaSyBe4RtxN-33AvKTlylvBUzkk9Z5RuQ7Sac",authDomain:"malu-af0b0.firebaseapp.com",projectId:"malu-af0b0",storageBucket:"malu-af0b0.firebasestorage.app",messagingSenderId:"961583120487",appId:"1:961583120487:web:1c17a9d68701e0ab9094c2",measurementId:"G-HVJ8K3R3V2"};ir.apps.length||ir.initializeApp(iz);const TP=ir.auth(),sz=ir.firestore(),oz=({children:n})=>{const[e,t]=D.useState(null),[r,i]=D.useState(!0);return D.useEffect(()=>{const s=TP.onAuthStateChanged(o=>{t(o),i(!1)});return()=>s()},[]),m.jsx(V1.Provider,{value:{user:e,auth:TP,db:sz,loading:r},children:n})},xp=()=>D.useContext(V1),az=({onOpenAuthModal:n,onOpenServicesModal:e,onOpenProfileModal:t})=>{const{user:r}=xp(),[i,s]=D.useState("");D.useEffect(()=>{s(r?r.email:"")},[r]);const o=a=>{a.preventDefault(),r?e():n()};return m.jsxs("nav",{className:"topbar","aria-label":"Главное меню",children:[m.jsxs("ul",{"aria-label":"разделы",children:[m.jsx("li",{children:m.jsx(os,{to:"/",className:({isActive:a})=>a?"active":"",end:!0,children:"Главная"})}),m.jsx("li",{children:m.jsx(os,{to:"/makeup",className:({isActive:a})=>a?"active":"",children:"Макияж"})}),m.jsx("li",{children:m.jsx(os,{to:"/haircut",className:({isActive:a})=>a?"active":"",children:"Стрижка волос"})}),m.jsx("li",{children:m.jsx(os,{to:"/manicure",className:({isActive:a})=>a?"active":"",children:"Маникюр"})}),m.jsx("li",{children:m.jsx(os,{to:"/pedicure",className:({isActive:a})=>a?"active":"",children:"Педикюр"})}),m.jsx("li",{children:m.jsx(os,{to:"/contacts",className:({isActive:a})=>a?"active":"",children:"Контакты"})})]}),m.jsxs("div",{className:"auth-controls",style:{display:"flex",gap:12,alignItems:"center"},children:[i&&m.jsx("span",{id:"user-email-display",title:"Открыть профиль",style:{display:"inline",cursor:"pointer"},onClick:()=>t&&t(),children:i}),m.jsx("a",{className:"booking",href:"#",onClick:o,children:"Запись на прием"})]})]})};function L1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lz=L1,M1=new ur("auth","Firebase",L1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new cc("@firebase/auth");function uz(n,...e){af.logLevel<=ae.WARN&&af.warn(`Auth (${pn}): ${n}`,...e)}function oh(n,...e){af.logLevel<=ae.ERROR&&af.error(`Auth (${pn}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(n,...e){throw Ww(n,...e)}function Vn(n,...e){return Ww(n,...e)}function zw(n,e,t){const r={...lz(),[e]:t};return new ur("auth","Firebase",r).create(e,{appName:n.name})}function Cs(n){return zw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cz(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ar(n,"argument-error"),zw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ww(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return M1.create(n,...e)}function ne(n,e,...t){if(!n)throw Ww(e,...t)}function Sr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw oh(e),new Error(e)}function jr(n,e){n||Sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function dz(){return SP()==="http:"||SP()==="https:"}function SP(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dz()||ov()||"connection"in navigator)?navigator.onLine:!0}function fz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t){this.shortDelay=e,this.longDelay=t,jr(t>e,"Short delay should be less than long delay!"),this.isMobile=RR()||Ff()}get(){return hz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(n,e){jr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gz=new Dc(3e4,6e4);function Gw(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ka(n,e,t,r,i={}){return j1(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=jn({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...s};return xR()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&Br(n.emulatorConfig.host)&&(c.credentials="include"),F1.fetch()(await U1(n,n.config.apiHost,t,a),c)})}async function j1(n,e,t){n._canInitEmulator=!1;const r={...pz,...e};try{const i=new _z(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rd(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Rd(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Rd(n,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zw(n,d,c);ar(n,d)}}catch(i){if(i instanceof ct)throw i;ar(n,"network-request-failed",{message:String(i)})}}async function yz(n,e,t,r,i={}){const s=await Ka(n,e,t,r,i);return"mfaPendingCredential"in s&&ar(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function U1(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?qw(n.config,i):`${n.config.apiScheme}://${i}`;return mz.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class _z{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Vn(this.auth,"network-request-failed")),gz.get())})}}function Rd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Vn(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vz(n,e){return Ka(n,"POST","/v1/accounts:delete",e)}async function lf(n,e){return Ka(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wz(n,e=!1){const t=Z(n),r=await t.getIdToken(e),i=Hw(r);ne(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:cu(Zm(i.auth_time)),issuedAtTime:cu(Zm(i.iat)),expirationTime:cu(Zm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Zm(n){return Number(n)*1e3}function Hw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return oh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vf(t);return i?JSON.parse(i):(oh("Failed to decode base64 JWT payload"),null)}catch(i){return oh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function PP(n){const e=Hw(n);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ct&&Ez(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Ez({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uf(n){var h;const e=n.auth,t=await n.getIdToken(),r=await tc(n,lf(e,{idToken:t}));ne(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?$1(i.providerUserInfo):[],o=Sz(n.providerData,s),a=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Xy(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(n,d)}async function Tz(n){const e=Z(n);await uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Sz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $1(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pz(n,e){const t=await j1(n,{},async()=>{const r=jn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await U1(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&Br(n.emulatorConfig.host)&&(l.credentials="include"),F1.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Az(n,e){return Ka(n,"POST","/v2/accounts:revokeToken",Gw(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const t=PP(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Pz(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Yo;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n,e){ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class kn{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Iz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Xy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await tc(this,this.stsTokenManager.getToken(this.auth,e));return ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wz(this,e)}reload(){return Tz(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new kn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await uf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pe(this.auth.app))return Promise.reject(Cs(this.auth));const e=await this.getIdToken();return await tc(this,vz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:y,providerData:v,stsTokenManager:T}=t;ne(h&&T,e,"internal-error");const x=Yo.fromJSON(this.name,T);ne(typeof h=="string",e,"internal-error"),ri(r,e.name),ri(i,e.name),ne(typeof p=="boolean",e,"internal-error"),ne(typeof y=="boolean",e,"internal-error"),ri(s,e.name),ri(o,e.name),ri(a,e.name),ri(l,e.name),ri(c,e.name),ri(d,e.name);const _=new kn({uid:h,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:x,createdAt:c,lastLoginAt:d});return v&&Array.isArray(v)&&(_.providerData=v.map(w=>({...w}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,t,r=!1){const i=new Yo;i.updateFromServerResponse(t);const s=new kn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await uf(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?$1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Yo;a.updateFromIdToken(r);const l=new kn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Xy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=new Map;function Pr(n){jr(n instanceof Function,"Expected a class definition");let e=AP.get(n);return e?(jr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,AP.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}B1.type="NONE";const RP=B1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(n,e,t){return`firebase:${n}:${e}:${t}`}class Jo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ah(this.userKey,i.apiKey,s),this.fullPersistenceKey=ah("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lf(this.auth,{idToken:e}).catch(()=>{});return t?kn._fromGetAccountInfoResponse(this.auth,t,e):null}return kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Jo(Pr(RP),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Pr(RP);const o=ah(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await lf(e,{idToken:d}).catch(()=>{});if(!p)break;h=await kn._fromGetAccountInfoResponse(e,p,d)}else h=kn._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Jo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Jo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(G1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K1(e))return"Blackberry";if(Q1(e))return"Webos";if(W1(e))return"Safari";if((e.includes("chrome/")||q1(e))&&!e.includes("edge/"))return"Chrome";if(H1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function z1(n=de()){return/firefox\//i.test(n)}function W1(n=de()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q1(n=de()){return/crios\//i.test(n)}function G1(n=de()){return/iemobile/i.test(n)}function H1(n=de()){return/android/i.test(n)}function K1(n=de()){return/blackberry/i.test(n)}function Q1(n=de()){return/webos/i.test(n)}function Kw(n=de()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Rz(n=de()){var e;return Kw(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Cz(){return av()&&document.documentMode===10}function Y1(n=de()){return Kw(n)||H1(n)||Q1(n)||K1(n)||/windows phone/i.test(n)||G1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(n,e=[]){let t;switch(n){case"Browser":t=CP(de());break;case"Worker":t=`${CP(de())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pn}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kz(n,e={}){return Ka(n,"GET","/v2/passwordPolicy",Gw(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz=6;class Nz{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bz,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xP(this),this.idTokenSubscription=new xP(this),this.beforeStateQueue=new xz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=M1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pr(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Jo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lf(this,{idToken:e}),r=await kn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(pe(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pe(this.app))return Promise.reject(Cs(this));const t=e?Z(e):null;return t&&ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pe(this.app)?Promise.reject(Cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pe(this.app)?Promise.reject(Cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kz(this),t=new Nz(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ur("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Az(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pr(e)||this._popupRedirectResolver;ne(t,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[Pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(pe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&uz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function kp(n){return Z(n)}class xP{constructor(e){this.auth=e,this.observer=null,this.addObserver=lv(t=>this.observer=t)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Oz(n){Qw=n}function Vz(n){return Qw.loadJS(n)}function Lz(){return Qw.gapiScript}function Mz(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fz(n,e){const t=jf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Mn(s,e??{}))return i;ar(i,"already-initialized")}return t.initialize({options:e})}function jz(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Pr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Uz(n,e,t){const r=kp(n);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=X1(e),{host:o,port:a}=$z(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(Mn(c,r.config.emulator)&&Mn(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Br(o)?(iv(`${s}//${o}${l}`),sv("Auth",!0)):Bz()}function X1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $z(n){const e=X1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:kP(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:kP(o)}}}function kP(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Bz(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,t){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(n,e){return yz(n,"POST","/v1/accounts:signInWithIdp",Gw(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz="http://localhost";class Hs extends Z1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const o=new Hs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Xo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Xo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xo(e,t)}buildRequest(){const e={requestUri:zz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=jn(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends Yw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Oc{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hs._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return wr.credential(t,r)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Oc{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Oc{constructor(){super("twitter.com")}static credential(e,t){return Hs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return di.credential(t,r)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await kn._fromIdTokenResponse(e,r,i),o=bP(r);return new ba({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=bP(r);return new ba({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function bP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends ct{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new cf(e,t,r,i)}}function eb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cf._fromErrorAndOperation(n,s,e,r):s})}async function Wz(n,e,t=!1){const r=await tc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ba._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qz(n,e,t=!1){const{auth:r}=n;if(pe(r.app))return Promise.reject(Cs(r));const i="reauthenticate";try{const s=await tc(n,eb(r,i,e,n),t);ne(s.idToken,r,"internal-error");const o=Hw(s.idToken);ne(o,r,"internal-error");const{sub:a}=o;return ne(n.uid===a,r,"user-mismatch"),ba._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ar(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gz(n,e,t=!1){if(pe(n.app))return Promise.reject(Cs(n));const r="signIn",i=await eb(n,r,e),s=await ba._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function Hz(n,e,t,r){return Z(n).onIdTokenChanged(e,t,r)}function Kz(n,e,t){return Z(n).beforeAuthStateChanged(e,t)}const df="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(df,"1"),this.storage.removeItem(df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz=1e3,Yz=10;class nb extends tb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Cz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Yz):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Qz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nb.type="LOCAL";const Jz=nb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb extends tb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rb.type="SESSION";const ib=rb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new bp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await Xz(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Jw("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function e6(n){tr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function t6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n6(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function r6(){return sb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="firebaseLocalStorageDb",i6=1,hf="firebaseLocalStorage",ab="fbase_key";class Vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Np(n,e){return n.transaction([hf],e?"readwrite":"readonly").objectStore(hf)}function s6(){const n=indexedDB.deleteDatabase(ob);return new Vc(n).toPromise()}function Zy(){const n=indexedDB.open(ob,i6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(hf,{keyPath:ab})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(hf)?e(r):(r.close(),await s6(),e(await Zy()))})})}async function NP(n,e,t){const r=Np(n,!0).put({[ab]:e,value:t});return new Vc(r).toPromise()}async function o6(n,e){const t=Np(n,!1).get(e),r=await new Vc(t).toPromise();return r===void 0?null:r.value}function DP(n,e){const t=Np(n,!0).delete(e);return new Vc(t).toPromise()}const a6=800,l6=3;class lb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>l6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bp._getInstance(r6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await t6(),!this.activeServiceWorker)return;this.sender=new Zz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||n6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zy();return await NP(e,df,"1"),await DP(e,df),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>NP(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>o6(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>DP(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Np(i,!1).getAll();return new Vc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),a6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lb.type="LOCAL";const u6=lb;new Dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(n,e){return e?Pr(e):(ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends Z1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function c6(n){return Gz(n.auth,new Xw(n),n.bypassAuthState)}function d6(n){const{auth:e,user:t}=n;return ne(t,e,"internal-error"),qz(t,new Xw(n),n.bypassAuthState)}async function h6(n){const{auth:e,user:t}=n;return ne(t,e,"internal-error"),Wz(t,new Xw(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c6;case"linkViaPopup":case"linkViaRedirect":return h6;case"reauthViaPopup":case"reauthViaRedirect":return d6;default:ar(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=new Dc(2e3,1e4);async function p6(n,e,t){if(pe(n.app))return Promise.reject(Vn(n,"operation-not-supported-in-this-environment"));const r=kp(n);cz(n,e,Yw);const i=ub(r,t);return new Is(r,"signInViaPopup",e,i).executeNotNull()}class Is extends cb{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Is.currentPopupAction&&Is.currentPopupAction.cancel(),Is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=Jw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,f6.get())};e()}}Is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6="pendingRedirect",lh=new Map;class g6 extends cb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=lh.get(this.auth._key());if(!e){try{const r=await y6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lh.set(this.auth._key(),e)}return this.bypassAuthState||lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y6(n,e){const t=w6(e),r=v6(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function _6(n,e){lh.set(n._key(),e)}function v6(n){return Pr(n._redirectPersistence)}function w6(n){return ah(m6,n.config.apiKey,n.name)}async function E6(n,e,t=!1){if(pe(n.app))return Promise.reject(Cs(n));const r=kp(n),i=ub(r,e),o=await new g6(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=10*60*1e3;class T6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!db(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Vn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=I6&&this.cachedEventUids.clear(),this.cachedEventUids.has(OP(e))}saveEventToCache(e){this.cachedEventUids.add(OP(e)),this.lastProcessedEventTime=Date.now()}}function OP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function db({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function S6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return db(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P6(n,e={}){return Ka(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R6=/^https?/;async function C6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await P6(n);for(const t of e)try{if(x6(t))return}catch{}ar(n,"unauthorized-domain")}function x6(n){const e=Jy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!R6.test(t))return!1;if(A6.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=new Dc(3e4,6e4);function VP(){const n=tr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function b6(n){return new Promise((e,t)=>{var i,s,o;function r(){VP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VP(),t(Vn(n,"network-request-failed"))},timeout:k6.get()})}if((s=(i=tr().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=tr().gapi)!=null&&o.load)r();else{const a=Mz("iframefcb");return tr()[a]=()=>{gapi.load?r():t(Vn(n,"network-request-failed"))},Vz(`${Lz()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw uh=null,e})}let uh=null;function N6(n){return uh=uh||b6(n),uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new Dc(5e3,15e3),O6="__/auth/iframe",V6="emulator/auth/iframe",L6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F6(n){const e=n.config;ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qw(e,V6):`https://${n.config.authDomain}/${O6}`,r={apiKey:e.apiKey,appName:n.name,v:pn},i=M6.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${jn(r).slice(1)}`}async function j6(n){const e=await N6(n),t=tr().gapi;return ne(t,n,"internal-error"),e.open({where:document.body,url:F6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Vn(n,"network-request-failed"),a=tr().setTimeout(()=>{s(o)},D6.get());function l(){tr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$6=500,B6=600,z6="_blank",W6="http://localhost";class LP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q6(n,e,t,r=$6,i=B6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...U6,width:r.toString(),height:i.toString(),top:s,left:o},c=de().toLowerCase();t&&(a=q1(c)?z6:t),z1(c)&&(e=e||W6,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[y,v])=>`${p}${y}=${v},`,"");if(Rz(c)&&a!=="_self")return G6(e||"",a),new LP(null);const h=window.open(e||"",a,d);ne(h,n,"popup-blocked");try{h.focus()}catch{}return new LP(h)}function G6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="__/auth/handler",K6="emulator/auth/handler",Q6=encodeURIComponent("fac");async function MP(n,e,t,r,i,s){ne(n.config.authDomain,n,"auth-domain-config-required"),ne(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pn,eventId:i};if(e instanceof Yw){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",NR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Oc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),c=l?`#${Q6}=${encodeURIComponent(l)}`:"";return`${Y6(n)}?${jn(a).slice(1)}${c}`}function Y6({config:n}){return n.emulator?qw(n,K6):`https://${n.authDomain}/${H6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="webStorageSupport";class J6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ib,this._completeRedirectFn=E6,this._overrideRedirectResult=_6}async _openPopup(e,t,r,i){var o;jr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await MP(e,t,r,Jy(),i);return q6(e,s,Jw())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await MP(e,t,r,Jy(),i);return e6(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(jr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await j6(e),r=new T6(e);return t.register("authEvent",i=>(ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(eg,{type:eg},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[eg];s!==void 0&&t(!!s),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=C6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Y1()||W1()||Kw()}}const X6=J6;var FP="@firebase/auth",jP="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t5(n){rr(new Tn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J1(n)},c=new Dz(r,i,s,l);return jz(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),rr(new Tn("auth-internal",e=>{const t=kp(e.getProvider("auth").getImmediate());return(r=>new Z6(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),un(FP,jP,e5(n)),un(FP,jP,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=5*60,r5=rv("authIdTokenMaxAge")||n5;let UP=null;const i5=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>r5)return;const i=t==null?void 0:t.token;UP!==i&&(UP=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function s5(n=UR()){const e=jf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Fz(n,{popupRedirectResolver:X6,persistence:[u6,Jz,ib]}),r=rv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=i5(s.toString());Kz(t,o,()=>o(t.currentUser)),Hz(t,a=>o(a))}}const i=lL("auth");return i&&Uz(t,`http://${i}`),t}function o5(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Oz({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Vn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",o5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t5("Browser");const a5=({isOpen:n,onClose:e})=>{const{auth:t}=xp(),[r,i]=D.useState(""),[s,o]=D.useState(""),[a,l]=D.useState(""),[c,d]=D.useState(""),[h,p]=D.useState(""),[y,v]=D.useState("");if(!n)return null;const T=async E=>{E.preventDefault();try{await t.createUserWithEmailAndPassword(r,s),l(""),e()}catch(b){l(b.message)}},x=async E=>{E.preventDefault();try{await t.signInWithEmailAndPassword(c,h),v(""),e()}catch(b){v(b.message)}},_=async E=>{try{if(t!=null&&t.signInWithPopup){const b=new ir.auth.GoogleAuthProvider;await t.signInWithPopup(b)}else{const b=new wr;await p6(s5(),b)}e()}catch(b){E((b==null?void 0:b.message)||String(b))}},w=E=>{console.log("AuthModal backdrop clicked",E.target,E.currentTarget),E.target===E.currentTarget&&(console.log("Closing AuthModal"),e())};return D.useEffect(()=>{const E=b=>{n&&b.target.classList.contains("auth-modal")&&(console.log("Document click - closing AuthModal"),e())};return n&&document.addEventListener("click",E),()=>{document.removeEventListener("click",E)}},[n,e]),m.jsx("div",{className:"auth-modal",onClick:w,children:m.jsxs("div",{className:"auth-modal-content",onClick:E=>E.stopPropagation(),children:[m.jsx("span",{className:"close-button",onClick:e,children:"×"}),m.jsxs("section",{className:"auth-section",children:[m.jsx("h1",{children:"Авторизация"}),m.jsxs("div",{className:"auth-container",children:[m.jsxs("div",{className:"auth-form-card",children:[m.jsx("h2",{children:"Регистрация"}),m.jsxs("form",{onSubmit:T,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"register-email",children:"Email:"}),m.jsx("input",{type:"email",id:"register-email",value:r,onChange:E=>i(E.target.value),required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"register-password",children:"Пароль:"}),m.jsx("input",{type:"password",id:"register-password",value:s,onChange:E=>o(E.target.value),required:!0})]}),m.jsx("button",{type:"submit",className:"btn-primary",children:"Зарегистрироваться"}),m.jsx("p",{className:"error-message",children:a})]}),m.jsxs("button",{onClick:()=>_(l),className:"btn-secondary",children:[m.jsx("img",{src:"https://www.google.com/images/branding/googleg/1x/googleg_standard_color_128dp.png",alt:"Google",style:{width:20,height:20}}),"Зарегистрироваться через Google"]})]}),m.jsxs("div",{className:"auth-form-card",children:[m.jsx("h2",{children:"Вход"}),m.jsxs("form",{onSubmit:x,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"login-email",children:"Email:"}),m.jsx("input",{type:"email",id:"login-email",value:c,onChange:E=>d(E.target.value),required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"login-password",children:"Пароль:"}),m.jsx("input",{type:"password",id:"login-password",value:h,onChange:E=>p(E.target.value),required:!0})]}),m.jsx("button",{type:"submit",className:"btn-primary",children:"Войти"}),m.jsx("p",{className:"error-message",children:y})]}),m.jsxs("button",{onClick:()=>_(v),className:"btn-secondary",children:[m.jsx("img",{src:"https://www.google.com/images/branding/googleg/1x/googleg_standard_color_128dp.png",alt:"Google",style:{width:20,height:20}}),"Войти через Google"]})]})]})]})]})})},l5=({isOpen:n,onClose:e,initialService:t,initialSubService:r})=>{const{db:i,user:s,auth:o}=xp(),[a,l]=D.useState(t||"makeup"),[c,d]=D.useState(r||"day"),[h,p]=D.useState(""),[y,v]=D.useState(""),[T,x]=D.useState([]),[_,w]=D.useState(!0),[E,b]=D.useState(""),O={makeup:{day:1500,evening:2900,bridal:4800},haircut:3500,manicure:1900,pedicure:3200},F=D.useMemo(()=>a==="makeup"?O.makeup[c]:O[a]??0,[a,c]),A=D.useMemo(()=>new Date().toISOString().split("T")[0],[]);D.useEffect(()=>{t&&l(t),r&&d(r)},[t,r]),D.useEffect(()=>{if(!i||!n)return;const C=ye.fromDate(new Date),se=Bn(_p(i,"slots"),Ju("status","==","free"),Ju("start",">=",C),T1("start","asc"));w(!0);const he=Rp(se,ee=>{x(ee.docs.map(oe=>({id:oe.id,...oe.data()}))),w(!1)},ee=>{console.error(ee),w(!1),b(ee.code==="failed-precondition"?"Нужен индекс (status asc, start asc).":"Ошибка загрузки слотов: "+ee.message)});return()=>he()},[i,n]);const I=C=>{var se,he,ee;return(ee=(he=(se=C==null?void 0:C.toDate)==null?void 0:se.call(C))==null?void 0:he.toLocaleString)==null?void 0:ee.call(he,"ru-RU",{dateStyle:"short",timeStyle:"short"})},P=D.useMemo(()=>{if(!h)return[];const C=new Date(h+"T00:00:00"),se=new Date(h+"T23:59:59.999");return T.filter(he=>{var oe,z;const ee=(z=(oe=he.start)==null?void 0:oe.toDate)==null?void 0:z.call(oe);return ee&&ee>=C&&ee<=se})},[h,T]),R=async()=>{var C;return o!=null&&o.currentUser?o.currentUser:(await((C=o==null?void 0:o.signInAnonymously)==null?void 0:C.call(o)),o==null?void 0:o.currentUser)},k=async C=>{var se;if(C.preventDefault(),b(""),!h)return b("Укажите дату.");if(!y)return b("Выберите время.");try{await R();const he=(se=o.currentUser)==null?void 0:se.uid;if(!he)return b("Не удалось получить UID. Повторите.");if(!P.find(z=>z.id===y))return b("Выбранный слот уже недоступен.");const oe=xa(i,"slots",y);await x1(i,async z=>{const K=await z.get(oe);if(!K.exists())throw new Error("Слот не найден.");const te=K.data(),Te=ye.fromDate(new Date);if(te.status!=="free")throw new Error("Слот уже занят.");if(te.start.toMillis()<Te.toMillis())throw new Error("Слот в прошлом.");z.update(oe,{status:"booked",userUid:he,user:{name:(s==null?void 0:s.displayName)||(s==null?void 0:s.email)||"Клиент"},service:a,subService:a==="makeup"?c:null,price:F,bookedAt:Ky(),updatedAt:Ky()})}),b("Запись успешно создана!"),setTimeout(()=>{b(""),v(""),e==null||e()},1200)}catch(he){console.error(he),b(he.code==="permission-denied"?"Недостаточно прав (проверь правила Firestore / App Check).":"Ошибка: "+he.message)}},N=C=>{console.log("ServicesModal backdrop clicked",C.target,C.currentTarget),C.target===C.currentTarget&&(console.log("Closing ServicesModal"),e==null||e())};return D.useEffect(()=>{const C=se=>{n&&se.target.classList.contains("auth-modal")&&(console.log("Document click - closing ServicesModal"),e==null||e())};return n&&document.addEventListener("click",C),()=>{document.removeEventListener("click",C)}},[n,e]),n?m.jsx("div",{className:"auth-modal",onClick:N,role:"dialog","aria-label":"Запись на прием",children:m.jsxs("div",{className:"auth-modal-content",onClick:C=>C.stopPropagation(),children:[m.jsx("span",{className:"close-button",onClick:e,"aria-label":"Закрыть",children:"×"}),m.jsxs("section",{className:"auth-section",children:[m.jsx("h1",{children:"Запись на прием и услуги"}),m.jsxs("div",{style:{backgroundColor:"rgba(255,255,255,0.1)",padding:20,borderRadius:8,color:"white"},children:[m.jsxs("form",{onSubmit:k,style:{marginTop:20,textAlign:"left",display:"grid",gap:16},children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"service-select",children:"Выберите услугу:"}),m.jsxs("select",{id:"service-select",value:a,onChange:C=>{const se=C.target.value;l(se),se!=="makeup"&&d("day")},style:{width:"100%",padding:10,borderRadius:5,border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.1)",color:"#111"},children:[m.jsx("option",{value:"makeup",children:"Макияж"}),m.jsx("option",{value:"haircut",children:"Стрижка волос"}),m.jsx("option",{value:"manicure",children:"Маникюр"}),m.jsx("option",{value:"pedicure",children:"Педикюр"})]})]}),a==="makeup"&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"makeup-sub",children:"Вид макияжа:"}),m.jsxs("select",{id:"makeup-sub",value:c,onChange:C=>d(C.target.value),style:{width:"100%",padding:10,borderRadius:5,border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.1)",color:"#111"},children:[m.jsx("option",{value:"day",children:"Дневной — 1 500 ₽"}),m.jsx("option",{value:"evening",children:"Вечерний — 2 900 ₽"}),m.jsx("option",{value:"bridal",children:"Свадебный — 4 800 ₽"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"date-select",children:"Выберите дату:"}),m.jsx("input",{type:"date",id:"date-select",value:h,min:A,onChange:C=>{p(C.target.value),v("")},style:{width:"100%",padding:10,borderRadius:5,border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.1)",color:"#111"}})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"time-select",children:"Время:"}),m.jsxs("select",{id:"time-select",value:y,disabled:_||!h,onChange:C=>v(C.target.value),style:{width:"100%",padding:10,borderRadius:5,border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.1)",color:"#111"},children:[m.jsx("option",{value:"",children:_?"Загрузка…":"Выберите время…"}),P.map(C=>m.jsx("option",{value:C.id,children:I(C.start)},C.id)),!_&&h&&P.length===0&&m.jsx("option",{disabled:!0,children:"Свободных слотов на этот день нет"})]})]}),m.jsx("button",{type:"submit",className:"btn-primary",style:{marginTop:8,width:"auto",alignSelf:"center"},children:"Записаться"})]}),E&&m.jsx("p",{style:{marginTop:15,color:E.includes("Ошибка")||E.includes("прав")?"red":"lightgreen"},children:E}),m.jsx("div",{"aria-live":"polite",style:{marginTop:16,padding:"12px 14px",background:"rgba(255,255,255,0.15)",borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:m.jsxs("div",{children:[m.jsx("strong",{children:"Стоимость: "}),m.jsxs("span",{style:{fontWeight:700},children:[Number.isFinite(F)?F:"—"," ₽"]})]})})]})]})]})}):null};function u5({isOpen:n,onClose:e}){const{db:t,user:r}=xp(),[i,s]=D.useState([]),[o,a]=D.useState("");D.useEffect(()=>{if(!n||!r)return;const d=Bn(_p(t,"slots"),Ju("status","==","booked"),Ju("userUid","==",r.uid)),h=Rp(d,p=>{const y=p.docs.map(v=>({id:v.id,...v.data()}));y.sort((v,T)=>{var x,_;return(((x=v.start)==null?void 0:x.seconds)||0)-(((_=T.start)==null?void 0:_.seconds)||0)}),s(y),a("")},p=>a(p.message));return()=>h()},[n,r]);const l=async d=>{try{await Gy(xa(t,"slots",d),{status:"free",user:Hy(),bookedAt:Hy()})}catch(h){a(h.message)}},c=d=>{console.log("ProfileModal backdrop clicked",d.target,d.currentTarget),d.target===d.currentTarget&&(console.log("Closing ProfileModal"),e())};return D.useEffect(()=>{const d=h=>{n&&h.target.classList.contains("modal-backdrop")&&(console.log("Document click - closing ProfileModal"),e())};return n&&document.addEventListener("click",d),()=>{document.removeEventListener("click",d)}},[n,e]),n?m.jsx("div",{className:"modal-backdrop",onClick:c,children:m.jsxs("div",{className:"modal",onClick:d=>d.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{children:"Мои записи"}),m.jsx("button",{onClick:e,children:"×"})]}),o&&m.jsxs("div",{style:{color:"#f66",marginBottom:8},children:["Ошибка: ",o]}),i.length===0&&m.jsx("div",{style:{opacity:.7},children:"Записей пока нет."}),i.map(d=>{var h,p,y,v;return m.jsxs("div",{className:"slot-row",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderTop:"1px solid #eee"},children:[m.jsx("div",{children:((v=(p=(h=d.start)==null?void 0:h.toDate)==null?void 0:(y=p.call(h)).toLocaleString)==null?void 0:v.call(y,"ru-RU"))||"—"}),m.jsxs("div",{style:{display:"flex",gap:8},children:[m.jsx("button",{onClick:()=>window.location.href="/book",children:"Перенести"}),m.jsx("button",{onClick:()=>l(d.id),style:{background:"#f55",color:"#fff"},children:"Отменить"})]})]},d.id)})]})}):null}function $P(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function Zw(n,e){n===void 0&&(n={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof n[r]>"u"?n[r]=e[r]:$P(e[r])&&$P(n[r])&&Object.keys(e[r]).length>0&&Zw(n[r],e[r])})}const hb={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ro(){const n=typeof document<"u"?document:{};return Zw(n,hb),n}const c5={document:hb,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function zt(){const n=typeof window<"u"?window:{};return Zw(n,c5),n}function d5(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function h5(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function fb(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function ff(){return Date.now()}function f5(n){const e=zt();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function p5(n,e){e===void 0&&(e="x");const t=zt();let r,i,s;const o=f5(n);return t.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(i==="none"?"":i)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?i=s.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(t.WebKitCSSMatrix?i=s.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function Cd(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function m5(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function nn(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const r=t<0||arguments.length<=t?void 0:arguments[t];if(r!=null&&!m5(r)){const i=Object.keys(Object(r)).filter(s=>e.indexOf(s)<0);for(let s=0,o=i.length;s<o;s+=1){const a=i[s],l=Object.getOwnPropertyDescriptor(r,a);l!==void 0&&l.enumerable&&(Cd(n[a])&&Cd(r[a])?r[a].__swiper__?n[a]=r[a]:nn(n[a],r[a]):!Cd(n[a])&&Cd(r[a])?(n[a]={},r[a].__swiper__?n[a]=r[a]:nn(n[a],r[a])):n[a]=r[a])}}}return n}function xd(n,e,t){n.style.setProperty(e,t)}function pb(n){let{swiper:e,targetPosition:t,side:r}=n;const i=zt(),s=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",d=(p,y)=>c==="next"&&p>=y||c==="prev"&&p<=y,h=()=>{a=new Date().getTime(),o===null&&(o=a);const p=Math.max(Math.min((a-o)/l,1),0),y=.5-Math.cos(p*Math.PI)/2;let v=s+y*(t-s);if(d(v,t)&&(v=t),e.wrapperEl.scrollTo({[r]:v}),d(v,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:v})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(h)};h()}function Qn(n,e){e===void 0&&(e="");const t=zt(),r=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&r.push(...n.assignedElements()),e?r.filter(i=>i.matches(e)):r}function g5(n,e){const t=[e];for(;t.length>0;){const r=t.shift();if(n===r)return!0;t.push(...r.children,...r.shadowRoot?r.shadowRoot.children:[],...r.assignedElements?r.assignedElements():[])}}function y5(n,e){const t=zt();let r=e.contains(n);return!r&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(r=[...e.assignedElements()].includes(n),r||(r=g5(n,e))),r}function pf(n){try{console.warn(n);return}catch{}}function mf(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:d5(e)),t}function _5(n,e){const t=[];for(;n.previousElementSibling;){const r=n.previousElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function v5(n,e){const t=[];for(;n.nextElementSibling;){const r=n.nextElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function yi(n,e){return zt().getComputedStyle(n,null).getPropertyValue(e)}function BP(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function w5(n,e){const t=[];let r=n.parentElement;for(;r;)t.push(r),r=r.parentElement;return t}function zP(n,e,t){const r=zt();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function gr(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function WP(n,e){e===void 0&&(e=""),typeof trustedTypes<"u"?n.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):n.innerHTML=e}let tg;function E5(){const n=zt(),e=ro();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function mb(){return tg||(tg=E5()),tg}let ng;function I5(n){let{userAgent:e}=n===void 0?{}:n;const t=mb(),r=zt(),i=r.navigator.platform,s=e||r.navigator.userAgent,o={ios:!1,android:!1},a=r.screen.width,l=r.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let d=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),p=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),y=i==="Win32";let v=i==="MacIntel";const T=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&v&&t.touch&&T.indexOf(`${a}x${l}`)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),v=!1),c&&!y&&(o.os="android",o.android=!0),(d||p||h)&&(o.os="ios",o.ios=!0),o}function gb(n){return n===void 0&&(n={}),ng||(ng=I5(n)),ng}let rg;function T5(){const n=zt(),e=gb();let t=!1;function r(){const a=n.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(r()){const a=String(n.navigator.userAgent);if(a.includes("Version/")){const[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));t=l<16||l===16&&c<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),s=r(),o=s||i&&e.ios;return{isSafari:t||s,needPerspectiveFix:t,need3dFix:o,isWebView:i}}function yb(){return rg||(rg=T5()),rg}function S5(n){let{swiper:e,on:t,emit:r}=n;const i=zt();let s=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(h=>{o=i.requestAnimationFrame(()=>{const{width:p,height:y}=e;let v=p,T=y;h.forEach(x=>{let{contentBoxSize:_,contentRect:w,target:E}=x;E&&E!==e.el||(v=w?w.width:(_[0]||_).inlineSize,T=w?w.height:(_[0]||_).blockSize)}),(v!==p||T!==y)&&a()})}),s.observe(e.el))},c=()=>{o&&i.cancelAnimationFrame(o),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},d=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){l();return}i.addEventListener("resize",a),i.addEventListener("orientationchange",d)}),t("destroy",()=>{c(),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",d)})}function P5(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const s=[],o=zt(),a=function(d,h){h===void 0&&(h={});const p=o.MutationObserver||o.WebkitMutationObserver,y=new p(v=>{if(e.__preventObserver__)return;if(v.length===1){i("observerUpdate",v[0]);return}const T=function(){i("observerUpdate",v[0])};o.requestAnimationFrame?o.requestAnimationFrame(T):o.setTimeout(T,0)});y.observe(d,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:e.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(y)},l=()=>{if(e.params.observer){if(e.params.observeParents){const d=w5(e.hostEl);for(let h=0;h<d.length;h+=1)a(d[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(d=>{d.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",c)}var A5={on(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=t?"unshift":"push";return n.split(" ").forEach(s=>{r.eventsListeners[s]||(r.eventsListeners[s]=[]),r.eventsListeners[s][i](e)}),r},once(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(){r.off(n,i),i.__emitterProxy&&delete i.__emitterProxy;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e.apply(r,o)}return i.__emitterProxy=e,r.on(n,i,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const r=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[r](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(r=>{typeof e>"u"?t.eventsListeners[r]=[]:t.eventsListeners[r]&&t.eventsListeners[r].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&t.eventsListeners[r].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,r;for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),r=n):(e=s[0].events,t=s[0].data,r=s[0].context||n),t.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(r,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(r,t)})}),n}};function R5(){const n=this;let e,t;const r=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=r.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=r.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(yi(r,"padding-left")||0,10)-parseInt(yi(r,"padding-right")||0,10),t=t-parseInt(yi(r,"padding-top")||0,10)-parseInt(yi(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function C5(){const n=this;function e(R,k){return parseFloat(R.getPropertyValue(n.getDirectionLabel(k))||0)}const t=n.params,{wrapperEl:r,slidesEl:i,size:s,rtlTranslate:o,wrongRTL:a}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,d=Qn(i,`.${n.params.slideClass}, swiper-slide`),h=l?n.virtual.slides.length:d.length;let p=[];const y=[],v=[];let T=t.slidesOffsetBefore;typeof T=="function"&&(T=t.slidesOffsetBefore.call(n));let x=t.slidesOffsetAfter;typeof x=="function"&&(x=t.slidesOffsetAfter.call(n));const _=n.snapGrid.length,w=n.slidesGrid.length;let E=t.spaceBetween,b=-T,O=0,F=0;if(typeof s>"u")return;typeof E=="string"&&E.indexOf("%")>=0?E=parseFloat(E.replace("%",""))/100*s:typeof E=="string"&&(E=parseFloat(E)),n.virtualSize=-E,d.forEach(R=>{o?R.style.marginLeft="":R.style.marginRight="",R.style.marginBottom="",R.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(xd(r,"--swiper-centered-offset-before",""),xd(r,"--swiper-centered-offset-after",""));const A=t.grid&&t.grid.rows>1&&n.grid;A?n.grid.initSlides(d):n.grid&&n.grid.unsetSlides();let I;const P=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(R=>typeof t.breakpoints[R].slidesPerView<"u").length>0;for(let R=0;R<h;R+=1){I=0;let k;if(d[R]&&(k=d[R]),A&&n.grid.updateSlide(R,k,d),!(d[R]&&yi(k,"display")==="none")){if(t.slidesPerView==="auto"){P&&(d[R].style[n.getDirectionLabel("width")]="");const N=getComputedStyle(k),C=k.style.transform,se=k.style.webkitTransform;if(C&&(k.style.transform="none"),se&&(k.style.webkitTransform="none"),t.roundLengths)I=n.isHorizontal()?zP(k,"width"):zP(k,"height");else{const he=e(N,"width"),ee=e(N,"padding-left"),oe=e(N,"padding-right"),z=e(N,"margin-left"),K=e(N,"margin-right"),te=N.getPropertyValue("box-sizing");if(te&&te==="border-box")I=he+z+K;else{const{clientWidth:Te,offsetWidth:ve}=k;I=he+ee+oe+z+K+(ve-Te)}}C&&(k.style.transform=C),se&&(k.style.webkitTransform=se),t.roundLengths&&(I=Math.floor(I))}else I=(s-(t.slidesPerView-1)*E)/t.slidesPerView,t.roundLengths&&(I=Math.floor(I)),d[R]&&(d[R].style[n.getDirectionLabel("width")]=`${I}px`);d[R]&&(d[R].swiperSlideSize=I),v.push(I),t.centeredSlides?(b=b+I/2+O/2+E,O===0&&R!==0&&(b=b-s/2-E),R===0&&(b=b-s/2-E),Math.abs(b)<1/1e3&&(b=0),t.roundLengths&&(b=Math.floor(b)),F%t.slidesPerGroup===0&&p.push(b),y.push(b)):(t.roundLengths&&(b=Math.floor(b)),(F-Math.min(n.params.slidesPerGroupSkip,F))%n.params.slidesPerGroup===0&&p.push(b),y.push(b),b=b+I+E),n.virtualSize+=I+E,O=I,F+=1}}if(n.virtualSize=Math.max(n.virtualSize,s)+x,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(r.style.width=`${n.virtualSize+E}px`),t.setWrapperSize&&(r.style[n.getDirectionLabel("width")]=`${n.virtualSize+E}px`),A&&n.grid.updateWrapperSize(I,p),!t.centeredSlides){const R=[];for(let k=0;k<p.length;k+=1){let N=p[k];t.roundLengths&&(N=Math.floor(N)),p[k]<=n.virtualSize-s&&R.push(N)}p=R,Math.floor(n.virtualSize-s)-Math.floor(p[p.length-1])>1&&p.push(n.virtualSize-s)}if(l&&t.loop){const R=v[0]+E;if(t.slidesPerGroup>1){const k=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),N=R*t.slidesPerGroup;for(let C=0;C<k;C+=1)p.push(p[p.length-1]+N)}for(let k=0;k<n.virtual.slidesBefore+n.virtual.slidesAfter;k+=1)t.slidesPerGroup===1&&p.push(p[p.length-1]+R),y.push(y[y.length-1]+R),n.virtualSize+=R}if(p.length===0&&(p=[0]),E!==0){const R=n.isHorizontal()&&o?"marginLeft":n.getDirectionLabel("marginRight");d.filter((k,N)=>!t.cssMode||t.loop?!0:N!==d.length-1).forEach(k=>{k.style[R]=`${E}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let R=0;v.forEach(N=>{R+=N+(E||0)}),R-=E;const k=R>s?R-s:0;p=p.map(N=>N<=0?-T:N>k?k+x:N)}if(t.centerInsufficientSlides){let R=0;v.forEach(N=>{R+=N+(E||0)}),R-=E;const k=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(R+k<s){const N=(s-R-k)/2;p.forEach((C,se)=>{p[se]=C-N}),y.forEach((C,se)=>{y[se]=C+N})}}if(Object.assign(n,{slides:d,snapGrid:p,slidesGrid:y,slidesSizesGrid:v}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){xd(r,"--swiper-centered-offset-before",`${-p[0]}px`),xd(r,"--swiper-centered-offset-after",`${n.size/2-v[v.length-1]/2}px`);const R=-n.snapGrid[0],k=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(N=>N+R),n.slidesGrid=n.slidesGrid.map(N=>N+k)}if(h!==c&&n.emit("slidesLengthChange"),p.length!==_&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),y.length!==w&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const R=`${t.containerModifierClass}backface-hidden`,k=n.el.classList.contains(R);h<=t.maxBackfaceHiddenSlides?k||n.el.classList.add(R):k&&n.el.classList.remove(R)}}function x5(n){const e=this,t=[],r=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const o=a=>r?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!r)break;t.push(o(a))}else t.push(o(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const a=t[s].offsetHeight;i=a>i?a:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function k5(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(n.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-t-n.cssOverflowAdjustment()}const qP=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function b5(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:r,rtlTranslate:i,snapGrid:s}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-n;i&&(o=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<r.length;l+=1){const c=r[l];let d=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(d-=r[0].swiperSlideOffset);const h=(o+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+a),p=(o-s[0]+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+a),y=-(o-d),v=y+e.slidesSizesGrid[l],T=y>=0&&y<=e.size-e.slidesSizesGrid[l],x=y>=0&&y<e.size-1||v>1&&v<=e.size||y<=0&&v>=e.size;x&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),qP(c,x,t.slideVisibleClass),qP(c,T,t.slideFullyVisibleClass),c.progress=i?-h:h,c.originalProgress=i?-p:p}}function N5(n){const e=this;if(typeof n>"u"){const d=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*d||0}const t=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,c=o;if(r===0)i=0,s=!0,o=!0;else{i=(n-e.minTranslate())/r;const d=Math.abs(n-e.minTranslate())<1,h=Math.abs(n-e.maxTranslate())<1;s=d||i<=0,o=h||i>=1,d&&(i=0),h&&(i=1)}if(t.loop){const d=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),p=e.slidesGrid[d],y=e.slidesGrid[h],v=e.slidesGrid[e.slidesGrid.length-1],T=Math.abs(n);T>=p?a=(T-p)/v:a=(T+v-y)/v,a>1&&(a-=1)}Object.assign(e,{progress:i,progressLoop:a,isBeginning:s,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",i)}const ig=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function D5(){const n=this,{slides:e,params:t,slidesEl:r,activeIndex:i}=n,s=n.virtual&&t.virtual.enabled,o=n.grid&&t.grid&&t.grid.rows>1,a=h=>Qn(r,`.${t.slideClass}${h}, swiper-slide${h}`)[0];let l,c,d;if(s)if(t.loop){let h=i-n.virtual.slidesBefore;h<0&&(h=n.virtual.slides.length+h),h>=n.virtual.slides.length&&(h-=n.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${i}"]`);else o?(l=e.find(h=>h.column===i),d=e.find(h=>h.column===i+1),c=e.find(h=>h.column===i-1)):l=e[i];l&&(o||(d=v5(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!d&&(d=e[0]),c=_5(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(h=>{ig(h,h===l,t.slideActiveClass),ig(h,h===d,t.slideNextClass),ig(h,h===c,t.slidePrevClass)}),n.emitSlidesClasses()}const ch=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,r=e.closest(t());if(r){let i=r.querySelector(`.${n.params.lazyPreloaderClass}`);!i&&n.isElement&&(r.shadowRoot?i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},sg=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},e_=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const r=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),i=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const o=i,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+r+c)),n.slides.forEach((l,c)=>{a.includes(l.column)&&sg(n,c)});return}const s=i+r-1;if(n.params.rewind||n.params.loop)for(let o=i-e;o<=s+e;o+=1){const a=(o%t+t)%t;(a<i||a>s)&&sg(n,a)}else for(let o=Math.max(i-e,0);o<=Math.min(s+e,t-1);o+=1)o!==i&&(o>s||o<i)&&sg(n,o)};function O5(n){const{slidesGrid:e,params:t}=n,r=n.rtlTranslate?n.translate:-n.translate;let i;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?r>=e[s]&&r<e[s+1]-(e[s+1]-e[s])/2?i=s:r>=e[s]&&r<e[s+1]&&(i=s+1):r>=e[s]&&(i=s);return t.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function V5(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=n,c;const d=y=>{let v=y-e.virtual.slidesBefore;return v<0&&(v=e.virtual.slides.length+v),v>=e.virtual.slides.length&&(v-=e.virtual.slides.length),v};if(typeof l>"u"&&(l=O5(e)),r.indexOf(t)>=0)c=r.indexOf(t);else{const y=Math.min(i.slidesPerGroupSkip,l);c=y+Math.floor((l-y)/i.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===s&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=d(l);return}const h=e.grid&&i.grid&&i.grid.rows>1;let p;if(e.virtual&&i.virtual.enabled&&i.loop)p=d(l);else if(h){const y=e.slides.find(T=>T.column===l);let v=parseInt(y.getAttribute("data-swiper-slide-index"),10);Number.isNaN(v)&&(v=Math.max(e.slides.indexOf(y),0)),p=Math.floor(v/i.grid.rows)}else if(e.slides[l]){const y=e.slides[l].getAttribute("data-swiper-slide-index");y?p=parseInt(y,10):p=l}else p=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:p,previousIndex:s,activeIndex:l}),e.initialized&&e_(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==p&&e.emit("realIndexChange"),e.emit("slideChange"))}function L5(n,e){const t=this,r=t.params;let i=n.closest(`.${r.slideClass}, swiper-slide`);!i&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(a=>{!i&&a.matches&&a.matches(`.${r.slideClass}, swiper-slide`)&&(i=a)});let s=!1,o;if(i){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===i){s=!0,o=a;break}}if(i&&s)t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var M5={updateSize:R5,updateSlides:C5,updateAutoHeight:x5,updateSlidesOffset:k5,updateSlidesProgress:b5,updateProgress:N5,updateSlidesClasses:D5,updateActiveIndex:V5,updateClickedSlide:L5};function F5(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:r,translate:i,wrapperEl:s}=e;if(t.virtualTranslate)return r?-i:i;if(t.cssMode)return i;let o=p5(s,n);return o+=e.cssOverflowAdjustment(),r&&(o=-o),o||0}function j5(n,e){const t=this,{rtlTranslate:r,params:i,wrapperEl:s,progress:o}=t;let a=0,l=0;const c=0;t.isHorizontal()?a=r?-n:n:l=n,i.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,i.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:i.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let d;const h=t.maxTranslate()-t.minTranslate();h===0?d=0:d=(n-t.minTranslate())/h,d!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function U5(){return-this.snapGrid[0]}function $5(){return-this.snapGrid[this.snapGrid.length-1]}function B5(n,e,t,r,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),r===void 0&&(r=!0);const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let d;if(r&&n>l?d=l:r&&n<c?d=c:d=n,s.updateProgress(d),o.cssMode){const h=s.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return pb({swiper:s,targetPosition:-d,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-d,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(d),t&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(d),t&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(p){!s||s.destroyed||p.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var z5={getTranslate:F5,setTranslate:j5,minTranslate:U5,maxTranslate:$5,translateTo:B5};function W5(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function _b(n){let{swiper:e,runCallbacks:t,direction:r,step:i}=n;const{activeIndex:s,previousIndex:o}=e;let a=r;a||(s>o?a="next":s<o?a="prev":a="reset"),e.emit(`transition${i}`),t&&a==="reset"?e.emit(`slideResetTransition${i}`):t&&s!==o&&(e.emit(`slideChangeTransition${i}`),a==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`))}function q5(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;r.cssMode||(r.autoHeight&&t.updateAutoHeight(),_b({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function G5(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;t.animating=!1,!r.cssMode&&(t.setTransition(0),_b({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var H5={setTransition:W5,transitionStart:q5,transitionEnd:G5};function K5(n,e,t,r,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let o=n;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:h,rtlTranslate:p,wrapperEl:y,enabled:v}=s;if(!v&&!r&&!i||s.destroyed||s.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const T=Math.min(s.params.slidesPerGroupSkip,o);let x=T+Math.floor((o-T)/s.params.slidesPerGroup);x>=l.length&&(x=l.length-1);const _=-l[x];if(a.normalizeSlideIndex)for(let A=0;A<c.length;A+=1){const I=-Math.floor(_*100),P=Math.floor(c[A]*100),R=Math.floor(c[A+1]*100);typeof c[A+1]<"u"?I>=P&&I<R-(R-P)/2?o=A:I>=P&&I<R&&(o=A+1):I>=P&&(o=A)}if(s.initialized&&o!==h&&(!s.allowSlideNext&&(p?_>s.translate&&_>s.minTranslate():_<s.translate&&_<s.minTranslate())||!s.allowSlidePrev&&_>s.translate&&_>s.maxTranslate()&&(h||0)!==o))return!1;o!==(d||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(_);let w;o>h?w="next":o<h?w="prev":w="reset";const E=s.virtual&&s.params.virtual.enabled;if(!(E&&i)&&(p&&-_===s.translate||!p&&_===s.translate))return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(_),w!=="reset"&&(s.transitionStart(t,w),s.transitionEnd(t,w)),!1;if(a.cssMode){const A=s.isHorizontal(),I=p?_:-_;if(e===0)E&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),E&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{y[A?"scrollLeft":"scrollTop"]=I})):y[A?"scrollLeft":"scrollTop"]=I,E&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return pb({swiper:s,targetPosition:I,side:A?"left":"top"}),!0;y.scrollTo({[A?"left":"top"]:I,behavior:"smooth"})}return!0}const F=yb().isSafari;return E&&!i&&F&&s.isElement&&s.virtual.update(!1,!1,o),s.setTransition(e),s.setTranslate(_),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,r),s.transitionStart(t,w),e===0?s.transitionEnd(t,w):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(I){!s||s.destroyed||I.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,w))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function Q5(n,e,t,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const i=this;if(i.destroyed)return;typeof e>"u"&&(e=i.params.speed);const s=i.grid&&i.params.grid&&i.params.grid.rows>1;let o=n;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)o=o+i.virtual.slidesBefore;else{let a;if(s){const p=o*i.params.grid.rows;a=i.slides.find(y=>y.getAttribute("data-swiper-slide-index")*1===p).column}else a=i.getSlideIndexByData(o);const l=s?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:c}=i.params;let d=i.params.slidesPerView;d==="auto"?d=i.slidesPerViewDynamic():(d=Math.ceil(parseFloat(i.params.slidesPerView,10)),c&&d%2===0&&(d=d+1));let h=l-a<d;if(c&&(h=h||a<Math.ceil(d/2)),r&&c&&i.params.slidesPerView!=="auto"&&!s&&(h=!1),h){const p=c?a<i.activeIndex?"prev":"next":a-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:p,slideTo:!0,activeSlideIndex:p==="next"?a+1:a-l+1,slideRealIndex:p==="next"?i.realIndex:void 0})}if(s){const p=o*i.params.grid.rows;o=i.slides.find(y=>y.getAttribute("data-swiper-slide-index")*1===p).column}else o=i.getSlideIndexByData(o)}return requestAnimationFrame(()=>{i.slideTo(o,e,t,r)}),i}function Y5(n,e,t){e===void 0&&(e=!0);const r=this,{enabled:i,params:s,animating:o}=r;if(!i||r.destroyed)return r;typeof n>"u"&&(n=r.params.speed);let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:a,c=r.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,n,e,t)}),!0}return s.rewind&&r.isEnd?r.slideTo(0,n,e,t):r.slideTo(r.activeIndex+l,n,e,t)}function J5(n,e,t){e===void 0&&(e=!0);const r=this,{params:i,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=r;if(!l||r.destroyed)return r;typeof n>"u"&&(n=r.params.speed);const d=r.virtual&&i.virtual.enabled;if(i.loop){if(c&&!d&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const h=a?r.translate:-r.translate;function p(w){return w<0?-Math.floor(Math.abs(w)):Math.floor(w)}const y=p(h),v=s.map(w=>p(w)),T=i.freeMode&&i.freeMode.enabled;let x=s[v.indexOf(y)-1];if(typeof x>"u"&&(i.cssMode||T)){let w;s.forEach((E,b)=>{y>=E&&(w=b)}),typeof w<"u"&&(x=T?s[w]:s[w>0?w-1:w])}let _=0;if(typeof x<"u"&&(_=o.indexOf(x),_<0&&(_=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(_=_-r.slidesPerViewDynamic("previous",!0)+1,_=Math.max(_,0))),i.rewind&&r.isBeginning){const w=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(w,n,e,t)}else if(i.loop&&r.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(_,n,e,t)}),!0;return r.slideTo(_,n,e,t)}function X5(n,e,t){e===void 0&&(e=!0);const r=this;if(!r.destroyed)return typeof n>"u"&&(n=r.params.speed),r.slideTo(r.activeIndex,n,e,t)}function Z5(n,e,t,r){e===void 0&&(e=!0),r===void 0&&(r=.5);const i=this;if(i.destroyed)return;typeof n>"u"&&(n=i.params.speed);let s=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[a]){const c=i.snapGrid[a],d=i.snapGrid[a+1];l-c>(d-c)*r&&(s+=i.params.slidesPerGroup)}else{const c=i.snapGrid[a-1],d=i.snapGrid[a];l-c<=(d-c)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,n,e,t)}function e9(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,r=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let i=n.getSlideIndexWhenGrid(n.clickedIndex),s;const o=n.isElement?"swiper-slide":`.${e.slideClass}`,a=n.grid&&n.params.grid&&n.params.grid.rows>1;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?n.slideToLoop(s):i>(a?(n.slides.length-r)/2-(n.params.grid.rows-1):n.slides.length-r)?(n.loopFix(),i=n.getSlideIndex(Qn(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),fb(()=>{n.slideTo(i)})):n.slideTo(i)}else n.slideTo(i)}var t9={slideTo:K5,slideToLoop:Q5,slideNext:Y5,slidePrev:J5,slideReset:X5,slideToClosest:Z5,slideToClickedSlide:e9};function n9(n,e){const t=this,{params:r,slidesEl:i}=t;if(!r.loop||t.virtual&&t.params.virtual.enabled)return;const s=()=>{Qn(i,`.${r.slideClass}, swiper-slide`).forEach((y,v)=>{y.setAttribute("data-swiper-slide-index",v)})},o=()=>{const p=Qn(i,`.${r.slideBlankClass}`);p.forEach(y=>{y.remove()}),p.length>0&&(t.recalcSlides(),t.updateSlides())},a=t.grid&&r.grid&&r.grid.rows>1;r.loopAddBlankSlides&&(r.slidesPerGroup>1||a)&&o();const l=r.slidesPerGroup*(a?r.grid.rows:1),c=t.slides.length%l!==0,d=a&&t.slides.length%r.grid.rows!==0,h=p=>{for(let y=0;y<p;y+=1){const v=t.isElement?mf("swiper-slide",[r.slideBlankClass]):mf("div",[r.slideClass,r.slideBlankClass]);t.slidesEl.append(v)}};if(c){if(r.loopAddBlankSlides){const p=l-t.slides.length%l;h(p),t.recalcSlides(),t.updateSlides()}else pf("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(d){if(r.loopAddBlankSlides){const p=r.grid.rows-t.slides.length%r.grid.rows;h(p),t.recalcSlides(),t.updateSlides()}else pf("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();t.loopFix({slideRealIndex:n,direction:r.centeredSlides?void 0:"next",initial:e})}function r9(n){let{slideRealIndex:e,slideTo:t=!0,direction:r,setTranslate:i,activeSlideIndex:s,initial:o,byController:a,byMousewheel:l}=n===void 0?{}:n;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:d,allowSlidePrev:h,allowSlideNext:p,slidesEl:y,params:v}=c,{centeredSlides:T,initialSlide:x}=v;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&v.virtual.enabled){t&&(!v.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):v.centeredSlides&&c.snapIndex<v.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=h,c.allowSlideNext=p,c.emit("loopFix");return}let _=v.slidesPerView;_==="auto"?_=c.slidesPerViewDynamic():(_=Math.ceil(parseFloat(v.slidesPerView,10)),T&&_%2===0&&(_=_+1));const w=v.slidesPerGroupAuto?_:v.slidesPerGroup;let E=T?Math.max(w,Math.ceil(_/2)):w;E%w!==0&&(E+=w-E%w),E+=v.loopAdditionalSlides,c.loopedSlides=E;const b=c.grid&&v.grid&&v.grid.rows>1;d.length<_+E||c.params.effect==="cards"&&d.length<_+E*2?pf("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):b&&v.grid.fill==="row"&&pf("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const O=[],F=[],A=b?Math.ceil(d.length/v.grid.rows):d.length,I=o&&A-x<_&&!T;let P=I?x:c.activeIndex;typeof s>"u"?s=c.getSlideIndex(d.find(ee=>ee.classList.contains(v.slideActiveClass))):P=s;const R=r==="next"||!r,k=r==="prev"||!r;let N=0,C=0;const he=(b?d[s].column:s)+(T&&typeof i>"u"?-_/2+.5:0);if(he<E){N=Math.max(E-he,w);for(let ee=0;ee<E-he;ee+=1){const oe=ee-Math.floor(ee/A)*A;if(b){const z=A-oe-1;for(let K=d.length-1;K>=0;K-=1)d[K].column===z&&O.push(K)}else O.push(A-oe-1)}}else if(he+_>A-E){C=Math.max(he-(A-E*2),w),I&&(C=Math.max(C,_-A+x+1));for(let ee=0;ee<C;ee+=1){const oe=ee-Math.floor(ee/A)*A;b?d.forEach((z,K)=>{z.column===oe&&F.push(K)}):F.push(oe)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),c.params.effect==="cards"&&d.length<_+E*2&&(F.includes(s)&&F.splice(F.indexOf(s),1),O.includes(s)&&O.splice(O.indexOf(s),1)),k&&O.forEach(ee=>{d[ee].swiperLoopMoveDOM=!0,y.prepend(d[ee]),d[ee].swiperLoopMoveDOM=!1}),R&&F.forEach(ee=>{d[ee].swiperLoopMoveDOM=!0,y.append(d[ee]),d[ee].swiperLoopMoveDOM=!1}),c.recalcSlides(),v.slidesPerView==="auto"?c.updateSlides():b&&(O.length>0&&k||F.length>0&&R)&&c.slides.forEach((ee,oe)=>{c.grid.updateSlide(oe,ee,c.slides)}),v.watchSlidesProgress&&c.updateSlidesOffset(),t){if(O.length>0&&k){if(typeof e>"u"){const ee=c.slidesGrid[P],z=c.slidesGrid[P+N]-ee;l?c.setTranslate(c.translate-z):(c.slideTo(P+Math.ceil(N),0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-z,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-z))}else if(i){const ee=b?O.length/v.grid.rows:O.length;c.slideTo(c.activeIndex+ee,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(F.length>0&&R)if(typeof e>"u"){const ee=c.slidesGrid[P],z=c.slidesGrid[P-C]-ee;l?c.setTranslate(c.translate-z):(c.slideTo(P-C,0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-z,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-z))}else{const ee=b?F.length/v.grid.rows:F.length;c.slideTo(c.activeIndex-ee,0,!1,!0)}}if(c.allowSlidePrev=h,c.allowSlideNext=p,c.controller&&c.controller.control&&!a){const ee={slideRealIndex:e,direction:r,setTranslate:i,activeSlideIndex:s,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(oe=>{!oe.destroyed&&oe.params.loop&&oe.loopFix({...ee,slideTo:oe.params.slidesPerView===v.slidesPerView?t:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...ee,slideTo:c.controller.control.params.slidesPerView===v.slidesPerView?t:!1})}c.emit("loopFix")}function i9(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const r=[];n.slides.forEach(i=>{const s=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;r[s]=i}),n.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),r.forEach(i=>{t.append(i)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var s9={loopCreate:n9,loopFix:r9,loopDestroy:i9};function o9(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function a9(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var l9={setGrabCursor:o9,unsetGrabCursor:a9};function u9(n,e){e===void 0&&(e=this);function t(r){if(!r||r===ro()||r===zt())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(n);return!i&&!r.getRootNode?null:i||t(r.getRootNode().host)}return t(e)}function GP(n,e,t){const r=zt(),{params:i}=n,s=i.edgeSwipeDetection,o=i.edgeSwipeThreshold;return s&&(t<=o||t>=r.innerWidth-o)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function c9(n){const e=this,t=ro();let r=n;r.originalEvent&&(r=r.originalEvent);const i=e.touchEventsData;if(r.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==r.pointerId)return;i.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(i.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){GP(e,r,r.targetTouches[0].pageX);return}const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&r.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=r.target;if(s.touchEventsTarget==="wrapper"&&!y5(l,e.wrapperEl)||"which"in r&&r.which===3||"button"in r&&r.button>0||i.isTouched&&i.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",d=r.composedPath?r.composedPath():r.path;c&&r.target&&r.target.shadowRoot&&d&&(l=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,p=!!(r.target&&r.target.shadowRoot);if(s.noSwiping&&(p?u9(h,l):l.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=r.pageX,o.currentY=r.pageY;const y=o.currentX,v=o.currentY;if(!GP(e,r,y))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=y,o.startY=v,i.touchStartTime=ff(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let T=!0;l.matches(i.focusableElements)&&(T=!1,l.nodeName==="SELECT"&&(i.isTouched=!1)),t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==l&&(r.pointerType==="mouse"||r.pointerType!=="mouse"&&!l.matches(i.focusableElements))&&t.activeElement.blur();const x=T&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||x)&&!l.isContentEditable&&r.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",r)}function d9(n){const e=ro(),t=this,r=t.touchEventsData,{params:i,touches:s,rtlTranslate:o,enabled:a}=t;if(!a||!i.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(r.touchId!==null||l.pointerId!==r.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].find(O=>O.identifier===r.touchId),!c||c.identifier!==r.touchId)return}else c=l;if(!r.isTouched){r.startMoving&&r.isScrolling&&t.emit("touchMoveOpposite",l);return}const d=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!t.allowTouchMove){l.target.matches(r.focusableElements)||(t.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h}),r.touchStartTime=ff());return}if(i.touchReleaseOnEdges&&!i.loop)if(t.isVertical()){if(h<s.startY&&t.translate<=t.maxTranslate()||h>s.startY&&t.translate>=t.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else{if(o&&(d>s.startX&&-t.translate<=t.maxTranslate()||d<s.startX&&-t.translate>=t.minTranslate()))return;if(!o&&(d<s.startX&&t.translate<=t.maxTranslate()||d>s.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(r.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,t.allowClick=!1;return}r.allowTouchCallbacks&&t.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=d,s.currentY=h;const p=s.currentX-s.startX,y=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(p**2+y**2)<t.params.threshold)return;if(typeof r.isScrolling>"u"){let O;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:p*p+y*y>=25&&(O=Math.atan2(Math.abs(y),Math.abs(p))*180/Math.PI,r.isScrolling=t.isHorizontal()?O>i.touchAngle:90-O>i.touchAngle)}if(r.isScrolling&&t.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(r.startMoving=!0),r.isScrolling||l.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;t.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let v=t.isHorizontal()?p:y,T=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(v=Math.abs(v)*(o?1:-1),T=Math.abs(T)*(o?1:-1)),s.diff=v,v*=i.touchRatio,o&&(v=-v,T=-T);const x=t.touchesDirection;t.swipeDirection=v>0?"prev":"next",t.touchesDirection=T>0?"prev":"next";const _=t.params.loop&&!i.cssMode,w=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!r.isMoved){if(_&&w&&t.loopFix({direction:t.swipeDirection}),r.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const O=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(O)}r.allowMomentumBounce=!1,i.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}if(new Date().getTime(),i._loopSwapReset!==!1&&r.isMoved&&r.allowThresholdMove&&x!==t.touchesDirection&&_&&w&&Math.abs(v)>=1){Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}t.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=v+r.startTranslate;let E=!0,b=i.resistanceRatio;if(i.touchReleaseOnEdges&&(b=0),v>0?(_&&w&&r.allowThresholdMove&&r.currentTranslate>(i.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(i.slidesPerView!=="auto"&&t.slides.length-i.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>t.minTranslate()&&(E=!1,i.resistance&&(r.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+r.startTranslate+v)**b))):v<0&&(_&&w&&r.allowThresholdMove&&r.currentTranslate<(i.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(i.slidesPerView!=="auto"&&t.slides.length-i.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(i.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<t.maxTranslate()&&(E=!1,i.resistance&&(r.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-r.startTranslate-v)**b))),E&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(v)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&t.freeMode||i.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(r.currentTranslate),t.setTranslate(r.currentTranslate))}function h9(n){const e=this,t=e.touchEventsData;let r=n;r.originalEvent&&(r=r.originalEvent);let i;if(r.type==="touchend"||r.type==="touchcancel"){if(i=[...r.changedTouches].find(O=>O.identifier===t.touchId),!i||i.identifier!==t.touchId)return}else{if(t.touchId!==null||r.pointerId!==t.pointerId)return;i=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:d}=e;if(!d||!o.simulateTouch&&r.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",r),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=ff(),p=h-t.touchStartTime;if(e.allowClick){const O=r.path||r.composedPath&&r.composedPath();e.updateClickedSlide(O&&O[0]||r.target,O),e.emit("tap click",r),p<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",r)}if(t.lastClickTime=ff(),fb(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let y;if(o.followFinger?y=l?e.translate:-e.translate:y=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:y});return}const v=y>=-e.maxTranslate()&&!e.params.loop;let T=0,x=e.slidesSizesGrid[0];for(let O=0;O<c.length;O+=O<o.slidesPerGroupSkip?1:o.slidesPerGroup){const F=O<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[O+F]<"u"?(v||y>=c[O]&&y<c[O+F])&&(T=O,x=c[O+F]-c[O]):(v||y>=c[O])&&(T=O,x=c[c.length-1]-c[c.length-2])}let _=null,w=null;o.rewind&&(e.isBeginning?w=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(_=0));const E=(y-c[T])/x,b=T<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(p>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(E>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?_:T+b):e.slideTo(T)),e.swipeDirection==="prev"&&(E>1-o.longSwipesRatio?e.slideTo(T+b):w!==null&&E<0&&Math.abs(E)>o.longSwipesRatio?e.slideTo(w):e.slideTo(T))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(r.target===e.navigation.nextEl||r.target===e.navigation.prevEl)?r.target===e.navigation.nextEl?e.slideTo(T+b):e.slideTo(T):(e.swipeDirection==="next"&&e.slideTo(_!==null?_:T+b),e.swipeDirection==="prev"&&e.slideTo(w!==null?w:T))}}function HP(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=n,o=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!a?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!o?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=i,n.allowSlideNext=r,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function f9(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function p9(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:r}=n;if(!r)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let i;const s=n.maxTranslate()-n.minTranslate();s===0?i=0:i=(n.translate-n.minTranslate())/s,i!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function m9(n){const e=this;ch(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function g9(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const vb=(n,e)=>{const t=ro(),{params:r,el:i,wrapperEl:s,device:o}=n,a=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!i||typeof i=="string"||(t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:a}),i[l]("touchstart",n.onTouchStart,{passive:!1}),i[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",n.onClick,!0),r.cssMode&&s[l]("scroll",n.onScroll),r.updateOnWindowResize?n[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",HP,!0):n[c]("observerUpdate",HP,!0),i[l]("load",n.onLoad,{capture:!0}))};function y9(){const n=this,{params:e}=n;n.onTouchStart=c9.bind(n),n.onTouchMove=d9.bind(n),n.onTouchEnd=h9.bind(n),n.onDocumentTouchStart=g9.bind(n),e.cssMode&&(n.onScroll=p9.bind(n)),n.onClick=f9.bind(n),n.onLoad=m9.bind(n),vb(n,"on")}function _9(){vb(this,"off")}var v9={attachEvents:y9,detachEvents:_9};const KP=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function w9(){const n=this,{realIndex:e,initialized:t,params:r,el:i}=n,s=r.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=ro(),a=r.breakpointsBase==="window"||!r.breakpointsBase?r.breakpointsBase:"container",l=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?n.el:o.querySelector(r.breakpointsBase),c=n.getBreakpoint(s,a,l);if(!c||n.currentBreakpoint===c)return;const h=(c in s?s[c]:void 0)||n.originalParams,p=KP(n,r),y=KP(n,h),v=n.params.grabCursor,T=h.grabCursor,x=r.enabled;p&&!y?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),n.emitContainerClasses()):!p&&y&&(i.classList.add(`${r.containerModifierClass}grid`),(h.grid.fill&&h.grid.fill==="column"||!h.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),n.emitContainerClasses()),v&&!T?n.unsetGrabCursor():!v&&T&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(F=>{if(typeof h[F]>"u")return;const A=r[F]&&r[F].enabled,I=h[F]&&h[F].enabled;A&&!I&&n[F].disable(),!A&&I&&n[F].enable()});const _=h.direction&&h.direction!==r.direction,w=r.loop&&(h.slidesPerView!==r.slidesPerView||_),E=r.loop;_&&t&&n.changeDirection(),nn(n.params,h);const b=n.params.enabled,O=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),x&&!b?n.disable():!x&&b&&n.enable(),n.currentBreakpoint=c,n.emit("_beforeBreakpoint",h),t&&(w?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!E&&O?(n.loopCreate(e),n.updateSlides()):E&&!O&&n.loopDestroy()),n.emit("breakpoint",h)}function E9(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let r=!1;const i=zt(),s=e==="window"?i.innerHeight:t.clientHeight,o=Object.keys(n).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?i.matchMedia(`(min-width: ${c}px)`).matches&&(r=l):c<=t.clientWidth&&(r=l)}return r||"max"}var I9={setBreakpoint:w9,getBreakpoint:E9};function T9(n,e){const t=[];return n.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&t.push(e+i)}):typeof r=="string"&&t.push(e+r)}),t}function S9(){const n=this,{classNames:e,params:t,rtl:r,el:i,device:s}=n,o=T9(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:r},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),i.classList.add(...e),n.emitContainerClasses()}function P9(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var A9={addClasses:S9,removeClasses:P9};function R9(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:r}=t;if(r){const i=n.slides.length-1,s=n.slidesGrid[i]+n.slidesSizesGrid[i]+r*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var C9={checkOverflow:R9},t_={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function x9(n,e){return function(r){r===void 0&&(r={});const i=Object.keys(r)[0],s=r[i];if(typeof s!="object"||s===null){nn(e,r);return}if(n[i]===!0&&(n[i]={enabled:!0}),i==="navigation"&&n[i]&&n[i].enabled&&!n[i].prevEl&&!n[i].nextEl&&(n[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&n[i]&&n[i].enabled&&!n[i].el&&(n[i].auto=!0),!(i in n&&"enabled"in s)){nn(e,r);return}typeof n[i]=="object"&&!("enabled"in n[i])&&(n[i].enabled=!0),n[i]||(n[i]={enabled:!1}),nn(e,r)}}const og={eventsEmitter:A5,update:M5,translate:z5,transition:H5,slide:t9,loop:s9,grabCursor:l9,events:v9,breakpoints:I9,checkOverflow:C9,classes:A9},ag={};let eE=class yr{constructor(){let e,t;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?t=i[0]:[e,t]=i,t||(t={}),t=nn({},t),e&&!t.el&&(t.el=e);const o=ro();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){const d=[];return o.querySelectorAll(t.el).forEach(h=>{const p=nn({},t,{el:h});d.push(new yr(p))}),d}const a=this;a.__swiper__=!0,a.support=mb(),a.device=gb({userAgent:t.userAgent}),a.browser=yb(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const l={};a.modules.forEach(d=>{d({params:t,swiper:a,extendParams:x9(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const c=nn({},t_,l);return a.params=nn({},c,ag,t),a.originalParams=nn({},a.params),a.passedParams=nn({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(d=>{a.on(d,a.params.on[d])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:r}=this,i=Qn(t,`.${r.slideClass}, swiper-slide`),s=BP(i[0]);return BP(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:r}=e;e.slides=Qn(t,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),o=(r.maxTranslate()-i)*e+i;r.translateTo(o,typeof t>"u"?0:t),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);t.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const r=this,{params:i,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=r;let d=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let h=s[c]?Math.ceil(s[c].swiperSlideSize):0,p;for(let y=c+1;y<s.length;y+=1)s[y]&&!p&&(h+=Math.ceil(s[y].swiperSlideSize),d+=1,h>l&&(p=!0));for(let y=c-1;y>=0;y-=1)s[y]&&!p&&(h+=s[y].swiperSlideSize,d+=1,h>l&&(p=!0))}else if(e==="current")for(let h=c+1;h<s.length;h+=1)(t?o[h]+a[h]-o[c]<l:o[h]-o[c]<l)&&(d+=1);else for(let h=c-1;h>=0;h-=1)o[c]-o[h]<l&&(d+=1);return d}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&ch(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)i(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const o=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(o.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||i()}r.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),r.emit("changeDirection"),t&&r.update()),r}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let r=e||t.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=t,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const i=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):Qn(r,i())[0];return!o&&t.params.createElements&&(o=mf("div",t.params.wrapperClass),r.append(o),Qn(r,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:r,wrapperEl:o,slidesEl:t.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:o,hostEl:t.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||yi(r,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||yi(r,"direction")==="rtl"),wrongRTL:yi(o,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const i=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&i.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(s=>{s.complete?ch(t,s):s.addEventListener("load",o=>{ch(t,o.target)})}),e_(t),t.initialized=!0,e_(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const r=this,{params:i,el:s,wrapperEl:o,slides:a}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),t&&(r.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el&&typeof r.el!="string"&&(r.el.swiper=null),h5(r)),r.destroyed=!0),null}static extendDefaults(e){nn(ag,e)}static get extendedDefaults(){return ag}static get defaults(){return t_}static installModule(e){yr.prototype.__modules__||(yr.prototype.__modules__=[]);const t=yr.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>yr.installModule(t)),yr):(yr.installModule(e),yr)}};Object.keys(og).forEach(n=>{Object.keys(og[n]).forEach(e=>{eE.prototype[e]=og[n][e]})});eE.use([S5,P5]);const wb=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Ks(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Zo(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof n[r]>"u"?n[r]=e[r]:Ks(e[r])&&Ks(n[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?n[r]=e[r]:Zo(n[r],e[r]):n[r]=e[r]})}function Eb(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function Ib(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function Tb(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function Sb(n){n===void 0&&(n="");const e=n.split(" ").map(r=>r.trim()).filter(r=>!!r),t=[];return e.forEach(r=>{t.indexOf(r)<0&&t.push(r)}),t.join(" ")}function k9(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function b9(n){let{swiper:e,slides:t,passedParams:r,changedParams:i,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:l}=n;const c=i.filter(P=>P!=="children"&&P!=="direction"&&P!=="wrapperClass"),{params:d,pagination:h,navigation:p,scrollbar:y,virtual:v,thumbs:T}=e;let x,_,w,E,b,O,F,A;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&d.thumbs&&(!d.thumbs.swiper||d.thumbs.swiper.destroyed)&&(x=!0),i.includes("controller")&&r.controller&&r.controller.control&&d.controller&&!d.controller.control&&(_=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(d.pagination||d.pagination===!1)&&h&&!h.el&&(w=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(d.scrollbar||d.scrollbar===!1)&&y&&!y.el&&(E=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||o)&&(r.navigation.nextEl||s)&&(d.navigation||d.navigation===!1)&&p&&!p.prevEl&&!p.nextEl&&(b=!0);const I=P=>{e[P]&&(e[P].destroy(),P==="navigation"?(e.isElement&&(e[P].prevEl.remove(),e[P].nextEl.remove()),d[P].prevEl=void 0,d[P].nextEl=void 0,e[P].prevEl=void 0,e[P].nextEl=void 0):(e.isElement&&e[P].el.remove(),d[P].el=void 0,e[P].el=void 0))};i.includes("loop")&&e.isElement&&(d.loop&&!r.loop?O=!0:!d.loop&&r.loop?F=!0:A=!0),c.forEach(P=>{if(Ks(d[P])&&Ks(r[P]))Object.assign(d[P],r[P]),(P==="navigation"||P==="pagination"||P==="scrollbar")&&"enabled"in r[P]&&!r[P].enabled&&I(P);else{const R=r[P];(R===!0||R===!1)&&(P==="navigation"||P==="pagination"||P==="scrollbar")?R===!1&&I(P):d[P]=r[P]}}),c.includes("controller")&&!_&&e.controller&&e.controller.control&&d.controller&&d.controller.control&&(e.controller.control=d.controller.control),i.includes("children")&&t&&v&&d.virtual.enabled?(v.slides=t,v.update(!0)):i.includes("virtual")&&v&&d.virtual.enabled&&(t&&(v.slides=t),v.update(!0)),i.includes("children")&&t&&d.loop&&(A=!0),x&&T.init()&&T.update(!0),_&&(e.controller.control=d.controller.control),w&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(d.pagination.el=l),h.init(),h.render(),h.update()),E&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(d.scrollbar.el=a),y.init(),y.updateSize(),y.setTranslate()),b&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),WP(s,e.hostEl.constructor.nextButtonSvg),s.part.add("button-next"),e.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),WP(o,e.hostEl.constructor.prevButtonSvg),o.part.add("button-prev"),e.el.appendChild(o))),s&&(d.navigation.nextEl=s),o&&(d.navigation.prevEl=o),p.init(),p.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&e.changeDirection(r.direction,!1),(O||A)&&e.loopDestroy(),(F||A)&&e.loopCreate(),e.update()}function N9(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},r={},i={};Zo(t,t_),t._emitClasses=!0,t.init=!1;const s={},o=wb.map(l=>l.replace(/_/,"")),a=Object.assign({},n);return Object.keys(a).forEach(l=>{typeof n[l]>"u"||(o.indexOf(l)>=0?Ks(n[l])?(t[l]={},i[l]={},Zo(t[l],n[l]),Zo(i[l],n[l])):(t[l]=n[l],i[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?e?r[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:s[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:i,rest:s,events:r}}function D9(n,e){let{el:t,nextEl:r,prevEl:i,paginationEl:s,scrollbarEl:o,swiper:a}=n;Eb(e)&&r&&i&&(a.params.navigation.nextEl=r,a.originalParams.navigation.nextEl=r,a.params.navigation.prevEl=i,a.originalParams.navigation.prevEl=i),Ib(e)&&s&&(a.params.pagination.el=s,a.originalParams.pagination.el=s),Tb(e)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(t)}function O9(n,e,t,r,i){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(t&&r){const l=r.map(i),c=t.map(i);l.join("")!==c.join("")&&o("children"),r.length!==t.length&&o("children")}return wb.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(Ks(n[l])&&Ks(e[l])){const c=Object.keys(n[l]),d=Object.keys(e[l]);c.length!==d.length?o(l):(c.forEach(h=>{n[l][h]!==e[l][h]&&o(l)}),d.forEach(h=>{n[l][h]!==e[l][h]&&o(l)}))}else n[l]!==e[l]&&o(l)}),s}const V9=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.emit("_virtualUpdated"),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function gf(){return gf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gf.apply(this,arguments)}function Pb(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function Ab(n){const e=[];return Xe.Children.toArray(n).forEach(t=>{Pb(t)?e.push(t):t.props&&t.props.children&&Ab(t.props.children).forEach(r=>e.push(r))}),e}function L9(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Xe.Children.toArray(n).forEach(r=>{if(Pb(r))e.push(r);else if(r.props&&r.props.slot&&t[r.props.slot])t[r.props.slot].push(r);else if(r.props&&r.props.children){const i=Ab(r.props.children);i.length>0?i.forEach(s=>e.push(s)):t["container-end"].push(r)}else t["container-end"].push(r)}),{slides:e,slots:t}}function M9(n,e,t){if(!t)return null;const r=d=>{let h=d;return d<0?h=e.length+d:h>=e.length&&(h=h-e.length),h},i=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:s,to:o}=t,a=n.params.loop?-e.length:0,l=n.params.loop?e.length*2:e.length,c=[];for(let d=a;d<l;d+=1)d>=s&&d<=o&&c.push(e[r(d)]);return c.map((d,h)=>Xe.cloneElement(d,{swiper:n,style:i,key:d.props.virtualIndex||d.key||`slide-${h}`}))}function du(n,e){return typeof window>"u"?D.useEffect(n,e):D.useLayoutEffect(n,e)}const QP=D.createContext(null),F9=D.createContext(null),Lc=D.forwardRef(function(n,e){let{className:t,tag:r="div",wrapperTag:i="div",children:s,onSwiper:o,...a}=n===void 0?{}:n,l=!1;const[c,d]=D.useState("swiper"),[h,p]=D.useState(null),[y,v]=D.useState(!1),T=D.useRef(!1),x=D.useRef(null),_=D.useRef(null),w=D.useRef(null),E=D.useRef(null),b=D.useRef(null),O=D.useRef(null),F=D.useRef(null),A=D.useRef(null),{params:I,passedParams:P,rest:R,events:k}=N9(a),{slides:N,slots:C}=L9(s),se=()=>{v(!y)};Object.assign(I.on,{_containerClasses(K,te){d(te)}});const he=()=>{Object.assign(I.on,k),l=!0;const K={...I};if(delete K.wrapperClass,_.current=new eE(K),_.current.virtual&&_.current.params.virtual.enabled){_.current.virtual.slides=N;const te={cache:!1,slides:N,renderExternal:p,renderExternalUpdate:!1};Zo(_.current.params.virtual,te),Zo(_.current.originalParams.virtual,te)}};x.current||he(),_.current&&_.current.on("_beforeBreakpoint",se);const ee=()=>{l||!k||!_.current||Object.keys(k).forEach(K=>{_.current.on(K,k[K])})},oe=()=>{!k||!_.current||Object.keys(k).forEach(K=>{_.current.off(K,k[K])})};D.useEffect(()=>()=>{_.current&&_.current.off("_beforeBreakpoint",se)}),D.useEffect(()=>{!T.current&&_.current&&(_.current.emitSlidesClasses(),T.current=!0)}),du(()=>{if(e&&(e.current=x.current),!!x.current)return _.current.destroyed&&he(),D9({el:x.current,nextEl:b.current,prevEl:O.current,paginationEl:F.current,scrollbarEl:A.current,swiper:_.current},I),o&&!_.current.destroyed&&o(_.current),()=>{_.current&&!_.current.destroyed&&_.current.destroy(!0,!1)}},[]),du(()=>{ee();const K=O9(P,w.current,N,E.current,te=>te.key);return w.current=P,E.current=N,K.length&&_.current&&!_.current.destroyed&&b9({swiper:_.current,slides:N,passedParams:P,changedParams:K,nextEl:b.current,prevEl:O.current,scrollbarEl:A.current,paginationEl:F.current}),()=>{oe()}}),du(()=>{V9(_.current)},[h]);function z(){return I.virtual?M9(_.current,N,h):N.map((K,te)=>Xe.cloneElement(K,{swiper:_.current,swiperSlideIndex:te}))}return Xe.createElement(r,gf({ref:x,className:Sb(`${c}${t?` ${t}`:""}`)},R),Xe.createElement(F9.Provider,{value:_.current},C["container-start"],Xe.createElement(i,{className:k9(I.wrapperClass)},C["wrapper-start"],z(),C["wrapper-end"]),Eb(I)&&Xe.createElement(Xe.Fragment,null,Xe.createElement("div",{ref:O,className:"swiper-button-prev"}),Xe.createElement("div",{ref:b,className:"swiper-button-next"})),Tb(I)&&Xe.createElement("div",{ref:A,className:"swiper-scrollbar"}),Ib(I)&&Xe.createElement("div",{ref:F,className:"swiper-pagination"}),C["container-end"]))});Lc.displayName="Swiper";const gt=D.forwardRef(function(n,e){let{tag:t="div",children:r,className:i="",swiper:s,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:c,...d}=n===void 0?{}:n;const h=D.useRef(null),[p,y]=D.useState("swiper-slide"),[v,T]=D.useState(!1);function x(b,O,F){O===h.current&&y(F)}du(()=>{if(typeof c<"u"&&(h.current.swiperSlideIndex=c),e&&(e.current=h.current),!(!h.current||!s)){if(s.destroyed){p!=="swiper-slide"&&y("swiper-slide");return}return s.on("_slideClass",x),()=>{s&&s.off("_slideClass",x)}}}),du(()=>{s&&h.current&&!s.destroyed&&y(s.getSlideClasses(h.current))},[s]);const _={isActive:p.indexOf("swiper-slide-active")>=0,isVisible:p.indexOf("swiper-slide-visible")>=0,isPrev:p.indexOf("swiper-slide-prev")>=0,isNext:p.indexOf("swiper-slide-next")>=0},w=()=>typeof r=="function"?r(_):r,E=()=>{T(!0)};return Xe.createElement(t,gf({ref:h,className:Sb(`${p}${i?` ${i}`:""}`),"data-swiper-slide-index":l,onLoad:E},d),o&&Xe.createElement(QP.Provider,{value:_},Xe.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},w(),a&&!v&&Xe.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&Xe.createElement(QP.Provider,{value:_},w(),a&&!v&&Xe.createElement("div",{className:"swiper-lazy-preloader"})))});gt.displayName="SwiperSlide";function j9(n,e,t,r){return n.params.createElements&&Object.keys(r).forEach(i=>{if(!t[i]&&t.auto===!0){let s=Qn(n.el,`.${r[i]}`)[0];s||(s=mf("div",r[i]),s.className=r[i],n.el.append(s)),t[i]=s,e[i]=s}}),t}function Dp(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(v){let T;return v&&typeof v=="string"&&e.isElement&&(T=e.el.querySelector(v)||e.hostEl.querySelector(v),T)?T:(v&&(typeof v=="string"&&(T=[...document.querySelectorAll(v)]),e.params.uniqueNavElements&&typeof v=="string"&&T&&T.length>1&&e.el.querySelectorAll(v).length===1?T=e.el.querySelector(v):T&&T.length===1&&(T=T[0])),v&&!T?v:T)}function o(v,T){const x=e.params.navigation;v=gr(v),v.forEach(_=>{_&&(_.classList[T?"add":"remove"](...x.disabledClass.split(" ")),_.tagName==="BUTTON"&&(_.disabled=T),e.params.watchOverflow&&e.enabled&&_.classList[e.isLocked?"add":"remove"](x.lockClass))})}function a(){const{nextEl:v,prevEl:T}=e.navigation;if(e.params.loop){o(T,!1),o(v,!1);return}o(T,e.isBeginning&&!e.params.rewind),o(v,e.isEnd&&!e.params.rewind)}function l(v){v.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function c(v){v.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function d(){const v=e.params.navigation;if(e.params.navigation=j9(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(v.nextEl||v.prevEl))return;let T=s(v.nextEl),x=s(v.prevEl);Object.assign(e.navigation,{nextEl:T,prevEl:x}),T=gr(T),x=gr(x);const _=(w,E)=>{w&&w.addEventListener("click",E==="next"?c:l),!e.enabled&&w&&w.classList.add(...v.lockClass.split(" "))};T.forEach(w=>_(w,"next")),x.forEach(w=>_(w,"prev"))}function h(){let{nextEl:v,prevEl:T}=e.navigation;v=gr(v),T=gr(T);const x=(_,w)=>{_.removeEventListener("click",w==="next"?c:l),_.classList.remove(...e.params.navigation.disabledClass.split(" "))};v.forEach(_=>x(_,"next")),T.forEach(_=>x(_,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?y():(d(),a())}),r("toEdge fromEdge lock unlock",()=>{a()}),r("destroy",()=>{h()}),r("enable disable",()=>{let{nextEl:v,prevEl:T}=e.navigation;if(v=gr(v),T=gr(T),e.enabled){a();return}[...v,...T].filter(x=>!!x).forEach(x=>x.classList.add(e.params.navigation.lockClass))}),r("click",(v,T)=>{let{nextEl:x,prevEl:_}=e.navigation;x=gr(x),_=gr(_);const w=T.target;let E=_.includes(w)||x.includes(w);if(e.isElement&&!E){const b=T.path||T.composedPath&&T.composedPath();b&&(E=b.find(O=>x.includes(O)||_.includes(O)))}if(e.params.navigation.hideOnClick&&!E){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===w||e.pagination.el.contains(w)))return;let b;x.length?b=x[0].classList.contains(e.params.navigation.hiddenClass):_.length&&(b=_[0].classList.contains(e.params.navigation.hiddenClass)),i(b===!0?"navigationShow":"navigationHide"),[...x,..._].filter(O=>!!O).forEach(O=>O.classList.toggle(e.params.navigation.hiddenClass))}});const p=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),a()},y=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:p,disable:y,update:a,init:d,destroy:h})}const Rb=({onSelectOffer:n})=>{const e=t=>{typeof n=="function"&&n({service:"haircut",subService:t})};return m.jsxs("section",{className:"special-offers",children:[m.jsx("h2",{children:"Актуальные спецпредложения по стрижке волос"}),m.jsxs(Lc,{modules:[Dp],spaceBetween:20,slidesPerView:3,navigation:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}},className:"offers-container","aria-label":"Спецпредложения по стрижке",children:[m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/haircut-women.jpg",alt:"Женская стрижка"}),m.jsx("button",{className:"offer-category",type:"button",children:"Стрижка"}),m.jsxs("div",{className:"offer-info","data-service":"haircut",role:"button",tabIndex:0,onClick:()=>e("women"),onKeyDown:t=>t.key==="Enter"&&e("women"),"aria-label":"Записаться на Модельную женскую стрижку",children:[m.jsx("h3",{children:"Модельная женская стрижка"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/haircut-men.jpg",alt:"Мужская стрижка"}),m.jsx("button",{className:"offer-category",type:"button",children:"Стрижка"}),m.jsxs("div",{className:"offer-info","data-service":"haircut",role:"button",tabIndex:0,onClick:()=>e("men"),onKeyDown:t=>t.key==="Enter"&&e("men"),"aria-label":"Записаться на Креативную мужскую стрижку",children:[m.jsx("h3",{children:"Креативная мужская стрижка"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/haircut-children.jpg",alt:"Детская стрижка"}),m.jsx("button",{className:"offer-category",type:"button",children:"Стрижка"}),m.jsxs("div",{className:"offer-info","data-service":"haircut",role:"button",tabIndex:0,onClick:()=>e("kids"),onKeyDown:t=>t.key==="Enter"&&e("kids"),"aria-label":"Записаться на Детскую стрижку",children:[m.jsx("h3",{children:"Детская стрижка"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/haircut-stylish.jpg",alt:"Стрижка с укладкой"}),m.jsx("button",{className:"offer-category",type:"button",children:"Стрижка"}),m.jsxs("div",{className:"offer-info","data-service":"haircut",role:"button",tabIndex:0,onClick:()=>e("women"),onKeyDown:t=>t.key==="Enter"&&e("women"),"aria-label":"Записаться на Стрижку с укладкой",children:[m.jsx("h3",{children:"Стрижка с укладкой"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})})]})]})},Op=()=>m.jsxs("section",{className:"footer-section",children:[m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Стрижка волос"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Уход за волосами"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Укладка волос"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Окрашивание волос"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Телефон"}),m.jsx("p",{className:"contact-info",children:"+7 (999) 999-99-99"}),m.jsx("p",{className:"contact-info",children:"+7 (888) 888-88-88"})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Адрес"}),m.jsx("p",{className:"contact-info",children:"Невский пр. 140"})]})]}),U9=({onSelectOffer:n})=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"hero","aria-label":"Основной блок",children:[m.jsxs("div",{className:"hero-left",children:[m.jsx("h1",{children:"Malu Beauty Studio"}),m.jsx("p",{children:"Добро пожаловать в Malu Beauty Studio, где красота встречается с искусством. Откройте для себя мир преображения с нашими эксклюзивными услугами."})]}),m.jsx("div",{className:"hero-right","aria-label":"Изображение салона",children:m.jsx("img",{src:"img/malu.jpg",alt:"Салон красоты"})})]}),m.jsx(Rb,{onSelectOffer:n}),m.jsx(Op,{})]}),$9=({onSelectOffer:n})=>{const e=t=>{typeof n=="function"&&n({service:"makeup",subService:t})};return m.jsxs("section",{className:"special-offers",children:[m.jsx("h2",{children:"Актуальные спецпредложения"}),m.jsxs(Lc,{modules:[Dp],spaceBetween:20,slidesPerView:3,navigation:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}},className:"offers-container","aria-label":"Спецпредложения по макияжу",children:[m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/makeup1.jpg",alt:"Вечерний макияж"}),m.jsx("button",{className:"offer-category",type:"button",children:"Макияж"}),m.jsxs("div",{className:"offer-info","data-service":"makeup",role:"button",tabIndex:0,onClick:()=>e("evening"),onKeyDown:t=>t.key==="Enter"&&e("evening"),"aria-label":"Записаться на Вечерний макияж",children:[m.jsx("h3",{children:"Вечерний макияж"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/makeup2.jpg",alt:"Свадебный макияж"}),m.jsx("button",{className:"offer-category",type:"button",children:"Макияж"}),m.jsxs("div",{className:"offer-info","data-service":"makeup",role:"button",tabIndex:0,onClick:()=>e("bridal"),onKeyDown:t=>t.key==="Enter"&&e("bridal"),"aria-label":"Записаться на Свадебный макияж",children:[m.jsx("h3",{children:"Свадебный макияж"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/makeup3.jpg",alt:"Дневной макияж"}),m.jsx("button",{className:"offer-category",type:"button",children:"Макияж"}),m.jsxs("div",{className:"offer-info","data-service":"makeup",role:"button",tabIndex:0,onClick:()=>e("day"),onKeyDown:t=>t.key==="Enter"&&e("day"),"aria-label":"Записаться на Дневной макияж",children:[m.jsx("h3",{children:"Дневной макияж"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/makeup-hero.jpg",alt:"Nude макияж"}),m.jsx("button",{className:"offer-category",type:"button",children:"Макияж"}),m.jsxs("div",{className:"offer-info","data-service":"makeup",role:"button",tabIndex:0,onClick:()=>e("day"),onKeyDown:t=>t.key==="Enter"&&e("day"),"aria-label":"Записаться на Nude макияж",children:[m.jsx("h3",{children:"Nude макияж"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})})]})]})},B9=({onSelectOffer:n})=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"hero","aria-label":"Основной блок",children:[m.jsxs("div",{className:"hero-left",children:[m.jsx("h1",{children:"Макияж"}),m.jsx("p",{children:"Современный мир диктует новые каноны жизни: ухоженное лицо и тело, стрессоустойчивость, молодость фигуры — сегодня это не роскошь, а необходимость. Наши программы направлены на благополучие и красоту."})]}),m.jsx("div",{className:"hero-right","aria-label":"Изображение процедуры",children:m.jsx("img",{src:"img/makeup-hero.jpg",alt:"Процедура ухода за кожей лица"})})]}),m.jsxs("div",{className:"innovations",children:[m.jsx("div",{className:"innovations-left",children:m.jsxs("div",{className:"innovations-left-text",children:[m.jsxs("div",{className:"innovations-left-text-content",children:[m.jsx("button",{className:"innovations-button",type:"button",children:"Новые техники"}),m.jsx("p",{children:"Откройте для себя последние тренды и инновационные подходы в макияже."})]}),m.jsx("img",{src:"img/makeup-innovation.jpg",alt:"Применение новой техники макияжа"})]})}),m.jsxs("div",{className:"innovations-right",children:[m.jsxs("div",{className:"innovations-text",children:[m.jsx("button",{className:"innovations-button",type:"button",children:"Искусство макияжа"}),m.jsxs("div",{className:"innovations-numbers",children:[m.jsxs("p",{children:["50 ",m.jsx("span",{children:"Видов макияжа для любого случая"})]}),m.jsxs("p",{children:["15 ",m.jsx("span",{children:"Опытных визажистов в нашей команде"})]}),m.jsxs("p",{style:{fontSize:"72px"},children:["10 ",m.jsx("span",{children:"Международных наград за мастерство"})]}),m.jsxs("p",{children:["1000+ ",m.jsx("span",{children:"Довольных клиентов каждый год"})]})]}),m.jsx("div",{})]}),m.jsx("img",{src:"img/certificate.png",alt:"Сертификат визажиста"})]})]}),m.jsxs("section",{className:"news-section",children:[m.jsxs("div",{className:"news-left",children:[m.jsx("button",{className:"news-button",type:"button",children:"Советы визажистов"}),m.jsx("h2",{className:"news-left-title",children:"Как выбрать идеальный макияж для вашего типа лица. Рекомендации экспертов."}),m.jsx("p",{children:"Наши визажисты делятся секретами подбора макияжа, который подчеркнёт вашу индивидуальность."}),m.jsx("p",{children:"Узнайте о последних тенденциях и техниках, чтобы всегда выглядеть безупречно."})]}),m.jsxs("div",{className:"news-right",children:[m.jsx("h2",{children:"Преимущества профессионального макияжа. Мнение специалистов центра"}),m.jsxs("ul",{children:[m.jsx("li",{children:"Профессиональный макияж скрывает недостатки и подчёркивает достоинства, создавая гармоничный образ."}),m.jsx("li",{children:"Качественная косметика и инструменты обеспечивают стойкость на весь день или мероприятие."}),m.jsx("li",{children:"Опытный визажист подберёт макияж под ваш тип кожи, форму лица, цвет глаз и волос."}),m.jsx("li",{children:"Идеально подходит для свадьбы, фотосессии или деловой встречи."})]})]})]}),m.jsx($9,{onSelectOffer:n}),m.jsx(Op,{})]}),z9=({onSelectOffer:n})=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"hero","aria-label":"Основной блок",children:[m.jsxs("div",{className:"hero-left",children:[m.jsx("h1",{children:"Стрижка волос"}),m.jsx("p",{children:"Наши мастера создадут для вас идеальную стрижку, которая подчеркнет индивидуальность и стиль. Мы используем современные техники и профессиональные средства для ваших волос."})]}),m.jsx("div",{className:"hero-right","aria-label":"Изображение стрижки",children:m.jsx("img",{src:"img/hair-hero.jpg",alt:"Процесс стрижки"})})]}),m.jsxs("div",{className:"innovations",children:[m.jsx("div",{className:"innovations-left",children:m.jsxs("div",{className:"innovations-left-text",children:[m.jsxs("div",{className:"innovations-left-text-content",children:[m.jsx("button",{className:"innovations-button",children:"Современные тренды"}),m.jsx("p",{children:"Узнайте о последних новинках и тенденциях в мире парикмахерского искусства."})]}),m.jsx("img",{src:"img/haircut-innovation.jpg",alt:"Новая техника стрижки"})]})}),m.jsxs("div",{className:"innovations-right",children:[m.jsxs("div",{className:"innovations-text",children:[m.jsx("button",{className:"innovations-button",children:"Профессионализм"}),m.jsxs("div",{className:"innovations-numbers",children:[m.jsxs("p",{children:["40+ ",m.jsx("span",{children:"Видов стрижек для мужчин и женщин"})]}),m.jsxs("p",{children:["12 ",m.jsx("span",{children:"Опытных стилистов"})]}),m.jsxs("p",{style:{fontSize:"72px"},children:["7 ",m.jsx("span",{children:"Лет опыта"})]}),m.jsxs("p",{children:["700+ ",m.jsx("span",{children:"Довольных клиентов ежемесячно"})]})]}),m.jsx("div",{})]}),m.jsx("img",{src:"img/certificate_hair.png",alt:"Сертификат стилиста"})]})]}),m.jsxs("section",{className:"news-section",children:[m.jsxs("div",{className:"news-left",children:[m.jsx("button",{className:"news-button",children:"Советы стилистов"}),m.jsx("h2",{className:"news-left-title",children:"Как выбрать стрижку, подходящую именно вам."}),m.jsx("p",{children:"Наши специалисты помогут подобрать образ, который подчеркнет вашу индивидуальность."}),m.jsx("p",{children:"Узнайте о современных тенденциях в стрижке и уходе за волосами."})]}),m.jsxs("div",{className:"news-right",children:[m.jsx("h2",{children:"Преимущества профессиональной стрижки"}),m.jsxs("ul",{children:[m.jsx("li",{children:"Качественная стрижка обеспечивает аккуратный и стильный внешний вид."}),m.jsx("li",{children:"Профессионалы учитывают структуру волос и форму лица для лучшего результата."}),m.jsx("li",{children:"Используются современные техники и профессиональные инструменты."}),m.jsx("li",{children:"После стрижки волосы выглядят ухоженными и здоровыми."})]})]})]}),m.jsx(Rb,{onSelectOffer:n}),m.jsxs("section",{className:"footer-section",children:[m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Макияж"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Маникюр"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Педикюр"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Укладка волос"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Телефон"}),m.jsx("p",{className:"contact-info",children:"+7 (999) 999-99-99"})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Адрес"}),m.jsx("p",{className:"contact-info",children:"Невский пр. 140"})]})]})]}),W9=({onSelectOffer:n})=>{const e=t=>{n&&n({service:"manicure",subService:t})};return m.jsxs("section",{className:"special-offers",children:[m.jsx("h2",{children:"Актуальные спецпредложения по маникюру"}),m.jsxs(Lc,{modules:[Dp],spaceBetween:20,slidesPerView:3,navigation:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}},className:"offers-container",children:[m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/manicure_classic.jpg",alt:"Классический маникюр"}),m.jsx("button",{className:"offer-category",type:"button",children:"Маникюр"}),m.jsxs("div",{className:"offer-info","data-service":"manicure",onClick:()=>e("classic"),children:[m.jsx("h3",{children:"Классический маникюр"}),m.jsx("span",{className:"offer-arrow",children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/manicure1.jpg",alt:"Маникюр гель-лак"}),m.jsx("button",{className:"offer-category",type:"button",children:"Маникюр"}),m.jsxs("div",{className:"offer-info","data-service":"manicure",onClick:()=>e("gel"),children:[m.jsx("h3",{children:"Маникюр гель-лак"}),m.jsx("span",{className:"offer-arrow",children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/manicure.jpg",alt:"Наращивание ногтей"}),m.jsx("button",{className:"offer-category",type:"button",children:"Маникюр"}),m.jsxs("div",{className:"offer-info","data-service":"manicure",onClick:()=>e("extension"),children:[m.jsx("h3",{children:"Наращивание ногтей"}),m.jsx("span",{className:"offer-arrow",children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/manicure_design.jpg",alt:"Дизайн ногтей"}),m.jsx("button",{className:"offer-category",type:"button",children:"Маникюр"}),m.jsxs("div",{className:"offer-info","data-service":"manicure",onClick:()=>e("design"),children:[m.jsx("h3",{children:"Дизайн ногтей"}),m.jsx("span",{className:"offer-arrow",children:"→"})]})]})})]})]})},q9=({onSelectOffer:n})=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"hero","aria-label":"Основной блок",children:[m.jsxs("div",{className:"hero-left",children:[m.jsx("h1",{children:"Маникюр"}),m.jsx("p",{children:"Позвольте вашим рукам быть идеальными. Мы предлагаем широкий спектр услуг по уходу за ногтями, от классического маникюра до сложных дизайнов. Наши мастера используют только лучшие материалы и стерильные инструменты."})]}),m.jsx("div",{className:"hero-right","aria-label":"Изображение маникюра",children:m.jsx("img",{src:"img/manicure-hero.jpg",alt:"Процедура маникюра"})})]}),m.jsxs("div",{className:"innovations",children:[m.jsx("div",{className:"innovations-left",children:m.jsxs("div",{className:"innovations-left-text",children:[m.jsxs("div",{className:"innovations-left-text-content",children:[m.jsx("button",{className:"innovations-button",children:"Новые техники"}),m.jsx("p",{children:"Откройте для себя последние тренды и инновационные подходы в дизайне ногтей."})]}),m.jsx("img",{src:"img/manicure_innovation.jpg",alt:"Применение новой техники маникюра"})]})}),m.jsxs("div",{className:"innovations-right",children:[m.jsxs("div",{className:"innovations-text",children:[m.jsx("button",{className:"innovations-button",children:"Искусство маникюра"}),m.jsxs("div",{className:"innovations-numbers",children:[m.jsxs("p",{children:["30+ ",m.jsx("span",{children:"Видов маникюра для любого стиля"})]}),m.jsxs("p",{children:["10+ ",m.jsx("span",{children:"Опытных мастеров маникюра"})]}),m.jsxs("p",{style:{fontSize:"72px"},children:["5 ",m.jsx("span",{children:"Международных наград за дизайн ногтей"})]}),m.jsxs("p",{children:["500+ ",m.jsx("span",{children:"Довольных клиентов каждый месяц"})]})]}),m.jsx("div",{})]}),m.jsx("img",{src:"img/certificate_manicure.png",alt:"Сертификат мастера маникюра"})]})]}),m.jsxs("section",{className:"news-section",children:[m.jsxs("div",{className:"news-left",children:[m.jsx("button",{className:"news-button",children:"Советы мастеров"}),m.jsx("h2",{className:"news-left-title",children:"Как ухаживать за ногтями, чтобы они всегда были крепкими и здоровыми."}),m.jsx("p",{children:"Наши мастера делятся секретами поддержания здоровья и красоты ваших ногтей."}),m.jsx("p",{children:"Узнайте о последних тенденциях и продуктах для идеального маникюра."})]}),m.jsxs("div",{className:"news-right",children:[m.jsx("h2",{children:"Преимущества профессионального маникюра. Мнение специалистов центра"}),m.jsxs("ul",{children:[m.jsx("li",{children:"Профессиональный маникюр обеспечивает не только красоту, но и здоровье ногтей и кожи рук."}),m.jsx("li",{children:"Использование качественных материалов и стерильных инструментов предотвращает повреждения и инфекции."}),m.jsx("li",{children:"Опытный мастер подберет идеальный уход и дизайн, соответствующий вашим предпочтениям и стилю."}),m.jsx("li",{children:"Регулярный профессиональный маникюр помогает поддерживать руки в идеальном состоянии, придавая им ухоженный вид."})]})]})]}),m.jsx(W9,{onSelectOffer:n}),m.jsx(Op,{})]}),G9=()=>m.jsxs("section",{className:"special-offers",children:[m.jsx("h2",{children:"Актуальные спецпредложения по педикюру"}),m.jsxs(Lc,{modules:[Dp],spaceBetween:20,slidesPerView:3,navigation:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}},className:"offers-container","aria-label":"Спецпредложения по педикюру",children:[m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/pedicure-classic.jpg",alt:"Классический педикюр"}),m.jsx("button",{className:"offer-category",type:"button",children:"Педикюр"}),m.jsxs("div",{className:"offer-info","data-service":"pedicure",children:[m.jsx("h3",{children:"Классический педикюр"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/pedicure-hardware.jpg",alt:"Аппаратный педикюр"}),m.jsx("button",{className:"offer-category",type:"button",children:"Педикюр"}),m.jsxs("div",{className:"offer-info","data-service":"pedicure",children:[m.jsx("h3",{children:"Аппаратный педикюр"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/pedicure-spa.jpg",alt:"SPA-педикюр"}),m.jsx("button",{className:"offer-category",type:"button",children:"Педикюр"}),m.jsxs("div",{className:"offer-info","data-service":"pedicure",children:[m.jsx("h3",{children:"SPA-педикюр"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})}),m.jsx(gt,{children:m.jsxs("div",{className:"offer-card",children:[m.jsx("img",{src:"img/pedicure-treatment.jpg",alt:"Лечебный педикюр"}),m.jsx("button",{className:"offer-category",type:"button",children:"Педикюр"}),m.jsxs("div",{className:"offer-info","data-service":"pedicure",children:[m.jsx("h3",{children:"Лечебный педикюр"}),m.jsx("span",{className:"offer-arrow","aria-hidden":!0,children:"→"})]})]})})]})]}),H9=({onSelectOffer:n})=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"hero","aria-label":"Основной блок",children:[m.jsxs("div",{className:"hero-left",children:[m.jsx("h1",{children:"Педикюр"}),m.jsx("p",{children:"Подарите своим ногам заслуженный уход с профессиональным педикюром. Мы заботимся о здоровье и красоте ваших стоп и ногтей, подбирая оптимальные техники и средства под ваши задачи."})]}),m.jsx("div",{className:"hero-right","aria-label":"Изображение педикюра",children:m.jsx("img",{src:"img/pedicure-hero.jpg",alt:"Процедура педикюра"})})]}),m.jsxs("div",{className:"innovations",children:[m.jsx("div",{className:"innovations-left",children:m.jsxs("div",{className:"innovations-left-text",children:[m.jsxs("div",{className:"innovations-left-text-content",children:[m.jsx("button",{className:"innovations-button",children:"Новые методики"}),m.jsx("p",{children:"Мы используем современные инструменты и техники ухода за стопами, чтобы обеспечить безопасность и долговечный результат."})]}),m.jsx("img",{src:"img/pedicure-innovation.jpg",alt:"Применение новой методики педикюра"})]})}),m.jsxs("div",{className:"innovations-right",children:[m.jsxs("div",{className:"innovations-text",children:[m.jsx("button",{className:"innovations-button",children:"Здоровье и красота стоп"}),m.jsxs("div",{className:"innovations-numbers",children:[m.jsxs("p",{children:["15+ ",m.jsx("span",{children:"Видов педикюра для любых задач"})]}),m.jsxs("p",{children:["8+ ",m.jsx("span",{children:"Опытных мастеров педикюра"})]}),m.jsxs("p",{style:{fontSize:"72px"},children:["3 ",m.jsx("span",{children:"Международных сертификата качества"})]}),m.jsxs("p",{children:["300+ ",m.jsx("span",{children:"Довольных клиентов каждый месяц"})]})]}),m.jsx("div",{})]}),m.jsx("img",{src:"img/certificate_pedicure.png",alt:"Сертификат мастера педикюра"})]})]}),m.jsxs("section",{className:"news-section",children:[m.jsxs("div",{className:"news-left",children:[m.jsx("button",{className:"news-button",children:"Советы подологов"}),m.jsx("h2",{className:"news-left-title",children:"Как ухаживать за ногами в домашних условиях."}),m.jsx("p",{children:"Наши специалисты делятся рекомендациями по профилактике проблем стоп, уходу за ногтями и поддержанию комфорта при ежедневной нагрузке."}),m.jsx("p",{children:"Узнайте, когда необходим профессиональный уход и как продлить эффект после процедуры."})]}),m.jsxs("div",{className:"news-right",children:[m.jsx("h2",{children:"Преимущества профессионального педикюра"}),m.jsxs("ul",{children:[m.jsx("li",{children:"Комплексный уход предотвращает мозоли, натоптыши и вросшие ногти."}),m.jsx("li",{children:"Стерильные инструменты и проверенные средства — безопасная процедура."}),m.jsx("li",{children:"Улучшение кровообращения и ощущение лёгкости после сеанса."}),m.jsx("li",{children:"Ухоженный внешний вид и комфорт каждый день."})]})]})]}),m.jsx(G9,{onSelectOffer:n}),m.jsxs("section",{className:"footer-section",children:[m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Макияж"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Маникюр"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Услуги"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("a",{href:"#",children:"Стрижка волос"})}),m.jsx("li",{children:m.jsx("a",{href:"#",children:"Укладка волос"})})]})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Телефон"}),m.jsx("p",{className:"contact-info",children:"+7 (999) 999-99-99"})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h4",{children:"Адрес"}),m.jsx("p",{className:"contact-info",children:"Невский пр. 140"})]})]})]}),K9=()=>{const[n,e]=D.useState(!1),[t,r]=D.useState(!1),[i,s]=D.useState("");D.useEffect(()=>{new URLSearchParams(window.location.search).get("sent")==="1"&&e(!0)},[]);const o=async a=>{a.preventDefault(),s(""),e(!1),r(!0);const l=a.currentTarget,c=new FormData(l);if(c.get("_honey")){r(!1);return}try{const h=await fetch("https://formsubmit.co/ajax/begun0anastasia1@gmail.com",{method:"POST",headers:{Accept:"application/json"},body:c});if(!h.ok){const p=await h.text().catch(()=>"");throw new Error(p||`Ошибка сети (${h.status})`)}l.reset(),e(!0)}catch(d){s(d.message||"Не удалось отправить сообщение")}finally{r(!1)}};return m.jsxs("div",{children:[m.jsxs("section",{className:"contact-hero",children:[m.jsx("h1",{children:"Контакты"}),m.jsx("p",{children:"Свяжитесь с нами для записи или консультации."})]}),m.jsxs("section",{className:"contact-details",children:[m.jsxs("div",{className:"contact-item",children:[m.jsx("h3",{children:"Телефон"}),m.jsx("p",{children:"+7 (999) 999-99-99"}),m.jsx("p",{children:"+7 (888) 888-88-88"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsx("h3",{children:"Email"}),m.jsx("p",{children:"info@malu.com"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsx("h3",{children:"Адрес"}),m.jsx("p",{children:"Невский пр. 140, Санкт-Петербург"}),m.jsx("a",{href:"https://maps.app.goo.gl/WTcX5jC8JLoBCGY57",target:"_blank",rel:"noopener noreferrer",className:"btn-primary",children:"ПОКАЗАТЬ НА КАРТЕ"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsx("h3",{children:"Часы работы"}),m.jsx("p",{children:"Пн-Пт: 9:00 - 21:00"}),m.jsx("p",{children:"Сб: 10:00 - 19:00"}),m.jsx("p",{children:"Вс: Выходной"})]})]}),m.jsx("section",{className:"contact-map",children:m.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1998.7107773295254!2d30.36982991609139!3d59.93049188187807!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4696317d6e5a5f11%3A0xc3f7a6b9f2e7f3a!2z0L3QsNCx0L3RgNC40L3RgdC60LDRjyDQntC00LXRgNGL0LLQsCwgMTQwLCDQodCw0L3QutGCLdCf0LXRgtCw0LvQuNC60LDRgtCw0YbRjNC60L4sINCj0YPQvdGB0LrQvtCz0L7QstGB0LrQsNGPINC-0LHQu9Cw0YHQvtGW0LLQvg!5e0!3m2!1sru!2sru!4v1678822290000!5m2!1sru!2sru",width:"100%",height:"450",style:{border:"0"},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Карта офиса"})}),m.jsxs("section",{className:"contact-form-section",children:[m.jsx("h2",{children:"Отправьте нам сообщение"}),n&&m.jsx("div",{style:{margin:"8px 0 16px",color:"#2a7"},children:"Сообщение отправлено ✔"}),i&&m.jsxs("div",{style:{margin:"8px 0 16px",color:"#f55"},children:["Ошибка: ",i]}),m.jsxs("form",{onSubmit:o,className:"contact-form",acceptCharset:"UTF-8",children:[m.jsx("input",{type:"hidden",name:"_subject",value:"Новое сообщение с формы"}),m.jsx("input",{type:"hidden",name:"_captcha",value:"false"}),m.jsx("input",{type:"hidden",name:"_template",value:"table"}),m.jsx("input",{type:"hidden",name:"_autoresponse",value:"Спасибо! Мы получили ваше сообщение и скоро ответим."}),m.jsx("input",{type:"text",name:"_honey",style:{display:"none"},tabIndex:-1,autoComplete:"off"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"name",children:"Ваше имя:"}),m.jsx("input",{type:"text",id:"name",name:"name",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Ваш Email:"}),m.jsx("input",{type:"email",id:"email",name:"_replyto",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"subject",children:"Тема:"}),m.jsx("input",{type:"text",id:"subject",name:"subject"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"message",children:"Сообщение:"}),m.jsx("textarea",{id:"message",name:"message",rows:"6",required:!0})]}),m.jsx("button",{type:"submit",className:"btn-primary",disabled:t,children:t?"ОТПРАВКА...":"ОТПРАВИТЬ"})]})]}),m.jsx(Op,{})]})};function Q9(){const[n,e]=D.useState(!1),[t,r]=D.useState(!1),[i,s]=D.useState(!1),[o,a]=D.useState({service:null,subService:null}),l=({service:c,subService:d})=>{a({service:c,subService:d}),r(!0)};return m.jsx(qV,{children:m.jsxs("div",{className:"maxwidth-theme",children:[m.jsx(az,{onOpenAuthModal:()=>e(!0),onOpenServicesModal:()=>r(!0),onOpenProfileModal:()=>s(!0)}),m.jsxs(IV,{children:[m.jsx(ss,{path:"/",element:m.jsx(U9,{onSelectOffer:l})}),m.jsx(ss,{path:"/makeup",element:m.jsx(B9,{onSelectOffer:l})}),m.jsx(ss,{path:"/haircut",element:m.jsx(z9,{onSelectOffer:l})}),m.jsx(ss,{path:"/manicure",element:m.jsx(q9,{onSelectOffer:l})}),m.jsx(ss,{path:"/pedicure",element:m.jsx(H9,{onSelectOffer:l})}),m.jsx(ss,{path:"/contacts",element:m.jsx(K9,{})})]}),m.jsx(a5,{isOpen:n,onClose:()=>e(!1)}),m.jsx(l5,{isOpen:t,onClose:()=>r(!1),initialService:o.service,initialSubService:o.subService}),m.jsx(u5,{isOpen:i,onClose:()=>s(!1)})]})})}lg.createRoot(document.getElementById("root")).render(m.jsx(Xe.StrictMode,{children:m.jsx(oz,{children:m.jsx(Q9,{})})}));
